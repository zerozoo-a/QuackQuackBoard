(self.webpackChunktest_2=self.webpackChunktest_2||[]).push([[614],{2614:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var r,o,a,i,l=n(7294),c=n(6156),d=n(4699),u=n(2465),m=n(9833),s=n(7812),h=n(6945),g=n(387),f=n(8117),p=n(1948),b=n(1238),v=n(773),E=n(9226),k=n(5373),C=f.ZP.div(r||(r=(0,u.Z)(["\n  img {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 95%;\n    transform: translate(-50%, -50%);\n  }\n  div {\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(12, 12, 12, 0.8);\n    overflow-y: hidden;\n  }\n"])));function I(e){var t=e.URL,n=e.setIsImageClicked;return l.createElement(C,null,l.createElement("div",{onClick:function(){n(!1)}},l.createElement("img",{id:"modalImg",alt:"원본 이미지",src:t})))}var Z=f.ZP.div(o||(o=(0,u.Z)(["\n  margin: 3rem;\n  padding: 1rem;\n  border-bottom: 1px solid\n    ",";\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor})),w=f.ZP.div(a||(a=(0,u.Z)(["\n  #threadUserPhotoAndThreadInfo {\n    display: flex;\n  }\n  img {\n    cursor: pointer;\n  }\n  img:not(#userPhoto, #modalImg) {\n    width: 20vw;\n    margin-bottom: 2rem;\n  }\n  #threadData {\n    padding: 0.5rem 0 2rem 0;\n  }\n  #threadUserPhotoUrl {\n    img {\n      width: 3rem;\n      height: 3rem;\n      border-radius: 50%;\n    }\n  }\n  #threadInfo {\n    width: 45vw;\n    margin-left: ",";\n    padding-left: ",";\n    border: 2px solid\n      ",";\n    background-color: ",";\n\n    color: ",";\n    border-radius: 3px;\n  }\n"])),(function(e){return e.theme.margins.base}),(function(e){return e.theme.margins.base}),(function(e){return"dark"===e.mode?function(e){return e.theme.colors.darkBorderColor}:e.theme.colors.lightBorderColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor})),U=f.ZP.div(i||(i=(0,u.Z)(["\n  #deleteIcon {\n    color: ",";\n  }\n  #editIcon {\n    color: ",";\n  }\n  #uploadImageBtnAndSubmitBtn {\n    display: flex;\n  }\n  #setImageBtnAndSubmitBtn {\n    img {\n      width: 10rem;\n    }\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}));const y=l.memo((function(e){var t=e.thread,n=e.isOwner,r=(e.imageDownloadUrls,e.QuackInput),o=e.SubmitBtn,a=(0,l.useState)(!1),i=(0,d.Z)(a,2),c=i[0],u=i[1],f=(0,l.useState)(t.data),C=(0,d.Z)(f,2),y=C[0],P=C[1],B=(0,l.useState)(!1),O=(0,d.Z)(B,2),S=O[0],x=O[1],L=m.ON.currentUser,R=(0,E.v9)(p.gh),D=(0,E.v9)(b.q5),j=(0,E.v9)(v.Np),A=(0,E.I0)();(0,l.useEffect)((function(){!j&&c&&u(!1)}),[j]);var T=function(){u(!c),A((0,v.mb)())};return l.createElement(Z,null,l.createElement(w,{mode:R},null!==t.imageURL?l.createElement(l.Fragment,null,l.createElement("img",{onClick:function(){x(!0)},alt:"".concat(L.displayName,"'s image"),src:t.imageURL}),S&&l.createElement(I,{URL:t.imageURL,setIsImageClicked:x})):null,l.createElement("div",{id:"threadUserPhotoAndThreadInfo"},l.createElement("div",{id:"threadUserPhotoUrl"},l.createElement("img",{id:"userPhoto",alt:"user photo",src:t.photoURL})),l.createElement("div",{id:"threadInfo"},l.createElement("div",{id:"threadData"},t.data),l.createElement("div",{id:"threadCreatedAt"},"시간: ",t.createdAt),l.createElement("div",{id:"threadUser"},"ID: ",t.user)))),n?l.createElement(U,{mode:R},l.createElement(s.Z,{id:"deleteIcon",onClick:function(){if(window.confirm("해당 thread를 정말로 삭제하시겠어요?")){if(m.ub.collection("Thread").doc(t.id).delete(),null===t.imageUrl)return;m.hr.refFromURL(t.imageUrl).delete()}},"aria-label":"delete"},l.createElement(h.Z,null)),c&&j?l.createElement(l.Fragment,null,l.createElement(s.Z,{color:"secondary",onClick:T,"aria-label":"edit"},l.createElement(g.Z,null))):l.createElement(l.Fragment,null,l.createElement(s.Z,{id:"editIcon",onClick:T,"aria-label":"edit"},l.createElement(g.Z,null))),c&&j?l.createElement(l.Fragment,null,l.createElement("form",{onSubmit:function(e){e.preventDefault(),m.ub.collection("Thread").doc(t.id).update({data:y,imageURL:null===D?null:D,edited:Date.now()}),A((0,b.jb)(null)),u(!1)}},l.createElement(r,{onChange:function(e){P(e.target.value)},type:"text"}),l.createElement("div",{id:"setImageBtnAndSubmitBtn"},D&&l.createElement("img",{alt:"user uploading image",src:D}),l.createElement(k.Z,null),l.createElement(o,{type:"submit",size:"small"},"수정하기")))):null):null)}));var P,B,O,S=n(9989);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=f.ZP.div(P||(P=(0,u.Z)(["\n  display: grid;\n  place-items: center;\n  color: ",";\n  #userInputThread {\n    margin-bottom: 5.5rem;\n    padding-bottom: 2rem;\n    border-bottom: 1px solid\n      ",";\n  }\n  #userPhotoAndInputContainer {\n    display: flex;\n    align-items: center;\n    margin-top: 5rem;\n  }\n  #inputUserPhotoURL {\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n  }\n  #uploadImageBtnAndSubmitBtn {\n    display: flex;\n    margin: 0.5rem;\n    align-items: center;\n\n    #normalImage {\n      width: 8rem;\n      cursor: pointer;\n      margin-left: 2rem;\n    }\n  }\n"])),(function(e){return e.theme.colors.pointColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor})),R=f.ZP.input.attrs((function(){return{size:"0.6em"}}))(B||(B=(0,u.Z)(["\n  width: 45vw;\n  height: 4rem;\n  font-size: 1em;\n  background-color: ",";\n  color: ",";\n  border: 3px solid\n    ",";\n  border-radius: 3px;\n  margin-left: ",";\n  padding-left: ",";\n  cursor: pointer;\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?function(e){return e.theme.colors.pointColor}:e.theme.colors.pointColor}),(function(e){return e.theme.margins.base}),(function(e){return e.theme.margins.base})),D=f.ZP.button(O||(O=(0,u.Z)(["\n  min-width: ",";\n  min-height: ",";\n  max-height: ",";\n  background-color: ",";\n  color: ",";\n  border: 2px solid ",";\n  border-radius: 5px;\n  cursor: pointer;\n  padding: ",";\n  margin: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.interval.basePlus}),(function(e){return e.theme.interval.base}),(function(e){return e.theme.interval.base}),(function(e){return e.theme.button.submitBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.button.submitBorderColor}),(function(e){return e.theme.button.paddingSmall}),(function(e){return e.theme.button.marginSmall}),(function(e){return e.theme.button.fontSize})),j=function(){var e=(0,l.useState)(""),t=(0,d.Z)(e,2),n=t[0],r=t[1],o=(0,l.useState)([]),a=(0,d.Z)(o,2),i=a[0],u=a[1],s=(0,l.useState)(!1),h=(0,d.Z)(s,2),g=h[0],f=h[1],v=(0,E.v9)(p.gh),C=(0,E.v9)(b.q5),Z=new Date,w=Z.getFullYear(),U=Z.getMonth(),P=Z.getDate(),B=Z.getHours(),O=Z.getMinutes(),j=Z.getSeconds(),A=Z.getTime(),T=m.ON.currentUser,F=(0,E.I0)();return(0,l.useEffect)((function(){var e=m.ub.collection("Thread").orderBy("metaCreatedTime","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));u(t)}));return function(){e()}}),[]),l.createElement(S.E.div,{initial:{opacity:.2},animate:{opacity:1},transition:{duration:.4}},l.createElement(L,{mode:v},l.createElement("h1",null,"HOME"),l.createElement("h4",null," ","Welcome to Quack Quack Board!"),l.createElement("div",{id:"userInputThread"},l.createElement("form",{onSubmit:function(e){e.preventDefault(),m.ub.collection("Thread").add({data:n,metaCreatedTime:A,createdAt:"\n      ".concat(B," : ").concat(O," : ").concat(j," _\n       ").concat(w,"/").concat(U,"/").concat(P,"\n      "),uid:T.uid,user:T.displayName,photoURL:T.photoURL,imageURL:C||null}),r(""),F((0,b.jb)(null))}},l.createElement("div",{id:"userPhotoAndInputContainer"},l.createElement("img",{id:"inputUserPhotoURL",src:T.photoURL}),l.createElement(R,{mode:v,id:"QuackInput",onChange:function(e){var t=e.target.value;r(t)},type:"text",placeholder:"What's happening?",required:!0,value:n,maxLength:"80",name:"inputThread"})),l.createElement("div",{id:"uploadImageBtnAndSubmitBtn"},l.createElement("div",null,l.createElement(k.Z,null)),l.createElement(D,{mode:v,type:"submit",id:"submit",name:"submit"},"등록하기"),null===C?null:l.createElement("img",{id:"normalImage",onClick:function(){f(!0)},src:C,alt:"user uploaded image"}),g&&l.createElement(I,{URL:C,setIsImageClicked:f})))),l.createElement(S.E.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8}},i.map((function(e,t){return l.createElement(y,{key:e.id,thread:e,isOwner:T.uid===e.uid,QuackInput:R,SubmitBtn:D})})))))};const A=(0,l.memo)(j);function T(){return l.createElement("div",null,l.createElement(A,null))}},5373:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r,o=n(2137),a=n(2465),i=n(7757),l=n.n(i),c=n(7294),d=n(9848),u=n(7812),m=n(9833),s=n(5877),h=n(8117),g=n(9226),f=n(1238),p=n(1948),b=h.ZP.div(r||(r=(0,a.Z)(["\n  #HideInput {\n    display: none;\n  }\n  #icon {\n    color: ",";\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}));const v=c.memo((function(){var e=m.ON.currentUser,t=(0,g.I0)(),n=(0,g.v9)(p.gh);return c.createElement(b,{mode:n},c.createElement("div",null,c.createElement("div",{id:"HideInput"},c.createElement("input",{id:"imageUpload",type:"file",onChange:function(n){var r,a;n.preventDefault(),r=n.target.files[0],(a=new FileReader).readAsDataURL(r),a.onloadend=function(){var n=(0,o.Z)(l().mark((function n(r){var o,a,i,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.target.result,a=m.hr.ref().child("images/".concat(e.uid,"/").concat((0,s.v4)())),n.next=4,a.putString(o,"data_url");case 4:return i=n.sent,n.next=7,i.ref.getDownloadURL();case 7:c=n.sent,t((0,f.jb)(c));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},accept:"image/*"})),c.createElement("label",{htmlFor:"imageUpload"},c.createElement(u.Z,{id:"icon",component:"div"},c.createElement(d.Z,null)))))}))}}]);