/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var e,t={757:(e,t,n)=>{e.exports=n(666)},594:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const i=(o={},function(e){return void 0===o[e]&&(o[e]=(t=e,r.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91)),o[e];var t});var o},317:(e,t,n)=>{(e=n.nmd(e)).exports=function(t){var r={},i=n(418),o=n(294),a=n(431);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=60103,l=60106,h=60107,d=60108,f=60114,p=60109,m=60110,g=60112,v=60113,y=60120,b=60115,w=60116,x=60121,_=60129,E=60130,A=60131;if("function"==typeof Symbol&&Symbol.for){var S=Symbol.for;c=S("react.element"),l=S("react.portal"),h=S("react.fragment"),d=S("react.strict_mode"),f=S("react.profiler"),p=S("react.provider"),m=S("react.context"),g=S("react.forward_ref"),v=S("react.suspense"),y=S("react.suspense_list"),b=S("react.memo"),w=S("react.lazy"),x=S("react.block"),S("react.scope"),_=S("react.debug_trace_mode"),E=S("react.offscreen"),A=S("react.legacy_hidden")}var T="function"==typeof Symbol&&Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=T&&e[T]||e["@@iterator"])?e:null}function C(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case h:return"Fragment";case l:return"Portal";case f:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case m:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case g:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case b:return C(e.type);case x:return C(e._render);case w:t=e._payload,e=e._init;try{return C(e(t))}catch(e){}}return null}function I(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function R(e){if(I(e)!==e)throw Error(s(188))}function P(e){var t=e.alternate;if(!t){if(null===(t=I(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return R(i),e;if(o===r)return R(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}function L(e){if(!(e=P(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function B(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var k,D=t.getPublicInstance,O=t.getRootHostContext,N=t.getChildHostContext,F=t.prepareForCommit,U=t.resetAfterCommit,G=t.createInstance,H=t.appendInitialChild,z=t.finalizeInitialChildren,V=t.prepareUpdate,j=t.shouldSetTextContent,W=t.createTextInstance,q=t.scheduleTimeout,J=t.cancelTimeout,K=t.noTimeout,X=t.isPrimaryRenderer,Y=t.supportsMutation,Q=t.supportsPersistence,Z=t.supportsHydration,$=t.getInstanceFromNode,ee=t.makeOpaqueHydratingObject,te=t.makeClientId,ne=t.beforeActiveInstanceBlur,re=t.afterActiveInstanceBlur,ie=t.preparePortalMount,oe=t.supportsTestSelectors,ae=t.findFiberRoot,se=t.getBoundingRect,ue=t.getTextContent,ce=t.isHiddenSubtree,le=t.matchAccessibilityRole,he=t.setFocusIfFocusable,de=t.setupIntersectionObserver,fe=t.appendChild,pe=t.appendChildToContainer,me=t.commitTextUpdate,ge=t.commitMount,ve=t.commitUpdate,ye=t.insertBefore,be=t.insertInContainerBefore,we=t.removeChild,xe=t.removeChildFromContainer,_e=t.resetTextContent,Ee=t.hideInstance,Ae=t.hideTextInstance,Se=t.unhideInstance,Te=t.unhideTextInstance,Me=t.clearContainer,Ce=t.cloneInstance,Ie=t.createContainerChildSet,Re=t.appendChildToContainerChildSet,Pe=t.finalizeContainerChildren,Le=t.replaceContainerChildren,Be=t.cloneHiddenInstance,ke=t.cloneHiddenTextInstance,De=t.canHydrateInstance,Oe=t.canHydrateTextInstance,Ne=t.isSuspenseInstancePending,Fe=t.isSuspenseInstanceFallback,Ue=t.getNextHydratableSibling,Ge=t.getFirstHydratableChild,He=t.hydrateInstance,ze=t.hydrateTextInstance,Ve=t.getNextHydratableInstanceAfterSuspenseInstance,je=t.commitHydratedContainer,We=t.commitHydratedSuspenseInstance;function qe(e){if(void 0===k)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);k=t&&t[1]||""}return"\n"+k+e}var Je=!1;function Ke(e,t){if(!e||Je)return"";Je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Je=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qe(e):""}var Xe=[],Ye=-1;function Qe(e){return{current:e}}function Ze(e){0>Ye||(e.current=Xe[Ye],Xe[Ye]=null,Ye--)}function $e(e,t){Ye++,Xe[Ye]=e.current,e.current=t}var et={},tt=Qe(et),nt=Qe(!1),rt=et;function it(e,t){var n=e.type.contextTypes;if(!n)return et;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ot(e){return null!=e.childContextTypes}function at(){Ze(nt),Ze(tt)}function st(e,t,n){if(tt.current!==et)throw Error(s(168));$e(tt,t),$e(nt,n)}function ut(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(s(108,C(t)||"Unknown",o));return i({},n,r)}function ct(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||et,rt=tt.current,$e(tt,e),$e(nt,nt.current),!0}function lt(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ut(e,t,rt),r.__reactInternalMemoizedMergedChildContext=e,Ze(nt),Ze(tt),$e(tt,e)):Ze(nt),$e(nt,n)}var ht=null,dt=null;(0,a.unstable_now)();var ft=0,pt=8;function mt(e){if(0!=(1&e))return pt=15,1;if(0!=(2&e))return pt=14,2;if(0!=(4&e))return pt=13,4;var t=24&e;return 0!==t?(pt=12,t):0!=(32&e)?(pt=11,32):0!=(t=192&e)?(pt=10,t):0!=(256&e)?(pt=9,256):0!=(t=3584&e)?(pt=8,t):0!=(4096&e)?(pt=7,4096):0!=(t=4186112&e)?(pt=6,t):0!=(t=62914560&e)?(pt=5,t):67108864&e?(pt=4,67108864):0!=(134217728&e)?(pt=3,134217728):0!=(t=805306368&e)?(pt=2,t):0!=(1073741824&e)?(pt=1,1073741824):(pt=8,e)}function gt(e,t){var n=e.pendingLanes;if(0===n)return pt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=pt=15;else if(0!=(o=134217727&n)){var u=o&~a;0!==u?(r=mt(u),i=pt):0!=(s&=o)&&(r=mt(s),i=pt)}else 0!=(o=n&~a)?(r=mt(o),i=pt):0!==s&&(r=mt(s),i=pt);if(0===r)return 0;if(r=n&((0>(r=31-_t(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(mt(t),i<=pt)return t;pt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-_t(t)),r|=e[n],t&=~i;return r}function vt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=bt(24&~t))?yt(10,t):e;case 10:return 0===(e=bt(192&~t))?yt(8,t):e;case 8:return 0===(e=bt(3584&~t))&&0===(e=bt(4186112&~t))&&(e=512),e;case 2:return 0===(t=bt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function bt(e){return e&-e}function wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-_t(t)]=n}var _t=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Et(e)/At|0)|0},Et=Math.log,At=Math.LN2,St=a.unstable_runWithPriority,Tt=a.unstable_scheduleCallback,Mt=a.unstable_cancelCallback,Ct=a.unstable_shouldYield,It=a.unstable_requestPaint,Rt=a.unstable_now,Pt=a.unstable_getCurrentPriorityLevel,Lt=a.unstable_ImmediatePriority,Bt=a.unstable_UserBlockingPriority,kt=a.unstable_NormalPriority,Dt=a.unstable_LowPriority,Ot=a.unstable_IdlePriority,Nt={},Ft=void 0!==It?It:function(){},Ut=null,Gt=null,Ht=!1,zt=Rt(),Vt=1e4>zt?Rt:function(){return Rt()-zt};function jt(){switch(Pt()){case Lt:return 99;case Bt:return 98;case kt:return 97;case Dt:return 96;case Ot:return 95;default:throw Error(s(332))}}function Wt(e){switch(e){case 99:return Lt;case 98:return Bt;case 97:return kt;case 96:return Dt;case 95:return Ot;default:throw Error(s(332))}}function qt(e,t){return e=Wt(e),St(e,t)}function Jt(e,t,n){return e=Wt(e),Tt(e,t,n)}function Kt(){if(null!==Gt){var e=Gt;Gt=null,Mt(e)}Xt()}function Xt(){if(!Ht&&null!==Ut){Ht=!0;var e=0;try{var t=Ut;qt(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ut=null}catch(t){throw null!==Ut&&(Ut=Ut.slice(e+1)),Tt(Lt,Kt),t}finally{Ht=!1}}}var Yt=u.ReactCurrentBatchConfig,Qt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Zt=Object.prototype.hasOwnProperty;function $t(e,t){if(Qt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Qt(e[n[r]],t[n[r]]))return!1;return!0}function en(e){switch(e.tag){case 5:return qe(e.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return Ke(e.type,!1);case 11:return Ke(e.type.render,!1);case 22:return Ke(e.type._render,!1);case 1:return Ke(e.type,!0);default:return""}}function tn(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var nn=Qe(null),rn=null,on=null,an=null;function sn(){an=on=rn=null}function un(e,t){e=e.type._context,X?($e(nn,e._currentValue),e._currentValue=t):($e(nn,e._currentValue2),e._currentValue2=t)}function cn(e){var t=nn.current;Ze(nn),e=e.type._context,X?e._currentValue=t:e._currentValue2=t}function ln(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function hn(e,t){rn=e,an=on=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(zr=!0),e.firstContext=null)}function dn(e,t){if(an!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(an=e,t=1073741823),t={context:e,observedBits:t,next:null},null===on){if(null===rn)throw Error(s(308));on=t,rn.dependencies={lanes:0,firstContext:t,responders:null}}else on=on.next=t;return X?e._currentValue:e._currentValue2}var fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function yn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var o=e.updateQueue;fn=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=l:d.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(d=o.baseState,s=0,h=l=c=null;;){u=a.lane;var f=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(u=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,u);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(u="function"==typeof(p=m.payload)?p.call(f,d,u):p))break e;d=i({},d,u);break e;case 2:fn=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else f={eventTime:f,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=f,c=d):h=h.next=f,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,co|=s,e.lanes=s,e.memoizedState=d}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var xn=(new o.Component).refs;function _n(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var En={isMounted:function(e){return!!(e=e._reactInternals)&&I(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Do(),i=Oo(e),o=gn(r,i);o.payload=t,null!=n&&(o.callback=n),vn(e,o),No(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Do(),i=Oo(e),o=gn(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),vn(e,o),No(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Do(),r=Oo(e),i=gn(n,r);i.tag=2,null!=t&&(i.callback=t),vn(e,i),No(e,r,n)}};function An(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&$t(n,r)&&$t(i,o))}function Sn(e,t,n){var r=!1,i=et,o=t.contextType;return"object"==typeof o&&null!==o?o=dn(o):(i=ot(t)?rt:tt.current,o=(r=null!=(r=t.contextTypes))?it(e,i):et),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=En,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Tn(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&En.enqueueReplaceState(t,t.state,null)}function Mn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=xn,pn(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dn(o):(o=ot(t)?rt:tt.current,i.context=it(e,o)),bn(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(_n(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&En.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var Cn=Array.isArray;function In(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===xn&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Rn(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Pn(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=_a(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ta(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=In(e,t,n),r.return=e,r):((r=Ea(n.type,n.key,n.props,null,e.mode,r)).ref=In(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ma(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=Aa(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Ta(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case c:return(n=Ea(t.type,t.key,t.props,null,e.mode,n)).ref=In(e,null,t),n.return=e,n;case l:return(t=Ma(t,e.mode,n)).return=e,t}if(Cn(t)||M(t))return(t=Aa(t,e.mode,n,null)).return=e,t;Rn(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?n.type===h?p(e,t,n.props.children,r,i):d(e,t,n,r):null;case l:return n.key===i?f(e,t,n,r):null}if(Cn(n)||M(n))return null!==i?null:p(e,t,n,r,null);Rn(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case c:return e=e.get(null===r.key?n:r.key)||null,r.type===h?p(t,e,r.props.children,i,r.key):d(t,e,r,i);case l:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Cn(r)||M(r))return p(t,e=e.get(n)||null,r,i,null);Rn(t,r)}return null}function y(i,a,s,u){for(var c=null,l=null,h=a,d=a=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=g(i,h,s[d],u);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),a=o(p,a,d),null===l?c=p:l.sibling=p,l=p,h=f}if(d===s.length)return n(i,h),c;if(null===h){for(;d<s.length;d++)null!==(h=m(i,s[d],u))&&(a=o(h,a,d),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);d<s.length;d++)null!==(f=v(h,i,d,s[d],u))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=o(f,a,d),null===l?c=f:l.sibling=f,l=f);return e&&h.forEach((function(e){return t(i,e)})),c}function b(i,a,u,c){var l=M(u);if("function"!=typeof l)throw Error(s(150));if(null==(u=l.call(u)))throw Error(s(151));for(var h=l=null,d=a,f=a=0,p=null,y=u.next();null!==d&&!y.done;f++,y=u.next()){d.index>f?(p=d,d=null):p=d.sibling;var b=g(i,d,y.value,c);if(null===b){null===d&&(d=p);break}e&&d&&null===b.alternate&&t(i,d),a=o(b,a,f),null===h?l=b:h.sibling=b,h=b,d=p}if(y.done)return n(i,d),l;if(null===d){for(;!y.done;f++,y=u.next())null!==(y=m(i,y.value,c))&&(a=o(y,a,f),null===h?l=y:h.sibling=y,h=y);return l}for(d=r(i,d);!y.done;f++,y=u.next())null!==(y=v(d,i,f,y.value,c))&&(e&&null!==y.alternate&&d.delete(null===y.key?f:y.key),a=o(y,a,f),null===h?l=y:h.sibling=y,h=y);return e&&d.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var d="object"==typeof o&&null!==o&&o.type===h&&null===o.key;d&&(o=o.props.children);var f="object"==typeof o&&null!==o;if(f)switch(o.$$typeof){case c:e:{for(f=o.key,d=r;null!==d;){if(d.key===f){switch(d.tag){case 7:if(o.type===h){n(e,d.sibling),(r=i(d,o.props.children)).return=e,e=r;break e}break;default:if(d.elementType===o.type){n(e,d.sibling),(r=i(d,o.props)).ref=In(e,d,o),r.return=e,e=r;break e}}n(e,d);break}t(e,d),d=d.sibling}o.type===h?((r=Aa(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Ea(o.type,o.key,o.props,null,e.mode,u)).ref=In(e,r,o),u.return=e,e=u)}return a(e);case l:e:{for(d=o.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ma(o,e.mode,u)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ta(o,e.mode,u)).return=e,e=r),a(e);if(Cn(o))return y(e,r,o,u);if(M(o))return b(e,r,o,u);if(f&&Rn(e,o),void 0===o&&!d)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,C(e.type)||"Component"))}return n(e,r)}}var Ln=Pn(!0),Bn=Pn(!1),kn={},Dn=Qe(kn),On=Qe(kn),Nn=Qe(kn);function Fn(e){if(e===kn)throw Error(s(174));return e}function Un(e,t){$e(Nn,t),$e(On,e),$e(Dn,kn),e=O(t),Ze(Dn),$e(Dn,e)}function Gn(){Ze(Dn),Ze(On),Ze(Nn)}function Hn(e){var t=Fn(Nn.current),n=Fn(Dn.current);n!==(t=N(n,e.type,t))&&($e(On,e),$e(Dn,t))}function zn(e){On.current===e&&(Ze(Dn),Ze(On))}var Vn=Qe(0);function jn(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ne(n)||Fe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wn=null,qn=null,Jn=!1;function Kn(e,t){var n=wa(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Xn(e,t){switch(e.tag){case 5:return null!==(t=De(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=Oe(t,e.pendingProps))&&(e.stateNode=t,!0);case 13:default:return!1}}function Yn(e){if(Jn){var t=qn;if(t){var n=t;if(!Xn(e,t)){if(!(t=Ue(n))||!Xn(e,t))return e.flags=-1025&e.flags|2,Jn=!1,void(Wn=e);Kn(Wn,n)}Wn=e,qn=Ge(t)}else e.flags=-1025&e.flags|2,Jn=!1,Wn=e}}function Qn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Wn=e}function Zn(e){if(!Z||e!==Wn)return!1;if(!Jn)return Qn(e),Jn=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!j(t,e.memoizedProps))for(t=qn;t;)Kn(e,t),t=Ue(t);if(Qn(e),13===e.tag){if(!Z)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));qn=Ve(e)}else qn=Wn?Ue(e.stateNode):null;return!0}function $n(){Z&&(qn=Wn=null,Jn=!1)}var er=[];function tr(){for(var e=0;e<er.length;e++){var t=er[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}er.length=0}var nr=u.ReactCurrentDispatcher,rr=u.ReactCurrentBatchConfig,ir=0,or=null,ar=null,sr=null,ur=!1,cr=!1;function lr(){throw Error(s(321))}function hr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qt(e[n],t[n]))return!1;return!0}function dr(e,t,n,r,i,o){if(ir=o,or=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nr.current=null===e||null===e.memoizedState?Fr:Ur,e=n(r,i),cr){o=0;do{if(cr=!1,!(25>o))throw Error(s(301));o+=1,sr=ar=null,t.updateQueue=null,nr.current=Gr,e=n(r,i)}while(cr)}if(nr.current=Nr,t=null!==ar&&null!==ar.next,ir=0,sr=ar=or=null,ur=!1,t)throw Error(s(300));return e}function fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===sr?or.memoizedState=sr=e:sr=sr.next=e,sr}function pr(){if(null===ar){var e=or.alternate;e=null!==e?e.memoizedState:null}else e=ar.next;var t=null===sr?or.memoizedState:sr.next;if(null!==t)sr=t,ar=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ar=e).memoizedState,baseState:ar.baseState,baseQueue:ar.baseQueue,queue:ar.queue,next:null},null===sr?or.memoizedState=sr=e:sr=sr.next=e}return sr}function mr(e,t){return"function"==typeof t?t(e):t}function gr(e){var t=pr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ar,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,c=i;do{var l=c.lane;if((ir&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,or.lanes|=l,co|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=a,Qt(r,t.memoizedState)||(zr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function vr(e){var t=pr(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Qt(o,t.memoizedState)||(zr=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function yr(e,t,n){var r=t._getVersion;r=r(t._source);var i=X?t._workInProgressVersionPrimary:t._workInProgressVersionSecondary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(ir&e)===e)&&(X?t._workInProgressVersionPrimary=r:t._workInProgressVersionSecondary=r,er.push(t))),e)return n(t._source);throw er.push(t),Error(s(350))}function br(e,t,n,r){var i=to;if(null===i)throw Error(s(349));var o=t._getVersion,a=o(t._source),u=nr.current,c=u.useState((function(){return yr(i,t,n)})),l=c[1],h=c[0];c=sr;var d=e.memoizedState,f=d.refs,p=f.getSnapshot,m=d.source;d=d.subscribe;var g=or;return e.memoizedState={refs:f,source:t,subscribe:r},u.useEffect((function(){f.getSnapshot=n,f.setSnapshot=l;var e=o(t._source);if(!Qt(a,e)){e=n(t._source),Qt(h,e)||(l(e),e=Oo(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-_t(s),c=1<<u;r[u]|=e,s&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=f.getSnapshot,n=f.setSnapshot;try{n(e(t._source));var r=Oo(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Qt(p,n)&&Qt(m,t)&&Qt(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:mr,lastRenderedState:h}).dispatch=l=Or.bind(null,or,e),c.queue=e,c.baseQueue=null,h=yr(i,t,n),c.memoizedState=c.baseState=h),h}function wr(e,t,n){return br(pr(),e,t,n)}function xr(e){var t=fr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:mr,lastRenderedState:e}).dispatch=Or.bind(null,or,e),[t.memoizedState,e]}function _r(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=or.updateQueue)?(t={lastEffect:null},or.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Er(e){return e={current:e},fr().memoizedState=e}function Ar(){return pr().memoizedState}function Sr(e,t,n,r){var i=fr();or.flags|=e,i.memoizedState=_r(1|t,n,void 0,void 0===r?null:r)}function Tr(e,t,n,r){var i=pr();r=void 0===r?null:r;var o=void 0;if(null!==ar){var a=ar.memoizedState;if(o=a.destroy,null!==r&&hr(r,a.deps))return void _r(t,n,o,r)}or.flags|=e,i.memoizedState=_r(1|t,n,o,r)}function Mr(e,t){return Sr(516,4,e,t)}function Cr(e,t){return Tr(516,4,e,t)}function Ir(e,t){return Tr(4,2,e,t)}function Rr(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Pr(e,t,n){return n=null!=n?n.concat([e]):null,Tr(4,2,Rr.bind(null,t,e),n)}function Lr(){}function Br(e,t){var n=pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function kr(e,t){var n=pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&hr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Dr(e,t){var n=jt();qt(98>n?98:n,(function(){e(!0)})),qt(97<n?97:n,(function(){var n=rr.transition;rr.transition=1;try{e(!1),t()}finally{rr.transition=n}}))}function Or(e,t,n){var r=Do(),i=Oo(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===or||null!==a&&a===or)cr=ur=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Qt(u,s))return}catch(e){}No(e,i,r)}}var Nr={readContext:dn,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useOpaqueIdentifier:lr,unstable_isNewReconciler:!1},Fr={readContext:dn,useCallback:function(e,t){return fr().memoizedState=[e,void 0===t?null:t],e},useContext:dn,useEffect:Mr,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Sr(4,2,Rr.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sr(4,2,e,t)},useMemo:function(e,t){var n=fr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Or.bind(null,or,e),[r.memoizedState,e]},useRef:Er,useState:xr,useDebugValue:Lr,useDeferredValue:function(e){var t=xr(e),n=t[0],r=t[1];return Mr((function(){var t=rr.transition;rr.transition=1;try{r(e)}finally{rr.transition=t}}),[e]),n},useTransition:function(){var e=xr(!1),t=e[0];return Er(e=Dr.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=fr();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},br(r,e,t,n)},useOpaqueIdentifier:function(){if(Jn){var e=!1,t=ee((function(){throw e||(e=!0,n(te())),Error(s(355))})),n=xr(t)[1];return 0==(2&or.mode)&&(or.flags|=516,_r(5,(function(){n(te())}),void 0,null)),t}return xr(t=te()),t},unstable_isNewReconciler:!1},Ur={readContext:dn,useCallback:Br,useContext:dn,useEffect:Cr,useImperativeHandle:Pr,useLayoutEffect:Ir,useMemo:kr,useReducer:gr,useRef:Ar,useState:function(){return gr(mr)},useDebugValue:Lr,useDeferredValue:function(e){var t=gr(mr),n=t[0],r=t[1];return Cr((function(){var t=rr.transition;rr.transition=1;try{r(e)}finally{rr.transition=t}}),[e]),n},useTransition:function(){var e=gr(mr)[0];return[Ar().current,e]},useMutableSource:wr,useOpaqueIdentifier:function(){return gr(mr)[0]},unstable_isNewReconciler:!1},Gr={readContext:dn,useCallback:Br,useContext:dn,useEffect:Cr,useImperativeHandle:Pr,useLayoutEffect:Ir,useMemo:kr,useReducer:vr,useRef:Ar,useState:function(){return vr(mr)},useDebugValue:Lr,useDeferredValue:function(e){var t=vr(mr),n=t[0],r=t[1];return Cr((function(){var t=rr.transition;rr.transition=1;try{r(e)}finally{rr.transition=t}}),[e]),n},useTransition:function(){var e=vr(mr)[0];return[Ar().current,e]},useMutableSource:wr,useOpaqueIdentifier:function(){return vr(mr)[0]},unstable_isNewReconciler:!1},Hr=u.ReactCurrentOwner,zr=!1;function Vr(e,t,n,r){t.child=null===e?Bn(t,null,n,r):Ln(t,e.child,n,r)}function jr(e,t,n,r,i){n=n.render;var o=t.ref;return hn(t,i),r=dr(e,t,n,r,o,i),null===e||zr?(t.flags|=1,Vr(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ci(e,t,i))}function Wr(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||xa(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ea(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,qr(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:$t)(i,r)&&e.ref===t.ref)?ci(e,t,o):(t.flags|=1,(e=_a(a,r)).ref=t.ref,e.return=t,t.child=e)}function qr(e,t,n,r,i,o){if(null!==e&&$t(e.memoizedProps,r)&&e.ref===t.ref){if(zr=!1,0==(o&i))return t.lanes=e.lanes,ci(e,t,o);0!=(16384&e.flags)&&(zr=!0)}return Xr(e,t,n,r,o)}function Jr(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Wo(0,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Wo(0,e),null;t.memoizedState={baseLanes:0},Wo(0,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Wo(0,r);return Vr(e,t,i,n),t.child}function Kr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Xr(e,t,n,r,i){var o=ot(n)?rt:tt.current;return o=it(t,o),hn(t,i),n=dr(e,t,n,r,o,i),null===e||zr?(t.flags|=1,Vr(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ci(e,t,i))}function Yr(e,t,n,r,i){if(ot(n)){var o=!0;ct(t)}else o=!1;if(hn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Sn(t,n,r),Mn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?dn(c):it(t,c=ot(n)?rt:tt.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Tn(t,a,r,c),fn=!1;var d=t.memoizedState;a.state=d,bn(t,r,a,i),u=t.memoizedState,s!==r||d!==u||nt.current||fn?("function"==typeof l&&(_n(t,n,l,r),u=t.memoizedState),(s=fn||An(t,n,s,r,d,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,mn(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:tn(t.type,s),a.props=c,h=t.pendingProps,d=a.context,u="object"==typeof(u=n.contextType)&&null!==u?dn(u):it(t,u=ot(n)?rt:tt.current);var f=n.getDerivedStateFromProps;(l="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==u)&&Tn(t,a,r,u),fn=!1,d=t.memoizedState,a.state=d,bn(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||nt.current||fn?("function"==typeof f&&(_n(t,n,f,r),p=t.memoizedState),(c=fn||An(t,n,c,r,d,p,u))?(l||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Qr(e,t,n,r,o,i)}function Qr(e,t,n,r,i,o){Kr(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&lt(t,n,!1),ci(e,t,o);r=t.stateNode,Hr.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ln(t,e.child,null,o),t.child=Ln(t,null,s,o)):Vr(e,t,s,o),t.memoizedState=r.state,i&&lt(t,n,!0),t.child}function Zr(e){var t=e.stateNode;t.pendingContext?st(0,t.pendingContext,t.pendingContext!==t.context):t.context&&st(0,t.context,!1),Un(e,t.containerInfo)}var $r,ei,ti,ni,ri={dehydrated:null,retryLane:0};function ii(e,t,n){var r,i=t.pendingProps,o=Vn.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),$e(Vn,1&o),null===e?(void 0!==i.fallback&&Yn(t),e=i.children,o=i.fallback,a?(e=oi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ri,e):"number"==typeof i.unstable_expectedLoadTime?(e=oi(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=ri,t.lanes=33554432,e):((n=Sa({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=function(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=_a(a,s),null!==e?r=_a(e,r):(r=Aa(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=ri,i):(n=function(e,t,n,r){var i=e.child;return e=i.sibling,n=_a(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}(e,t,i.children,n),t.memoizedState=null,n))}function oi(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Sa(t,i,0,null),n=Aa(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function ai(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ln(e.return,t)}function si(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function ui(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Vr(e,t,r.children,n),0!=(2&(r=Vn.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ai(e,n);else if(19===e.tag)ai(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if($e(Vn,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===jn(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),si(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===jn(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}si(t,!0,n,null,o,t.lastEffect);break;case"together":si(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ci(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),co|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=_a(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_a(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function li(e){e.flags|=4}if(Y)$r=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)H(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ei=function(){},ti=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=Fn(Dn.current);n=V(o,n,e,r,i,a),(t.updateQueue=n)&&li(t)}},ni=function(e,t,n,r){n!==r&&li(t)};else if(Q){$r=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Be(o,i.type,i.memoizedProps,i)),H(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=ke(o,i.memoizedProps,i)),H(e,o);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.flags)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,$r(e,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var hi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Be(o,i.type,i.memoizedProps,i)),Re(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=ke(o,i.memoizedProps,i)),Re(e,o);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.flags)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,hi(e,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};ei=function(e){var t=e.stateNode;if(null!==e.firstEffect){var n=t.containerInfo,r=Ie(n);hi(r,e,!1,!1),t.pendingChildren=r,li(e),Pe(n,r)}},ti=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=null===t.firstEffect)&&a===r)t.stateNode=o;else{var s=t.stateNode,u=Fn(Dn.current),c=null;a!==r&&(c=V(s,n,a,r,i,u)),e&&null===c?t.stateNode=o:(o=Ce(o,c,n,a,r,t,e,s),z(o,n,r,i,u)&&li(t),t.stateNode=o,e?li(t):$r(o,t,!1,!1))}},ni=function(e,t,n,r){n!==r?(e=Fn(Nn.current),n=Fn(Dn.current),t.stateNode=W(r,e,n,t),li(t)):t.stateNode=e.stateNode}}else ei=function(){},ti=function(){},ni=function(){};function di(e,t){if(!Jn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fi(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ot(t.type)&&at(),null;case 3:return Gn(),Ze(nt),Ze(tt),tr(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zn(t)?li(t):r.hydrate||(t.flags|=256)),ei(t),null;case 5:zn(t);var i=Fn(Nn.current);if(n=t.type,null!==e&&null!=t.stateNode)ti(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(s(166));return null}if(e=Fn(Dn.current),Zn(t)){if(!Z)throw Error(s(175));e=He(t.stateNode,t.type,t.memoizedProps,i,e,t),t.updateQueue=e,null!==e&&li(t)}else{var o=G(n,r,i,e,t);$r(o,t,!1,!1),t.stateNode=o,z(o,n,r,i,e)&&li(t)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)ni(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(e=Fn(Nn.current),i=Fn(Dn.current),Zn(t)){if(!Z)throw Error(s(176));ze(t.stateNode,t.memoizedProps,t)&&li(t)}else t.stateNode=W(r,e,i,t)}return null;case 13:return Ze(Vn),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Zn(t):i=null!==e.memoizedState,r&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Vn.current)?0===ao&&(ao=3):(0!==ao&&3!==ao||(ao=4),null===to||0==(134217727&co)&&0==(134217727&lo)||Ho(to,ro))),Q&&r&&(t.flags|=4),Y&&(r||i)&&(t.flags|=4),null);case 4:return Gn(),ei(t),null===e&&ie(t.stateNode.containerInfo),null;case 10:return cn(t),null;case 17:return ot(t.type)&&at(),null;case 19:if(Ze(Vn),null===(r=t.memoizedState))return null;if(i=0!=(64&t.flags),null===(o=r.rendering))if(i)di(r,!1);else{if(0!==ao||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(o=jn(e))){for(t.flags|=64,di(r,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,e=n,r=t.child;null!==r;)n=e,(i=r).flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(o=i.alternate)?(i.childLanes=0,i.lanes=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return $e(Vn,1&Vn.current|2),t.child}e=e.sibling}null!==r.tail&&Vt()>mo&&(t.flags|=64,i=!0,di(r,!1),t.lanes=33554432)}else{if(!i)if(null!==(e=jn(o))){if(t.flags|=64,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),di(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate&&!Jn)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Vt()-r.renderingStartTime>mo&&1073741824!==n&&(t.flags|=64,i=!0,di(r,!1),t.lanes=33554432);r.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=r.last)?e.sibling=o:t.child=o,r.last=o)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vt(),e.sibling=null,t=Vn.current,$e(Vn,i?1&t|2:1&t),e):null;case 23:case 24:return qo(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function pi(e){switch(e.tag){case 1:ot(e.type)&&at();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Gn(),Ze(nt),Ze(tt),tr(),0!=(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return zn(e),null;case 13:return Ze(Vn),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Ze(Vn),null;case 4:return Gn(),null;case 10:return cn(e),null;case 23:case 24:return qo(),null;default:return null}}function mi(e,t){try{var n="",r=t;do{n+=en(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function gi(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var vi="function"==typeof WeakMap?WeakMap:Map;function yi(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bo||(bo=!0,wo=r),gi(0,t)},n}function bi(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return gi(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===xo?xo=new Set([this]):xo.add(this),gi(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var wi="function"==typeof WeakSet?WeakSet:Set;function xi(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){ca(e,t)}else t.current=null}function _i(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:tn(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(Y&&256&t.flags&&Me(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function Ei(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function Ai(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(aa(n,e),oa(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:tn(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&wn(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=D(n.child.stateNode);break;case 1:e=n.child.stateNode}wn(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&ge(e,n.type,n.memoizedProps,n));case 6:case 4:case 12:return;case 13:return void(Z&&null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&We(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function Si(e,t){if(Y)for(var n=e;;){if(5===n.tag){var r=n.stateNode;t?Ee(r):Se(n.stateNode,n.memoizedProps)}else if(6===n.tag)r=n.stateNode,t?Ae(r):Te(r,n.memoizedProps);else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Ti(e,t){if(dt&&"function"==typeof dt.onCommitFiberUnmount)try{dt.onCommitFiberUnmount(ht,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))aa(t,n);else{r=t;try{i()}catch(e){ca(r,e)}}n=n.next}while(n!==e)}break;case 1:if(xi(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){ca(t,e)}break;case 5:xi(t);break;case 4:Y?Bi(e,t):Q&&Q&&(t=t.stateNode.containerInfo,e=Ie(t),Le(t,e))}}function Mi(e,t){for(var n=t;;)if(Ti(e,n),null===n.child||Y&&4===n.tag){if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else n.child.return=n,n=n.child}function Ci(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ii(e){return 5===e.tag||3===e.tag||4===e.tag}function Ri(e){if(Y){e:{for(var t=e.return;null!==t;){if(Ii(t))break e;t=t.return}throw Error(s(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(_e(t),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Ii(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Pi(e,n,t):Li(e,n,t)}}function Pi(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?be(n,e,t):pe(n,e);else if(4!==r&&null!==(e=e.child))for(Pi(e,t,n),e=e.sibling;null!==e;)Pi(e,t,n),e=e.sibling}function Li(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?ye(n,e,t):fe(n,e);else if(4!==r&&null!==(e=e.child))for(Li(e,t,n),e=e.sibling;null!==e;)Li(e,t,n),e=e.sibling}function Bi(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag)Mi(e,i),r?xe(n,i.stateNode):we(n,i.stateNode);else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Ti(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ki(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Ei(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&ve(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return n=t.memoizedProps,void me(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Z&&(t=t.stateNode,t.hydrate&&(t.hydrate=!1,je(t.containerInfo))));case 12:return;case 13:return Di(t),void Oi(t);case 19:return void Oi(t);case 17:return;case 23:case 24:return void Si(t,null!==t.memoizedState)}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Ei(3,t);case 12:return;case 13:return Di(t),void Oi(t);case 19:return void Oi(t);case 3:Z&&(n=t.stateNode).hydrate&&(n.hydrate=!1,je(n.containerInfo));break;case 23:case 24:return}e:if(Q){switch(t.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:t=t.stateNode,Le(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function Di(e){null!==e.memoizedState&&(po=Vt(),Y&&Si(e.child,!0))}function Oi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new wi),t.forEach((function(t){var r=ha.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ni(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Fi=0,Ui=1,Gi=2,Hi=3,zi=4;if("function"==typeof Symbol&&Symbol.for){var Vi=Symbol.for;Fi=Vi("selector.component"),Ui=Vi("selector.has_pseudo_class"),Gi=Vi("selector.role"),Hi=Vi("selector.test_id"),zi=Vi("selector.text")}function ji(e){var t=$(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(s(364));return t}if(null===(e=ae(e)))throw Error(s(362));return e.stateNode.current}function Wi(e,t){switch(t.$$typeof){case Fi:if(e.type===t.value)return!0;break;case Ui:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!ce(r)){for(;null!=o&&Wi(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Gi:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case zi:if((5===e.tag||6===e.tag)&&null!==(e=ue(e))&&0<=e.indexOf(t.value))return!0;break;case Hi:if(5===e.tag&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(s(365,t))}return!1}function qi(e){switch(e.$$typeof){case Fi:return"<"+(C(e.value)||"Unknown")+">";case Ui:return":has("+(qi(e)||"")+")";case Gi:return'[role="'+e.value+'"]';case zi:return'"'+e.value+'"';case Hi:return'[data-testname="'+e.value+'"]';default:throw Error(s(365,e))}}function Ji(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!ce(i)){for(;null!=a&&Wi(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Ki(e,t){if(!oe)throw Error(s(363));e=Ji(e=ji(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)ce(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Xi=null,Yi=Math.ceil,Qi=u.ReactCurrentDispatcher,Zi=u.ReactCurrentOwner,$i=u.IsSomeRendererActing,eo=0,to=null,no=null,ro=0,io=0,oo=Qe(0),ao=0,so=null,uo=0,co=0,lo=0,ho=0,fo=null,po=0,mo=1/0;function go(){mo=Vt()+500}var vo,yo=null,bo=!1,wo=null,xo=null,_o=!1,Eo=null,Ao=90,So=[],To=[],Mo=null,Co=0,Io=null,Ro=-1,Po=0,Lo=0,Bo=null,ko=!1;function Do(){return 0!=(48&eo)?Vt():-1!==Ro?Ro:Ro=Vt()}function Oo(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===jt()?1:2;if(0===Po&&(Po=uo),0!==Yt.transition){0!==Lo&&(Lo=null!==fo?fo.pendingLanes:0),e=Po;var t=4186112&~Lo;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=jt(),e=yt(0!=(4&eo)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Po)}function No(e,t,n){if(50<Co)throw Co=0,Io=null,Error(s(185));if(null===(e=Fo(e,t)))return null;xt(e,t,n),e===to&&(lo|=t,4===ao&&Ho(e,ro));var r=jt();1===t?0!=(8&eo)&&0==(48&eo)?zo(e):(Uo(e,n),0===eo&&(go(),Kt())):(0==(4&eo)||98!==r&&99!==r||(null===Mo?Mo=new Set([e]):Mo.add(e)),Uo(e,n)),fo=e}function Fo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Uo(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-_t(a),c=1<<u,l=o[u];if(-1===l){if(0==(c&r)||0!=(c&i)){l=t,mt(c);var h=pt;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);a&=~c}if(r=gt(e,e===to?ro:0),t=pt,0===r)null!==n&&(n!==Nt&&Mt(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Nt&&Mt(n)}15===t?(n=zo.bind(null,e),null===Ut?(Ut=[n],Gt=Tt(Lt,Xt)):Ut.push(n),n=Nt):n=14===t?Jt(99,zo.bind(null,e)):Jt(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),Go.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function Go(e){if(Ro=-1,Lo=Po=0,0!=(48&eo))throw Error(s(327));var t=e.callbackNode;if(ia()&&e.callbackNode!==t)return null;var n=gt(e,e===to?ro:0);if(0===n)return null;var r=n,i=eo;eo|=16;var o=Xo();for(to===e&&ro===r||(go(),Jo(e,r));;)try{Zo();break}catch(t){Ko(e,t)}if(sn(),Qi.current=o,eo=i,null!==no?r=0:(to=null,ro=0,r=ao),0!=(uo&lo))Jo(e,0);else if(0!==r){if(2===r&&(eo|=64,e.hydrate&&(e.hydrate=!1,Me(e.containerInfo)),0!==(n=vt(e))&&(r=Yo(e,n))),1===r)throw t=so,Jo(e,0),Ho(e,n),Uo(e,Vt()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:ta(e);break;case 3:if(Ho(e,n),(62914560&n)===n&&10<(r=po+500-Vt())){if(0!==gt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){Do(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=q(ta.bind(null,e),r);break}ta(e);break;case 4:if(Ho(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-_t(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Vt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yi(n/1960))-n)){e.timeoutHandle=q(ta.bind(null,e),n);break}ta(e);break;case 5:ta(e);break;default:throw Error(s(329))}}return Uo(e,Vt()),e.callbackNode===t?Go.bind(null,e):null}function Ho(e,t){for(t&=~ho,t&=~lo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function zo(e){if(0!=(48&eo))throw Error(s(327));if(ia(),e===to&&0!=(e.expiredLanes&ro)){var t=ro,n=Yo(e,t);0!=(uo&lo)&&(n=Yo(e,t=gt(e,t)))}else n=Yo(e,t=gt(e,0));if(0!==e.tag&&2===n&&(eo|=64,e.hydrate&&(e.hydrate=!1,Me(e.containerInfo)),0!==(t=vt(e))&&(n=Yo(e,t))),1===n)throw n=so,Jo(e,0),Ho(e,t),Uo(e,Vt()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ta(e),Uo(e,Vt()),null}function Vo(e,t){var n=eo;eo|=1;try{return e(t)}finally{0===(eo=n)&&(go(),Kt())}}function jo(e,t){var n=eo;if(0!=(48&n))return e(t);eo|=1;try{if(e)return qt(99,e.bind(null,t))}finally{eo=n,Kt()}}function Wo(e,t){$e(oo,io),io|=t,uo|=t}function qo(){io=oo.current,Ze(oo)}function Jo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==K&&(e.timeoutHandle=K,J(n)),null!==no)for(n=no.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&at();break;case 3:Gn(),Ze(nt),Ze(tt),tr();break;case 5:zn(r);break;case 4:Gn();break;case 13:case 19:Ze(Vn);break;case 10:cn(r);break;case 23:case 24:qo()}n=n.return}to=e,no=_a(e.current,null),ro=io=uo=t,ao=0,so=null,ho=lo=co=0}function Ko(e,t){for(;;){var n=no;try{if(sn(),nr.current=Nr,ur){for(var r=or.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ur=!1}if(ir=0,sr=ar=or=null,cr=!1,Zi.current=null,null===n||null===n.return){ao=1,so=t,no=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=ro,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var c=u;if(0==(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&Vn.current),d=a;do{var f;if(f=13===d.tag){var p=d.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var m=d.memoizedProps;f=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(f){var g=d.updateQueue;if(null===g){var v=new Set;v.add(c),d.updateQueue=v}else g.add(c);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=gn(-1,1);y.tag=2,vn(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new vi,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var w=la.bind(null,o,c,s);c.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((C(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ao&&(ao=2),u=mi(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,yn(d,yi(0,o,t));break e;case 1:o=u;var x=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof x.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===xo||!xo.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,yn(d,bi(d,o,t));break e}}d=d.return}while(null!==d)}ea(n)}catch(e){t=e,no===n&&null!==n&&(no=n=n.return);continue}break}}function Xo(){var e=Qi.current;return Qi.current=Nr,null===e?Nr:e}function Yo(e,t){var n=eo;eo|=16;var r=Xo();for(to===e&&ro===t||Jo(e,t);;)try{Qo();break}catch(t){Ko(e,t)}if(sn(),eo=n,Qi.current=r,null!==no)throw Error(s(261));return to=null,ro=0,ao}function Qo(){for(;null!==no;)$o(no)}function Zo(){for(;null!==no&&!Ct();)$o(no)}function $o(e){var t=vo(e.alternate,e,io);e.memoizedProps=e.pendingProps,null===t?ea(e):no=t,Zi.current=null}function ea(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=fi(n,t,io)))return void(no=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&io)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=pi(t)))return n.flags&=2047,void(no=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(no=t);no=t=e}while(null!==t);0===ao&&(ao=5)}function ta(e){var t=jt();return qt(99,na.bind(null,e,t)),null}function na(e,t){do{ia()}while(null!==Eo);if(0!=(48&eo))throw Error(s(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-_t(o),l=1<<c;i[c]=0,a[c]=-1,u[c]=-1,o&=~l}if(null!==Mo&&0==(24&r)&&Mo.has(e)&&Mo.delete(e),e===to&&(no=to=null,ro=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){i=eo,eo|=32,Zi.current=null,Bo=F(e.containerInfo),ko=!1,yo=r;do{try{ra()}catch(e){if(null===yo)throw Error(s(330));ca(yo,e),yo=yo.nextEffect}}while(null!==yo);Bo=null,yo=r;do{try{for(a=e;null!==yo;){var h=yo.flags;if(16&h&&Y&&_e(yo.stateNode),128&h){var d=yo.alternate;if(null!==d){var f=d.ref;null!==f&&("function"==typeof f?f(null):f.current=null)}}switch(1038&h){case 2:Ri(yo),yo.flags&=-3;break;case 6:Ri(yo),yo.flags&=-3,ki(yo.alternate,yo);break;case 1024:yo.flags&=-1025;break;case 1028:yo.flags&=-1025,ki(yo.alternate,yo);break;case 4:ki(yo.alternate,yo);break;case 8:u=a,o=yo,Y?Bi(u,o):Mi(u,o);var p=o.alternate;Ci(o),null!==p&&Ci(p)}yo=yo.nextEffect}}catch(e){if(null===yo)throw Error(s(330));ca(yo,e),yo=yo.nextEffect}}while(null!==yo);ko&&re(),U(e.containerInfo),e.current=n,yo=r;do{try{for(h=e;null!==yo;){var m=yo.flags;if(36&m&&Ai(h,yo.alternate,yo),128&m){d=void 0;var g=yo.ref;if(null!==g){var v=yo.stateNode;switch(yo.tag){case 5:d=D(v);break;default:d=v}"function"==typeof g?g(d):g.current=d}}yo=yo.nextEffect}}catch(e){if(null===yo)throw Error(s(330));ca(yo,e),yo=yo.nextEffect}}while(null!==yo);yo=null,Ft(),eo=i}else e.current=n;if(_o)_o=!1,Eo=e,Ao=t;else for(yo=r;null!==yo;)t=yo.nextEffect,yo.nextEffect=null,8&yo.flags&&((m=yo).sibling=null,m.stateNode=null),yo=t;if(0===(r=e.pendingLanes)&&(xo=null),1===r?e===Io?Co++:(Co=0,Io=e):Co=0,n=n.stateNode,dt&&"function"==typeof dt.onCommitFiberRoot)try{dt.onCommitFiberRoot(ht,n,void 0,64==(64&n.current.flags))}catch(e){}if(Uo(e,Vt()),bo)throw bo=!1,e=wo,wo=null,e;return 0!=(8&eo)||Kt(),null}function ra(){for(;null!==yo;){var e=yo.alternate;ko||null===Bo||(0!=(8&yo.flags)?B(yo,Bo)&&(ko=!0,ne()):13===yo.tag&&Ni(e,yo)&&B(yo,Bo)&&(ko=!0,ne()));var t=yo.flags;0!=(256&t)&&_i(e,yo),0==(512&t)||_o||(_o=!0,Jt(97,(function(){return ia(),null}))),yo=yo.nextEffect}}function ia(){if(90!==Ao){var e=97<Ao?97:Ao;return Ao=90,qt(e,sa)}return!1}function oa(e,t){So.push(t,e),_o||(_o=!0,Jt(97,(function(){return ia(),null})))}function aa(e,t){To.push(t,e),_o||(_o=!0,Jt(97,(function(){return ia(),null})))}function sa(){if(null===Eo)return!1;var e=Eo;if(Eo=null,0!=(48&eo))throw Error(s(331));var t=eo;eo|=32;var n=To;To=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(s(330));ca(o,e)}}for(n=So,So=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(e){if(null===o)throw Error(s(330));ca(o,e)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return eo=t,Kt(),!0}function ua(e,t,n){vn(e,t=yi(0,t=mi(n,t),1)),t=Do(),null!==(e=Fo(e,1))&&(xt(e,1,t),Uo(e,t))}function ca(e,t){if(3===e.tag)ua(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ua(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===xo||!xo.has(r))){var i=bi(n,e=mi(t,e),1);if(vn(n,i),i=Do(),null!==(n=Fo(n,1)))xt(n,1,i),Uo(n,i);else if("function"==typeof r.componentDidCatch&&(null===xo||!xo.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function la(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Do(),e.pingedLanes|=e.suspendedLanes&n,to===e&&(ro&n)===n&&(4===ao||3===ao&&(62914560&ro)===ro&&500>Vt()-po?Jo(e,0):ho|=n),Uo(e,t)}function ha(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===jt()?1:2:(0===Po&&(Po=uo),0===(t=bt(62914560&~Po))&&(t=4194304))),n=Do(),null!==(e=Fo(e,t))&&(xt(e,t,n),Uo(e,n))}vo=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||nt.current)zr=!0;else{if(0==(n&r)){switch(zr=!1,t.tag){case 3:Zr(t),$n();break;case 5:Hn(t);break;case 1:ot(t.type)&&ct(t);break;case 4:Un(t,t.stateNode.containerInfo);break;case 10:un(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?ii(e,t,n):($e(Vn,1&Vn.current),null!==(t=ci(e,t,n))?t.sibling:null);$e(Vn,1&Vn.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ui(e,t,n);t.flags|=64}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),$e(Vn,Vn.current),r)break;return null;case 23:case 24:return t.lanes=0,Jr(e,t,n)}return ci(e,t,n)}zr=0!=(16384&e.flags)}else zr=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=it(t,tt.current),hn(t,n),i=dr(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ot(r)){var o=!0;ct(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&_n(t,r,a,e),i.updater=En,t.stateNode=i,i._reactInternals=t,Mn(t,r,e,n),t=Qr(null,t,r,!0,o,n)}else t.tag=0,Vr(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return xa(e)?1:0;if(null!=e){if((e=e.$$typeof)===g)return 11;if(e===b)return 14}return 2}(i),e=tn(i,e),o){case 0:t=Xr(null,t,i,e,n);break e;case 1:t=Yr(null,t,i,e,n);break e;case 11:t=jr(null,t,i,e,n);break e;case 14:t=Wr(null,t,i,tn(i.type,e),r,n);break e}throw Error(s(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Xr(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 1:return r=t.type,i=t.pendingProps,Yr(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 3:if(Zr(t),r=t.updateQueue,null===e||null===r)throw Error(s(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,mn(e,t),bn(t,r,null,n),(r=t.memoizedState.element)===i)$n(),t=ci(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Z?(qn=Ge(t.stateNode.containerInfo),Wn=t,o=Jn=!0):o=!1),o){if(Z&&null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)o=e[i],a=e[i+1],X?o._workInProgressVersionPrimary=a:o._workInProgressVersionSecondary=a,er.push(o);for(n=Bn(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Vr(e,t,r,n),$n();t=t.child}return t;case 5:return Hn(t),null===e&&Yn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,j(r,i)?a=null:null!==o&&j(r,o)&&(t.flags|=16),Kr(e,t),Vr(e,t,a,n),t.child;case 6:return null===e&&Yn(t),null;case 13:return ii(e,t,n);case 4:return Un(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ln(t,null,r,n):Vr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jr(e,t,r,i=t.elementType===r?i:tn(r,i),n);case 7:return Vr(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,un(t,o=i.value),null!==a){var u=a.value;if(0==(o=Qt(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!nt.current){t=ci(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=gn(-1,n&-n)).tag=2,vn(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ln(u.return,n),c.lanes|=n;break}l=l.next}}else a=10===u.tag&&u.type===t.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===t){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}}Vr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,hn(t,n),r=r(i=dn(i,o.unstable_observedBits)),t.flags|=1,Vr(e,t,r,n),t.child;case 14:return o=tn(i=t.type,t.pendingProps),Wr(e,t,i,o=tn(i.type,o),r,n);case 15:return qr(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tn(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ot(r)?(e=!0,ct(t)):e=!1,hn(t,n),Sn(t,r,i),Mn(t,r,i,n),Qr(null,t,r,!0,e,n);case 19:return ui(e,t,n);case 23:case 24:return Jr(e,t,n)}throw Error(s(156,t.tag))};var da={current:!1},fa=a.unstable_flushAllWithoutAsserting,pa="function"==typeof fa;function ma(){if(void 0!==fa)return fa();for(var e=!1;ia();)e=!0;return e}function ga(t){try{ma(),function(t){if(null===Xi)try{var n=("require"+Math.random()).slice(0,7);Xi=(e&&e[n]).call(e,"timers").setImmediate}catch(e){Xi=function(e){var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(void 0)}}Xi(t)}((function(){ma()?ga(t):t()}))}catch(e){t(e)}}var va=0,ya=!1;function ba(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(e,t,n,r){return new ba(e,t,n,r)}function xa(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _a(e,t){var n=e.alternate;return null===n?((n=wa(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ea(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)xa(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case h:return Aa(n.children,i,o,t);case _:a=8,i|=16;break;case d:a=8,i|=1;break;case f:return(e=wa(12,n,t,8|i)).elementType=f,e.type=f,e.lanes=o,e;case v:return(e=wa(13,n,t,i)).type=v,e.elementType=v,e.lanes=o,e;case y:return(e=wa(19,n,t,i)).elementType=y,e.lanes=o,e;case E:return Sa(n,i,o,t);case A:return(e=wa(24,n,t,i)).elementType=A,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case p:a=10;break e;case m:a=9;break e;case g:a=11;break e;case b:a=14;break e;case w:a=16,r=null;break e;case x:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=wa(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Aa(e,t,n,r){return(e=wa(7,e,r,t)).lanes=n,e}function Sa(e,t,n,r){return(e=wa(23,e,r,t)).elementType=E,e.lanes=n,e}function Ta(e,t,n){return(e=wa(6,e,null,t)).lanes=n,e}function Ma(e,t,n){return(t=wa(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ca(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=K,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=wt(0),this.expirationTimes=wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wt(0),Z&&(this.mutableSourceEagerHydrationData=null)}function Ia(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return null===(e=L(t))?null:e.stateNode}function Ra(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Pa(e,t){Ra(e,t),(e=e.alternate)&&Ra(e,t)}function La(e){return null===(e=L(e))?null:e.stateNode}function Ba(){return null}return r.IsThisRendererActing=da,r.act=function(e){function t(){va--,$i.current=n,da.current=r}!1===ya&&(ya=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),va++;var n=$i.current,r=da.current;$i.current=!0,da.current=!0;try{var i=Vo(e)}catch(e){throw t(),e}if(null!==i&&"object"==typeof i&&"function"==typeof i.then)return{then:function(e,r){i.then((function(){1<va||!0===pa&&!0===n?(t(),e()):ga((function(n){t(),n?r(n):e()}))}),(function(e){t(),r(e)}))}};try{1!==va||!1!==pa&&!1!==n||ma(),t()}catch(e){throw t(),e}return{then:function(e){e()}}},r.attemptContinuousHydration=function(e){13===e.tag&&(No(e,67108864,Do()),Pa(e,67108864))},r.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Do(),n=Oo(e);No(e,n,t),Pa(e,n)}},r.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.hydrate){var n=mt(t.pendingLanes);t.expiredLanes|=n&t.pendingLanes,Uo(t,Vt()),0==(48&eo)&&(go(),Kt())}break;case 13:var r=Do();jo((function(){return No(e,1,r)})),Pa(e,4)}},r.attemptUserBlockingHydration=function(e){13===e.tag&&(No(e,4,Do()),Pa(e,4))},r.batchedEventUpdates=function(e,t){var n=eo;eo|=2;try{return e(t)}finally{0===(eo=n)&&(go(),Kt())}},r.batchedUpdates=Vo,r.createComponentSelector=function(e){return{$$typeof:Fi,value:e}},r.createContainer=function(e,t,n){return e=new Ca(e,t,n),t=wa(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e,pn(t),e},r.createHasPsuedoClassSelector=function(e){return{$$typeof:Ui,value:e}},r.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},r.createRoleSelector=function(e){return{$$typeof:Gi,value:e}},r.createTestNameSelector=function(e){return{$$typeof:Hi,value:e}},r.createTextSelector=function(e){return{$$typeof:zi,value:e}},r.deferredUpdates=function(e){return qt(97,e)},r.discreteUpdates=function(e,t,n,r,i){var o=eo;eo|=4;try{return qt(98,e.bind(null,t,n,r,i))}finally{0===(eo=o)&&(go(),Kt())}},r.findAllNodes=Ki,r.findBoundingRects=function(e,t){if(!oe)throw Error(s(363));t=Ki(e,t),e=[];for(var n=0;n<t.length;n++)e.push(se(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,a=o+n.height,u=t-1;0<=u;u--)if(t!==u){var c=e[u],l=c.x,h=l+c.width,d=c.y,f=d+c.height;if(r>=l&&o>=d&&i<=h&&a<=f){e.splice(t,1);break}if(!(r!==l||n.width!==c.width||f<o||d>a)){d>o&&(c.height+=d-o,c.y=o),f<a&&(c.height=a-d),e.splice(t,1);break}if(!(o!==d||n.height!==c.height||h<r||l>i)){l>r&&(c.width+=l-r,c.x=r),h<i&&(c.width=i-l),e.splice(t,1);break}}return e},r.findHostInstance=Ia,r.findHostInstanceWithNoPortals=function(e){return null===(e=function(e){if(!(e=P(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:20===e.tag?e.stateNode.instance:e.stateNode},r.findHostInstanceWithWarning=function(e){return Ia(e)},r.flushControlled=function(e){var t=eo;eo|=1;try{qt(99,e)}finally{0===(eo=t)&&(go(),Kt())}},r.flushDiscreteUpdates=function(){0==(49&eo)&&(function(){if(null!==Mo){var e=Mo;Mo=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Uo(e,Vt())}))}Kt()}(),ia())},r.flushPassiveEffects=ia,r.flushSync=jo,r.focusWithin=function(e,t){if(!oe)throw Error(s(363));for(t=Ji(e=ji(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!ce(n)){if(5===n.tag&&he(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},r.getCurrentUpdateLanePriority=function(){return ft},r.getFindAllNodesFailureDescription=function(e,t){if(!oe)throw Error(s(363));var n=0,r=[];e=[ji(e),0];for(var i=0;i<e.length;){var o=e[i++],a=e[i++],u=t[a];if((5!==o.tag||!ce(o))&&(Wi(o,u)&&(r.push(qi(u)),++a>n&&(n=a)),a<t.length))for(o=o.child;null!==o;)e.push(o,a),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(qi(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},r.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return D(e.child.stateNode);default:return e.child.stateNode}},r.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:La,findFiberByHostInstance:e.findFiberByHostInstance||Ba,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{ht=t.inject(e),dt=t}catch(e){}e=!0}return e},r.observeVisibleRects=function(e,t,n,r){if(!oe)throw Error(s(363));e=Ki(e,t);var i=de(e,n,r).disconnect;return{disconnect:function(){i()}}},r.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},r.runWithPriority=function(e,t){var n=ft;try{return ft=e,t()}finally{ft=n}},r.shouldSuspend=function(){return!1},r.unbatchedUpdates=function(e,t){var n=eo;eo&=-2,eo|=8;try{return e(t)}finally{0===(eo=n)&&(go(),Kt())}},r.updateContainer=function(e,t,n,r){var i=t.current,o=Do(),a=Oo(i);e:if(n){t:{if(I(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ot(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var c=n.type;if(ot(c)){n=ut(n,c,u);break e}}n=u}else n=et;return null===t.context?t.context=n:t.pendingContext=n,(t=gn(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),No(i,a,o),a},r}},69:(e,t,n)=>{"use strict";e.exports=n(317)},906:(e,t)=>{"use strict";var n,r,i,o;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,l=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var p=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+y;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(e){throw x.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){v=d((function(){e(t.unstable_now())}),n)},i=function(){f(v),v=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function A(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>S(a,n))void 0!==u&&0>S(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],M=[],C=1,I=null,R=3,P=!1,L=!1,B=!1;function k(e){for(var t=E(M);null!==t;){if(null===t.callback)A(M);else{if(!(t.startTime<=e))break;A(M),t.sortIndex=t.expirationTime,_(T,t)}t=E(M)}}function D(e){if(B=!1,k(e),!L)if(null!==E(T))L=!0,n(O);else{var t=E(M);null!==t&&r(D,t.startTime-e)}}function O(e,n){L=!1,B&&(B=!1,i()),P=!0;var o=R;try{for(k(n),I=E(T);null!==I&&(!(I.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=I.callback;if("function"==typeof a){I.callback=null,R=I.priorityLevel;var s=a(I.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?I.callback=s:I===E(T)&&A(T),k(n)}else A(T);I=E(T)}if(null!==I)var u=!0;else{var c=E(M);null!==c&&r(D,c.startTime-n),u=!1}return u}finally{I=null,R=o,P=!1}}var N=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||P||(L=!0,n(O))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=N,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:o,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,_(M,e),null===E(T)&&e===E(M)&&(B?i():B=!0,r(D,a-s))):(e.sortIndex=u,_(T,e),L||P||(L=!0,n(O))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},431:(e,t,n)=>{"use strict";e.exports=n(906)},202:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{ACESFilmicToneMapping:()=>mB,AddEquation:()=>FL,AddOperation:()=>lB,AdditiveAnimationBlendMode:()=>oD,AdditiveBlending:()=>kL,AlphaFormat:()=>XB,AlwaysDepth:()=>tB,AlwaysStencilFunc:()=>OD,AmbientLight:()=>Vj,AmbientLightProbe:()=>hW,AnimationClip:()=>jV,AnimationLoader:()=>ZV,AnimationMixer:()=>zW,AnimationObjectGroup:()=>GW,AnimationUtils:()=>PV,ArcCurve:()=>aj,ArrayCamera:()=>iH,ArrowHelper:()=>Lq,Audio:()=>_W,AudioAnalyser:()=>CW,AudioContext:()=>uW,AudioListener:()=>xW,AudioLoader:()=>cW,AxesHelper:()=>Bq,AxisHelper:()=>RJ,BackSide:()=>CL,BasicDepthPacking:()=>vD,BasicShadowMap:()=>EL,BinaryTextureLoader:()=>DJ,Bone:()=>VH,BooleanKeyframeTrack:()=>NV,BoundingBoxHelper:()=>PJ,Box2:()=>ZW,Box3:()=>_O,Box3Helper:()=>Mq,BoxBufferGeometry:()=>OF,BoxGeometry:()=>OF,BoxHelper:()=>Tq,BufferAttribute:()=>XN,BufferGeometry:()=>gF,BufferGeometryLoader:()=>Qj,ByteType:()=>FB,Cache:()=>qV,Camera:()=>HF,CameraHelper:()=>Eq,CanvasRenderer:()=>NJ,CanvasTexture:()=>bz,CatmullRomCurve3:()=>dj,CineonToneMapping:()=>pB,CircleBufferGeometry:()=>xz,CircleGeometry:()=>xz,ClampToEdgeWrapping:()=>SB,Clock:()=>mW,Color:()=>WN,ColorKeyframeTrack:()=>FV,CompressedTexture:()=>yz,CompressedTextureLoader:()=>$V,ConeBufferGeometry:()=>Ez,ConeGeometry:()=>Ez,CubeCamera:()=>jF,CubeReflectionMapping:()=>yB,CubeRefractionMapping:()=>bB,CubeTexture:()=>WF,CubeTextureLoader:()=>tj,CubeUVReflectionMapping:()=>_B,CubeUVRefractionMapping:()=>EB,CubicBezierCurve:()=>gj,CubicBezierCurve3:()=>vj,CubicInterpolant:()=>BV,CullFaceBack:()=>wL,CullFaceFront:()=>xL,CullFaceFrontBack:()=>_L,CullFaceNone:()=>bL,Curve:()=>ij,CurvePath:()=>Aj,CustomBlending:()=>NL,CustomToneMapping:()=>gB,CylinderBufferGeometry:()=>_z,CylinderGeometry:()=>_z,Cylindrical:()=>YW,DataTexture:()=>jH,DataTexture2DArray:()=>gU,DataTexture3D:()=>vU,DataTextureLoader:()=>nj,DataUtils:()=>Oq,DecrementStencilOp:()=>SD,DecrementWrapStencilOp:()=>MD,DefaultLoadingManager:()=>KV,DepthFormat:()=>tk,DepthStencilFormat:()=>nk,DepthTexture:()=>wz,DirectionalLight:()=>zj,DirectionalLightHelper:()=>wq,DiscreteInterpolant:()=>DV,DodecahedronBufferGeometry:()=>Sz,DodecahedronGeometry:()=>Sz,DoubleSide:()=>IL,DstAlphaFactor:()=>XL,DstColorFactor:()=>QL,DynamicBufferAttribute:()=>wJ,DynamicCopyUsage:()=>jD,DynamicDrawUsage:()=>FD,DynamicReadUsage:()=>HD,EdgesGeometry:()=>Rz,EdgesHelper:()=>LJ,EllipseCurve:()=>oj,EqualDepth:()=>iB,EqualStencilFunc:()=>PD,EquirectangularReflectionMapping:()=>wB,EquirectangularRefractionMapping:()=>xB,Euler:()=>aN,EventDispatcher:()=>KD,ExtrudeBufferGeometry:()=>iV,ExtrudeGeometry:()=>iV,FaceColors:()=>cJ,FileLoader:()=>QV,FlatShading:()=>RL,Float16BufferAttribute:()=>rF,Float32Attribute:()=>CJ,Float32BufferAttribute:()=>iF,Float64Attribute:()=>IJ,Float64BufferAttribute:()=>oF,FloatType:()=>VB,Fog:()=>fH,FogExp2:()=>dH,Font:()=>iW,FontLoader:()=>aW,FrontSide:()=>ML,Frustum:()=>XF,GLBufferAttribute:()=>WW,GLSL1:()=>qD,GLSL3:()=>JD,GammaEncoding:()=>hD,GreaterDepth:()=>aB,GreaterEqualDepth:()=>oB,GreaterEqualStencilFunc:()=>DD,GreaterStencilFunc:()=>BD,GridHelper:()=>mq,Group:()=>oH,HalfFloatType:()=>jB,HemisphereLight:()=>Cj,HemisphereLightHelper:()=>pq,HemisphereLightProbe:()=>lW,IcosahedronBufferGeometry:()=>aV,IcosahedronGeometry:()=>aV,ImageBitmapLoader:()=>nW,ImageLoader:()=>ej,ImageUtils:()=>lO,ImmediateRenderObject:()=>nq,IncrementStencilOp:()=>AD,IncrementWrapStencilOp:()=>TD,InstancedBufferAttribute:()=>Yj,InstancedBufferGeometry:()=>Xj,InstancedInterleavedBuffer:()=>jW,InstancedMesh:()=>ZH,Int16Attribute:()=>AJ,Int16BufferAttribute:()=>$N,Int32Attribute:()=>TJ,Int32BufferAttribute:()=>tF,Int8Attribute:()=>xJ,Int8BufferAttribute:()=>YN,IntType:()=>HB,InterleavedBuffer:()=>mH,InterleavedBufferAttribute:()=>vH,Interpolant:()=>LV,InterpolateDiscrete:()=>Zk,InterpolateLinear:()=>$k,InterpolateSmooth:()=>eD,InvertStencilOp:()=>CD,JSONLoader:()=>FJ,KeepStencilOp:()=>_D,KeyframeTrack:()=>OV,LOD:()=>OH,LatheBufferGeometry:()=>sV,LatheGeometry:()=>sV,Layers:()=>sN,LensFlare:()=>GJ,LessDepth:()=>nB,LessEqualDepth:()=>rB,LessEqualStencilFunc:()=>LD,LessStencilFunc:()=>RD,Light:()=>Mj,LightProbe:()=>qj,Line:()=>oz,Line3:()=>tq,LineBasicMaterial:()=>$H,LineCurve:()=>yj,LineCurve3:()=>bj,LineDashedMaterial:()=>IV,LineLoop:()=>cz,LinePieces:()=>sJ,LineSegments:()=>uz,LineStrip:()=>aJ,LinearEncoding:()=>cD,LinearFilter:()=>LB,LinearInterpolant:()=>kV,LinearMipMapLinearFilter:()=>OB,LinearMipMapNearestFilter:()=>kB,LinearMipmapLinearFilter:()=>DB,LinearMipmapNearestFilter:()=>BB,LinearToneMapping:()=>dB,Loader:()=>XV,LoaderUtils:()=>Kj,LoadingManager:()=>JV,LogLuvEncoding:()=>fD,LoopOnce:()=>Xk,LoopPingPong:()=>Qk,LoopRepeat:()=>Yk,LuminanceAlphaFormat:()=>$B,LuminanceFormat:()=>ZB,MOUSE:()=>vL,Material:()=>FN,MaterialLoader:()=>Jj,Math:()=>aO,MathUtils:()=>aO,Matrix3:()=>uO,Matrix4:()=>YO,MaxEquation:()=>zL,Mesh:()=>kF,MeshBasicMaterial:()=>qN,MeshDepthMaterial:()=>ZG,MeshDistanceMaterial:()=>$G,MeshFaceMaterial:()=>hJ,MeshLambertMaterial:()=>MV,MeshMatcapMaterial:()=>CV,MeshNormalMaterial:()=>TV,MeshPhongMaterial:()=>AV,MeshPhysicalMaterial:()=>EV,MeshStandardMaterial:()=>_V,MeshToonMaterial:()=>SV,MinEquation:()=>HL,MirroredRepeatWrapping:()=>TB,MixOperation:()=>cB,MultiMaterial:()=>dJ,MultiplyBlending:()=>OL,MultiplyOperation:()=>uB,NearestFilter:()=>MB,NearestMipMapLinearFilter:()=>PB,NearestMipMapNearestFilter:()=>IB,NearestMipmapLinearFilter:()=>RB,NearestMipmapNearestFilter:()=>CB,NeverDepth:()=>eB,NeverStencilFunc:()=>ID,NoBlending:()=>LL,NoColors:()=>uJ,NoToneMapping:()=>hB,NormalAnimationBlendMode:()=>iD,NormalBlending:()=>BL,NotEqualDepth:()=>sB,NotEqualStencilFunc:()=>kD,NumberKeyframeTrack:()=>UV,Object3D:()=>xN,ObjectLoader:()=>Zj,ObjectSpaceNormalMap:()=>wD,OctahedronBufferGeometry:()=>uV,OctahedronGeometry:()=>uV,OneFactor:()=>jL,OneMinusDstAlphaFactor:()=>YL,OneMinusDstColorFactor:()=>ZL,OneMinusSrcAlphaFactor:()=>KL,OneMinusSrcColorFactor:()=>qL,OrthographicCamera:()=>Gj,PCFShadowMap:()=>AL,PCFSoftShadowMap:()=>SL,PMREMGenerator:()=>$q,ParametricBufferGeometry:()=>cV,ParametricGeometry:()=>cV,Particle:()=>pJ,ParticleBasicMaterial:()=>vJ,ParticleSystem:()=>mJ,ParticleSystemMaterial:()=>yJ,Path:()=>Sj,PerspectiveCamera:()=>zF,Plane:()=>SN,PlaneBufferGeometry:()=>ZF,PlaneGeometry:()=>ZF,PlaneHelper:()=>Cq,PointCloud:()=>fJ,PointCloudMaterial:()=>gJ,PointLight:()=>Uj,PointLightHelper:()=>lq,Points:()=>mz,PointsMaterial:()=>lz,PolarGridHelper:()=>gq,PolyhedronBufferGeometry:()=>Az,PolyhedronGeometry:()=>Az,PositionalAudio:()=>MW,PropertyBinding:()=>UW,PropertyMixer:()=>IW,QuadraticBezierCurve:()=>wj,QuadraticBezierCurve3:()=>xj,Quaternion:()=>yO,QuaternionKeyframeTrack:()=>HV,QuaternionLinearInterpolant:()=>GV,REVISION:()=>gL,RGBADepthPacking:()=>yD,RGBAFormat:()=>QB,RGBAIntegerFormat:()=>uk,RGBA_ASTC_10x10_Format:()=>Pk,RGBA_ASTC_10x5_Format:()=>Ck,RGBA_ASTC_10x6_Format:()=>Ik,RGBA_ASTC_10x8_Format:()=>Rk,RGBA_ASTC_12x10_Format:()=>Lk,RGBA_ASTC_12x12_Format:()=>Bk,RGBA_ASTC_4x4_Format:()=>wk,RGBA_ASTC_5x4_Format:()=>xk,RGBA_ASTC_5x5_Format:()=>_k,RGBA_ASTC_6x5_Format:()=>Ek,RGBA_ASTC_6x6_Format:()=>Ak,RGBA_ASTC_8x5_Format:()=>Sk,RGBA_ASTC_8x6_Format:()=>Tk,RGBA_ASTC_8x8_Format:()=>Mk,RGBA_BPTC_Format:()=>kk,RGBA_ETC2_EAC_Format:()=>bk,RGBA_PVRTC_2BPPV1_Format:()=>gk,RGBA_PVRTC_4BPPV1_Format:()=>mk,RGBA_S3TC_DXT1_Format:()=>lk,RGBA_S3TC_DXT3_Format:()=>hk,RGBA_S3TC_DXT5_Format:()=>dk,RGBDEncoding:()=>gD,RGBEEncoding:()=>dD,RGBEFormat:()=>ek,RGBFormat:()=>YB,RGBIntegerFormat:()=>sk,RGBM16Encoding:()=>mD,RGBM7Encoding:()=>pD,RGB_ETC1_Format:()=>vk,RGB_ETC2_Format:()=>yk,RGB_PVRTC_2BPPV1_Format:()=>pk,RGB_PVRTC_4BPPV1_Format:()=>fk,RGB_S3TC_DXT1_Format:()=>ck,RGFormat:()=>ok,RGIntegerFormat:()=>ak,RawShaderMaterial:()=>xV,Ray:()=>XO,Raycaster:()=>qW,RectAreaLight:()=>jj,RedFormat:()=>rk,RedIntegerFormat:()=>ik,ReinhardToneMapping:()=>fB,RepeatWrapping:()=>AB,ReplaceStencilOp:()=>ED,ReverseSubtractEquation:()=>GL,RingBufferGeometry:()=>lV,RingGeometry:()=>lV,SRGB8_ALPHA8_ASTC_10x10_Format:()=>qk,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Vk,SRGB8_ALPHA8_ASTC_10x6_Format:()=>jk,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Wk,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Jk,SRGB8_ALPHA8_ASTC_12x12_Format:()=>Kk,SRGB8_ALPHA8_ASTC_4x4_Format:()=>Dk,SRGB8_ALPHA8_ASTC_5x4_Format:()=>Ok,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Nk,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Fk,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Uk,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Gk,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Hk,SRGB8_ALPHA8_ASTC_8x8_Format:()=>zk,Scene:()=>pH,SceneUtils:()=>UJ,ShaderChunk:()=>$F,ShaderLib:()=>tU,ShaderMaterial:()=>GF,ShadowMaterial:()=>wV,Shape:()=>Tj,ShapeBufferGeometry:()=>hV,ShapeGeometry:()=>hV,ShapePath:()=>rW,ShapeUtils:()=>tV,ShortType:()=>UB,Skeleton:()=>JH,SkeletonHelper:()=>uq,SkinnedMesh:()=>zH,SmoothShading:()=>PL,Sphere:()=>HO,SphereBufferGeometry:()=>dV,SphereGeometry:()=>dV,Spherical:()=>XW,SphericalHarmonics3:()=>Wj,SplineCurve:()=>_j,SpotLight:()=>kj,SpotLightHelper:()=>iq,Sprite:()=>LH,SpriteMaterial:()=>yH,SrcAlphaFactor:()=>JL,SrcAlphaSaturateFactor:()=>$L,SrcColorFactor:()=>WL,StaticCopyUsage:()=>VD,StaticDrawUsage:()=>ND,StaticReadUsage:()=>GD,StereoCamera:()=>pW,StreamCopyUsage:()=>WD,StreamDrawUsage:()=>UD,StreamReadUsage:()=>zD,StringKeyframeTrack:()=>zV,SubtractEquation:()=>UL,SubtractiveBlending:()=>DL,TOUCH:()=>yL,TangentSpaceNormalMap:()=>bD,TetrahedronBufferGeometry:()=>fV,TetrahedronGeometry:()=>fV,TextBufferGeometry:()=>pV,TextGeometry:()=>pV,Texture:()=>dO,TextureLoader:()=>rj,TorusBufferGeometry:()=>mV,TorusGeometry:()=>mV,TorusKnotBufferGeometry:()=>gV,TorusKnotGeometry:()=>gV,Triangle:()=>ON,TriangleFanDrawMode:()=>uD,TriangleStripDrawMode:()=>sD,TrianglesDrawMode:()=>aD,TubeBufferGeometry:()=>vV,TubeGeometry:()=>vV,UVMapping:()=>vB,Uint16Attribute:()=>SJ,Uint16BufferAttribute:()=>eF,Uint32Attribute:()=>MJ,Uint32BufferAttribute:()=>nF,Uint8Attribute:()=>_J,Uint8BufferAttribute:()=>QN,Uint8ClampedAttribute:()=>EJ,Uint8ClampedBufferAttribute:()=>ZN,Uniform:()=>VW,UniformsLib:()=>eU,UniformsUtils:()=>UF,UnsignedByteType:()=>NB,UnsignedInt248Type:()=>KB,UnsignedIntType:()=>zB,UnsignedShort4444Type:()=>WB,UnsignedShort5551Type:()=>qB,UnsignedShort565Type:()=>JB,UnsignedShortType:()=>GB,VSMShadowMap:()=>TL,Vector2:()=>sO,Vector3:()=>bO,Vector4:()=>pO,VectorKeyframeTrack:()=>VV,Vertex:()=>bJ,VertexColors:()=>lJ,VideoTexture:()=>vz,WebGL1Renderer:()=>hH,WebGLCubeRenderTarget:()=>qF,WebGLMultipleRenderTargets:()=>gO,WebGLMultisampleRenderTarget:()=>vO,WebGLRenderTarget:()=>mO,WebGLRenderTargetCube:()=>OJ,WebGLRenderer:()=>lH,WebGLUtils:()=>rH,WireframeGeometry:()=>yV,WireframeHelper:()=>BJ,WrapAroundEnding:()=>rD,XHRLoader:()=>kJ,ZeroCurvatureEnding:()=>tD,ZeroFactor:()=>VL,ZeroSlopeEnding:()=>nD,ZeroStencilOp:()=>xD,sRGBEncoding:()=>lD});var i=n(294),o=n(935);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}var d=n(697),f=n.n(d);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){return"/"===e.charAt(0)}function g(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const v=function(e,t){if(!e)throw new Error("Invariant failed")};function y(e){return"/"===e.charAt(0)?e:"/"+e}function b(e){return"/"===e.charAt(0)?e.substr(1):e}function w(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function x(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function _(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function E(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=p({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&m(e),a=t&&m(t),s=o||a;if(e&&m(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var c=0,l=i.length;l>=0;l--){var h=i[l];"."===h?g(i,l):".."===h?(g(i,l),c++):c&&(g(i,l),c--)}if(!s)for(;c--;c)i.unshift("..");!s||""===i[0]||i[0]&&m(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function A(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var S=!("undefined"==typeof window||!window.document||!window.document.createElement);function T(e,t){t(window.confirm(e))}var M="hashchange",C={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+b(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:b,decodePath:y},slash:{encodePath:y,decodePath:y}};function I(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function R(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(I(window.location.href)+"#"+e)}function L(e){void 0===e&&(e={}),S||v(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?T:r,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?x(y(e.basename)):"",u=C[a],c=u.encodePath,l=u.decodePath;function h(){var e=l(R());return s&&(e=w(e,s)),E(e)}var d=A();function f(e){p(G,e),G.length=t.length,d.notifyListeners(G.location,G.action)}var m=!1,g=null;function b(){var e=R(),t=c(e);if(e!==t)P(t);else{var n=h(),r=G.location;if(!m&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(g===_(n))return;g=null,function(e){if(m)m=!1,f();else{d.confirmTransitionTo(e,"POP",i,(function(t){t?f({action:"POP",location:e}):function(e){var t=G.location,n=D.lastIndexOf(_(t));-1===n&&(n=0);var r=D.lastIndexOf(_(e));-1===r&&(r=0);var i=n-r;i&&(m=!0,O(i))}(e)}))}}(n)}}var L=R(),B=c(L);L!==B&&P(B);var k=h(),D=[_(k)];function O(e){t.go(e)}var N=0;function F(e){1===(N+=e)&&1===e?window.addEventListener(M,b):0===N&&window.removeEventListener(M,b)}var U=!1,G={length:t.length,action:"POP",location:k,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=I(window.location.href)),n+"#"+c(s+_(e))},push:function(e,t){var n="PUSH",r=E(e,void 0,void 0,G.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_(r),i=c(s+t);if(R()!==i){g=t,function(e){window.location.hash=e}(i);var o=D.lastIndexOf(_(G.location)),a=D.slice(0,o+1);a.push(t),D=a,f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=E(e,void 0,void 0,G.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=_(r),i=c(s+t);R()!==i&&(g=t,P(i));var o=D.indexOf(_(G.location));-1!==o&&(D[o]=t),f({action:n,location:r})}}))},go:O,goBack:function(){O(-1)},goForward:function(){O(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=d.appendListener(e);return F(1),function(){F(-1),t()}}};return G}var B=1073741823,k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};function D(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}const O=i.createContext||function(e,t){var n,r,o,a="__create-react-context-"+((k[o="__global_unique_id__"]=(k[o]||0)+1)+"__"),s=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=D(t.props.value),t}h(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,i)?(n="function"==typeof t?t(r,i):B,0!=(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(i.Component);s.childContextTypes=((n={})[a]=f().object.isRequired,n);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}h(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?B:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?B:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return u.contextTypes=((r={})[a]=f().object,r),{Provider:s,Consumer:u}};var N=n(658),F=n.n(N),U=n(864);function G(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var H=n(679),z=n.n(H),V=function(e){var t=O();return t.displayName="Router-History",t}(),j=function(e){var t=O();return t.displayName="Router",t}(),W=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}h(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return i.createElement(j.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(V.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);i.Component,i.Component;var q={},J=0;function K(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=q[n]||(q[n]={});if(r[e])return r[e];var i=[],o={regexp:F()(e,i,t),keys:i};return J<1e4&&(r[e]=o,J++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],h=u.slice(1),d=e===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:a.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var X=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this;return i.createElement(j.Consumer,null,(function(t){t||v(!1);var n=e.props.location||t.location,r=p({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?K(n.pathname,e.props):t.match}),o=e.props,a=o.children,s=o.component,u=o.render;return Array.isArray(a)&&0===a.length&&(a=null),i.createElement(j.Provider,{value:r},r.match?a?"function"==typeof a?a(r):a:s?i.createElement(s,r):u?u(r):null:"function"==typeof a?a(r):null)}))},t}(i.Component);i.Component;var Y=function(e){function t(){return e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this;return i.createElement(j.Consumer,null,(function(t){t||v(!1);var n,r,o=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?K(o.pathname,p({},e.props,{path:a})):t.match}})),r?i.cloneElement(n,{location:o,computedMatch:r}):null}))},t}(i.Component),Q=i.useContext;function Z(){return Q(V)}i.Component;var $=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=L(t.props),t}return h(t,e),t.prototype.render=function(){return i.createElement(W,{history:this.history,children:this.props.children})},t}(i.Component),ee=function(e,t){return"function"==typeof e?e(t):e},te=function(e,t){return"string"==typeof e?E(e,null,null,t):e},ne=function(e){return e},re=i.forwardRef;void 0===re&&(re=ne);var ie=re((function(e,t){var n=e.innerRef,r=e.navigate,o=e.onClick,a=G(e,["innerRef","navigate","onClick"]),s=a.target,u=p({},a,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=ne!==re&&t||n,i.createElement("a",u)})),oe=re((function(e,t){var n=e.component,r=void 0===n?ie:n,o=e.replace,a=e.to,s=e.innerRef,u=G(e,["component","replace","to","innerRef"]);return i.createElement(j.Consumer,null,(function(e){e||v(!1);var n=e.history,c=te(ee(a,e.location),e.location),l=c?n.createHref(c):"",h=p({},u,{href:l,navigate:function(){var t=ee(a,e.location);(o?n.replace:n.push)(t)}});return ne!==re?h.ref=t||s:h.innerRef=s,i.createElement(r,h)}))})),ae=function(e){return e},se=i.forwardRef;function ue(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ue(o,r,i,a,s,"next",e)}function s(e){ue(o,r,i,a,s,"throw",e)}a(void 0)}))}}void 0===se&&(se=ae),se((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,o=e.activeClassName,a=void 0===o?"active":o,s=e.activeStyle,u=e.className,c=e.exact,l=e.isActive,h=e.location,d=e.sensitive,f=e.strict,m=e.style,g=e.to,y=e.innerRef,b=G(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return i.createElement(j.Consumer,null,(function(e){e||v(!1);var n=h||e.location,o=te(ee(g,n),n),w=o.pathname,x=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=x?K(n.pathname,{path:x,exact:c,sensitive:d,strict:f}):null,E=!!(l?l(_,n):_),A=E?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(u,a):u,S=E?p({},m,{},s):m,T=p({"aria-current":E&&r||null,className:A,style:S,to:o},b);return ae!==se?T.ref=t||y:T.innerRef=y,i.createElement(oe,T)}))}));var le=n(757),he=n.n(le),de=function(){return(de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var fe=function(e,t){return(fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|c>>6,f=63&c;u||(f=64,a||(d=64)),r.push(n[l],n[h],n[d],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function ge(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ge(e[n],t[n]));return e}var ve=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}var we=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,xe.prototype.create),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),xe=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?_e(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new we(i,s,r);return u},e}();function _e(e,t){return e.replace(Ee,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var Ee=/\{\$([^}]+)}/g;function Ae(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Se(e,t){var n=new Te(e,t);return n.subscribe.bind(n)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();var Te=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=Me),void 0===r.error&&(r.error=Me),void 0===r.complete&&(r.complete=Me);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function Me(){}function Ce(e){return e&&e._delegate?e._delegate:e}var Ie=function(){return(Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Re(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Le(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}Object.create,Object.create;var Be,ke=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),De="[DEFAULT]",Oe=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return e.prototype.get=function(e){void 0===e&&(e=De);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ve;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=Ie({identifier:De,optional:!1},e),n=t.identifier,r=t.optional,i=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:De})}catch(e){}try{for(var r=Re(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Pe(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=De),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var e;return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Le(Le([],Pe(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Pe(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=De),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.instanceIdentifier,i=void 0===r?De:r,o=e.options,a=void 0===o?{}:o,s=this.normalizeInstanceIdentifier(i);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:s,options:a});try{for(var c=Re(this.instancesDeferred.entries()),l=c.next();!l.done;l=c.next()){var h=Pe(l.value,2),d=h[0],f=h[1];s===this.normalizeInstanceIdentifier(d)&&f.resolve(u)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return this.invokeOnInitCallbacks(u,s),u},e.prototype.onInit=function(e){var t=this;return this.onInitCallbacks.add(e),function(){t.onInitCallbacks.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r;try{for(var i=Re(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===De?void 0:t),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(e){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:De:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),Ne=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Oe(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function Fe(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var Ue,Ge=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ue||(Ue={}));var He,ze={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Ve=Ue.INFO,je=((Be={})[Ue.DEBUG]="log",Be[Ue.VERBOSE]="log",Be[Ue.INFO]="info",Be[Ue.WARN]="warn",Be[Ue.ERROR]="error",Be),We=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=je[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,Fe(["["+i+"]  "+e.name+":"],n))}},qe=function(){function e(e){this.name=e,this._logLevel=Ve,this._logHandler=We,this._userLogHandler=null,Ge.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Ue))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?ze[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,Ue.DEBUG],e)),this._logHandler.apply(this,Fe([this,Ue.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,Ue.VERBOSE],e)),this._logHandler.apply(this,Fe([this,Ue.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,Ue.INFO],e)),this._logHandler.apply(this,Fe([this,Ue.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,Ue.WARN],e)),this._logHandler.apply(this,Fe([this,Ue.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,Fe([this,Ue.ERROR],e)),this._logHandler.apply(this,Fe([this,Ue.ERROR],e))},e}();function Je(e){Ge.forEach((function(t){t.setLogLevel(e)}))}var Ke,Xe=((He={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",He["bad-app-name"]="Illegal App name: '{$appName}",He["duplicate-app"]="Firebase App named '{$appName}' already exists",He["app-deleted"]="Firebase App named '{$appName}' already deleted",He["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",He["invalid-log-argument"]="First argument to `onLog` must be null or a function.",He),Ye=new xe("app","Firebase",Xe),Qe="@firebase/app",Ze="[DEFAULT]",$e=((Ke={})[Qe]="fire-core",Ke["@firebase/analytics"]="fire-analytics",Ke["@firebase/app-check"]="fire-app-check",Ke["@firebase/auth"]="fire-auth",Ke["@firebase/database"]="fire-rtdb",Ke["@firebase/functions"]="fire-fn",Ke["@firebase/installations"]="fire-iid",Ke["@firebase/messaging"]="fire-fcm",Ke["@firebase/performance"]="fire-perf",Ke["@firebase/remote-config"]="fire-rc",Ke["@firebase/storage"]="fire-gcs",Ke["@firebase/firestore"]="fire-fst",Ke["fire-js"]="fire-js",Ke["firebase-wrapper"]="fire-js-all",Ke),et=new qe("@firebase/app"),tt=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=ge(void 0,e),this.container=new Ne(t.name),this._addComponent(new ke("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=Ze),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=Ze),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){et.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ye.create("app-deleted",{appName:this.name_})},e}();tt.prototype.name&&tt.prototype.options||tt.prototype.delete||console.log("dc");var nt=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=Ze);var a=o.name;if("string"!=typeof a||!a)throw Ye.create("bad-app-name",{appName:String(a)});if(Ae(t,a))throw Ye.create("duplicate-app",{appName:a});var s=new e(n,o,r);return t[a]=s,s},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=$e[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void et.warn(u.join(" "))}o(new ke(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:Je,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw Ye.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=ze[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Ue[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=Ge;r<i.length;r++)n(i[r])}(e,t)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(!Ae(t,e=e||Ze))throw Ye.create("no-app",{appName:e});return t[e]}function o(o){var a=o.name;if(n.has(a))return et.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[a])throw Ye.create("invalid-app-argument",{appName:a});return e[a]()};void 0!==o.serviceProps&&ge(s,o.serviceProps),r[a]=s,e.prototype[a]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,a).apply(this,o.multipleInstances?e:[])}}for(var u=0,c=Object.keys(t);u<c.length;u++){var l=c[u];t[l]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(tt);return t.INTERNAL=de(de({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){ge(t,e)},createSubscribe:Se,ErrorFactory:xe,deepExtend:ge}),t}(),rt=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){et.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&et.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ot=nt.initializeApp;nt.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return be()&&et.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ot.apply(void 0,e)};var at=nt;!function(e,t){e.INTERNAL.registerComponent(new ke("platform-logger",(function(e){return new rt(e)}),"PRIVATE")),e.registerVersion(Qe,"0.6.22",void 0),e.registerVersion("fire-js","")}(at);const st=at;st.registerVersion("firebase","8.6.3","app"),function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}!function(e,n){if(n){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[e=e[e.length-1]]))!=o&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Qa(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).Qa(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""}function h(){}function d(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function f(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"function"==d(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e){return Object.prototype.hasOwnProperty.call(e,v)&&e[v]||(e[v]=++y)}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function x(e,t,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var E=Date.now;function A(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function S(e){return e}function T(e,t,n){this.code=I+e,this.message=t||R[e]||"",this.a=n||null}function M(e){var t=e&&e.code;return t?new T(t.substring(I.length),e.message,e.serverResponse):null}A(T,Error),T.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},T.prototype.toJSON=function(){return this.w()};var C,I="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function L(e){for(var t in P)if(P[t].id===e)return{firebaseEndpoint:(e=P[t]).Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function B(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function k(e){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function D(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");k.call(this,n+e[r])}function O(e,t){throw new D("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function N(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function F(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function U(){this.b=this.a=null}C=L("__EID__")?"__EID__":void 0,A(k,Error),k.prototype.name="CustomError",A(D,k),D.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var G=new N((function(){return new z}),(function(e){e.reset()}));function H(){var e=bt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function z(){this.next=this.b=this.a=null}U.prototype.add=function(e,t){var n=G.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},z.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},j=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)},W=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},q=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},J=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function K(e,t){return 0<=V(e,t)}function X(e,t){var n;return(n=0<=(t=V(e,t)))&&Array.prototype.splice.call(e,t,1),n}function Y(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1).length}))}function Q(e){return Array.prototype.concat.apply([],arguments)}function Z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var $,ee=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},te=/&/g,ne=/</g,re=/>/g,ie=/"/g,oe=/'/g,ae=/\x00/g,se=/[\x00&<>"']/;function ue(e,t){return-1!=e.indexOf(t)}function ce(e,t){return e<t?-1:e>t?1:0}e:{var le=s.navigator;if(le){var he=le.userAgent;if(he){$=he;break e}}$=""}function de(e){return ue($,e)}function fe(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function pe(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ge.length;o++)n=ge[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ye(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(m(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function be(e,t){this.a=e===Ee&&t||"",this.b=_e}function we(e){return e instanceof be&&e.constructor===be&&e.b===_e?e.a:(O("expected object of type Const, got '"+e+"'"),"type_error:Const")}be.prototype.sa=!0,be.prototype.ra=function(){return this.a},be.prototype.toString=function(){return"Const{"+this.a+"}"};var xe,_e={},Ee={};function Ae(){if(void 0===xe){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(e){s.console&&s.console.error(e.message)}xe=e}else xe=e}return xe}function Se(e,t){this.a=t===Re?e:""}function Te(e){return e instanceof Se&&e.constructor===Se?e.a:(O("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function Me(e,t){var n=we(e);if(!Ie.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=Ae();return new Se(e=t?t.createScriptURL(e):e,Re)}(e=n.replace(Ce,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof be?we(e):encodeURIComponent(String(e))})))}Se.prototype.sa=!0,Se.prototype.ra=function(){return this.a.toString()},Se.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ce=/%{(\w+)}/g,Ie=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Re={};function Pe(e,t){this.a=t===Fe?e:""}function Le(e){return e instanceof Pe&&e.constructor===Pe?e.a:(O("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}Pe.prototype.sa=!0,Pe.prototype.ra=function(){return this.a.toString()},Pe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Be=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,ke=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,De=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Oe(e){if(e instanceof Pe)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),De.test(e))e=new Pe(e,Fe);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(ke);e=t&&Be.test(t[1])?new Pe(e,Fe):null}return e}function Ne(e){return e instanceof Pe?e:(e="object"==typeof e&&e.sa?e.ra():String(e),De.test(e)||(e="about:invalid#zClosurez"),new Pe(e,Fe))}var Fe={},Ue=new Pe("about:invalid#zClosurez",Fe);function Ge(e,t,n){this.a=n===He?e:""}Ge.prototype.sa=!0,Ge.prototype.ra=function(){return this.a.toString()},Ge.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var He={};function ze(e,t,n,r){return e=e instanceof Pe?e:Ne(e),t=t||s,n=n instanceof be?we(n):n||"",t.open(Le(e),n,r,void 0)}function Ve(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function je(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(te,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ne,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(re,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ae,"&#0;"))),e}function We(e){return We[" "](e),e}We[" "]=h;var qe,Je=de("Opera"),Ke=de("Trident")||de("MSIE"),Xe=de("Edge"),Ye=Xe||Ke,Qe=de("Gecko")&&!(ue($.toLowerCase(),"webkit")&&!de("Edge"))&&!(de("Trident")||de("MSIE"))&&!de("Edge"),Ze=ue($.toLowerCase(),"webkit")&&!de("Edge");function $e(){var e=s.document;return e?e.documentMode:void 0}e:{var et="",tt=function(){var e=$;return Qe?/rv:([^\);]+)(\)|;)/.exec(e):Xe?/Edge\/([\d\.]+)/.exec(e):Ke?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ze?/WebKit\/(\S+)/.exec(e):Je?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(tt&&(et=tt?tt[1]:""),Ke){var nt=$e();if(null!=nt&&nt>parseFloat(et)){qe=String(nt);break e}}qe=et}var rt,it={};function ot(e){return function(e,t){var n=it;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=ee(String(qe)).split("."),r=ee(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ce(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ce(0==a[2].length,0==s[2].length)||ce(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}s.document&&Ke?rt=$e()||parseInt(qe,10)||void 0:rt=void 0;var at=rt;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(e){}var ut=!Ke||9<=Number(at);function ct(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function lt(e,t){fe(t,(function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:ft.hasOwnProperty(n)?e.setAttribute(ft[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ht,dt,ft={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pt(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||m(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(p(o)){a="function"==typeof o.item;break e}}a=!1}j(a?Z(o):o,r)}}}function mt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function gt(e){s.setTimeout((function(){throw e}),0)}function vt(e,t){dt||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);dt=function(){e.then(wt)}}else dt=function(){var e=wt;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!de("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ht||(ht=function(){var e=s.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!de("Presto")&&(e=function(){var e=mt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=x((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!de("Trident")&&!de("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Gb;n.Gb=null,e()}},function(e){r.next={Gb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),ht(e)):s.setImmediate(e)}}(),yt||(dt(),yt=!0),bt.add(e,t)}var yt=!1,bt=new U;function wt(){for(var e;e=H();){try{e.a.call(e.b)}catch(e){gt(e)}F(G,e)}yt=!1}function xt(e,t){if(this.a=_t,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){Dt(n,Et,e)}),(function(e){if(!(e instanceof zt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Dt(n,At,e)}))}catch(e){Dt(this,At,e)}}var _t=0,Et=2,At=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Tt=new N((function(){return new St}),(function(e){e.reset()}));function Mt(e,t,n){var r=Tt.get();return r.g=e,r.b=t,r.f=n,r}function Ct(e){if(e instanceof xt)return e;var t=new xt(h);return Dt(t,Et,e),t}function It(e){return new xt((function(t,n){n(e)}))}function Rt(e,t,n){Ot(e,t,n,null)||vt(_(t,e))}function Pt(e){return new xt((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Rt(e[o],_(i,o,!0),_(i,o,!1));else t(r)}))}function Lt(e,t){if(e.a==_t)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_t&&1==r?Lt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ft(n),Ut(n,i,At,t)))}e.c=null}else Dt(e,At,t)}function Bt(e,t){e.b||e.a!=Et&&e.a!=At||Nt(e),e.f?e.f.next=t:e.b=t,e.f=t}function kt(e,t,n,r){var i=Mt(null,null,null);return i.a=new xt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof zt?o(t):e(i)}catch(e){o(e)}}:o})),i.a.c=e,Bt(e,i),i.a}function Dt(e,t,n){e.a==_t&&(e===n&&(t=At,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Ot(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Nt(e),t!=At||n instanceof zt||function(e,t){e.g=!0,vt((function(){e.g&&Ht.call(null,t)}))}(e,n)))}function Ot(e,t,n,r){if(e instanceof xt)return Bt(e,Mt(t||h,n||null,r)),!0;if(B(e))return e.then(t,n,r),!0;if(m(e))try{var i=e.then;if(p(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function Nt(e){e.h||(e.h=!0,vt(e.gc,e))}function Ft(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Ut(e,t,n,r){if(n==At&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Gt(t,n,r);else try{t.c?t.g.call(t.f):Gt(t,n,r)}catch(e){Ht.call(null,e)}F(Tt,t)}function Gt(e,t,n){t==Et?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}xt.prototype.then=function(e,t,n){return kt(this,p(e)?e:null,p(t)?t:null,n)},xt.prototype.$goog_Thenable=!0,(e=xt.prototype).oa=function(e,t){return(e=Mt(e,e,t)).c=!0,Bt(this,e),this},e.o=function(e,t){return kt(this,null,e,t)},e.cancel=function(e){if(this.a==_t){var t=new zt(e);vt((function(){Lt(this,t)}),this)}},e.$c=function(e){this.a=_t,Dt(this,Et,e)},e.ad=function(e){this.a=_t,Dt(this,At,e)},e.gc=function(){for(var e;e=Ft(this);)Ut(this,e,this.a,this.i);this.h=!1};var Ht=gt;function zt(e){k.call(this,e)}function Vt(){0!=jt&&(Wt[g(this)]=this),this.xa=this.xa,this.pa=this.pa}A(zt,k),zt.prototype.name="cancel";var jt=0,Wt={};function qt(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=jt)){var t=g(e);if(0!=jt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Wt[t]}}Vt.prototype.xa=!1,Vt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Jt=Object.freeze||function(e){return e},Kt=!Ke||9<=Number(at),Xt=Ke&&!ot("9"),Yt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",h,t),s.removeEventListener("test",h,t)}catch(e){}return e}();function Qt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Zt(e,t){if(Qt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Qe){e:{try{We(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$t[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Qt.prototype.preventDefault=function(){this.defaultPrevented=!0},A(Zt,Qt);var $t=Jt({2:"touch",3:"pen",4:"mouse"});Zt.prototype.preventDefault=function(){Zt.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Xt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Zt.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),tn=0;function nn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Va=i,this.key=++tn,this.va=this.Pa=!1}function rn(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function on(e){this.src=e,this.a={},this.b=0}function an(e,t){var n=t.type;n in e.a&&X(e.a[n],t)&&(rn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function sn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.va&&o.listener==t&&o.capture==!!n&&o.Va==r)return i}return-1}on.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=sn(e,t,r,i);return-1<a?(t=e[a],n||(t.Pa=!1)):((t=new nn(t,this.src,o,!!r,i)).Pa=n,e.push(t)),t};var un="closure_lm_"+(1e6*Math.random()|0),cn={};function ln(e,t,n,r,i){if(r&&r.once)dn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)ln(e,t[o],n,r,i);else n=xn(n),e&&e[en]?En(e,t,n,m(r)?!!r.capture:!!r,i):hn(e,t,n,!1,r,i)}function hn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=bn(e);if(s||(e[un]=s=new on(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=yn,t=Kt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(mn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function dn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)dn(e,t[o],n,r,i);else n=xn(n),e&&e[en]?An(e,t,n,m(r)?!!r.capture:!!r,i):hn(e,t,n,!0,r,i)}function fn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)fn(e,t[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=xn(n),e&&e[en]?(e=e.v,(t=String(t).toString())in e.a&&-1<(n=sn(o=e.a[t],n,r,i))&&(rn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=bn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=sn(t,n,r,i)),(n=-1<e?t[e]:null)&&pn(n))}function pn(e){if("number"!=typeof e&&e&&!e.va){var t=e.src;if(t&&t[en])an(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=bn(t))?(an(n,e),0==n.b&&(n.src=null,t[un]=null)):rn(e)}}}function mn(e){return e in cn?cn[e]:cn[e]="on"+e}function gn(e,t,n,r){var i=!0;if((e=bn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(e,t){var n=e.listener,r=e.Va||e.src;return e.Pa&&pn(e),n.call(r,t)}function yn(e,t){if(e.va)return!0;if(!Kt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Zt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=gn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=gn(r[i],e,!1,t),n=n&&o}return n}return vn(e,new Zt(t,this))}function bn(e){return(e=e[un])instanceof on?e:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function xn(e){return p(e)?e:(e[wn]||(e[wn]=function(t){return e.handleEvent(t)}),e[wn])}function _n(){Vt.call(this),this.v=new on(this),this.ac=this,this.gb=null}function En(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function An(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Sn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&an(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(e,t,n){if(p(e))n&&(e=x(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=x(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Mn(e){var t=null;return new xt((function(n,r){-1==(t=Tn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw s.clearTimeout(t),e}))}function Cn(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"==typeof e)return e.split("");if(f(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function In(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(f(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Rn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Rn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ln(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Ln(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ln(e,t){return Object.prototype.hasOwnProperty.call(e,t)}A(_n,Vt),_n.prototype[en]=!0,_n.prototype.addEventListener=function(e,t,n,r){ln(this,e,t,n,r)},_n.prototype.removeEventListener=function(e,t,n,r){fn(this,e,t,n,r)},_n.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var r=e.type||e;if("string"==typeof e)e=new Qt(e,n);else if(e instanceof Qt)e.target=e.target||n;else{var i=e;ve(e=new Qt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Sn(a,r,!0,e)&&i}if(i=Sn(a=e.b=n,r,!0,e)&&i,i=Sn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Sn(a=e.b=t[o],r,!1,e)&&i;return i},_n.prototype.Da=function(){if(_n.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)rn(n[r]);delete t.a[e],t.b--}}this.gb=null},(e=Rn.prototype).W=function(){Pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Ln(this.b,e)?this.b[e]:t},e.set=function(e,t){Ln(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof kn?(this.i=void 0!==t?t:e.i,Dn(this,e.c),this.l=e.l,this.a=e.a,On(this,e.g),this.f=e.f,Nn(this,nr(e.b)),this.h=e.h):e&&(n=String(e).match(Bn))?(this.i=!!t,Dn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),On(this,n[4]),this.f=zn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!t,this.b=new Yn(null,this.i))}function Dn(e,t,n){e.c=n?zn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function On(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Nn(e,t,n){t instanceof Yn?(e.b=t,function(e,t){t&&!e.f&&(Qn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($n(this,t),tr(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=Vn(t,Kn)),e.b=new Yn(t,e.i))}function Fn(e,t,n){e.b.set(t,n)}function Un(e,t){return e.b.get(t)}function Gn(e){return e instanceof kn?new kn(e):new kn(e,void 0)}function Hn(e,t,n,r){var i=new kn(null,void 0);return e&&Dn(i,e),t&&(i.a=t),n&&On(i,n),r&&(i.f=r),i}function zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,jn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function jn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Vn(t,Wn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Vn(t,Wn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vn(n,"/"==n.charAt(0)?Jn:qn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Vn(n,Xn)),e.join("")},kn.prototype.resolve=function(e){var t=new kn(this),n=!!e.c;n?Dn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)On(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ue(i,"./")||ue(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Nn(t,nr(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Wn=/[#\/\?@]/g,qn=/[#\?:]/g,Jn=/[#\?]/g,Kn=/[#\?@]/g,Xn=/#/g;function Yn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Qn(e){e.a||(e.a=new Rn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zn(e){var t=In(e);if(void 0===t)throw Error("Keys are undefined");var n=new Yn(null,void 0);e=Cn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?tr(n,i,o):n.add(i,o)}return n}function $n(e,t){Qn(e),t=rr(e,t),Ln(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Ln((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Pn(e)))}function er(e,t){return Qn(e),t=rr(e,t),Ln(e.a.b,t)}function tr(e,t,n){$n(e,t),0<n.length&&(e.c=null,e.a.set(rr(e,t),Z(n)),e.b+=n.length)}function nr(e){var t=new Yn;return t.c=e.c,e.a&&(t.a=new Rn(e.a),t.b=e.b),t}function rr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function ir(e){var t=[];return ar(new or,e,t),t.join("")}function or(){}function ar(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),ar(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&"function"!=typeof(o=t[r])&&(n.push(i),cr(r,n),n.push(":"),ar(e,o,n),i=",");return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":cr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Yn.prototype).add=function(e,t){Qn(this),this.c=null,e=rr(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Qn(this),this.a.forEach((function(n,r){j(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){Qn(this);for(var e=this.a.W(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.W=function(e){Qn(this);var t=[];if("string"==typeof e)er(this,e)&&(t=Q(t,this.a.get(rr(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=Q(t,e[n])}return t},e.set=function(e,t){return Qn(this),this.c=null,er(this,e=rr(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ur=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cr(e,t){t.push('"',e.replace(ur,(function(e){var t=sr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),sr[e]=t),t})),'"')}function lr(){var e=Rr();return Ke&&!!at&&11==at||/Edge\/\d+/.test(e)}function hr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function dr(e,t){t=t||s.window;var n="about:blank";e&&(n=Le(Oe(e)||Ue)),t.location.href=n}function fr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<fr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function pr(e){return!!((e=(e||Rr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function mr(e){e=e||s.window;try{e.close()}catch(e){}}function gr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),r&&(t.target=r,ue(n,"crios/")&&(t.target="_blank")),Mr(Rr())==Sr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Pe?n:Oe(void 0!==n.href?n.href:String(n))||Ue,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((de("iPhone")&&!de("iPod")&&!de("iPad")||de("iPad")||de("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ye(a=mt(document,"A"),"HTMLAnchorElement"),t=t instanceof Pe?t:Ne(t),a.href=Le(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=ze("",r,n,a),e=Le(t),a&&(Ye&&ue(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+je(e)+'">',e=new Ge(e=(r=Ae())?r.createHTML(e):e,null,He),r=a.document)&&(r.write(function(e){return e instanceof Ge&&e.constructor===Ge?e.a:(O("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}(e)),r.close())):(a=ze(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function br(){var e=null;return new xt((function(t){"complete"==s.document.readyState?t():(e=function(){t()},dn(window,"load",e))})).o((function(t){throw fn(window,"load",e),t}))}function wr(e){return e=e||Rr(),!("file:"!==Dr()&&"ionic:"!==Dr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function xr(){var e=s.window;try{return!(!e||e==e.top)}catch(e){return!1}}function _r(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Er(){return st.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":st.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Ar(){var e=Er();return"ReactNative"===e||"Node"===e}var Sr="Firefox",Tr="Chrome";function Mr(e){var t=e.toLowerCase();return ue(t,"opera/")||ue(t,"opr/")||ue(t,"opios/")?"Opera":ue(t,"iemobile")?"IEMobile":ue(t,"msie")||ue(t,"trident/")?"IE":ue(t,"edge/")?"Edge":ue(t,"firefox/")?Sr:ue(t,"silk/")?"Silk":ue(t,"blackberry")?"Blackberry":ue(t,"webos")?"Webos":!ue(t,"safari/")||ue(t,"chrome/")||ue(t,"crios/")||ue(t,"android")?!ue(t,"chrome/")&&!ue(t,"crios/")||ue(t,"edge/")?ue(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Tr:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ir(e,t){t=t||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Mr(i=Rr()):"Worker"===r&&(r=Mr(i=Rr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Rr(){return s.navigator&&s.navigator.userAgent||""}function Pr(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Lr(){try{var e=s.localStorage,t=Gr();if(e)return e.setItem(t,"1"),e.removeItem(t),!lr()||!!s.indexedDB}catch(e){return _r()&&!!s.indexedDB}return!1}function Br(){return(kr()||"chrome-extension:"===Dr()||wr())&&!Ar()&&Lr()&&!_r()}function kr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return s.location&&s.location.protocol||null}function Or(e){return!pr(e=e||Rr())&&Mr(e)!=Sr}function Nr(e){return void 0===e?null:ir(e)}function Fr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ur(e){if(null!==e)return JSON.parse(e)}function Gr(e){return e||Math.floor(1e9*Math.random()).toString()}function Hr(e){return"Safari"!=Mr(e=e||Rr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Vr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Rr(),t=Er(),this.b=pr(e)||"ReactNative"===t}function jr(){var e=s.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Wr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function qr(){return!(!Pr("fireauth.oauthhelper",s)&&!Pr("fireauth.iframe",s))}Vr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!=typeof e.onLine||!kr()&&"chrome-extension:"!==Dr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Jr,Kr={};function Xr(e){Kr[e]||(Kr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Yr={};Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Yr,"abcd",{configurable:!0,enumerable:!0,value:2}),Jr=2==Yr.abcd}catch(e){Jr=!1}function Qr(e,t,n){Jr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Zr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Qr(e,n,t[n])}function $r(e){var t={};return Zr(t,e),t}function ei(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Qr(t,n,ei(e[n]));return t}function ti(e){var t=e&&(e[ai]?"phone":null);if(!(t&&e&&e[oi]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",e[oi]),Qr(this,"displayName",e[ri]||null);var n=null;e[ii]&&(n=new Date(e[ii]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",t)}function ni(e){try{var t=new si(e)}catch(e){t=null}return t}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",ai="phoneInfo";function si(e){ti.call(this,e),Qr(this,"phoneNumber",e[ai])}function ui(e){var t={},n=e[di],r=e[pi],i=e[mi];if(e=ni(e[fi]),!i||i!=li&&i!=hi&&!n||i==hi&&!r||i==ci&&!e)throw Error("Invalid checkActionCode response!");i==hi?(t[vi]=n||null,t[bi]=n||null,t[gi]=r):(t[vi]=r||null,t[bi]=r||null,t[gi]=n||null),t[yi]=e||null,Qr(this,xi,i),Qr(this,wi,ei(t))}A(si,ti),si.prototype.w=function(){var e=si.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var ci="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",hi="VERIFY_AND_CHANGE_EMAIL",di="email",fi="mfaInfo",pi="newEmail",mi="requestType",gi="email",vi="fromEmail",yi="multiFactorInfo",bi="previousEmail",wi="data",xi="operation";function _i(e){var t=Un(e=Gn(e),Ei)||null,n=Un(e,Ai)||null,r=Un(e,Mi)||null;if(r=r&&Ii[r]||null,!t||!n||!r)throw new T("argument-error",Ei+", "+Ai+"and "+Mi+" are required in a valid action code URL.");Zr(this,{apiKey:t,operation:r,code:n,continueUrl:Un(e,Si)||null,languageCode:Un(e,Ti)||null,tenantId:Un(e,Ci)||null})}var Ei="apiKey",Ai="oobCode",Si="continueUrl",Ti="languageCode",Mi="mode",Ci="tenantId",Ii={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:li,verifyAndChangeEmail:hi,verifyEmail:"VERIFY_EMAIL"};function Ri(e){try{return new _i(e)}catch(e){return null}}function Pi(e){var t=e[Oi];if(void 0===t)throw new T("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new T("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Li];if(n&&"object"==typeof n){t=n[Ui];var r=n[Ni];if(n=n[Fi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Ni+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new T("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Li+" property must be a non null object when specified.");if(this.f=null,(t=e[Di])&&"object"==typeof t){if("string"==typeof(t=t[Gi])&&t.length)this.f=t;else if(void 0!==t)throw new T("argument-error",Gi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new T("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(t=e[ki])&&"boolean"!=typeof t)throw new T("argument-error",ki+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Bi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new T("argument-error",Bi+" property must be a non empty string when specified.");this.i=e||null}var Li="android",Bi="dynamicLinkDomain",ki="handleCodeInApp",Di="iOS",Oi="url",Ni="installApp",Fi="minimumVersion",Ui="packageName",Gi="bundleId";function Hi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var zi=null;function Vi(e){var t=Wi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function ji(e){try{return new Vi(e)}catch(e){return null}}function Wi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=function(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=zi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!zi){zi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===zi[o]&&(zi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(e){}return null}Vi.prototype.T=function(){return this.f},Vi.prototype.l=function(){return this.c},Vi.prototype.toString=function(){return this.h};var qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ji=["client_id","response_type","scope","redirect_uri","state"],Ki={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Ji},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Ji},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Ji},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:qi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Xi(e){for(var t in Ki)if(Ki[t].fa==e)return Ki[t];return null}function Yi(e){var t={};t["facebook.com"]=to,t["google.com"]=ro,t["github.com"]=no,t["twitter.com"]=io;var n=e&&e[Zi];try{if(n)return t[n]?new t[n](e):new eo(e);if(void 0!==e[Qi])return new $i(e)}catch(e){}return null}var Qi="idToken",Zi="providerId";function $i(e){var t=e[Zi];if(!t&&e[Qi]){var n=ji(e[Qi]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Qr(this,"providerId",t),Qr(this,"isNewUser",n)}function eo(e){$i.call(this,e),Qr(this,"profile",ei((e=Ur(e.rawUserInfo||"{}"))||{}))}function to(e){if(eo.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(e){if(eo.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function ro(e){if(eo.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(e){if(eo.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",e.screenName||null)}function oo(e){var t=Gn(e),n=Un(t,"link"),r=Un(Gn(n),"link");return t=Un(t,"deep_link_id"),Un(Gn(t),"link")||t||r||n||e}function ao(e,t){if(!e&&!t)throw new T("internal-error","Internal assert: no raw session string available");if(e&&t)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?so:uo}A(eo,$i),A(to,eo),A(no,eo),A(ro,eo),A(io,eo);var so="enroll",uo="signin";function co(){}function lo(e,t){return e.then((function(e){if(e[Za]){var n=ji(e[Za]);if(!n||t!=n.i)throw new T("user-mismatch");return e}throw new T("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==I+"user-not-found"?new T("user-mismatch"):e}))}function ho(e,t){if(!t)throw new T("internal-error","failed to construct a credential");this.a=t,Qr(this,"providerId",e),Qr(this,"signInMethod",e)}function fo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function po(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new ho(e.providerId,e.pendingToken)}catch(e){}return null}function mo(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Qr(this,"idToken",t.idToken),t.accessToken&&Qr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Qr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",t.oauthToken),Qr(this,"secret",t.oauthTokenSecret)}Qr(this,"providerId",e),Qr(this,"signInMethod",n)}function go(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Zn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function vo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new mo(e.providerId,t,e.signInMethod)}catch(e){}}return null}function yo(e,t){this.Qc=t||[],Zr(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(Xi(e)||{}).Ja||null,this.ob=null}function bo(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,e,[])}function wo(e){yo.call(this,e,Ji),this.a=[]}function xo(){wo.call(this,"facebook.com")}function _o(e){if(!e)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new xo).credential({accessToken:t})}function Eo(){wo.call(this,"github.com")}function Ao(e){if(!e)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Eo).credential({accessToken:t})}function So(){wo.call(this,"google.com"),this.Ca("profile")}function To(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new So).credential({idToken:n,accessToken:t})}function Mo(){yo.call(this,"twitter.com",qi)}function Co(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Io(e,t,n){this.a=e,this.f=t,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ro(e){return e&&e.email&&e.password?new Io(e.email,e.password,e.signInMethod):null}function Po(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Lo(e,t){if(!(t=Bo(t)))throw new T("argument-error","Invalid email link!");return new Io(e,t.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Bo(e){return(e=Ri(e=oo(e)))&&e.operation===li?e:null}function ko(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new T("internal-error");this.a=e,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Do(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return j(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new ko(t)}return null}function Oo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function No(e){try{this.a=e||st.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(e,t){if(!e)throw new T("missing-verification-id");if(!t)throw new T("missing-verification-code");return new ko({eb:e,cb:t})}function Uo(e){if(e.temporaryProof&&e.phoneNumber)return new ko({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return To(o,n);case"facebook.com":return _o(n);case"github.com":return Ao(n);case"twitter.com":return Co(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new ho(t,a):new mo(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new wo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function Go(e){if(!e.isOAuthProvider)throw new T("invalid-oauth-provider")}function Ho(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function zo(e){return(e=e||{}).type?new Ho(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&M(e.error),e.postBody,e.tenantId):null}function Vo(){this.b=null,this.a=[]}ao.prototype.Ha=function(){return this.a?Ct(this.a):Ct(this.b)},ao.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ka=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},ho.prototype.ka=function(e){return bs(e,fo(this))},ho.prototype.b=function(e,t){var n=fo(this);return n.idToken=t,ws(e,n)},ho.prototype.c=function(e,t){return lo(xs(e,fo(this)),t)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(e){return bs(e,go(this))},mo.prototype.b=function(e,t){var n=go(this);return n.idToken=t,ws(e,n)},mo.prototype.c=function(e,t){return lo(xs(e,go(this)),t)},mo.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},yo.prototype.Ka=function(e){return this.Ib=me(e),this},A(bo,yo),A(wo,yo),wo.prototype.Ca=function(e){return K(this.a,e)||this.a.push(e),this},wo.prototype.Qb=function(){return Z(this.a)},wo.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},A(xo,wo),Qr(xo,"PROVIDER_ID","facebook.com"),Qr(xo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),A(Eo,wo),Qr(Eo,"PROVIDER_ID","github.com"),Qr(Eo,"GITHUB_SIGN_IN_METHOD","github.com"),A(So,wo),Qr(So,"PROVIDER_ID","google.com"),Qr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),A(Mo,yo),Qr(Mo,"PROVIDER_ID","twitter.com"),Qr(Mo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Io.prototype.ka=function(e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?nu(e,Is,{email:this.a,oobCode:this.f}):nu(e,Qs,{email:this.a,password:this.f})},Io.prototype.b=function(e,t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?nu(e,Rs,{idToken:t,email:this.a,oobCode:this.f}):nu(e,Vs,{idToken:t,email:this.a,password:this.f})},Io.prototype.c=function(e,t){return lo(this.ka(e),t)},Io.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Po,{PROVIDER_ID:"password"}),Zr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ko.prototype.ka=function(e){return e.fb(Oo(this))},ko.prototype.b=function(e,t){var n=Oo(this);return n.idToken=t,nu(e,$s,n)},ko.prototype.c=function(e,t){var n=Oo(this);return n.operation="REAUTH",lo(e=nu(e,eu,n),t)},ko.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},No.prototype.fb=function(e,t){var n=this.a.a;return Ct(t.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=m(e)?e.session:null,o=m(e)?e.phoneNumber:e;return(i&&i.type==so?i.Ha().then((function(e){return function(e,t){return nu(e,Ws,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==uo?i.Ha().then((function(t){return function(e,t){return nu(e,qs,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return nu(e,Hs,t)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(No,{PROVIDER_ID:"phone"}),Zr(No,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var jo,Wo=null;function qo(e){var t="unauthorized-domain",n=void 0,r=Gn(e);e=r.a,"chrome-extension"==(r=r.c)?n=Ve("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Ve("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",T.call(this,t,n)}function Jo(e,t,n){T.call(this,e,n),(e=t||{}).Jb&&Qr(this,"email",e.Jb),e.ea&&Qr(this,"phoneNumber",e.ea),e.credential&&Qr(this,"credential",e.credential),e.Zb&&Qr(this,"tenantId",e.Zb)}function Ko(e){if(e.code){var t=e.code||"";0==t.indexOf(I)&&(t=t.substring(I.length));var n={credential:Uo(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new T(t,e.message||void 0);return new Jo(t,n,e.message)}return null}function Xo(){}function Yo(e){return e.c||(e.c=e.b())}function Qo(){}function Zo(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function $o(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=x(this.qc,this),this.a.onerror=x(this.Sb,this),this.a.onprogress=x(this.rc,this),this.a.ontimeout=x(this.vc,this)}function ta(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function na(e,t,n){this.reset(e,t,n,void 0,void 0)}function ra(e){this.f=e,this.b=this.c=this.a=null}function ia(e,t){this.name=e,this.value=t}A(qo,T),A(Jo,T),Jo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ve(e,t),e},Jo.prototype.toJSON=function(){return this.w()},Xo.prototype.c=null,A(Qo,Xo),Qo.prototype.a=function(){var e=Zo(this);return e?new ActiveXObject(e):new XMLHttpRequest},Qo.prototype.b=function(){var e={};return Zo(this)&&(e[0]=!0,e[1]=!0),e},jo=new Qo,A($o,Xo),$o.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(e=ea.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},e.Sb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},e.vc=function(){this.Sb()},e.rc=function(){this.status=200,ta(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},na.prototype.a=null,na.prototype.reset=function(e,t,n,r,i){r||E(),delete this.a},ia.prototype.toString=function(){return this.name};var oa=new ia("SEVERE",1e3),aa=new ia("WARNING",900),sa=new ia("CONFIG",700),ua=new ia("FINE",500);function ca(e){return e.c?e.c:e.a?ca(e.a):(O("Root logger has no level set."),null)}ra.prototype.log=function(e,t,n){if(e.value>=ca(this).value)for(p(t)&&(t=t()),e=new na(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var la={},ha=null;function da(e){var t;if(ha||(ha=new ra(""),la[""]=ha,ha.c=sa),!(t=la[e])){t=new ra(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=da(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,la[e]=t}return t}function fa(e,t){e&&e.log(ua,t,void 0)}function pa(e){this.f=e}function ma(e){_n.call(this),this.u=e,this.h=void 0,this.readyState=ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=da("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}A(pa,Xo),pa.prototype.a=function(){return new ma(this.f)},pa.prototype.b=function(e){return function(){return e}}({}),A(ma,_n);var ga=0;function va(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function ya(e){e.readyState=4,e.g=null,e.c=null,e.m=null,ba(e)}function ba(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function wa(e){_n.call(this),this.headers=new Rn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=xa,this.u=this.S=!1}(e=ma.prototype).open=function(e,t){if(this.readyState!=ga)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,ba(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ya(this)),this.readyState=ga},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,ba(this)),this.a&&(this.readyState=3,ba(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,va(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ya(this):ba(this),3==this.readyState&&va(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,ya(this))},e.sc=function(e){this.a&&(this.response=e,ya(this))},e.Ua=function(e){var t=this.i;t&&t.log(aa,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&ya(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(aa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(aa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),A(wa,_n);var xa="";wa.prototype.b=da("goog.net.XhrIo");var _a=/^https?$/i,Ea=["POST","PUT"];function Aa(e){return"content-type"==e.toLowerCase()}function Sa(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Ta(e),Ca(e)}function Ta(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Ma(e){if(e.c&&void 0!==a)if(e.C[1]&&4==Ra(e)&&2==Pa(e))fa(e.b,La(e,"Local request error detected and ignored"));else if(e.i&&4==Ra(e))Tn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ra(e)){fa(e.b,La(e,"Request complete")),e.c=!1;try{var t,n=Pa(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Bn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!_a.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Ra(e)?e.a.statusText:""}catch(t){fa(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+Pa(e)+"]",Ta(e)}}finally{Ca(e)}}}function Ca(e,t){if(e.a){Ia(e);var n=e.a,r=e.C[0]?h:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(oa,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Ia(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function Ra(e){return e.a?e.a.readyState:0}function Pa(e){try{return 2<Ra(e)?e.a.status:-1}catch(e){return-1}}function La(e,t){return t+" ["+e.R+" "+e.l+" "+Pa(e)+"]"}function Ba(e){var t=ja;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ka(e,t,n){e.a=!0,e.c=n,e.f=!t,Fa(e)}function Da(e){if(e.a){if(!e.v)throw new Ua(e);e.v=!1}}function Oa(e,t,n,r){e.g.push([t,n,r]),e.a&&Fa(e)}function Na(e){return J(e.g,(function(e){return p(e[1])}))}function Fa(e){if(e.h&&e.a&&Na(e)){var t=e.h,n=za[t];n&&(s.clearTimeout(n.a),delete za[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(B(t)||"function"==typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Na(e)||(n=!0)}}e.c=t,r&&(u=x(e.m,e,!0),r=x(e.m,e,!1),t instanceof Ba?(Oa(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new Ha(t),za[t.a]=t,e.h=t.a)}function Ua(){k.call(this)}function Ga(){k.call(this)}function Ha(e){this.a=s.setTimeout(x(this.c,this),0),this.b=e}(e=wa.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,La(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(fa(this.b,La(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ca(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ca(this,!0)),wa.ab.Da.call(this)},e.Vb=function(){this.xa||(this.O||this.i||this.f?Ma(this):this.Jc())},e.Jc=function(){Ma(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case xa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(oa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fa(this.b,"Can not get response: "+e.message),null}},Ba.prototype.cancel=function(e){if(this.a)this.c instanceof Ba&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Ga(this),Da(this),ka(this,!1,e))}},Ba.prototype.m=function(e,t){this.i=!1,ka(this,e,t)},Ba.prototype.then=function(e,t,n){var r,i,o=new xt((function(e,t){r=e,i=t}));return Oa(this,r,(function(e){e instanceof Ga?o.cancel():i(e)})),o.then(e,t,n)},Ba.prototype.$goog_Thenable=!0,A(Ua,k),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",A(Ga,k),Ga.prototype.message="Deferred was canceled",Ga.prototype.name="CanceledError",Ha.prototype.c=function(){throw delete za[this.a],this.b};var za={};function Va(e){var t={},n=t.document||document,r=Te(e).toString(),i=mt(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Ba(o),u=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Wa(i,!0);var e=new Ka(Ja,"Timeout reached for loading script "+r);Da(a),ka(a,!1,e)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Wa(i,t.xd||!1,u),Da(a),ka(a,!0,null))},i.onerror=function(){Wa(i,!0,u);var e=new Ka(qa,"Error while loading script "+r);Da(a),ka(a,!1,e)},ve(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),lt(i,o),function(e,t){ye(e,"HTMLScriptElement"),e.src=Te(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=l(t.document):(null===c&&(c=l(s.document)),t=c),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function ja(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&Wa(e,!0,this.Ma)}}function Wa(e,t,n){null!=n&&s.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var qa=0,Ja=1;function Ka(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),k.call(this,n),this.code=e}function Xa(e){this.f=e}function Ya(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||$a,this.g=me(e.secureTokenHeaders||es),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||ts,this.a=me(e.firebaseHeaders||ns),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=s.XMLHttpRequest||n&&st.INTERNAL.node&&st.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new pa(self):Ar()?this.f=new Xa(n):this.f=new $o,this.b=null}A(Ka,k),A(Xa,Xo),Xa.prototype.a=function(){return new this.f},Xa.prototype.b=function(){return{}};var Qa,Za="idToken",$a=new Vr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ts=new Vr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function is(e,t){t&&(e.l=os("https://securetoken.googleapis.com/v1/token",t),e.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=os("https://identitytoolkit.googleapis.com/v2/",t))}function os(e,t){return e=Gn(e),t=Gn(t.url),e.f=e.a+e.f,Dn(e,t.c),e.a=t.a,On(e,t.g),e.toString()}function as(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function ss(e,t,n,r,i,o,a){(function(){var e=Rr();return!((e=Mr(e)!=Tr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||Ke&&at&&!(9<at))})()||_r()?e=x(e.u,e):(Qa||(Qa=new xt((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(s[cs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Oa(e,null,t,void 0)}(Va(Me(us,{onload:cs})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=x(e.s,e)),e(t,n,r,i,o,a)}Ya.prototype.T=function(){return this.b},Ya.prototype.u=function(e,t,n,r,i,o){if(_r()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new wa(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return fa(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)})),An(a,"ready",(function(){u&&clearTimeout(u),qt(this)})),An(a,"timeout",(function(){u&&clearTimeout(u),qt(this),t&&t(null)})),function(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():jo.a(),e.C=e.D?Yo(e.D):Yo(jo),e.a.onreadystatechange=x(e.Vb,e);try{fa(e.b,La(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return fa(e.b,La(e,"Error opening Xhr: "+t.message)),void Sa(e,t)}t=r||"";var o=new Rn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(f(e)||"string"==typeof e)j(e,t,void 0);else for(var n=In(e),r=Cn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=Aa,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.Y()),r=s.FormData&&t instanceof s.FormData,!K(Ea,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Ia(e),0<e.g&&(e.u=function(e){return Ke&&ot(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),fa(e.b,La(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=x(e.Ma,e)):e.s=Tn(e.Ma,e.g,e)),fa(e.b,La(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){fa(e.b,La(e,"Send error: "+t.message)),Sa(e,t)}}(a,e,n,r,i)};var us=new be(Ee,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(e){if("string"!=typeof(e=e.email)||!yr.test(e))throw new T("invalid-email")}function hs(e){"email"in e&&ls(e)}function ds(e){if(!e[Za]){if(e.mfaPendingCredential)throw new T("multi-factor-auth-required",null,me(e));throw new T("internal-error")}}function fs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new T("internal-error")}else{if(!e.sessionInfo)throw new T("missing-verification-id");if(!e.code)throw new T("missing-verification-code")}}Ya.prototype.s=function(e,t,n,r,i){var o=this;Qa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ya.prototype.zb=function(){return nu(this,js,{})},Ya.prototype.Bb=function(e,t){return nu(this,zs,{idToken:e,email:t})},Ya.prototype.Cb=function(e,t){return nu(this,Vs,{idToken:e,password:t})};var ps={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(e){if(!e.phoneVerificationInfo)throw new T("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new T("missing-verification-code")}function gs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new T("internal-error")}function vs(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&er(e=new Yn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function ys(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ko(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ko(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ko(e)):e.errorMessage&&(t=ru(e.errorMessage)),t)throw t;ds(e)}function bs(e,t){return t.returnIdpCredential=!0,nu(e,Js,t)}function ws(e,t){return t.returnIdpCredential=!0,nu(e,Xs,t)}function xs(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,nu(e,Ks,t)}function _s(e){if(!e.oobCode)throw new T("invalid-action-code")}(e=Ya.prototype).Db=function(e,t){var n={idToken:e},r=[];return fe(ps,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),nu(this,zs,n)},e.vb=function(e,t){return ve(e={requestType:"PASSWORD_RESET",email:e},t),nu(this,Ns,e)},e.wb=function(e,t){return ve(e={requestType:"EMAIL_SIGNIN",email:e},t),nu(this,ks,e)},e.ub=function(e,t){return ve(e={requestType:"VERIFY_EMAIL",idToken:e},t),nu(this,Ds,e)},e.Eb=function(e,t,n){return ve(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),nu(this,Os,e)},e.fb=function(e){return nu(this,Zs,e)},e.nb=function(e,t){return nu(this,Gs,{oobCode:e,newPassword:t})},e.Ra=function(e){return nu(this,As,{oobCode:e})},e.jb=function(e){return nu(this,Es,{oobCode:e})};var Es={endpoint:"setAccountInfo",A:_s,Z:"email",B:!0},As={endpoint:"resetPassword",A:_s,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new T("internal-error")},B:!0},Ss={endpoint:"signupNewUser",A:function(e){if(ls(e),!e.password)throw new T("weak-password")},G:ds,V:!0,B:!0},Ts={endpoint:"createAuthUri",B:!0},Ms={endpoint:"deleteAccount",N:["idToken"]},Cs={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new T("internal-error")}},Is={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ds,V:!0,B:!0},Rs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ds,V:!0},Ps={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ms,G:ds,B:!0,Na:!0},Ls={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:ds,B:!0,Na:!0},Bs={endpoint:"getAccountInfo"},ks={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new T("internal-error");ls(e)},Z:"email",B:!0},Ds={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new T("internal-error")},Z:"email",B:!0},Os={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new T("internal-error")},Z:"email",B:!0},Ns={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new T("internal-error");ls(e)},Z:"email",B:!0},Fs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Us={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new T("internal-error")}},Gs={endpoint:"resetPassword",A:_s,Z:"email",B:!0},Hs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},zs={endpoint:"setAccountInfo",N:["idToken"],A:hs,V:!0},Vs={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(hs(e),!e.password)throw new T("weak-password")},G:ds,V:!0},js={endpoint:"signupNewUser",G:ds,V:!0,B:!0},Ws={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new T("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},qs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Js={endpoint:"verifyAssertion",A:gs,Ya:vs,G:ys,V:!0,B:!0},Ks={endpoint:"verifyAssertion",A:gs,Ya:vs,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new T("user-not-found");if(e.errorMessage)throw ru(e.errorMessage);ds(e)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(e){if(gs(e),!e.idToken)throw new T("internal-error")},Ya:vs,G:ys,V:!0},Ys={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new T("invalid-custom-token")},G:ds,V:!0,B:!0},Qs={endpoint:"verifyPassword",A:function(e){if(ls(e),!e.password)throw new T("wrong-password")},G:ds,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:fs,G:ds,B:!0},$s={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new T("internal-error");fs(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ko(e);ds(e)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:fs,G:ds,B:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Za]^!!e.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function nu(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.N))return It(new T("internal-error"));var r,i=!!t.Na,o=t.Ub||"POST";return Ct(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o,a){var s=Gn(t+n);Fn(s,"key",e.c),a&&Fn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Fn(s,c,i[c]);return new xt((function(t,n){ss(e,s.toString(),(function(e){e?e.error?n(iu(e,o||{})):t(e):n(new T("network-request-failed"))}),r,u?void 0:ir(Fr(i)),e.a,e.v.get())}))}(e,i?e.i:e.h,t.endpoint,o,n,t.Hb,t.lb||!1)})).then((function(e){return r=e,t.Ya?t.Ya(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new T("internal-error");return r[t.Z]}))}function ru(e){return iu({error:{errors:[{message:e}],code:400,message:e}})}function iu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ve(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],t);return!t&&e&&(t=Nr(e)),new T("internal-error",t)}function ou(e){this.b=e,this.a=null,this.rb=function(e){return(cu||(cu=new xt((function(e,t){function n(){zr(),Pr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){zr(),t(Error("Network Error"))},timeout:su.get()})}if(Pr("gapi.iframes.Iframe"))e();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Pr("gapi.load")?n():t(Error("Network Error"))},Ct(Va(r=Me(au,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw cu=null,e})))).then((function(){return new xt((function(t,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new be(Ee,"https://apis.google.com/js/api.js?onload=%{onload}"),su=new Vr(3e4,6e4),uu=new Vr(5e3,15e3),cu=null;function lu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,e=this.g?Hn((e=Gn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):Hn("https",this.l,null,"/__/auth/iframe"),this.a=e,Fn(this.a,"apiKey",this.h),Fn(this.a,"appName",this.i),this.b=null,this.c=[]}function hu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(e){try{return st.app(e).auth().Ga()}catch(e){return[]}}function fu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pu(e){var t=hr();return function(e){return nu(e,Fs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Gn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Gn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new qo(hr())}))}function mu(e){return e.m||(e.m=br().then((function(){if(!e.u){var t=e.c,n=e.i,r=du(e.b),i=new lu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=Z(r||[]),e.u=i.toString()}e.v=new ou(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.rb.then((function(){e.a.register("authEvent",t,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=zo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Ct(n)}return n.status="ERROR",Ct(n)}))}(e)}))),e.m}function gu(e){return e.l||(e.C=e.c?Ir(e.c,du(e.b)):null,e.l=new Ya(e.g,L(e.i),e.C),e.f&&is(e.l,e.f)),e.l}function vu(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new hu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=me(u||null),e.f=c,e.yb(l).toString()}function yu(e){if(this.a=e||st.INTERNAL.reactNative&&st.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(e){this.b=e,this.a={},this.f=x(this.c,this)}lu.prototype.toString=function(){return this.f?Fn(this.a,"v",this.f):$n(this.a.b,"v"),this.b?Fn(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?Fn(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},hu.prototype.yb=function(e){return this.h=e,this},hu.prototype.toString=function(){if(this.v){var e=Gn(this.v.url);e=Hn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Hn("https",this.u,null,"/__/auth/handler");if(Fn(e,"apiKey",this.s),Fn(e,"appName",this.c),Fn(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=st.app(this.c).auth().la()}catch(e){n=null}for(var r in t.ob=n,Fn(e,"providerId",this.a.providerId),t=Fr((n=this.a).Ib))t[r]=t[r].toString();r=n.Qc,t=me(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.pb&&n.ob&&!t[n.pb]&&(t[n.pb]=n.ob),pe(t)||Fn(e,"customParameters",Nr(t))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Fn(e,"scopes",n.join(",")),this.l?Fn(e,"redirectUrl",this.l):$n(e.b,"redirectUrl"),this.g?Fn(e,"eventId",this.g):$n(e.b,"eventId"),this.i?Fn(e,"v",this.i):$n(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(e,a)&&Fn(e,a,this.b[a]);return this.h?Fn(e,"tid",this.h):$n(e.b,"tid"),this.f?Fn(e,"eid",this.f):$n(e.b,"eid"),(a=du(this.c)).length&&Fn(e,"fw",a.join(",")),e.toString()},(e=fu.prototype).Ob=function(e,t,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return mu(e).then((function(){return function(e,t){return e.rb.then((function(){return new xt((function(n){e.a.send(t.type,t,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&mr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new xt((function(t){return function n(){Mn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return Mn(n).then((function(){t(r)}))}))},e.Xb=function(){var e=Rr();return!Or(e)&&!Hr(e)},e.Tb=function(){return!1},e.Mb=function(e,t,n,r,i,o,a,s){if(!e)return It(new T("popup-blocked"));if(a&&!Or())return this.ma().o((function(t){mr(e),i(t)})),r(),Ct();this.a||(this.a=pu(gu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw mr(e),i(t),t}));return r(),t})).then((function(){Go(n),a||dr(vu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Nb=function(e,t,n,r){this.a||(this.a=pu(gu(this)));var i=this;return this.a.then((function(){Go(t),dr(vu(i.s,i.g,i.b,e,t,hr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return mu(this).then((function(){return e.v.rb})).o((function(){throw e.a=null,new T("network-request-failed")}))},e.$b=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Sa=function(e){Y(this.h,(function(t){return t==e}))},(e=yu.prototype).get=function(e){return Ct(this.a.getItem(e)).then((function(e){return e&&Ur(e)}))},e.set=function(e,t){return Ct(this.a.setItem(e,Nr(t)))},e.U=function(e){return Ct(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var wu,xu=[];function _u(e,t,n){pe(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Eu(e){this.a=e}function Au(e){this.c=e,this.b=!1,this.a=[]}function Su(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return It(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new xt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Tu(e,c),t})).o((function(t){throw Tu(e,c),t}))}function Tu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(e.a,(function(e){return e==t}))}}function Mu(){if(!Pu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;_r()&&self?(this.v=function(){var e=_r()?self:null;if(j(xu,(function(n){n.b==e&&(t=n)})),!t){var t=new bu(e);xu.push(t)}return t}(),_u(this.v,"keyChanged",(function(t,n){return Ou(e).then((function(t){return 0<t.length&&j(e.a,(function(e){e(t)})),{keyProcessed:K(t,n.key)}}))})),_u(this.v,"ping",(function(){return Ct(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?Ct().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Ct(null)}().then((function(t){(e.h=t)&&(e.g=new Au(new Eu(t)),Su(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Cu(e){return new xt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new xt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Cu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Iu(e){return e.i||(e.i=Cu(e)),e.i}function Ru(e,t){var n=0;return new xt((function r(i,o){Iu(e).then(t).then(i).o((function(t){if(!(3<++n))return Iu(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Pu(){try{return!!s.indexedDB}catch(e){return!1}}function Lu(e){return e.objectStore("firebaseLocalStorage")}function Bu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function ku(e){return new xt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Du(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Su(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Ct()}function Ou(e){return Iu(e).then((function(e){var t=Lu(Bu(e,!1));return t.getAll?ku(t.getAll()):new xt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=fr(e.c,n),e.c=n}return r}))}function Nu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Fu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ct().then((function(){if(Pu()){var e=Gr(),r="__sak"+e;return wu||(wu=new Mu),(n=wu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){j(t.a,(function(t){t(e)}))})),e}))}function Uu(){this.a={},this.type="inMemory"}function Gu(){if(!function(){var e="Node"==Er();if(!(e=Hu()||e&&st.INTERNAL.node&&st.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||st.INTERNAL.node.localStorage,this.type="localStorage"}function Hu(){try{var e=s.localStorage,t=Gr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function zu(){this.type="nullStorage"}function Vu(){if(!function(){var e="Node"==Er();if(!(e=ju()||e&&st.INTERNAL.node&&st.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=ju()||st.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ju(){try{var e=s.sessionStorage,t=Gr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Wu(){var e={};e.Browser=Ku,e.Node=Xu,e.ReactNative=Yu,e.Worker=Qu,this.a=e[Er()]}bu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];j(r,(function(t){i.push(Ct().then((function(){return t(e.origin,e.data.data)})))})),Pt(i).then((function(r){var i=[];j(r,(function(e){i.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})})),j(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Eu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Au.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(e=Mu.prototype).set=function(e,t){var n=this,r=!1;return Ru(this,(function(t){return ku((t=Lu(Bu(t,!0))).get(e))})).then((function(i){return Ru(n,(function(o){if(o=Lu(Bu(o,!0)),i)return i.value=t,ku(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,ku(o.add(a))}))})).then((function(){return n.c[e]=t,Du(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return Ru(this,(function(t){return ku(Lu(Bu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return Ru(this,(function(r){return n=!0,t.b++,ku(Lu(Bu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Du(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){Nu(e),function t(){e.f=setTimeout((function(){e.l=Ou(e).then((function(t){0<t.length&&j(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ia=function(e){Y(this.a,(function(t){return t==e})),0==this.a.length&&Nu(this)},(e=Fu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){Y(this.a,(function(t){return t==e}))},(e=Uu.prototype).get=function(e){return Ct(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ct()},e.U=function(e){return delete this.a[e],Ct()},e.ca=function(){},e.ia=function(){},(e=Gu.prototype).get=function(e){var t=this;return Ct().then((function(){return Ur(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ct().then((function(){var r=Nr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Ct().then((function(){t.a.removeItem(e)}))},e.ca=function(e){s.window&&ln(s.window,"storage",e)},e.ia=function(e){s.window&&fn(s.window,"storage",e)},(e=zu.prototype).get=function(){return Ct(null)},e.set=function(){return Ct()},e.U=function(){return Ct()},e.ca=function(){},e.ia=function(){},(e=Vu.prototype).get=function(e){var t=this;return Ct().then((function(){return Ur(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ct().then((function(){var r=Nr(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return Ct().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var qu,Ju,Ku={F:Gu,bb:Vu},Xu={F:Gu,bb:Vu},Yu={F:yu,bb:zu},Qu={F:Gu,bb:zu},Zu={rd:"local",NONE:"none",td:"session"};function $u(){var e=!(Hr(Rr())||!xr()),t=Or(),n=Lr();this.m=e,this.h=t,this.l=n,this.a={},qu||(qu=new Wu),e=qu;try{this.g=!lr()&&qr()||!s.indexedDB?new e.a.F:new Fu(_r()?new Uu:new e.a.F)}catch(e){this.g=new Uu,this.h=!0}try{this.i=new e.a.bb}catch(e){this.i=new Uu}this.v=new Uu,this.f=x(this.Yb,this),this.b={}}function ec(){return Ju||(Ju=new $u),Ju}function tc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function nc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function rc(e,t,n){return n=nc(t,n),"local"==t.F&&(e.b[n]=null),tc(e,t.F).U(n)}function ic(e){e.c&&(clearInterval(e.c),e.c=null)}function oc(e){this.a=e,this.b=ec()}(e=$u.prototype).get=function(e,t){return tc(this,e.F).get(nc(e,t))},e.set=function(e,t,n){var r=nc(e,n),i=this,o=tc(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=nc(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),pe(this.a)&&(tc(this,"local").ca(this.f),this.h||(lr()||!qr())&&s.indexedDB||!this.l||function(e){ic(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Zt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Yb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=nc(e,t),this.a[e]&&(Y(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),pe(this.a)&&(tc(this,"local").ia(this.f),ic(this))},e.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?tc(this,"local").ia(this.f):ic(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.mb(t))},Ke&&at&&10==at&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else j(e,x(this.mb,this))},e.mb=function(e){this.a[e]&&j(this.a[e],(function(e){e()}))};var ac,sc={name:"authEvent",F:"local"};function uc(){this.a=ec()}function cc(e,t){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(vc):vc),this.reset()}A(cc,(function(){this.b=-1}));for(var lc=64,hc=lc-1,dc=[],fc=0;fc<hc;fc++)dc[fc]=0;var pc=Q(128,dc);function mc(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|ac[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function gc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(mc(e),i=0);else{if(!f(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(mc(e),i=0)}}e.c=i,e.g+=n}cc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Z(this.h)};var vc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yc(){cc.call(this,8,bc)}A(yc,cc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new uc,this.g=new oc(this.h),this.f=null,this.b=[],this.a=this.c=null}function xc(e){return new T("invalid-cordova-configuration",e)}function _c(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Ec(e){return e.f||(e.f=e.ma().then((function(){return new xt((function(t){e.Ea((function n(r){return t(r),e.Sa(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Ac(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=oo(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Un(o=Gn(i),"firebaseError")||null))?M(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}_c(e,i)}))}var n=new Ho("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Mn(500).then((function(){return Ac(e).then((function(){r||_c(e,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Pr("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(e){console.error(e)}},Wo||(Wo=new Vo),function(e){var t=Wo;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=Pr("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Ac(e){var t=null;return function(e){return e.b.get(sc,e.a).then((function(e){return zo(e)}))}(e.g).then((function(n){return t=n,rc((n=e.g).b,sc,n.a)})).then((function(){return t}))}function Sc(e){this.a=e,this.b=ec()}(e=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new xt((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):It(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Pr("universalLinks.subscribe",s))throw xc("cordova-universal-links-plugin-fix is not installed");if(void 0===Pr("BuildInfo.packageName",s))throw xc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Pr("cordova.plugins.browsertab.openUrl",s))throw xc("cordova-plugin-browsertab is not installed");if("function"!=typeof Pr("cordova.InAppBrowser.open",s))throw xc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},e.Ob=function(e,t){return t(new T("operation-not-supported-in-this-environment")),Ct()},e.Mb=function(){return It(new T("operation-not-supported-in-this-environment"))},e.$b=function(){return!1},e.Xb=function(){return!0},e.Tb=function(){return!0},e.Nb=function(e,t,n,r){if(this.c)return It(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Ct().then((function(){return Go(t),Ec(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Ho(t,r,null,o,new T("no-auth-event"),null,i),u=Pr("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",s),l={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Rr().toLowerCase().match(/android/))return It(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(e){var t=new yc;gc(t,e),e=[];var n=8*t.g;56>t.c?gc(t,pc,56-t.c):gc(t,pc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(mc(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return q(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),l.sessionId=o;var h=vu(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(sc,a.w(),t)})).then((function(){var t=Pr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof t)throw new T("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=Pr("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Pr("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");t=Rr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new xt((function(e,t){u=function(){var t=Pr("cordova.plugins.browsertab.close",s);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Mn(2e3).then((function(){t(new T("redirect-cancelled-by-user"))})))},l=function(){jr()&&c()},o.addEventListener("resume",c,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(e){return Ac(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},e.Ea=function(e){this.b.push(e),Ec(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ho("unknown",null,null,null,new T("no-auth-event")),e(t))}))},e.Sa=function(e){Y(this.b,(function(t){return t==e}))};var Tc={name:"pendingRedirect",F:"session"};function Mc(e){return rc(e.b,Tc,e.a)}function Cc(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=x(this.s,this),this.b=new Vc,this.C=new Kc,this.g=new Sc(Hc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ic(this.D,this.v,this.m,C,this.J)}function Ic(e,t,n,r,i){var o=st.SDK_VERSION||null;return wr()?new wc(e,t,n,o,r,i):new fu(e,t,n,o,r,i)}function Rc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Pc(e){e.a.Xb()&&Rc(e).o((function(t){var n=new Ho("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Nc(t)&&e.s(n)})),e.a.Tb()||jc(e.b)}function Lc(e,t){K(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Tc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Mc(e.g).then((function(){Rc(e).o((function(t){var n=new Ho("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Nc(t)&&e.s(n)}))})):Pc(e)})).o((function(){Pc(e)}))}function Bc(e,t){Y(e.h,(function(e){return e==t}))}Cc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ic(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(e){if(!e)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return jc(this.b),t};var kc=new Vr(2e3,1e4),Dc=new Vr(3e4,6e4);function Oc(e,t,n,r,i,o,a){return e.a.Mb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Nc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Fc(e,t,n,r,i){var o;return function(e){return e.b.set(Tc,"pending",e.a)}(e.g).then((function(){return e.a.Nb(t,n,r,i).o((function(t){if(Nc(t))throw new T("operation-not-supported-in-this-environment");return o=t,Mc(e.g).then((function(){throw o}))})).then((function(){return e.a.$b()?new xt((function(){})):Mc(e.g).then((function(){return e.qa()})).then((function(){})).o((function(){}))}))}))}function Uc(e,t,n,r,i){return e.a.Ob(r,(function(e){t.na(n,null,e,i)}),kc.get())}Cc.prototype.qa=function(){return this.b.qa()};var Gc={};function Hc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function zc(e,t,n,r){var i=Hc(t,n,r);return Gc[i]||(Gc[i]=new Cc(e,t,n,r)),Gc[i]}function Vc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function jc(e){e.g||(e.g=!0,Jc(e,!1,null,null))}function Wc(e){e.g&&!e.i&&Jc(e,!1,null,null)}function qc(e,t){if(e.b=function(){return Ct(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Jc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return It(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):qc(e,n):qc(e,{user:null}),e.f=[],e.c=[]}function Kc(){}function Xc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function Yc(e,t){this.a=t,Qr(this,"verificationId",e)}function Qc(e,t,n,r){return new No(e).fb(t,n).then((function(e){return new Yc(e,r)}))}function Zc(e){var t=Wi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:e,expirationTime:Wr(1e3*t.exp),authTime:Wr(1e3*t.auth_time),issuedAtTime:Wr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function $c(e,t,n){var r=t&&t[tl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new ao(null,r),this.b=[];var i=this;j(t[el]||[],(function(e){(e=ni(e))&&i.b.push(e)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Vc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Vc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Jc(this,!0,null,e.a),Ct()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){Jc(e,s,t,null)})).o((function(t){Jc(e,s,null,t)}))}(this,e,t):It(new T("invalid-auth-event")):(Jc(this,!1,null,null),Ct())}else It(new T("invalid-auth-event"))},Vc.prototype.qa=function(){var e=this;return new xt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new T("timeout");e.a&&e.a.cancel(),e.a=Mn(Dc.get()).then((function(){e.b||(e.g=!0,Jc(e,!0,null,t))}))}(e))}))},Kc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Ct()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):It(new T("invalid-auth-event"))}else It(new T("invalid-auth-event"))},Yc.prototype.confirm=function(e){return e=Fo(this.verificationId,e),this.a(e)};var el="mfaInfo",tl="mfaPendingCredential";function nl(e,t,n,r){T.call(this,"multi-factor-auth-required",r,t),this.b=new $c(e,t,n),Qr(this,"resolver",this.b)}function rl(e,t,n){if(e&&m(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new nl(t,e.serverResponse,n,e.message)}catch(e){}return null}function il(){}function ol(e){Qr(this,"factorId",e.fa),this.a=e}function al(e){if(ol.call(this,e),this.a.fa!=No.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function sl(e,t){for(var n in Qt.call(this,e),t)this[n]=t[n]}function ul(e,t){this.a=e,this.b=[],this.c=x(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&j(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[oi]=e.uid),e.displayName&&(r[ri]=e.displayName),e.enrollmentTime&&(r[ii]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[ai]=e.phoneNumber);try{t=new si(r)}catch(e){}e=t}else e=null;e&&n.push(e)})),cl(this,n)}function cl(e,t){e.b=t,Qr(e,"enrolledFactors",t)}function ll(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function hl(e,t){e.stop(),e.b=Mn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=s.document,t=null;return jr()||!e?Ct():new xt((function(n){t=function(){jr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){hl(e,!0)})).o((function(t){e.i(t)&&hl(e,!1)}))}function dl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function fl(e,t){void 0===t&&(t=e.b?(t=e.b).a-t.g:0),e.c=Date.now()+1e3*t}function pl(e,t){e.b=ji(t[Za]||""),e.a=t.refreshToken,fl(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function ml(e,t){this.a=e||null,this.b=t||null,Zr(this,{lastSignInTime:Wr(t||null),creationTime:Wr(e||null)})}function gl(e,t,n,r,i,o){Zr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function vl(e,t,n){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=st.SDK_VERSION?Ir(st.SDK_VERSION):null;this.a=new Ya(this.l,L(C),r),e.emulatorConfig&&is(this.a,e.emulatorConfig),this.b=new dl(this.a),Sl(this,t[Za]),pl(this.b,t),Qr(this,"refreshToken",this.b.a),Cl(this,n||{}),_n.call(this),this.R=!1,this.s&&Br()&&(this.i=zc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(e){return new ll((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.aa=x(this.hb,this);var i=this;this.ya=null,this.Oa=function(e){i.wa(e.h)},this.ja=null,this.Aa=function(e){is(i.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){wl(i,e.f)},this.ba=null,this.O=new ul(this,n),Qr(this,"multiFactor",this.O)}function yl(e,t){e.ja&&fn(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&ln(t,"languageCodeChanged",e.Oa)}function bl(e,t){e.X&&fn(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&ln(t,"emulatorConfigChanged",e.Aa)}function wl(e,t){e.$=t,as(e.a,st.SDK_VERSION?Ir(st.SDK_VERSION,e.$):null)}function xl(e,t){e.ba&&fn(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&ln(t,"frameworkChanged",e.Ba)}function _l(e){try{return st.app(e.m).auth()}catch(t){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function El(e){e.D||e.u.b||(e.u.start(),fn(e,"tokenChanged",e.aa),ln(e,"tokenChanged",e.aa))}function Al(e){fn(e,"tokenChanged",e.aa),e.u.stop()}function Sl(e,t){e.za=t,Qr(e,"_lat",t)}function Tl(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return Pt(t).then((function(){return e}))}function Ml(e){e.i&&!e.R&&(e.R=!0,Lc(e.i,e))}function Cl(e,t){Zr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new ml(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Il(){}function Rl(e){return Ct().then((function(){if(e.D)throw new T("app-deleted")}))}function Pl(e){return q(e.providerData,(function(e){return e.providerId}))}function Ll(e,t){t&&(Bl(e,t.providerId),e.providerData.push(t))}function Bl(e,t){Y(e.providerData,(function(e){return e.providerId==t}))}function kl(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Qr(e,t,n)}function Dl(e,t){e!=t&&(Zr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Qr(e,"metadata",function(e){return new ml(e.a,e.b)}(t.metadata)):Qr(e,"metadata",new ml),j(t.providerData,(function(t){Ll(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Qr(e,"refreshToken",e.b.a),cl(e.O,t.O.b))}function Ol(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return nu(e.a,Bs,{idToken:t}).then(x(e.Kc,e))}(e,t).then((function(){return n||kl(e,"isAnonymous",!1),t}))}))}function Nl(e,t){t[Za]&&e.za!=t[Za]&&(pl(e.b,t),e.dispatchEvent(new sl("tokenChanged")),Sl(e,t[Za]),kl(e,"refreshToken",e.b.a))}function Fl(e,t){return Ol(e).then((function(){if(K(Pl(e),t))return Tl(e).then((function(){throw new T("provider-already-linked")}))}))}function Ul(e,t,n){return $r({user:e,credential:Uo(t),additionalUserInfo:t=Yi(t),operationType:n})}function Gl(e,t){return Nl(e,t),e.reload().then((function(){return e}))}function Hl(e,t,n,r,i){if(!Br())return It(new T("operation-not-supported-in-this-environment"));if(e.h&&!i)return It(e.h);var o=Xi(n.providerId),a=Gr(e.uid+":::"),s=null;(!Or()||xr())&&e.s&&n.isOAuthProvider&&(s=vu(e.s,e.l,e.m,t,n,null,a,st.SDK_VERSION||null,null,null,e.tenantId));var u=gr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Vl(e),!i)return e.I().then((function(){}))})).then((function(){return Oc(e.i,u,t,n,a,!!s,e.tenantId)})).then((function(){return new xt((function(n,r){e.na(t,null,new T("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=Uc(e.i,e,t,u,a)}))})).then((function(e){return u&&mr(u),e?$r(e):null})).o((function(e){throw u&&mr(u),e})),jl(e,r,i)}function zl(e,t,n,r,i){if(!Br())return It(new T("operation-not-supported-in-this-environment"));if(e.h&&!i)return It(e.h);var o=null,a=Gr(e.uid+":::");return r=r().then((function(){if(Vl(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Tl(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(Jl,e.w(),t.a)),t})).then((function(){return Fc(e.i,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return Kl(e.ha);throw o})).then((function(){if(o)throw o})),jl(e,r,i)}function Vl(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new T("internal-error");throw new T("auth-domain-config-required")}}function jl(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),It(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new sl("userInvalidated")),e.h=t),t}))}(e,t,n);return e.J.push(r),r.oa((function(){X(e.J,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=rl(t.w(),_l(e),x(e.jc,e))),n||t}))}function Wl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Za]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new vl(t,n,e);return e.providerData&&j(e.providerData,(function(e){e&&Ll(i,$r(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function ql(e){this.a=e,this.b=ec()}$c.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then((function(e){var n=me(t.f);return delete n[el],delete n[tl],ve(n,e),t.g(n)}))},A(nl,T),il.prototype.sb=function(e,t,n){return t.type==so?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),ve(n,{phoneVerificationInfo:Oo(e.a)}),nu(t,Ps,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return ve(n={mfaPendingCredential:n},{phoneVerificationInfo:Oo(e.a)}),nu(t,Ls,n)}))}(this,e,t)},A(ol,il),A(al,ol),A(sl,Qt),(e=ul.prototype).yc=function(e){cl(this,function(e){var t=[];return j(e.mfaInfo||[],(function(e){(e=ni(e))&&t.push(e)})),t}(e.hd))},e.Rb=function(){return this.a.I().then((function(e){return new ao(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Rb().then((function(n){return e.sb(r,n,t)})).then((function(e){return Nl(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return nu(r,tu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=W(t.b,(function(e){return e.uid!=n}));return cl(t,r),Nl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:q(this.b,(function(e){return e.w()}))}}},ll.prototype.start=function(){this.a=this.c,hl(this,!0)},ll.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?It(new T("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?function(e,t){return function(e,t){return new xt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ss(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(iu(e)):e.access_token&&e.refresh_token?n(e):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Zn(t).toString(),e.g,e.m.get()):r(new T("internal-error"))}))}(e.f,t).then((function(t){return e.b=ji(t.access_token),e.a=t.refresh_token,fl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ct(null):Ct({accessToken:this.b.toString(),refreshToken:this.a})},ml.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},A(vl,_n),vl.prototype.wa=function(e){this.ya=e,rs(this.a,e)},vl.prototype.la=function(){return this.ya},vl.prototype.Ga=function(){return Z(this.$)},vl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(vl.prototype,"providerId","firebase"),(e=vl.prototype).reload=function(){var e=this;return jl(this,Rl(this).then((function(){return Ol(e).then((function(){return Tl(e)})).then(Il)})))},e.oc=function(e){return this.I(e).then((function(e){return new Zc(e)}))},e.I=function(e){var t=this;return jl(this,Rl(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new T("internal-error");return e.accessToken!=t.za&&(Sl(t,e.accessToken),t.dispatchEvent(new sl("tokenChanged"))),kl(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new T("internal-error");Cl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?q(e,(function(e){return new gl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Ll(this,t[n]);kl(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new sl("userReloaded",{hd:e}))},e.Lc=function(e){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},e.tb=function(e){var t=this,n=null;return jl(this,e.c(this.a,this.uid).then((function(e){return Nl(t,e),n=Ul(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},e.qb=function(e){var t=this,n=null;return jl(this,Fl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Ul(t,e,"link"),Gl(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return jl(this,Fl(this,"phone").then((function(){return Qc(_l(n),e,t,x(n.qb,n))})))},e.Mc=function(e,t){var n=this;return jl(this,Ct().then((function(){return Qc(_l(n),e,t,x(n.tb,n))})),!0)},e.Bb=function(e){var t=this;return jl(this,this.I().then((function(n){return t.a.Bb(n,e)})).then((function(e){return Nl(t,e),t.reload()})))},e.ed=function(e){var t=this;return jl(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Nl(t,e),t.reload()})))},e.Cb=function(e){var t=this;return jl(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Nl(t,e),t.reload()})))},e.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Rl(this);var t=this;return jl(this,this.I().then((function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Nl(t,e),kl(t,"displayName",e.displayName||null),kl(t,"photoURL",e.photoUrl||null),j(t.providerData,(function(e){"password"===e.providerId&&(Qr(e,"displayName",t.displayName),Qr(e,"photoURL",t.photoURL))})),Tl(t)})).then(Il))},e.cd=function(e){var t=this;return jl(this,Ol(this).then((function(n){return K(Pl(t),e)?function(e,t,n){return nu(e,Cs,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return j(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),j(Pl(t),(function(e){n[e]||Bl(t,e)})),n[No.PROVIDER_ID]||Qr(t,"phoneNumber",null),Tl(t)})):Tl(t).then((function(){throw new T("no-such-provider")}))})))},e.delete=function(){var e=this;return jl(this,this.I().then((function(t){return nu(e.a,Ms,{idToken:t})})).then((function(){e.dispatchEvent(new sl("userDeleted"))}))).then((function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");yl(e,null),bl(e,null),xl(e,null),e.J=[],e.D=!0,Al(e),Qr(e,"refreshToken",null),e.i&&Bc(e.i,e)}))},e.Fb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?x(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?x(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?x(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?x(this.Lb,this):null},e.Ec=function(e){var t=this;return Hl(this,"linkViaPopup",e,(function(){return Fl(t,e.providerId).then((function(){return Tl(t)}))}),!1)},e.Nc=function(e){return Hl(this,"reauthViaPopup",e,(function(){return Ct()}),!0)},e.Fc=function(e){var t=this;return zl(this,"linkViaRedirect",e,(function(){return Fl(t,e.providerId)}),!1)},e.Oc=function(e){return zl(this,"reauthViaRedirect",e,(function(){return Ct()}),!0)},e.Kb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jl(this,this.I().then((function(n){return ws(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Ul(i,e,"link"),Gl(i,e)})).then((function(){return o})))},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jl(this,Ct().then((function(){return lo(xs(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Ul(i,e,"reauthenticate"),Nl(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},e.ub=function(e){var t=this,n=null;return jl(this,this.I().then((function(t){return n=t,void 0===e||pe(e)?{}:Hi(new Pi(e))})).then((function(e){return t.a.ub(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Eb=function(e,t){var n=this,r=null;return jl(this,this.I().then((function(e){return r=e,void 0===t||pe(t)?{}:Hi(new Pi(t))})).then((function(t){return n.a.Eb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return jl(this,e=lo(Ct(e),n.uid).then((function(e){return t=Ul(n,e,"reauthenticate"),Nl(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ve(e,this.metadata.w()),j(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),ve(e,this.O.w()),e};var Jl={name:"redirectUser",F:"session"};function Kl(e){return rc(e.b,Jl,e.a)}function Xl(e){this.a=e,this.b=ec(),this.c=null,this.f=function(e){var t=Zl("local"),n=Zl("session"),r=Zl("none");return function(e,t,n){var r=nc(t,n),i=tc(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Ur(s.localStorage.getItem(r))}catch(e){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(Ql,e.a).then((function(e){return e?Zl(e):t}))}))}))})).then((function(t){return e.c=t,Yl(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(Zl("local"),this.a,x(this.g,this))}function Yl(e,t){var n,r=[];for(n in Zu)Zu[n]!==t&&r.push(rc(e.b,Zl(Zu[n]),e.a));return r.push(rc(e.b,Ql,e.a)),function(e){return new xt((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Rt(e[s],_(o,s),a);else t(i)}))}(r)}Xl.prototype.g=function(){var e=this,t=Zl("local");nh(this,(function(){return Ct().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return Yl(e,"local").then((function(){e.c=t}))}))}))};var Ql={name:"persistence",F:"session"};function Zl(e){return{name:"authUser",F:e}}function $l(e,t){return nh(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function eh(e){return nh(e,(function(){return rc(e.b,e.c,e.a)}))}function th(e,t,n){return nh(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Wl(e||{})}))}))}function nh(e,t){return e.f=e.f.then(t,t),e.f}function rh(e){if(this.l=!1,Qr(this,"settings",new Xc),Qr(this,"app",e),!hh(this).options||!hh(this).options.apiKey)throw new T("invalid-api-key");e=st.SDK_VERSION?Ir(st.SDK_VERSION):null,this.a=new Ya(hh(this).options&&hh(this).options.apiKey,L(C),e),this.R=[],this.s=[],this.O=[],this.hb=st.INTERNAL.createSubscribe(x(this.zc,this)),this.X=void 0,this.bc=st.INTERNAL.createSubscribe(x(this.Ac,this)),ch(this,null),this.i=new Xl(hh(this).options.apiKey+":"+hh(this).name),this.D=new ql(hh(this).options.apiKey+":"+hh(this).name),this.$=mh(this,function(e){var t=hh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(Jl,e.a).then((function(e){return e&&t&&(e.authDomain=t),Wl(e||{})}))}(e.D,hh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),Kl(e.D)}));return mh(e,t)}(e).then((function(){return th(e.i,t,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return $l(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:eh(e.i)}))):null})).then((function(t){ch(e,t||null)}));return mh(e,n)}(this)),this.h=mh(this,function(e){return e.$.then((function(){return uh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(Zl("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=x(this.Zc,this),this.Ba=x(this.da,this),this.ya=x(this.mc,this),this.za=x(this.wc,this),this.Aa=x(this.xc,this),this.b=null,function(e){var t=hh(e).options.authDomain,n=hh(e).options.apiKey;t&&Br()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=zc(t,n,hh(e).name,e.P),Lc(e.b,e),dh(e)&&Ml(dh(e)),e.m){Ml(e.m);var r=e.m;r.wa(e.la()),yl(r,e),wl(r=e.m,e.J),xl(r,e),is((r=e.m).a,e.P),bl(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=x(this.delete,this),this.INTERNAL.logFramework=x(this.Gc,this),this.u=0,_n.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.P){var e=Gn(this.P.url);e=$r({protocol:e.c,host:e.a,port:e.g,options:$r({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.P=null}function ih(e){Qt.call(this,"languageCodeChanged"),this.h=e}function oh(e){Qt.call(this,"emulatorConfigChanged"),this.c=e}function ah(e){Qt.call(this,"frameworkChanged"),this.f=e}function sh(e){return e.Oa||It(new T("auth-domain-config-required"))}function uh(e){if(!Br())return It(new T("operation-not-supported-in-this-environment"));var t=sh(e).then((function(){return e.b.qa()})).then((function(e){return e?$r(e):null}));return mh(e,t)}function ch(e,t){dh(e)&&(function(e,t){Y(e.S,(function(e){return e==t}))}(dh(e),e.Ba),fn(dh(e),"tokenChanged",e.ya),fn(dh(e),"userDeleted",e.za),fn(dh(e),"userInvalidated",e.Aa),Al(dh(e))),t&&(t.S.push(e.Ba),ln(t,"tokenChanged",e.ya),ln(t,"userDeleted",e.za),ln(t,"userInvalidated",e.Aa),0<e.u&&El(t)),Qr(e,"currentUser",t),t&&(t.wa(e.la()),yl(t,e),wl(t,e.J),xl(t,e),is(t.a,e.P),bl(t,e))}function lh(e,t){var n=null,r=null;return mh(e,t.then((function(t){return n=Uo(t),r=Yi(t),function(e,t){var n={};return n.apiKey=hh(e).options.apiKey,n.authDomain=hh(e).options.authDomain,n.appName=hh(e).name,e.P&&(n.emulatorConfig=e.P),e.$.then((function(){return function(e,t,n,r){var i=new vl(e,t);return n&&(i.ha=n),r&&wl(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return dh(e)&&t.uid==dh(e).uid?(Dl(dh(e),t),e.da(t)):(ch(e,t),Ml(t),e.da(t))})).then((function(){ph(e)}))}(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=rl(t.w(),e,x(e.kc,e))),n||t})).then((function(){return $r({user:dh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function hh(e){return e.app}function dh(e){return e.currentUser}function fh(e){return dh(e)&&dh(e)._lat||null}function ph(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](fh(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](fh(e))}}function mh(e,t){return e.R.push(t),t.oa((function(){X(e.R,t)})),t}function gh(){}function vh(){this.a={},this.b=1e12}Xl.prototype.xb=function(e){var t=null,n=this;return function(e){var t=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");e:{for(r in Zu)if(Zu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(Er()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Pu()&&"none"!==e)throw n;break;default:if(!Lr()&&"none"!==e)throw n}}(e),nh(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,Yl(n,e)})).then((function(){if(n.c=Zl(e),t)return n.b.set(n.c,t,n.a)})):Ct()}))},A(rh,_n),A(ih,Qt),A(oh,Qt),A(ah,Qt),(e=rh.prototype).xb=function(e){return mh(this,e=this.i.xb(e))},e.wa=function(e){this.aa===e||this.l||(this.aa=e,rs(this.a,this.aa),this.dispatchEvent(new ih(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=s.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.P){if(!/^https?:\/\//.test(e))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&br().then((function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.P={url:e,ec:t},this.settings.ib=!0,is(this.a,this.P),this.dispatchEvent(new oh(this.P))}},e.Gc=function(e){this.J.push(e),as(this.a,st.SDK_VERSION?Ir(st.SDK_VERSION,this.J):null),this.dispatchEvent(new ah(this.J))},e.Ga=function(){return Z(this.J)},e.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:hh(this).options.apiKey,authDomain:hh(this).options.authDomain,appName:hh(this).name,currentUser:dh(this)&&dh(this).w()}},e.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?x(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return lh(i,bs(i.a,o))}))},e.Xc=function(e){if(!Br())return It(new T("operation-not-supported-in-this-environment"));var t=this,n=Xi(e.providerId),r=Gr(),i=null;(!Or()||xr())&&hh(this).options.authDomain&&e.isOAuthProvider&&(i=vu(hh(this).options.authDomain,hh(this).options.apiKey,hh(this).name,"signInViaPopup",e,null,r,st.SDK_VERSION||null,null,null,this.T(),this.P));var o=gr(i,n&&n.ua,n&&n.ta);return mh(this,n=sh(this).then((function(n){return Oc(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new xt((function(e,n){t.na("signInViaPopup",null,new T("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=Uc(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&mr(o),e?$r(e):null})).o((function(e){throw o&&mr(o),e})))},e.Yc=function(e){if(!Br())return It(new T("operation-not-supported-in-this-environment"));var t=this;return mh(this,sh(this).then((function(){return function(e){return nh(e,(function(){return e.b.set(Ql,e.c.F,e.a)}))}(t.i)})).then((function(){return Fc(t.b,"signInViaRedirect",e,void 0,t.T())})))},e.qa=function(){var e=this;return uh(this).then((function(t){return e.b&&Wc(e.b.b),t})).o((function(t){throw e.b&&Wc(e.b.b),t}))},e.dd=function(e){if(!e)return It(new T("null-user"));if(this.S!=e.tenantId)return It(new T("tenant-id-mismatch"));var t=this,n={};n.apiKey=hh(this).options.apiKey,n.authDomain=hh(this).options.authDomain,n.appName=hh(this).name;var r=function(e,t,n,r){var i=e.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new vl(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&wl(t,r),Dl(t,e),t}(e,n,t.D,t.Ga());return mh(this,this.h.then((function(){if(hh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return dh(t)&&e.uid==dh(t).uid?(Dl(dh(t),e),t.da(e)):(ch(t,r),Ml(r),t.da(r))})).then((function(){ph(t)})))},e.Ab=function(){var e=this;return mh(this,this.h.then((function(){return e.b&&Wc(e.b.b),dh(e)?(ch(e,null),eh(e.i).then((function(){ph(e)}))):Ct()})))},e.Zc=function(){var e=this;return th(this.i,hh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=dh(e)&&t){n=dh(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Dl(dh(e),t),dh(e).I();(dh(e)||t)&&(ch(e,t),t&&(Ml(t),t.ha=e.D),e.b&&Lc(e.b,e),ph(e))}}))},e.da=function(e){return $l(this.i,e)},e.mc=function(){ph(this),this.da(dh(this))},e.wc=function(){this.Ab()},e.xc=function(){this.Ab()},e.kc=function(e){var t=this;return this.h.then((function(){return lh(t,Ct(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(dh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.O.push(t),mh(e,e.h.then((function(){!e.l&&K(e.O,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(fh(e)))})))}(this,(function(){e.next(dh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof e?e(dh(r)):"function"==typeof e.next&&e.next(dh(r))})),this.hb(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof e?e(dh(r)):"function"==typeof e.next&&e.next(dh(r))})),this.bc(e,t,n)},e.nc=function(e){var t=this;return mh(this,this.h.then((function(){return dh(t)?dh(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return lh(t,nu(t.a,Ys,{token:e}))})).then((function(e){var n=e.user;return kl(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return lh(n,nu(n.a,Qs,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return lh(n,nu(n.a,Ss,{email:e,password:t}))}))},e.$a=function(e){var t=this;return this.h.then((function(){return lh(t,e.ka(t.a))}))},e.Sc=function(e){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},e.zb=function(){var e=this;return this.h.then((function(){var t=dh(e);if(t&&t.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return lh(e,e.a.zb()).then((function(t){var n=t.user;return kl(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return dh(this)&&dh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&dh(this)&&El(dh(this))},e.Pc=function(e){var t=this;j(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&dh(this)&&Al(dh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),mh(this,this.h.then((function(){t.l||K(t.s,e)&&e(fh(t))})))},e.removeAuthTokenListener=function(e){Y(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i).b.removeListener(Zl("local"),e.a,this.ja),this.b&&(Bc(this.b,this),Wc(this.b.b)),Promise.resolve()},e.hc=function(e){return mh(this,function(e,t){return nu(e,Ts,{identifier:t,continueUri:kr()?hr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!Bo(e)},e.wb=function(e,t){var n=this;return mh(this,Ct().then((function(){var e=new Pi(t);if(!e.c)throw new T("argument-error",ki+" must be true when sending sign in link to email");return Hi(e)})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.jd=function(e){return this.Ra(e).then((function(e){return e.data.email}))},e.nb=function(e,t){return mh(this,this.a.nb(e,t).then((function(){})))},e.Ra=function(e){return mh(this,this.a.Ra(e).then((function(e){return new ui(e)})))},e.jb=function(e){return mh(this,this.a.jb(e).then((function(){})))},e.vb=function(e,t){var n=this;return mh(this,Ct().then((function(){return void 0===t||pe(t)?{}:Hi(new Pi(t))})).then((function(t){return n.a.vb(e,t)})).then((function(){})))},e.Wc=function(e,t){return mh(this,Qc(this,e,t,x(this.$a,this)))},e.Vc=function(e,t){var n=this;return mh(this,Ct().then((function(){var r=t||hr(),i=Lo(e,r);if(!(r=Bo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.$a(i)})))},gh.prototype.render=function(){},gh.prototype.reset=function(){},gh.prototype.getResponse=function(){},gh.prototype.execute=function(){};var yh=null;function bh(e,t){return(t=wh(t))&&e.a[t]||null}function wh(e){return(e=void 0===e?1e12:e)?e.toString():null}function xh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ct(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function _h(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Eh(){}function Ah(){}vh.prototype.render=function(e,t){return this.a[this.b.toString()]=new xh(e,t),this.b++},vh.prototype.reset=function(e){var t=bh(this,e);e=wh(e),t&&e&&(t.delete(),delete this.a[e])},vh.prototype.getResponse=function(e){return(e=bh(this,e))?e.getResponse():null},vh.prototype.execute=function(e){(e=bh(this,e))&&e.execute()},xh.prototype.getResponse=function(){return _h(this),this.b},xh.prototype.execute=function(){_h(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()}),6e4)}),500))},xh.prototype.delete=function(){_h(this),this.g=!0,clearTimeout(this.a),this.a=null,fn(this.f,"click",this.i)},Qr(Eh,"FACTOR_ID","phone"),Ah.prototype.g=function(){return yh||(yh=new vh),Ct(yh)},Ah.prototype.c=function(){};var Sh=null;function Th(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Mh=new be(Ee,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ch=new Vr(3e4,6e4);Th.prototype.g=function(e){var t=this;return new xt((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Ch.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[t.a]},Ct(Va(Me(Mh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Th.prototype.c=function(){this.b--};var Ih=null;function Rh(e,t,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,a?(Sh||(Sh=new Ah),a=Sh):(Ih||(Ih=new Th),a=Ih),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Bh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[kh],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ct(t)||!this.i&&ct(t).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ya(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ph];this.a[Ph]=function(e){if(Dh(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=Pr(c,s);"function"==typeof t&&t(e)}};var l=this.a[Lh];this.a[Lh]=function(){if(Dh(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=Pr(l,s);"function"==typeof e&&e()}}}var Ph="callback",Lh="expired-callback",Bh="sitekey",kh="size";function Dh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Oh(e,t){return e.h.push(t),t.oa((function(){X(e.h,t)})),t}function Nh(e){if(e.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Fh(e,t,n){var r=!1;try{this.b=n||st.app()}catch(e){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=st.SDK_VERSION?Ir(st.SDK_VERSION,o):null,Rh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,L(C),r)}function Uh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Gh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Gh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new T("argument-error",e+" failed: "+r)}(e=Rh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Oh(this,Ct().then((function(){if(kr()&&!_r())return br();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,nu(e.s,Us,{})})).then((function(t){e.a[Bh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Nh(this);var e=this;return Oh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=ct(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ut&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',je(a.name),'"'),a.type){o.push(' type="',je(a.type),'"');var s={};ve(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=mt(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):lt(o,a)),2<r.length&&pt(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Nh(this);var e=this;return Oh(this,this.render().then((function(t){return new xt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){Y(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Nh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Nh(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ct(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},A(Fh,Rh);var Gh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Hh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function zh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function Vh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function jh(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function Wh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function qh(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Jh(e,t){return m(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function Kh(e){return m(e)&&"string"==typeof e.uid}function Xh(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Yh(e,t){for(var n in t){var r=t[n].name;e[r]=$h(r,e[n],t[n].j)}}function Qh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:_((function(e){return this[e]}),n),set:_((function(e,t,n,r){Uh(e,[n],[r],!0),this[t]=r}),r,n,t[n].kb),enumerable:!0})}}function Zh(e,t,n,r){e[t]=$h(t,n,r)}function $h(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Uh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}Yh(rh.prototype,{jb:{name:"applyActionCode",j:[Hh("code")]},Ra:{name:"checkActionCode",j:[Hh("code")]},nb:{name:"confirmPasswordReset",j:[Hh("code"),Hh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Hh("email"),Hh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Hh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Hh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xh(Vh(),jh(),"nextOrObserver"),jh("opt_error",!0),jh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xh(Vh(),jh(),"nextOrObserver"),jh("opt_error",!0),jh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Hh("email"),Xh(Vh("opt_actionCodeSettings",!0),Wh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Hh("email"),Vh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Hh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[qh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[qh()]},Tc:{name:"signInWithCustomToken",j:[Hh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Hh("email"),Hh("password")]},Vc:{name:"signInWithEmailLink",j:[Hh("email"),Hh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Hh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Xh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof vl)}},Wh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Hh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Hh("url"),Vh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Hh("code")]}}),Qh(rh.prototype,{lc:{name:"languageCode",kb:Xh(Hh(),Wh(),"languageCode")},ti:{name:"tenantId",kb:Xh(Hh(),Wh(),"tenantId")}}),rh.Persistence=Zu,rh.Persistence.LOCAL="local",rh.Persistence.SESSION="session",rh.Persistence.NONE="none",Yh(vl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[qh()]},qb:{name:"linkWithCredential",j:[qh()]},Dc:{name:"linkWithPhoneNumber",j:[Hh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[qh()]},tb:{name:"reauthenticateWithCredential",j:[qh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Hh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Xh(Vh("opt_actionCodeSettings",!0),Wh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Hh(null,!0)]},cd:{name:"unlink",j:[Hh("provider")]},Bb:{name:"updateEmail",j:[Hh("email")]},Cb:{name:"updatePassword",j:[Hh("password")]},ed:{name:"updatePhoneNumber",j:[qh("phone")]},Db:{name:"updateProfile",j:[Vh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Hh("email"),Xh(Vh("opt_actionCodeSettings",!0),Wh(null,!0),"opt_actionCodeSettings",!0)]}}),Yh(vh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Yh(gh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Yh(xt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:zh("appVerificationDisabledForTesting")}}),Yh(Yc.prototype,{confirm:{name:"confirm",j:[Hh("verificationCode")]}}),Zh(co,"fromJSON",(function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[vo,Ro,Do,po],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Xh(Hh(),Vh(),"json")]),Zh(Po,"credential",(function(e,t){return new Io(e,t)}),[Hh("email"),Hh("password")]),Yh(Io.prototype,{w:{name:"toJSON",j:[Hh(null,!0)]}}),Yh(xo.prototype,{Ca:{name:"addScope",j:[Hh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Zh(xo,"credential",_o,[Xh(Hh(),Vh(),"token")]),Zh(Po,"credentialWithLink",Lo,[Hh("email"),Hh("emailLink")]),Yh(Eo.prototype,{Ca:{name:"addScope",j:[Hh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Zh(Eo,"credential",Ao,[Xh(Hh(),Vh(),"token")]),Yh(So.prototype,{Ca:{name:"addScope",j:[Hh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Zh(So,"credential",To,[Xh(Hh(),Xh(Vh(),Wh()),"idToken"),Xh(Hh(),Wh(),"accessToken",!0)]),Yh(Mo.prototype,{Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Zh(Mo,"credential",Co,[Xh(Hh(),Vh(),"token"),Hh("secret",!0)]),Yh(wo.prototype,{Ca:{name:"addScope",j:[Hh("scope")]},credential:{name:"credential",j:[Xh(Hh(),Xh(Vh(),Wh()),"optionsOrIdToken"),Xh(Hh(),Wh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Yh(mo.prototype,{w:{name:"toJSON",j:[Hh(null,!0)]}}),Yh(ho.prototype,{w:{name:"toJSON",j:[Hh(null,!0)]}}),Zh(No,"credential",Fo,[Hh("verificationId"),Hh("verificationCode")]),Yh(No.prototype,{fb:{name:"verifyPhoneNumber",j:[Xh(Hh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?Jh(e.session,so)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?Jh(e.session,uo)&&Kh(e.multiFactorHint):e.session&&e.multiFactorUid?Jh(e.session,uo)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]}}),Yh(ko.prototype,{w:{name:"toJSON",j:[Hh(null,!0)]}}),Yh(T.prototype,{toJSON:{name:"toJSON",j:[Hh(null,!0)]}}),Yh(Jo.prototype,{toJSON:{name:"toJSON",j:[Hh(null,!0)]}}),Yh(qo.prototype,{toJSON:{name:"toJSON",j:[Hh(null,!0)]}}),Yh(nl.prototype,{toJSON:{name:"toJSON",j:[Hh(null,!0)]}}),Yh($c.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}]}}),Yh(ul.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}},Hh("displayName",!0)]},bd:{name:"unenroll",j:[Xh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Kh},Hh(),"multiFactorInfoIdentifier")]}}),Yh(Fh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zh(_i,"parseLink",Ri,[Hh("link")]),Zh(Eh,"assertion",(function(e){return new al(e)}),[qh("phone")]),function(){if(void 0===st||!st.INTERNAL||!st.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:hi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:rh,AuthCredential:co,Error:T};Zh(e,"EmailAuthProvider",Po,[]),Zh(e,"FacebookAuthProvider",xo,[]),Zh(e,"GithubAuthProvider",Eo,[]),Zh(e,"GoogleAuthProvider",So,[]),Zh(e,"TwitterAuthProvider",Mo,[]),Zh(e,"OAuthProvider",wo,[Hh("providerId")]),Zh(e,"SAMLAuthProvider",bo,[Hh("providerId")]),Zh(e,"PhoneAuthProvider",No,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof rh)}}]),Zh(e,"RecaptchaVerifier",Fh,[Xh(Hh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Vh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof st.app.App)}}]),Zh(e,"ActionCodeURL",_i,[]),Zh(e,"PhoneMultiFactorGenerator",Eh,[]),st.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new rh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),st.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:x((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:x(e.nc,e),addAuthTokenListener:x(e.cc,e),removeAuthTokenListener:x(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),st.registerVersion("@firebase/auth","0.16.6"),st.INTERNAL.extendNamespace({User:vl})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ut=function(e,t){return(ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function ct(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var lt,ht="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},dt=dt||{},ft=ht||self;function pt(){}function mt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function gt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var vt="closure_uid_"+(1e9*Math.random()>>>0),yt=0;function bt(e,t,n){return e.call.apply(e.bind,arguments)}function wt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function xt(e,t,n){return(xt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bt:wt).apply(null,arguments)}function _t(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Et(){return Date.now()}function At(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function St(){this.j=this.j,this.i=this.i}St.prototype.j=!1,St.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,vt)&&e[vt]||(e[vt]=++yt)}(this)},St.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Tt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Mt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function Ct(e){return Array.prototype.concat.apply([],arguments)}function It(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Rt(e){return/^[\s\xa0]*$/.test(e)}var Pt,Lt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Bt(e,t){return-1!=e.indexOf(t)}function kt(e,t){return e<t?-1:e>t?1:0}e:{var Dt=ft.navigator;if(Dt){var Ot=Dt.userAgent;if(Ot){Pt=Ot;break e}}Pt=""}function Nt(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ft(e){var t={};for(var n in e)t[n]=e[n];return t}var Ut="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gt(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Ut.length;o++)n=Ut[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ht(e){return Ht[" "](e),e}Ht[" "]=pt;var zt,Vt=Bt(Pt,"Opera"),jt=Bt(Pt,"Trident")||Bt(Pt,"MSIE"),Wt=Bt(Pt,"Edge"),qt=Wt||jt,Jt=Bt(Pt,"Gecko")&&!(Bt(Pt.toLowerCase(),"webkit")&&!Bt(Pt,"Edge"))&&!(Bt(Pt,"Trident")||Bt(Pt,"MSIE"))&&!Bt(Pt,"Edge"),Kt=Bt(Pt.toLowerCase(),"webkit")&&!Bt(Pt,"Edge");function Xt(){var e=ft.document;return e?e.documentMode:void 0}e:{var Yt="",Qt=function(){var e=Pt;return Jt?/rv:([^\);]+)(\)|;)/.exec(e):Wt?/Edge\/([\d\.]+)/.exec(e):jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Kt?/WebKit\/(\S+)/.exec(e):Vt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Qt&&(Yt=Qt?Qt[1]:""),jt){var Zt=Xt();if(null!=Zt&&Zt>parseFloat(Yt)){zt=String(Zt);break e}}zt=Yt}var $t,en={};function tn(e){return function(e,t){var n=en;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=Lt(String(zt)).split("."),r=Lt(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=kt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||kt(0==a[2].length,0==s[2].length)||kt(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}ft.document&&jt?$t=Xt()||parseInt(zt,10)||void 0:$t=void 0;var nn=$t,rn=!jt||9<=Number(nn),on=jt&&!tn("9"),an=function(){if(!ft.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{ft.addEventListener("test",pt,t),ft.removeEventListener("test",pt,t)}catch(e){}return e}();function sn(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function un(e,t){if(sn.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Jt){e:{try{Ht(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:cn[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}sn.prototype.b=function(){this.defaultPrevented=!0},At(un,sn);var cn={2:"touch",3:"pen",4:"mouse"};un.prototype.b=function(){un.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,on)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var ln="closure_listenable_"+(1e6*Math.random()|0),hn=0;function dn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++hn,this.Y=this.Z=!1}function fn(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function pn(e){this.src=e,this.a={},this.b=0}function mn(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=Tt(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function gn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}pn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=gn(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new dn(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var vn="closure_lm_"+(1e6*Math.random()|0),yn={};function bn(e,t,n,r,i){if(r&&r.once)return xn(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)bn(e,t[o],n,r,i);return null}return n=In(n),e&&e[ln]?e.va(t,n,gt(r)?!!r.capture:!!r,i):wn(e,t,n,!1,r,i)}function wn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=gt(i)?!!i.capture:!!i;if(a&&!rn)return null;var s=Mn(e);if(s||(e[vn]=s=new pn(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Tn,t=rn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)an||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(An(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function xn(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)xn(e,t[o],n,r,i);return null}return n=In(n),e&&e[ln]?e.wa(t,n,gt(r)?!!r.capture:!!r,i):wn(e,t,n,!0,r,i)}function _n(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)_n(e,t[o],n,r,i);else r=gt(r)?!!r.capture:!!r,n=In(n),e&&e[ln]?(e=e.c,(t=String(t).toString())in e.a&&-1<(n=gn(o=e.a[t],n,r,i))&&(fn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=Mn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=gn(t,n,r,i)),(n=-1<e?t[e]:null)&&En(n))}function En(e){if("number"!=typeof e&&e&&!e.Y){var t=e.src;if(t&&t[ln])mn(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(An(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Mn(t))?(mn(n,e),0==n.b&&(n.src=null,t[vn]=null)):fn(e)}}}function An(e){return e in yn?yn[e]:yn[e]="on"+e}function Sn(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&En(e),n.call(r,t)}function Tn(e,t){if(e.Y)return!0;if(!rn){if(!t)e:{t=["window","event"];for(var n=ft,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return Sn(e,t=new un(t,this))}return Sn(e,new un(t,this))}function Mn(e){return(e=e[vn])instanceof pn?e:null}var Cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(e){return"function"==typeof e?e:(e[Cn]||(e[Cn]=function(t){return e.handleEvent(t)}),e[Cn])}function Rn(){St.call(this),this.c=new pn(this),this.J=this,this.C=null}function Pn(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,"string"==typeof t)t=new sn(t,e);else if(t instanceof sn)t.target=t.target||e;else{var i=t;Gt(t=new sn(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.a=n[o];i=Ln(a,r,!0,t)&&i}if(i=Ln(a=t.a=e,r,!0,t)&&i,i=Ln(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Ln(a=t.a=n[o],r,!1,t)&&i}function Ln(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&mn(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}At(Rn,St),Rn.prototype[ln]=!0,(lt=Rn.prototype).addEventListener=function(e,t,n,r){bn(this,e,t,n,r)},lt.removeEventListener=function(e,t,n,r){_n(this,e,t,n,r)},lt.G=function(){if(Rn.X.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)fn(n[r]);delete t.a[e],t.b--}}this.C=null},lt.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},lt.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Bn=ft.JSON.stringify;function kn(){this.b=this.a=null}var Dn,On=new(function(){function e(e,t){this.c=e,this.f=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new Fn}),(function(e){e.reset()}));function Nn(){var e=zn,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Fn(){this.next=this.b=this.a=null}function Un(e){ft.setTimeout((function(){throw e}),0)}function Gn(e,t){Dn||function(){var e=ft.Promise.resolve(void 0);Dn=function(){e.then(Vn)}}(),Hn||(Dn(),Hn=!0),zn.add(e,t)}kn.prototype.add=function(e,t){var n=On.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Fn.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Fn.prototype.reset=function(){this.next=this.b=this.a=null};var Hn=!1,zn=new kn;function Vn(){for(var e;e=Nn();){try{e.a.call(e.b)}catch(e){Un(e)}var t=On;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Hn=!1}function jn(e,t){Rn.call(this),this.b=e||1,this.a=t||ft,this.f=xt(this.Za,this),this.g=Et()}function Wn(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function qn(e,t,n){if("function"==typeof e)n&&(e=xt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=xt(e.handleEvent,e)}return 2147483647<Number(t)?-1:ft.setTimeout(e,t||0)}function Jn(e){e.a=qn((function(){e.a=null,e.c&&(e.c=!1,Jn(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}At(jn,Rn),(lt=jn.prototype).aa=!1,lt.M=null,lt.Za=function(){if(this.aa){var e=Et()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Pn(this,"tick"),this.aa&&(Wn(this),this.start()))}},lt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Et())},lt.G=function(){jn.X.G.call(this),Wn(this),delete this.a};var Kn=function(e){function t(t,n){var r=e.call(this)||this;return r.g=t,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(e,t){function n(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Jn(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(ft.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(St);function Xn(e){St.call(this),this.b=e,this.a={}}At(Xn,St);var Yn=[];function Qn(e,t,n,r){Array.isArray(n)||(n&&(Yn[0]=n.toString()),n=Yn);for(var i=0;i<n.length;i++){var o=bn(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Zn(e){Nt(e.a,(function(e,t){this.a.hasOwnProperty(t)&&En(e)}),e),e.a={}}function $n(){this.a=!0}function er(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Bn(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Xn.prototype.G=function(){Xn.X.G.call(this),Zn(this)},Xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$n.prototype.info=function(){};var tr={},nr=null;function rr(){return nr=nr||new Rn}function ir(e){sn.call(this,tr.Fa,e)}function or(e){var t=rr();Pn(t,new ir(t,e))}function ar(e,t){sn.call(this,tr.STAT_EVENT,e),this.stat=t}function sr(e){var t=rr();Pn(t,new ar(t,e))}function ur(e){sn.call(this,tr.Ga,e)}function cr(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return ft.setTimeout((function(){e()}),t)}tr.Fa="serverreachability",At(ir,sn),tr.STAT_EVENT="statevent",At(ar,sn),tr.Ga="timingevent",At(ur,sn);var lr={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},hr={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function dr(){}function fr(e){var t;return(t=e.a)||(t=e.a={}),t}function pr(){}dr.prototype.a=null;var mr,gr={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function vr(){sn.call(this,"d")}function yr(){sn.call(this,"c")}function br(){}function wr(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new Xn(this),this.P=xr,e=qt?125:void 0,this.R=new jn(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}At(vr,sn),At(yr,sn),At(br,dr),mr=new br;var xr=45e3,_r={},Er={};function Ar(e,t,n){e.H=1,e.i=qr(Gr(t)),e.j=n,e.I=!0,Sr(e,null)}function Sr(e,t){e.u=Et(),Cr(e),e.l=Gr(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),oi(n.b,"t",r),e.D=0,e.a=$i(e.g,e.g.C?t:null),0<e.O&&(e.F=new Kn(xt(e.Ca,e,e.a),e.O)),Qn(e.J,e.a,"readystatechange",e.Xa),t=e.B?Ft(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),or(1),function(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.c,e.m,e.l,e.f,e.S,e.j)}function Tr(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=Mr(e,n);if(i==Er){4==t&&(e.h=4,sr(14),r=!1),er(e.c,e.f,null,"[Incomplete Response]");break}if(i==_r){e.h=4,sr(15),er(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}er(e.c,e.f,i,null),Br(e,i)}4==t&&0==n.length&&(e.h=1,sr(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,(t=e.g).a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wi(t),t.F=!0,sr(11))):(er(e.c,e.f,n,"[Invalid Chunked Response]"),Lr(e),Pr(e))}function Mr(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?Er:(n=Number(t.substring(n,r)),isNaN(n)?_r:(r+=1)+n>t.length?Er:(t=t.substr(r,n),e.D=r+n,t))}function Cr(e){e.T=Et()+e.P,Ir(e,e.P)}function Ir(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=cr(xt(e.Va,e),t)}function Rr(e){e.o&&(ft.clearTimeout(e.o),e.o=null)}function Pr(e){0==e.g.v||e.A||Ki(e.g,e)}function Lr(e){Rr(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Wn(e.R),Zn(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Br(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||di(n.b,e)))if(n.I=e.N,!e.C&&di(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;Ji(n),Oi(n)}ji(n),sr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=cr(xt(n.Sa,n),6e3));if(1>=hi(n.b)&&n.ea){try{n.ea()}catch(e){}n.ea=void 0}}else Yi(n,11)}else if((e.C||n.a==e)&&Ji(n),!Rt(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=e.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Bt(l,"spdy")||Bt(l,"quic")||Bt(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(fi(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Wr(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Et()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=e;if((u=n).la=Zi(u,u.C?u.ga:null,u.fa),f.C){pi(u.b,f);var p=f,m=u.D;m&&p.setTimeout(m),p.o&&(Rr(p),Cr(p)),u.a=f}else Vi(u);0<n.g.length&&Ui(n)}else"stop"!=i[0]&&"close"!=i[0]||Yi(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Yi(n,7):Di(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);or(4)}catch(e){}}function kr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(mt(e)||"string"==typeof e)Mt(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(mt(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"==typeof e)return e.split("");if(mt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Dr(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Dr)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Or(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Nr(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Nr(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Nr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(lt=wr.prototype).setTimeout=function(e){this.P=e},lt.Xa=function(e){e=e.target;var t=this.F;t&&3==Pi(e)?t.f():this.Ca(e)},lt.Ca=function(e){try{if(e==this.a)e:{var t=Pi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||3==t&&!qt&&!this.a.$())){this.A||4!=t||7==n||or(8==n||0>=r?3:2),Rr(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rt(a)){var u=a;break t}}u=null}if(!u){this.b=!1,this.h=3,sr(12),Lr(this),Pr(this);break e}er(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Br(this,u)}this.I?(Tr(this,t,o),qt&&this.b&&3==t&&(Qn(this.J,this.R,"tick",this.Wa),this.R.start())):(er(this.c,this.f,o,null),Br(this,o)),4==t&&Lr(this),this.b&&!this.A&&(4==t?Ki(this.g,this):(this.b=!1,Cr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,sr(12)):(this.h=0,sr(13)),Lr(this),Pr(this)}}}catch(e){}},lt.Wa=function(){if(this.a){var e=Pi(this.a),t=this.a.$();this.D<t.length&&(Rr(this),Tr(this,e,t),this.b&&4!=e&&Cr(this))}},lt.cancel=function(){this.A=!0,Lr(this)},lt.Va=function(){this.o=null;var e=Et();0<=e-this.T?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(or(3),sr(17)),Lr(this),this.h=2,Pr(this)):Ir(this,this.T-e)},(lt=Dr.prototype).K=function(){Or(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},lt.L=function(){return Or(this),this.a.concat()},lt.get=function(e,t){return Nr(this.b,e)?this.b[e]:t},lt.set=function(e,t){Nr(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},lt.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Fr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ur(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Ur){this.a=void 0!==t?t:e.a,Hr(this,e.f),this.j=e.j,zr(this,e.c),Vr(this,e.h),this.g=e.g,t=e.b;var n=new ti;n.c=t.c,t.a&&(n.a=new Dr(t.a),n.b=t.b),jr(this,n),this.i=e.i}else e&&(n=String(e).match(Fr))?(this.a=!!t,Hr(this,n[1]||"",!0),this.j=Jr(n[2]||""),zr(this,n[3]||"",!0),Vr(this,n[4]),this.g=Jr(n[5]||"",!0),jr(this,n[6]||"",!0),this.i=Jr(n[7]||"")):(this.a=!!t,this.b=new ti(null,this.a))}function Gr(e){return new Ur(e)}function Hr(e,t,n){e.f=n?Jr(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function zr(e,t,n){e.c=n?Jr(t,!0):t}function Vr(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function jr(e,t,n){t instanceof ti?(e.b=t,function(e,t){t&&!e.f&&(ni(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ri(this,t),oi(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=Kr(t,$r)),e.b=new ti(t,e.a))}function Wr(e,t,n){e.b.set(t,n)}function qr(e){return Wr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Et()).toString(36)),e}function Jr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Kr(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Xr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Xr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ur.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Kr(t,Yr,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Kr(t,Yr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(Kr(n,"/"==n.charAt(0)?Zr:Qr,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Kr(n,ei)),e.join("")};var Yr=/[#\/\?@]/g,Qr=/[#\?:]/g,Zr=/[#\?]/g,$r=/[#\?@]/g,ei=/#/g;function ti(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function ni(e){e.a||(e.a=new Dr,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ri(e,t){ni(e),t=ai(e,t),Nr(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Nr((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Or(e)))}function ii(e,t){return ni(e),t=ai(e,t),Nr(e.a.b,t)}function oi(e,t,n){ri(e,t),0<n.length&&(e.c=null,e.a.set(ai(e,t),It(n)),e.b+=n.length)}function ai(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(lt=ti.prototype).add=function(e,t){ni(this),this.c=null,e=ai(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},lt.forEach=function(e,t){ni(this),this.a.forEach((function(n,r){Mt(n,(function(n){e.call(t,n,r,this)}),this)}),this)},lt.L=function(){ni(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},lt.K=function(e){ni(this);var t=[];if("string"==typeof e)ii(this,e)&&(t=Ct(t,this.a.get(ai(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=Ct(t,e[n])}return t},lt.set=function(e,t){return ni(this),this.c=null,ii(this,e=ai(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},lt.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},lt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var si=function(e,t){this.b=e,this.a=t};function ui(e){this.g=e||ci,e=ft.PerformanceNavigationTiming?0<(e=ft.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(ft.ia&&ft.ia.ya&&ft.ia.ya()&&ft.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var ci=10;function li(e){return!!e.b||!!e.a&&e.a.size>=e.f}function hi(e){return e.b?1:e.a?e.a.size:0}function di(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function fi(e,t){e.a?e.a.add(t):e.b=t}function pi(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function mi(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var i=ct(e.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return It(e.c)}function gi(){}function vi(){this.a=new gi}function yi(e,t,n){var r=n||"";try{kr(e,(function(e,n){var i=e;gt(e)&&(i=Bn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function bi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}ui.prototype.cancel=function(){var e,t;if(this.c=mi(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=ct(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},gi.prototype.stringify=function(e){return ft.JSON.stringify(e,void 0)},gi.prototype.parse=function(e){return ft.JSON.parse(e,void 0)};var wi=ft.JSON.parse;function xi(e){Rn.call(this),this.headers=new Dr,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_i,this.D=this.F=!1}At(xi,Rn);var _i="",Ei=/^https?$/i,Ai=["POST","PUT"];function Si(e){return"content-type"==e.toLowerCase()}function Ti(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Mi(e),Ii(e)}function Mi(e){e.u||(e.u=!0,Pn(e,"complete"),Pn(e,"error"))}function Ci(e){if(e.b&&void 0!==dt&&(!e.s[1]||4!=Pi(e)||2!=e.W()))if(e.l&&4==Pi(e))qn(e.za,0,e);else if(Pn(e,"readystatechange"),4==Pi(e)){e.b=!1;try{var t,n=e.W();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Fr)[1]||null;if(!o&&ft.self&&ft.self.location){var a=ft.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ei.test(o?o.toLowerCase():"")}t=i}if(t)Pn(e,"complete"),Pn(e,"success");else{e.h=6;try{var s=2<Pi(e)?e.a.statusText:""}catch(n){s=""}e.f=s+" ["+e.W()+"]",Mi(e)}}finally{Ii(e)}}}function Ii(e,t){if(e.a){Ri(e);var n=e.a,r=e.s[0]?pt:null;e.a=null,e.s=null,t||Pn(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Ri(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(ft.clearTimeout(e.m),e.m=null)}function Pi(e){return e.a?e.a.readyState:0}function Li(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Nt(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Wr(e,t,n))}function Bi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ki(e){this.pa=0,this.g=[],this.c=new $n,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Bi("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Bi("baseRetryDelayMs",5e3,e),this.Ra=Bi("retryDelaySeedMs",1e4,e),this.Ma=Bi("forwardChannelMaxRetries",2,e),this.ma=Bi("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new ui(e&&e.concurrentRequestLimit),this.ka=new vi,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Di(e){if(Ni(e),3==e.v){var t=e.R++,n=Gr(e.B);Wr(n,"SID",e.J),Wr(n,"RID",t),Wr(n,"TYPE","terminate"),Hi(e,n),(t=new wr(e,e.c,t,void 0)).H=2,t.i=qr(Gr(n)),n=!1,ft.navigator&&ft.navigator.sendBeacon&&(n=ft.navigator.sendBeacon(t.i.toString(),"")),!n&&ft.Image&&((new Image).src=t.i,n=!0),n||(t.a=$i(t.g,null),t.a.ba(t.i)),t.u=Et(),Cr(t)}Qi(e)}function Oi(e){e.a&&(Wi(e),e.a.cancel(),e.a=null)}function Ni(e){Oi(e),e.j&&(ft.clearTimeout(e.j),e.j=null),Ji(e),e.b.cancel(),e.h&&("number"==typeof e.h&&ft.clearTimeout(e.h),e.h=null)}function Fi(e,t){e.g.push(new si(e.Oa++,t)),3==e.v&&Ui(e)}function Ui(e){li(e.b)||e.h||(e.h=!0,Gn(e.Ba,e),e.u=0)}function Gi(e,t){var n;n=t?t.f:e.R++;var r=Gr(e.B);Wr(r,"SID",e.J),Wr(r,"RID",n),Wr(r,"AID",e.P),Hi(e,r),e.i&&e.l&&Li(r,e.i,e.l),n=new wr(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=zi(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),fi(e.b,n),Ar(n,r,t)}function Hi(e,t){e.f&&kr({},(function(e,n){Wr(t,n,e)}))}function zi(e,t,n){n=Math.min(e.g.length,n);var r=e.f?xt(e.f.Ja,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{yi(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function Vi(e){e.a||e.j||(e.T=1,Gn(e.Aa,e),e.o=0)}function ji(e){return!(e.a||e.j||3<=e.o||(e.T++,e.j=cr(xt(e.Aa,e),Xi(e,e.o)),e.o++,0))}function Wi(e){null!=e.s&&(ft.clearTimeout(e.s),e.s=null)}function qi(e){e.a=new wr(e,e.c,"rpc",e.T),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Gr(e.la);Wr(t,"RID","rpc"),Wr(t,"SID",e.J),Wr(t,"CI",e.H?"0":"1"),Wr(t,"AID",e.P),Hi(e,t),Wr(t,"TYPE","xmlhttp"),e.i&&e.l&&Li(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=qr(Gr(t)),n.j=null,n.I=!0,Sr(n,e)}function Ji(e){null!=e.m&&(ft.clearTimeout(e.m),e.m=null)}function Ki(e,t){var n=null;if(e.a==t){Ji(e),Wi(e),e.a=null;var r=2}else{if(!di(e.b,t))return;n=t.s,pi(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=Et()-t.u;var i=e.u;Pn(r=rr(),new ur(r,n,t,i)),Ui(e)}else Vi(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(hi(e.b)>=e.b.f-(e.h?1:0)||(e.h?(e.g=t.s.concat(e.g),0):1==e.v||2==e.v||e.u>=(e.La?0:e.Ma)||(e.h=cr(xt(e.Ba,e,t),Xi(e,e.u)),e.u++,0)))}(e,t)||2==r&&ji(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:Yi(e,5);break;case 4:Yi(e,10);break;case 3:Yi(e,6);break;default:Yi(e,2)}}function Xi(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function Yi(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=xt(e.Ya,e);n||(n=new Ur("//www.google.com/images/cleardot.gif"),ft.location&&"http"==ft.location.protocol||Hr(n,"https"),qr(n)),function(e,t){var n=new $n;if(ft.Image){var r=new Image;r.onload=_t(bi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_t(bi,n,r,"TestLoadImage: error",!1,t),r.onabort=_t(bi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_t(bi,n,r,"TestLoadImage: timeout",!1,t),ft.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else sr(2);e.v=0,e.f&&e.f.ra(t),Qi(e),Ni(e)}function Qi(e){e.v=0,e.I=-1,e.f&&(0==mi(e.b).length&&0==e.g.length||(e.b.c.length=0,It(e.g),e.g.length=0),e.f.qa())}function Zi(e,t,n){var r=function(e){return e instanceof Ur?Gr(e):new Ur(e,void 0)}(n);if(""!=r.c)t&&zr(r,t+"."+r.c),Vr(r,r.h);else{var i=ft.location;r=function(e,t,n,r){var i=new Ur(null,void 0);return e&&Hr(i,e),t&&zr(i,t),n&&Vr(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&Nt(e.V,(function(e,t){Wr(r,t,e)})),t=e.A,n=e.na,t&&n&&Wr(r,t,n),Wr(r,"VER",e.ha),Hi(e,r),r}function $i(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new xi(e.Na)).F=e.C,t}function eo(){}function to(){if(jt&&!(10<=Number(nn)))throw Error("Environmental error: no available transport.")}function no(e,t){Rn.call(this),this.a=new ki(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!Rt(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Rt(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new oo(this)}function ro(e){vr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function io(){yr.call(this),this.status=1}function oo(e){this.a=e}(lt=xi.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?fr(this.H):fr(mr),this.a.onreadystatechange=xt(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(e){return void Ti(this,e)}e=n||"";var i=new Dr(this.headers);r&&kr(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Si,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.L()),n=ft.FormData&&e instanceof ft.FormData,!(0<=Tt(Ai,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ri(this),0<this.o&&((this.D=function(e){return jt&&tn(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=xt(this.xa,this)):this.m=qn(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){Ti(this,e)}},lt.xa=function(){void 0!==dt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Pn(this,"timeout"),this.abort(8))},lt.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,Pn(this,"complete"),Pn(this,"abort"),Ii(this))},lt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ii(this,!0)),xi.X.G.call(this)},lt.za=function(){this.j||(this.A||this.l||this.g?Ci(this):this.Ua())},lt.Ua=function(){Ci(this)},lt.W=function(){try{return 2<Pi(this)?this.a.status:-1}catch(e){return-1}},lt.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},lt.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),wi(t)}},lt.ua=function(){return this.h},lt.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(lt=ki.prototype).ha=8,lt.v=1,lt.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new wr(this,this.c,e,void 0),r=this.l;if(this.O&&(r?Gt(r=Ft(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=zi(this,n,t),Wr(i=Gr(this.B),"RID",e),Wr(i,"CVER",22),this.A&&Wr(i,"X-HTTP-Session-Id",this.A),Hi(this,i),this.i&&r&&Li(i,this.i,r),fi(this.b,n),this.Ia&&Wr(i,"TYPE","init"),this.da?(Wr(i,"$req",t),Wr(i,"SID","null"),n.U=!0,Ar(n,i,null)):Ar(n,i,t),this.v=2}}else 3==this.v&&(e?Gi(this,e):0==this.g.length||li(this.b)||Gi(this))},lt.Aa=function(){if(this.j=null,qi(this),this.U&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=cr(xt(this.Ta,this),e)}},lt.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,sr(10),Oi(this),qi(this))},lt.Sa=function(){null!=this.m&&(this.m=null,Oi(this),ji(this),sr(19))},lt.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),sr(2)):(this.c.info("Failed to ping google.com"),sr(1))},(lt=eo.prototype).ta=function(){},lt.sa=function(){},lt.ra=function(){},lt.qa=function(){},lt.Ja=function(){},to.prototype.a=function(e,t){return new no(e,t)},At(no,Rn),no.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;sr(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=Zi(e,null,e.fa),Ui(e)},no.prototype.close=function(){Di(this.a)},no.prototype.h=function(e){if("string"==typeof e){var t={};t.__data__=e,Fi(this.a,t)}else this.l?((t={}).__data__=Bn(e),Fi(this.a,t)):Fi(this.a,e)},no.prototype.G=function(){this.a.f=null,delete this.f,Di(this.a),delete this.a,no.X.G.call(this)},At(ro,vr),At(io,yr),At(oo,eo),oo.prototype.ta=function(){Pn(this.a,"a")},oo.prototype.sa=function(e){Pn(this.a,new ro(e))},oo.prototype.ra=function(e){Pn(this.a,new io(e))},oo.prototype.qa=function(){Pn(this.a,"b")},to.prototype.createWebChannel=to.prototype.a,no.prototype.send=no.prototype.h,no.prototype.open=no.prototype.g,no.prototype.close=no.prototype.close,lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,hr.COMPLETE="complete",pr.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",Rn.prototype.listen=Rn.prototype.va,xi.prototype.listenOnce=xi.prototype.wa,xi.prototype.getLastError=xi.prototype.Qa,xi.prototype.getLastErrorCode=xi.prototype.ua,xi.prototype.getStatus=xi.prototype.W,xi.prototype.getResponseJson=xi.prototype.Pa,xi.prototype.getResponseText=xi.prototype.$,xi.prototype.send=xi.prototype.ba;var ao=lr,so=hr,uo=tr,co=10,lo=11,ho=pr,fo=xi,po=function(e,t){return(po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function mo(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}po(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function go(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function vo(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function yo(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}Object.create,Object.create;var bo=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();bo.o=-1;var wo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xo=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return mo(t,e),t}(Error),_o=new qe("@firebase/firestore");function Eo(){return _o.logLevel}function Ao(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(_o.logLevel<=Ue.DEBUG){var r=t.map(Mo);_o.debug.apply(_o,yo(["Firestore (8.6.3): "+e],r))}}function So(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(_o.logLevel<=Ue.ERROR){var r=t.map(Mo);_o.error.apply(_o,yo(["Firestore (8.6.3): "+e],r))}}function To(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(_o.logLevel<=Ue.WARN){var r=t.map(Mo);_o.warn.apply(_o,yo(["Firestore (8.6.3): "+e],r))}}function Mo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Co(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+e;throw So(t),new Error(t)}function Io(e,t){e||Co()}function Ro(e,t){return e}function Po(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Lo=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Po(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function Bo(e,t){return e<t?-1:e>t?1:0}function ko(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Do(e){return e+"\0"}var Oo=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xo(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xo(wo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xo(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xo(wo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Bo(this.nanoseconds,e.nanoseconds):Bo(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),No=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Oo(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();function Fo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Uo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Go(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ho=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&Co(),void 0===n?n=e.length-t:n>e.length-t&&Co(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),zo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new xo(wo.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(Ho),Vo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return Vo.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new xo(wo.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new xo(wo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xo(wo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new xo(wo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(Ho),Wo=function(){function e(e){this.fields=e,e.sort(jo.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return ko(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),qo=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return Bo(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();qo.EMPTY_BYTE_STRING=new qo("");var Jo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(e){if(Io(!!e),"string"==typeof e){var t=0,n=Jo.exec(e);if(Io(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Xo(e.seconds),nanos:Xo(e.nanos)}}function Xo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yo(e){return"string"==typeof e?qo.fromBase64String(e):qo.fromUint8Array(e)}function Qo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zo(e){var t=e.mapValue.fields.__previous_value__;return Qo(t)?Zo(t):t}function $o(e){var t=Ko(e.mapValue.fields.__local_write_time__.timestampValue);return new Oo(t.seconds,t.nanos)}function ea(e){return null==e}function ta(e){return 0===e&&1/e==-1/0}function na(e){return"number"==typeof e&&Number.isInteger(e)&&!ta(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ra=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(zo.fromString(t))},e.fromName=function(t){return new e(zo.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===zo.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return zo.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new zo(t.slice()))},e}();function ia(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Qo(e)?4:10:Co()}function oa(e,t){var n=ia(e);if(n!==ia(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $o(e).isEqual($o(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ko(e.timestampValue),r=Ko(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yo(e.bytesValue).isEqual(Yo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Xo(e.geoPointValue.latitude)===Xo(t.geoPointValue.latitude)&&Xo(e.geoPointValue.longitude)===Xo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Xo(e.integerValue)===Xo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Xo(e.doubleValue),r=Xo(t.doubleValue);return n===r?ta(n)===ta(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ko(e.arrayValue.values||[],t.arrayValue.values||[],oa);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Fo(n)!==Fo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!oa(n[i],r[i])))return!1;return!0}(e,t);default:return Co()}}function aa(e,t){return void 0!==(e.values||[]).find((function(e){return oa(e,t)}))}function sa(e,t){var n=ia(e),r=ia(t);if(n!==r)return Bo(n,r);switch(n){case 0:return 0;case 1:return Bo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Xo(e.integerValue||e.doubleValue),r=Xo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ua(e.timestampValue,t.timestampValue);case 4:return ua($o(e),$o(t));case 5:return Bo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Yo(e),r=Yo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Bo(n[i],r[i]);if(0!==o)return o}return Bo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Bo(Xo(e.latitude),Xo(t.latitude));return 0!==n?n:Bo(Xo(e.longitude),Xo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=sa(n[i],r[i]);if(o)return o}return Bo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Bo(r[a],o[a]);if(0!==s)return s;var u=sa(n[r[a]],i[o[a]]);if(0!==u)return u}return Bo(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Co()}}function ua(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bo(e,t);var n=Ko(e),r=Ko(t),i=Bo(n.seconds,r.seconds);return 0!==i?i:Bo(n.nanos,r.nanos)}function ca(e){return la(e)}function la(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ko(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Yo(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ra.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=la(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+la(e.fields[o])}return t+"}"}(e.mapValue):Co();var t,n}function ha(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function da(e){return!!e&&"integerValue"in e}function fa(e){return!!e&&"arrayValue"in e}function pa(e){return!!e&&"nullValue"in e}function ma(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ga(e){return!!e&&"mapValue"in e}function va(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue)return{timestampValue:Object.assign({},Ko(e.timestampValue))};if(e.mapValue){var t={mapValue:{fields:{}}};return Uo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=va(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=va(e.arrayValue.values[r]);return n}return Object.assign({},e)}var ya=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ga(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(t)},e.prototype.setAll=function(e){var t=this,n=jo.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=va(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());ga(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return oa(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ga(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){Uo(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(va(this.value))},e}();function ba(e){var t=[];return Uo(e.fields,(function(e,n){var r=new jo([e]);if(ga(n)){var i=ba(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new Wo(t)}var wa=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,No.min(),ya.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,ya.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,ya.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=ya.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=ya.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),xa=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function _a(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new xa(e,t,n,r,i,o,a)}function Ea(e){var t=Ro(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+ca(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ea(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Oa(t.startAt)),t.endAt&&(n+="|ub:",n+=Oa(t.endAt)),t.h=n}return t.h}function Aa(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Fa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!oa(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ga(e.startAt,t.startAt)&&Ga(e.endAt,t.endAt)}function Sa(e){return ra.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Ta=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return mo(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new Ma(e,n,r):"array-contains"===n?new Pa(e,r):"in"===n?new La(e,r):"not-in"===n?new Ba(e,r):"array-contains-any"===n?new ka(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new Ca(e,n):new Ia(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(sa(t,this.value)):null!==t&&ia(this.value)===ia(t)&&this.m(sa(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Co()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Ma=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=ra.fromName(r.referenceValue),i}return mo(t,e),t.prototype.matches=function(e){var t=ra.comparator(e.key,this.key);return this.m(t)},t}(Ta),Ca=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=Ra(0,n),r}return mo(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Ta),Ia=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=Ra(0,n),r}return mo(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(Ta);function Ra(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ra.fromName(e.referenceValue)}))}var Pa=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return mo(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return fa(t)&&aa(t.arrayValue,this.value)},t}(Ta),La=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return mo(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&aa(this.value.arrayValue,t)},t}(Ta),Ba=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return mo(t,e),t.prototype.matches=function(e){if(aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!aa(this.value.arrayValue,t)},t}(Ta),ka=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return mo(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!fa(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return aa(t.value.arrayValue,e)}))},t}(Ta),Da=function(e,t){this.position=e,this.before=t};function Oa(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return ca(e)})).join(",")}var Na=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Fa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ua(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?ra.comparator(ra.fromName(a.referenceValue),n.key):sa(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ga(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!oa(e.position[n],t.position[n]))return!1;return!0}var Ha=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function za(e,t,n,r,i,o,a,s){return new Ha(e,t,n,r,i,o,a,s)}function Va(e){return new Ha(e)}function ja(e){return!ea(e.limit)&&"F"===e.limitType}function Wa(e){return!ea(e.limit)&&"L"===e.limitType}function qa(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ja(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ka(e){return null!==e.collectionGroup}function Xa(e){var t=Ro(e);if(null===t.p){t.p=[];var n=Ja(t),r=qa(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Na(n)),t.p.push(new Na(jo.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Na(jo.keyField(),u))}}}return t.p}function Ya(e){var t=Ro(e);if(!t.T)if("F"===t.limitType)t.T=_a(t.path,t.collectionGroup,Xa(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Xa(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Na(o.field,a))}var s=t.endAt?new Da(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Da(t.startAt.position,!t.startAt.before):null;t.T=_a(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Qa(e,t,n){return new Ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Za(e,t){return Aa(Ya(e),Ya(t))&&e.limitType===t.limitType}function $a(e){return Ea(Ya(e))+"|lt:"+e.limitType}function es(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+ca(t.value);var t})).join(", ")+"]"),ea(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Oa(e.startAt)),e.endAt&&(t+=", endAt: "+Oa(e.endAt)),"Target("+t+")"}(Ya(e))+"; limitType="+e.limitType+")"}function ts(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ra.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Ua(e.startAt,Xa(e),t)||e.endAt&&Ua(e.endAt,Xa(e),t))}(e,t)}function ns(e){return function(t,n){for(var r=!1,i=0,o=Xa(e);i<o.length;i++){var a=o[i],s=rs(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function rs(e,t,n){var r=e.field.isKeyField()?ra.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?sa(r,i):Co()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Co()}}function is(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ta(t)?"-0":t}}function os(e){return{integerValue:""+e}}function as(e,t){return na(t)?os(t):is(e,t)}var ss=function(){this._=void 0};function us(e,t,n){return e instanceof hs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ds?fs(e,t):e instanceof ps?ms(e,t):function(e,t){var n=ls(e,t),r=vs(n)+vs(e.A);return da(n)&&da(e.A)?os(r):is(e.R,r)}(e,t)}function cs(e,t,n){return e instanceof ds?fs(e,t):e instanceof ps?ms(e,t):n}function ls(e,t){return e instanceof gs?da(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var hs=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t}(ss),ds=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return mo(t,e),t}(ss);function fs(e,t){for(var n=ys(t),r=function(e){n.some((function(t){return oa(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ps=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return mo(t,e),t}(ss);function ms(e,t){for(var n=ys(t),r=function(e){n=n.filter((function(t){return!oa(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var gs=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return mo(t,e),t}(ss);function vs(e){return Xo(e.integerValue||e.doubleValue)}function ys(e){return fa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var bs=function(e,t){this.field=e,this.transform=t},ws=function(e,t){this.version=e,this.transformResults=t},xs=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function _s(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Es=function(){};function As(e,t,n){e instanceof Is?function(e,t,n){var r=e.value.clone(),i=Ls(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rs?function(e,t,n){if(_s(e.precondition,t)){var r=Ls(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ps(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ss(e,t,n){e instanceof Is?function(e,t,n){if(_s(e.precondition,t)){var r=e.value.clone(),i=Bs(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Cs(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Rs?function(e,t,n){if(_s(e.precondition,t)){var r=Bs(e.fieldTransforms,n,t),i=t.data;i.setAll(Ps(e)),i.setAll(r),t.convertToFoundDocument(Cs(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){_s(e.precondition,t)&&t.convertToNoDocument(No.min())}(e,t)}function Ts(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=ls(o.transform,a||null);null!=s&&(null==n&&(n=ya.empty()),n.set(o.field,s))}return n||null}function Ms(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ko(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ds&&t instanceof ds||e instanceof ps&&t instanceof ps?ko(e.elements,t.elements,oa):e instanceof gs&&t instanceof gs?oa(e.A,t.A):e instanceof hs&&t instanceof hs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Cs(e){return e.isFoundDocument()?e.version:No.min()}var Is=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return mo(t,e),t}(Es),Rs=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return mo(t,e),t}(Es);function Ps(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Ls(e,t,n){var r=new Map;Io(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,cs(a,s,n[i]))}return r}function Bs(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,us(s,u,t))}return r}var ks,Ds,Os=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return mo(t,e),t}(Es),Ns=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return mo(t,e),t}(Es),Fs=function(e){this.count=e};function Us(e){switch(e){case wo.OK:return Co();case wo.CANCELLED:case wo.UNKNOWN:case wo.DEADLINE_EXCEEDED:case wo.RESOURCE_EXHAUSTED:case wo.INTERNAL:case wo.UNAVAILABLE:case wo.UNAUTHENTICATED:return!1;case wo.INVALID_ARGUMENT:case wo.NOT_FOUND:case wo.ALREADY_EXISTS:case wo.PERMISSION_DENIED:case wo.FAILED_PRECONDITION:case wo.ABORTED:case wo.OUT_OF_RANGE:case wo.UNIMPLEMENTED:case wo.DATA_LOSS:return!0;default:return Co()}}function Gs(e){if(void 0===e)return So("GRPC error has no .code"),wo.UNKNOWN;switch(e){case ks.OK:return wo.OK;case ks.CANCELLED:return wo.CANCELLED;case ks.UNKNOWN:return wo.UNKNOWN;case ks.DEADLINE_EXCEEDED:return wo.DEADLINE_EXCEEDED;case ks.RESOURCE_EXHAUSTED:return wo.RESOURCE_EXHAUSTED;case ks.INTERNAL:return wo.INTERNAL;case ks.UNAVAILABLE:return wo.UNAVAILABLE;case ks.UNAUTHENTICATED:return wo.UNAUTHENTICATED;case ks.INVALID_ARGUMENT:return wo.INVALID_ARGUMENT;case ks.NOT_FOUND:return wo.NOT_FOUND;case ks.ALREADY_EXISTS:return wo.ALREADY_EXISTS;case ks.PERMISSION_DENIED:return wo.PERMISSION_DENIED;case ks.FAILED_PRECONDITION:return wo.FAILED_PRECONDITION;case ks.ABORTED:return wo.ABORTED;case ks.OUT_OF_RANGE:return wo.OUT_OF_RANGE;case ks.UNIMPLEMENTED:return wo.UNIMPLEMENTED;case ks.DATA_LOSS:return wo.DATA_LOSS;default:return Co()}}(Ds=ks||(ks={}))[Ds.OK=0]="OK",Ds[Ds.CANCELLED=1]="CANCELLED",Ds[Ds.UNKNOWN=2]="UNKNOWN",Ds[Ds.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ds[Ds.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ds[Ds.NOT_FOUND=5]="NOT_FOUND",Ds[Ds.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ds[Ds.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ds[Ds.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ds[Ds.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ds[Ds.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ds[Ds.ABORTED=10]="ABORTED",Ds[Ds.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ds[Ds.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ds[Ds.INTERNAL=13]="INTERNAL",Ds[Ds.UNAVAILABLE=14]="UNAVAILABLE",Ds[Ds.DATA_LOSS=15]="DATA_LOSS";var Hs=function(){function e(e,t){this.comparator=e,this.root=t||Vs.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Vs.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Vs.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new zs(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new zs(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new zs(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new zs(this.root,e,this.comparator,!0)},e}(),zs=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Vs=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Co();if(this.right.isRed())throw Co();var e=this.left.check();if(e!==this.right.check())throw Co();return e+(this.isRed()?0:1)},e}();Vs.EMPTY=null,Vs.RED=!0,Vs.BLACK=!1,Vs.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Co()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Co()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Vs(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var js=function(){function e(e){this.comparator=e,this.data=new Hs(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ws(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ws(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ws=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),qs=new Hs(ra.comparator);function Js(){return qs}var Ks=new Hs(ra.comparator);function Xs(){return Ks}var Ys=new Hs(ra.comparator);function Qs(){return Ys}var Zs=new js(ra.comparator);function $s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Zs,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var eu=new js(Bo);function tu(){return eu}var nu=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,ru.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(No.min(),r,tu(),Js(),$s())},e}(),ru=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(qo.EMPTY_BYTE_STRING,n,$s(),$s(),$s())},e}(),iu=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},ou=function(e,t){this.targetId=e,this.V=t},au=function(e,t,n,r){void 0===n&&(n=qo.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},su=function(){function e(){this.S=0,this.D=lu(),this.C=qo.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=$s(),t=$s(),n=$s();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Co()}})),new ru(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=lu()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),uu=function(){function e(e){this.W=e,this.G=new Map,this.H=Js(),this.J=cu(),this.Y=new js(Bo)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:Co()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(Sa(i))if(0===n){var o=new ra(i.path);this.tt(t,o,wa.newNoDocument(o,No.min()))}else Io(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&Sa(o.target)){var a=new ra(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,wa.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=$s();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new nu(e,n,this.Y,this.H,r);return this.H=Js(),this.J=cu(),this.Y=new js(Bo),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new su,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new js(Bo),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||Ao("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new su),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function cu(){return new Hs(ra.comparator)}function lu(){return new Hs(ra.comparator)}var hu={asc:"ASCENDING",desc:"DESCENDING"},du={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fu=function(e,t){this.databaseId=e,this.I=t};function pu(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function mu(e,t){return e.I?t.toBase64():t.toUint8Array()}function gu(e,t){return pu(e,t.toTimestamp())}function vu(e){return Io(!!e),No.fromTimestamp(function(e){var t=Ko(e);return new Oo(t.seconds,t.nanos)}(e))}function yu(e,t){return function(e){return new zo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bu(e){var t=zo.fromString(e);return Io(Vu(t)),t}function wu(e,t){return yu(e.databaseId,t.path)}function xu(e,t){var n=bu(t);if(n.get(1)!==e.databaseId.projectId)throw new xo(wo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new xo(wo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ra(Su(n))}function _u(e,t){return yu(e.databaseId,t)}function Eu(e){var t=bu(e);return 4===t.length?zo.emptyPath():Su(t)}function Au(e){return new zo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Su(e){return Io(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Tu(e,t,n){return{name:wu(e,t),fields:n.value.mapValue.fields}}function Mu(e,t,n){var r=xu(e,t.name),i=vu(t.updateTime),o=new ya({mapValue:{fields:t.fields}}),a=wa.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Cu(e,t){var n;if(t instanceof Is)n={update:Tu(e,t.key,t.value)};else if(t instanceof Os)n={delete:wu(e,t.key)};else if(t instanceof Rs)n={update:Tu(e,t.key,t.data),updateMask:zu(t.fieldMask)};else{if(!(t instanceof Ns))return Co();n={verify:wu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof hs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ds)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ps)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof gs)return{fieldPath:t.field.canonicalString(),increment:n.A};throw Co()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Co()}(e,t.precondition)),n}function Iu(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?xs.updateTime(vu(e.updateTime)):void 0!==e.exists?xs.exists(e.exists):xs.none()}(t.currentDocument):xs.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Io("REQUEST_TIME"===t.setToServerValue),n=new hs;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ds(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ps(i)}else"increment"in t?n=new gs(e,t.increment):Co();var o=jo.fromServerFormat(t.fieldPath);return new bs(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=xu(e,t.update.name),o=new ya({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new Wo(t.map((function(e){return jo.fromServerFormat(e)})))}(t.updateMask);return new Rs(i,o,a,n,r)}return new Is(i,o,n,r)}if(t.delete){var s=xu(e,t.delete);return new Os(s,n)}if(t.verify){var u=xu(e,t.verify);return new Ns(u,n)}return Co()}function Ru(e,t){return{documents:[_u(e,t.path)]}}function Pu(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=_u(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=_u(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ma(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NAN"}};if(pa(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ma(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NAN"}};if(pa(e.value))return{unaryFilter:{field:Fu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(e.field),op:Nu(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Fu(e.field),direction:Ou(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||ea(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=ku(t.startAt)),t.endAt&&(n.structuredQuery.endAt=ku(t.endAt)),n}function Lu(e){var t=Eu(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Io(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=Bu(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Na(Uu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ea(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Du(n.startAt));var l=null;return n.endAt&&(l=Du(n.endAt)),za(t,i,s,a,u,"F",c,l)}function Bu(e){return e?void 0!==e.unaryFilter?[Hu(e)]:void 0!==e.fieldFilter?[Gu(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Bu(e)})).reduce((function(e,t){return e.concat(t)})):Co():[]}function ku(e){return{before:e.before,values:e.position}}function Du(e){var t=!!e.before,n=e.values||[];return new Da(n,t)}function Ou(e){return hu[e]}function Nu(e){return du[e]}function Fu(e){return{fieldPath:e.canonicalString()}}function Uu(e){return jo.fromServerFormat(e.fieldPath)}function Gu(e){return Ta.create(Uu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Co()}}(e.fieldFilter.op),e.fieldFilter.value)}function Hu(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Uu(e.unaryFilter.field);return Ta.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Uu(e.unaryFilter.field);return Ta.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Uu(e.unaryFilter.field);return Ta.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Uu(e.unaryFilter.field);return Ta.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Co()}}function zu(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Vu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ju(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=qu(t)),t=Wu(e.get(n),t);return qu(t)}function Wu(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function qu(e){return e+""}function Ju(e){var t=e.length;if(Io(t>=2),2===t)return Io(""===e.charAt(0)&&""===e.charAt(1)),zo.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&Co(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:Co()}o=a+2}return new zo(r)}var Ku=function(e,t){this.seconds=e,this.nanoseconds=t},Xu=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Xu.store="owner",Xu.key="owner";var Yu=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Yu.store="mutationQueues",Yu.keyPath="userId";var Qu=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Qu.store="mutations",Qu.keyPath="batchId",Qu.userMutationsIndex="userMutationsIndex",Qu.userMutationsKeyPath=["userId","batchId"];var Zu=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,ju(t)]},e.key=function(e,t,n){return[e,ju(t),n]},e}();Zu.store="documentMutations",Zu.PLACEHOLDER=new Zu;var $u=function(e,t){this.path=e,this.readTime=t},ec=function(e,t){this.path=e,this.version=t},tc=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};tc.store="remoteDocuments",tc.readTimeIndex="readTimeIndex",tc.readTimeIndexPath="readTime",tc.collectionReadTimeIndex="collectionReadTimeIndex",tc.collectionReadTimeIndexPath=["parentPath","readTime"];var nc=function(e){this.byteSize=e};nc.store="remoteDocumentGlobal",nc.key="remoteDocumentGlobalKey";var rc=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};rc.store="targets",rc.keyPath="targetId",rc.queryTargetsIndexName="queryTargetsIndex",rc.queryTargetsKeyPath=["canonicalId","targetId"];var ic=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};ic.store="targetDocuments",ic.keyPath=["targetId","path"],ic.documentTargetsIndex="documentTargetsIndex",ic.documentTargetsKeyPath=["path","targetId"];var oc=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};oc.key="targetGlobalKey",oc.store="targetGlobal";var ac=function(e,t){this.collectionId=e,this.parent=t};ac.store="collectionParents",ac.keyPath=["collectionId","parent"];var sc=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};sc.store="clientMetadata",sc.keyPath="clientId";var uc=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};uc.store="bundles",uc.keyPath="bundleId";var cc=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};cc.store="namedQueries",cc.keyPath="name";var lc=yo(yo([],yo(yo([],yo(yo([],yo(yo([],[Yu.store,Qu.store,Zu.store,tc.store,rc.store,Xu.store,oc.store,ic.store]),[sc.store])),[nc.store])),[ac.store])),[uc.store,cc.store]),hc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dc=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),fc=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},pc=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Co(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),mc=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new fc,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new yc(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=Ec(t.target.error);n.ft.reject(new yc(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new yc(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(Ao("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new wc(t)},e}(),gc=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(ye())&&So("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return Ao("SimpleDb","Removing database:",e),xc(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=ye(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return go(this,void 0,void 0,(function(){var t,n=this;return vo(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Ao("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new xo(wo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new yc(e,n))},i.onupgradeneeded=function(e){Ao("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){Ao("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return go(this,void 0,void 0,(function(){var i,o,a,s,u;return vo(this,(function(c){switch(c.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,c,l;return vo(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),t=mc.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),pc.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Ao("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),vc=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return xc(this.Pt.delete())},e}(),yc=function(e){function t(t,n){var r=this;return(r=e.call(this,wo.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return mo(t,e),t}(xo);function bc(e){return"IndexedDbTransactionError"===e.name}var wc=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(Ao("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ao("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),xc(n)},e.prototype.add=function(e){return Ao("SimpleDb","ADD",this.store.name,e,e),xc(this.store.add(e))},e.prototype.get=function(e){var t=this;return xc(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ao("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return Ao("SimpleDb","DELETE",this.store.name,e),xc(this.store.delete(e))},e.prototype.count=function(){return Ao("SimpleDb","COUNT",this.store.name),xc(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Ft=function(e,t){Ao("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new pc((function(n,r){t.onerror=function(e){var t=Ec(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new pc((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new vc(i),a=t(i.primaryKey,i.value,o);if(a instanceof pc){var s=a.catch((function(e){return o.done(),pc.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return pc.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function xc(e){return new pc((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ec(e.target.error);n(t)}}))}var _c=!1;function Ec(e){var t=gc._t(ye());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new xo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return _c||(_c=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ac=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return mo(t,e),t}(dc);function Sc(e,t){var n=Ro(e);return gc.It(n.Mt,t)}var Tc=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&As(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&Ss(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&Ss(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(No.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),$s())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&ko(this.mutations,e.mutations,(function(e,t){return Ms(e,t)}))&&ko(this.baseMutations,e.baseMutations,(function(e,t){return Ms(e,t)}))},e}(),Mc=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){Io(t.mutations.length===r.length);for(var i=Qs(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Cc=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=No.min()),void 0===o&&(o=No.min()),void 0===a&&(a=qo.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),Ic=function(e){this.Lt=e};function Rc(e,t){if(t.document)return Mu(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ra.fromSegments(t.noDocument.path),r=Dc(t.noDocument.readTime),i=wa.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=ra.fromSegments(t.unknownDocument.path);return r=Dc(t.unknownDocument.version),wa.newUnknownDocument(o,r)}return Co()}function Pc(e,t,n){var r=Lc(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:wu(e,t.key),fields:t.data.value.mapValue.fields,updateTime:pu(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new tc(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=kc(t.version);return a=t.hasCommittedMutations,new tc(null,new $u(s,u),null,a,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=kc(t.version);return new tc(new ec(c,l),null,null,!0,r,i)}return Co()}function Lc(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Bc(e){var t=new Oo(e[0],e[1]);return No.fromTimestamp(t)}function kc(e){var t=e.toTimestamp();return new Ku(t.seconds,t.nanoseconds)}function Dc(e){var t=new Oo(e.seconds,e.nanoseconds);return No.fromTimestamp(t)}function Oc(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Iu(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Iu(e.Lt,t)})),s=Oo.fromMillis(t.localWriteTimeMs);return new Tc(t.batchId,s,n,a)}function Nc(e){var t,n,r=Dc(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Dc(e.lastLimboFreeSnapshotVersion):No.min();return void 0!==e.query.documents?(Io(1===(n=e.query).documents.length),t=Ya(Va(Eu(n.documents[0])))):t=function(e){return Ya(Lu(e))}(e.query),new Cc(t,e.targetId,0,e.lastListenSequenceNumber,r,i,qo.fromBase64String(e.resumeToken))}function Fc(e,t){var n,r=kc(t.snapshotVersion),i=kc(t.lastLimboFreeSnapshotVersion);n=Sa(t.target)?Ru(e.Lt,t.target):Pu(e.Lt,t.target);var o=t.resumeToken.toBase64();return new rc(t.targetId,Ea(t.target),r,o,t.sequenceNumber,i,n)}function Uc(e){var t=Lu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Qa(t,t.limit,"L"):t}var Gc=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Hc(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Dc(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Hc(e).put({bundleId:(n=t).id,createTime:kc(vu(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return zc(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Uc(t.bundledQuery),readTime:Dc(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return zc(e).put(function(e){return{name:e.name,readTime:kc(vu(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Hc(e){return Sc(e,uc.store)}function zc(e){return Sc(e,cc.store)}var Vc=function(){function e(){this.Bt=new jc}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),pc.resolve()},e.prototype.getCollectionParents=function(e,t){return pc.resolve(this.Bt.getEntries(t))},e}(),jc=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new js(zo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new js(zo.comparator)).toArray()},e}(),Wc=function(){function e(){this.qt=new jc}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:ju(i)};return qc(e).put(o)}return pc.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Do(t),""],!1,!0);return qc(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Ju(o.parent))}return n}))},e}();function qc(e){return Sc(e,ac.store)}var Jc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kc=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function Xc(e,t,n){var r=e.store(Qu.store),i=e.store(Zu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Io(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Zu.key(t,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return pc.waitFor(o).next((function(){return c}))}function Yc(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Co();t=e.noDocument}return JSON.stringify(t).length}Kc.DEFAULT_COLLECTION_PERCENTILE=10,Kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kc.DEFAULT=new Kc(41943040,Kc.DEFAULT_COLLECTION_PERCENTILE,Kc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kc.DISABLED=new Kc(-1,0,0);var Qc=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return e.Kt=function(t,n,r,i){return Io(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).$t({index:Qu.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=el(e),a=$c(e);return a.add({}).next((function(s){Io("number"==typeof s);for(var u=new Tc(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Cu(e.Lt,t)})),i=n.mutations.map((function(t){return Cu(e.Lt,t)}));return new Qu(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new js((function(e,t){return Bo(e.canonicalString(),t.canonicalString())})),d=0,f=r;d<f.length;d++){var p=f[d],m=Zu.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,Zu.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),pc.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return $c(e).get(t).next((function(e){return e?(Io(e.userId===n.userId),Oc(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Qt[t]?pc.resolve(this.Qt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Qt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $c(e).$t({index:Qu.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Io(t.batchId>=r),o=Oc(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return $c(e).$t({index:Qu.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).Nt(Qu.userMutationsIndex,n).next((function(e){return e.map((function(e){return Oc(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Zu.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return el(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Ju(u);if(s===n.userId&&t.path.isEqual(l))return $c(e).get(c).next((function(e){if(!e)throw Co();Io(e.userId===n.userId),o.push(Oc(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new js(Bo),i=[];return t.forEach((function(t){var o=Zu.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=el(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Ju(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),pc.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=Zu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new js(Bo);return el(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Ju(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push($c(e).get(t).next((function(e){if(null===e)throw Co();Io(e.userId===n.userId),r.push(Oc(n.R,e))})))})),pc.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Xc(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),pc.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Qt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return pc.resolve();var r=IDBKeyRange.lowerBound(Zu.prefixForUser(t.userId)),i=[];return el(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ju(e[1]);i.push(o)}else r.done()})).next((function(){Io(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return Zc(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return tl(e).get(this.userId).next((function(e){return e||new Yu(t.userId,-1,"")}))},e}();function Zc(e,t,n){var r=Zu.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return el(e).$t({range:o,kt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function $c(e){return Sc(e,Qu.store)}function el(e){return Sc(e,Zu.store)}function tl(e){return Sc(e,Yu.store)}var nl=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),rl=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new nl(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return No.fromTimestamp(new Oo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return il(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return Io(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return il(e).$t((function(a,s){var u=Nc(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return pc.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return il(e).$t((function(e,n){var r=Nc(n);t(r)}))},e.prototype.Xt=function(e){return ol(e).get(oc.key).next((function(e){return Io(null!==e),e}))},e.prototype.Zt=function(e,t){return ol(e).put(oc.key,t)},e.prototype.te=function(e,t){return il(e).put(Fc(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=Ea(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return il(e).$t({range:r,index:rc.queryTargetsIndexName},(function(e,n,r){var o=Nc(n);Aa(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=al(e);return t.forEach((function(t){var a=ju(t.path);i.push(o.put(new ic(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),pc.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=al(e);return pc.forEach(t,(function(t){var o=ju(t.path);return pc.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=al(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=al(e),i=$s();return r.$t({range:n,kt:!0},(function(e,t,n){var r=Ju(e[1]),o=new ra(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=ju(t.path),r=IDBKeyRange.bound([n],[Do(n)],!1,!0),i=0;return al(e).$t({index:ic.documentTargetsIndex,kt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return il(e).get(t).next((function(e){return e?Nc(e):null}))},e}();function il(e){return Sc(e,rc.store)}function ol(e){return Sc(e,oc.store)}function al(e){return Sc(e,ic.store)}function sl(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){if(e.code!==wo.FAILED_PRECONDITION||e.message!==hc)throw e;return Ao("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ul(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Bo(n,i);return 0===a?Bo(r,o):a}var cl=function(){function e(e){this.ne=e,this.buffer=new js(ul),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ul(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),ll=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;Ao("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return go(t,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return bc(t=n.sent())?(Ao("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,sl(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),hl=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return pc.resolve(bo.o);var r=new cl(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ao("LruGarbageCollector","Garbage collection skipped; disabled"),pc.resolve(Jc)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ao("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Jc):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ao("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Eo()<=Ue.DEBUG&&Ao("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),pc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),dl=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new hl(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return fl(e,n)},e.prototype.removeReference=function(e,t,n){return fl(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return fl(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return tl(e).Ot((function(r){return Zc(e,r,t).next((function(e){return e&&(n=!0),pc.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),al(e).delete([0,ju(a.path)])}))}));i.push(u)}})).next((function(){return pc.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return fl(e,t)},e.prototype.we=function(e,t){var n,r=al(e),i=bo.o;return r.$t({index:ic.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==bo.o&&t(new ra(Ju(n)),i),i=s,n=a):i=bo.o})).next((function(){i!==bo.o&&t(new ra(Ju(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function fl(e,t){return al(e).put(function(e,t){return new ic(0,ju(e.path),t)}(t,e.currentSequenceNumber))}var pl=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Uo(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return Go(this.inner)},e}(),ml=function(){function e(){this.changes=new pl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:No.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:wa.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?pc.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),gl=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return bl(e).put(wl(t),n)},e.prototype.removeEntry=function(e,t){var n=bl(e),r=wl(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return bl(e).get(wl(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return bl(e).get(wl(t)).next((function(e){return{document:n.ye(t,e),size:Yc(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Js();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Js(),i=new Hs(ra.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,Yc(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return pc.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return bl(e).$t({range:r},(function(e,t,r){for(var a=ra.fromSegments(e);o&&ra.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Js(),o=t.path.length+1,a={};if(n.isEqual(No.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=Lc(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=tc.collectionReadTimeIndex}return bl(e).$t(a,(function(e,n,a){if(e.length===o){var s=Rc(r.R,n);t.path.isPrefixOf(s.key.path)?ts(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new vl(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return yl(e).get(nc.key).next((function(e){return Io(!!e),e}))},e.prototype.me=function(e,t){return yl(e).put(nc.key,t)},e.prototype.ye=function(e,t){if(t){var n=Rc(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(No.min()))return n}return wa.newInvalidDocument(e)},e}(),vl=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new pl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return mo(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new js((function(e,t){return Bo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=Pc(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=Yc(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=Pc(t.Ie.R,wa.newNoDocument(o,No.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),pc.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ml);function yl(e){return Sc(e,nc.store)}function bl(e){return Sc(e,tc.store)}function wl(e){return e.path.toArray()}var xl=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;Io(n<r&&n>=0&&r<=11);var o=new mc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Xu.store)}(e),function(e){e.createObjectStore(Yu.store,{keyPath:Yu.keyPath}),e.createObjectStore(Qu.store,{keyPath:Qu.keyPath,autoIncrement:!0}).createIndex(Qu.userMutationsIndex,Qu.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Zu.store)}(e),_l(e),function(e){e.createObjectStore(tc.store)}(e));var a=pc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(ic.store),e.deleteObjectStore(rc.store),e.deleteObjectStore(oc.store)}(e),_l(e)),a=a.next((function(){return function(e){var t=e.store(oc.store),n=new oc(0,0,No.min().toTimestamp(),0);return t.put(oc.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Qu.store).Nt().next((function(n){e.deleteObjectStore(Qu.store),e.createObjectStore(Qu.store,{keyPath:Qu.keyPath,autoIncrement:!0}).createIndex(Qu.userMutationsIndex,Qu.userMutationsKeyPath,{unique:!0});var r=t.store(Qu.store),i=n.map((function(e){return r.put(e)}));return pc.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(sc.store,{keyPath:sc.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(nc.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(tc.store);t.createIndex(tc.readTimeIndex,tc.readTimeIndexPath,{unique:!1}),t.createIndex(tc.collectionReadTimeIndex,tc.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(uc.store,{keyPath:uc.keyPath})}(e),function(e){e.createObjectStore(cc.store,{keyPath:cc.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(tc.store).$t((function(e,n){t+=Yc(n)})).next((function(){var n=new nc(t);return e.store(nc.store).put(nc.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Yu.store),r=e.store(Qu.store);return n.Nt().next((function(n){return pc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Qu.userMutationsIndex,i).next((function(r){return pc.forEach(r,(function(r){Io(r.userId===n.userId);var i=Oc(t.R,r);return Xc(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(ic.store),n=e.store(tc.store);return e.store(oc.store).get(oc.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new zo(n),a=function(e){return[0,ju(e)]}(o);r.push(t.get(a).next((function(n){return n?pc.resolve():function(n){return t.put(new ic(0,ju(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return pc.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(ac.store,{keyPath:ac.keyPath});var n=t.store(ac.store),r=new jc,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ju(i)})}};return t.store(tc.store).$t({kt:!0},(function(e,t){var n=new zo(e);return i(n.popLast())})).next((function(){return t.store(Zu.store).$t({kt:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Ju(n));return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(rc.store);return n.$t((function(e,r){var i=Nc(r),o=Fc(t.R,i);return n.put(o)}))},e}();function _l(e){e.createObjectStore(ic.store,{keyPath:ic.keyPath}).createIndex(ic.documentTargetsIndex,ic.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(rc.store,{keyPath:rc.keyPath}).createIndex(rc.queryTargetsIndexName,rc.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(oc.store)}var El="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Al=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new xo(wo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dl(this,i),this.Le=n+"main",this.R=new Ic(u),this.Be=new gc(this.Le,11,new xl(this.R)),this.qe=new rl(this.referenceDelegate,this.R),this.Ut=new Wc,this.Ue=function(e,t){return new gl(e,t)}(this.R,this.Ut),this.Qe=new Gc,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&So("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new xo(wo.FAILED_PRECONDITION,El);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new bo(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return go(t,void 0,void 0,(function(){return vo(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return go(t,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return go(t,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Tl(t).put(new sc(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(bc(t))return Ao("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ao("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return Sl(e).get(Xu.key).next((function(e){return pc.resolve(t.tn(e))}))},e.prototype.en=function(e){return Tl(e).delete(this.clientId)},e.prototype.nn=function(){return go(this,void 0,void 0,(function(){var e,t,n,r,i=this;return vo(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Sc(e,sc.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return pc.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Ke)for(t=0,n=e;t<n.length;t++)r=n[t],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?pc.resolve(!0):Sl(e).get(Xu.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new xo(wo.FAILED_PRECONDITION,El);return!1}}return!(!t.networkEnabled||!t.inForeground)||Tl(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ao("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return go(this,void 0,void 0,(function(){var e=this;return vo(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Xu.store,sc.store],(function(t){var n=new Ac(t,bo.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Tl(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return Qc.Kt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;Ao("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,lc,(function(o){return i=new Ac(o,r.Ne?r.Ne.next():bo.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw So("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new xo(wo.FAILED_PRECONDITION,hc);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return Sl(e).get(Xu.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new xo(wo.FAILED_PRECONDITION,El)}))},e.prototype.Ze=function(e){var t=new Xu(this.clientId,this.allowTabSynchronization,Date.now());return Sl(e).put(Xu.key,t)},e.yt=function(){return gc.yt()},e.prototype.Xe=function(e){var t=this,n=Sl(e);return n.get(Xu.key).next((function(e){return t.tn(e)?(Ao("IndexedDbPersistence","Releasing primary lease."),n.delete(Xu.key)):pc.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(So("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Ke)||void 0===t?void 0:t.getItem(this.on(e)));return Ao("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return So("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(e){So("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function Sl(e){return Sc(e,Xu.store)}function Tl(e){return Sc(e,sc.store)}function Ml(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Cl=function(e,t){this.progress=e,this.wn=t},Il=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return ra.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Ka(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new ra(t)).next((function(e){var t=Xs();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=Xs();return this.Ut.getCollectionParents(e,i).next((function(a){return pc.forEach(a,(function(a){var s=function(e,t){return new Ha(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=wa.newInvalidDocument(c),r=r.insert(c,l)),Ss(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){ts(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=$s(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Rs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),Rl=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=$s(),i=$s(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Pl=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(No.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(o){var a=i.Cn(t,o);return(ja(t)||Wa(t))&&i.Nn(t.limitType,a,r,n)?i.Dn(e,t):(Eo()<=Ue.DEBUG&&Ao("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),es(t)),i.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new js(ns(e));return t.forEach((function(t,r){ts(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return Eo()<=Ue.DEBUG&&Ao("QueryEngine","Using full collection scan to execute query:",es(t)),this.Sn.getDocumentsMatchingQuery(e,t,No.min())},e}(),Ll=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new Hs(Bo),this.kn=new pl((function(e){return Ea(e)}),Aa),this.$n=No.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new Il(this.On,this._n,this.persistence.getIndexManager()),this.Qe=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Fn)}))},e}();function Bl(e,t,n,r){return new Ll(e,t,n,r)}function kl(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o;return vo(this,(function(a){switch(a.label){case 0:return n=Ro(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new Il(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=$s(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var f=0,p=t;f<p.length;f++){var m=p[f];r.push(m.batchId);for(var g=0,v=m.mutations;g<v.length;g++){var y=v[g];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Dl(e,t){var n=Ro(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=pc.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);Io(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function Ol(e){var t=Ro(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function Nl(e,t){var n=Ro(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return Io(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.qe.updateTargetData(e,c))}}}));var s=Js();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Fl(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(No.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return pc.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.Fn=i,e}))}function Fl(e,t,n,r,i){var o=$s();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Js();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(No.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):Ao("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Ul(e,t){var n=Ro(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function Gl(e,t){var n=Ro(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,pc.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new Cc(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e}))}function Hl(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o,a;return vo(this,(function(s){switch(s.label){case 0:r=Ro(e),i=r.Fn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!bc(a=s.sent()))throw a;return Ao("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}}))}))}function zl(e,t,n){var r=Ro(e),i=No.min(),o=$s();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ro(e),i=r.kn.get(n);return void 0!==i?pc.resolve(r.Fn.get(i)):r.qe.getTargetData(t,n)}(r,e,Ya(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:No.min(),n?o:$s())})).next((function(e){return{documents:e,Bn:o}}))}))}function Vl(e,t){var n=Ro(e),r=Ro(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function jl(e){var t=Ro(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Ro(e),i=Js(),o=Lc(n),a=bl(t),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:tc.readTimeIndex,range:s},(function(e,t){var n=Rc(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:Bc(o)}}))}(t.On,e,t.$n)})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function Wl(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){return[2,(t=Ro(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=bl(e),n=No.min();return t.$t({index:tc.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=Bc(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.$n=e}))]}))}))}function ql(e,t,n,r){return go(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,d,f;return vo(this,(function(p){switch(p.label){case 0:for(i=Ro(e),o=$s(),a=Js(),s=Qs(),u=0,c=n;u<c.length;u++)l=c[u],h=t.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,t.Un(l)),s=s.insert(h,t.Qn(l.metadata.readTime));return d=i.On.newChangeBuffer({trackRemovals:!0}),[4,Gl(i,function(e){return Ya(Va(zo.fromString("__bundle__/docs/"+e)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Fl(e,d,a,No.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,f.targetId).next((function(){return i.qe.addMatchingKeys(e,o,f.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Jl(e,t,n){return void 0===n&&(n=$s()),go(this,void 0,void 0,(function(){var r,i;return vo(this,(function(o){switch(o.label){case 0:return[4,Gl(e,Ya(Uc(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ro(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=vu(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(e,t);var a=r.withResumeToken(qo.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(e,t)}))}))]}}))}))}var Kl=function(){function e(e){this.R=e,this.Kn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return pc.resolve(this.Kn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Kn.set(t.id,{id:(n=t).id,version:n.version,createTime:vu(n.createTime)}),pc.resolve()},e.prototype.getNamedQuery=function(e,t){return pc.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Uc(e.bundledQuery),readTime:vu(e.readTime)}}(t)),pc.resolve()},e}(),Xl=function(){function e(){this.Wn=new js(Yl.Gn),this.zn=new js(Yl.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Yl(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new Yl(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new ra(new zo([])),r=new Yl(n,e),i=new Yl(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new ra(new zo([])),n=new Yl(t,e),r=new Yl(t,e+1),i=$s();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Yl(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Yl=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return ra.comparator(e.key,t.key)||Bo(e.ns,t.ns)},e.Hn=function(e,t){return Bo(e.ns,t.ns)||ra.comparator(e.key,t.key)},e}(),Ql=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new js(Yl.Gn)}return e.prototype.checkEmpty=function(e){return pc.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Tc(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Yl(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return pc.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return pc.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return pc.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return pc.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return pc.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Yl(t,0),i=new Yl(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),pc.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new js(Bo);return t.forEach((function(e){var t=new Yl(e,0),i=new Yl(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),pc.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;ra.isDocumentKey(i)||(i=i.child(""));var o=new Yl(new ra(i),0),a=new js(Bo);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),pc.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Io(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return pc.forEach(t.mutations,(function(i){var o=new Yl(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new Yl(t,0),r=this.rs.firstAfterOrEqual(n);return pc.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,pc.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),Zl=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new Hs(ra.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return pc.resolve(n?n.document.clone():wa.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Js();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():wa.newInvalidDocument(e))})),pc.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Js(),i=new ra(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||ts(t,c)&&(r=r.insert(c.key,c.clone()))}return pc.resolve(r)},e.prototype.fs=function(e,t){return pc.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new $l(this)},e.prototype.getSize=function(e){return pc.resolve(this.size)},e}(),$l=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return mo(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),pc.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ml),eh=function(){function e(e){this.persistence=e,this.ds=new pl((function(e){return Ea(e)}),Aa),this.lastRemoteSnapshotVersion=No.min(),this.highestTargetId=0,this.ws=0,this._s=new Xl,this.targetCount=0,this.ys=nl.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),pc.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return pc.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return pc.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),pc.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),pc.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,pc.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),pc.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,pc.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),pc.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return pc.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return pc.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),pc.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),pc.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),pc.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return pc.resolve(n)},e.prototype.containsKey=function(e,t){return pc.resolve(this._s.containsKey(t))},e}(),th=function(){function e(e,t){var n=this;this.gs={},this.Ne=new bo(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new eh(this),this.Ut=new Vc,this.Ue=function(e,t){return new Zl(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new Ic(t),this.Qe=new Kl(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new Ql(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;Ao("MemoryPersistence","Starting transaction:",e);var i=new nh(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return pc.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),nh=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return mo(t,e),t}(dc),rh=function(){function e(e){this.persistence=e,this.As=new Xl,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Co()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),pc.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),pc.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),pc.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pc.forEach(this.vs,(function(r){var i=ra.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return pc.or([function(){return pc.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),ih=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function oh(e,t){return"firestore_clients_"+e+"_"+t}function ah(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function sh(e,t){return"firestore_targets_"+e+"_"+t}ih.UNAUTHENTICATED=new ih(null),ih.GOOGLE_CREDENTIALS=new ih("google-credentials-uid"),ih.FIRST_PARTY=new ih("first-party-uid");var uh=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new xo(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(So("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),ch=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xo(i.error.code,i.error.message)),o?new e(t,i.state,r):(So("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),lh=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=tu(),a=0;i&&a<r.activeTargetIds.length;++a)i=na(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(So("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),hh=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(So("SharedClientState","Failed to parse online state: "+t),null)},e}(),dh=function(){function e(){this.activeTargetIds=tu()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),fh=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Hs(Bo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=oh(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new dh),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Qs=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return go(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return vo(this,(function(d){switch(d.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=d.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(oh(this.persistenceKey,r)))&&(o=lh.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(sh(this.persistenceKey,e));if(n){var r=ch.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Ks(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Ks()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(sh(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return Ao("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){Ao("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){Ao("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ao("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void So("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return go(t,void 0,void 0,(function(){var e,t,r,i,o,a;return vo(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=bo.o;if(null!=e)try{var n=JSON.parse(e);Io("number"==typeof n),t=n}catch(e){So("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==bo.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new uh(this.currentUser,e,t,n),i=ah(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=ah(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=sh(this.persistenceKey,e),i=new ch(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return lh.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return uh.Vs(new ih(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return ch.Vs(r,t)},e.prototype.js=function(e){return hh.Vs(e)},e.prototype.ii=function(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(Ao("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=tu();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),ph=function(){function e(){this.li=new dh,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new dh,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),mh=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),gh=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){Ao("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){Ao("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),vh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yh=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),bh=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n}return mo(t,e),t.prototype.ki=function(e,t,n,r){return new Promise((function(i,o){var a=new fo;a.listenOnce(so.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case ao.NO_ERROR:var t=a.getResponseJson();Ao("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ao.TIMEOUT:Ao("Connection",'RPC "'+e+'" timed out'),o(new xo(wo.DEADLINE_EXCEEDED,"Request time out"));break;case ao.HTTP_ERROR:var n=a.getStatus();if(Ao("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(wo).indexOf(t)>=0?t:wo.UNKNOWN}(r.status);o(new xo(s,r.message))}else o(new xo(wo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new xo(wo.UNAVAILABLE,"Connection failed."));break;default:Co()}}finally{Ao("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=new to,o=rr(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,t),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ye())||"object"==typeof navigator&&"ReactNative"===navigator.product||ye().indexOf("Electron/")>=0||function(){var e=ye();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||ye().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Ao("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,h=new yh({Ei:function(e){l?Ao("Connection","Not sending because WebChannel is closed:",e):(c||(Ao("Connection","Opening WebChannel transport."),u.open(),c=!0),Ao("Connection","WebChannel sending:",e),u.send(e))},Ti:function(){return u.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(u,ho.EventType.OPEN,(function(){l||Ao("Connection","WebChannel transport opened.")})),d(u,ho.EventType.CLOSE,(function(){l||(l=!0,Ao("Connection","WebChannel transport closed"),h.Vi())})),d(u,ho.EventType.ERROR,(function(e){l||(l=!0,To("Connection","WebChannel transport errored:",e),h.Vi(new xo(wo.UNAVAILABLE,"The operation could not be completed")))})),d(u,ho.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Io(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ao("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=ks[e];if(void 0!==t)return Gs(t)}(o),s=i.message;void 0===a&&(a=wo.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new xo(a,s)),u.close()}else Ao("Connection","WebChannel received:",n),h.Si(n)}})),d(o,uo.STAT_EVENT,(function(e){e.stat===co?Ao("Connection","Detected buffering proxy"):e.stat===lo&&Ao("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);Ao("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then((function(e){return Ao("RestConnection","Received: ",e),e}),(function(t){throw To("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=vh[e];return this.Di+"/v1/"+t+":"+n},e}());function wh(){return"undefined"!=typeof window?window:null}function xh(){return"undefined"!=typeof document?document:null}function _h(e){return new fu(e,!0)}var Eh=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Ki=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Ao("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Qi=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),Ah=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Eh(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return go(this,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return go(this,void 0,void 0,(function(){return vo(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return go(this,void 0,void 0,(function(){return vo(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===wo.RESOURCE_EXHAUSTED?(So(t.toString()),So("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):t&&t.code===wo.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new xo(wo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return go(e,void 0,void 0,(function(){return vo(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return Ao("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(Ao("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Sh=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return mo(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Co()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(Io(void 0===t||"string"==typeof t),qo.fromBase64String(t||"")):(Io(void 0===t||t instanceof Uint8Array),qo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?wo.UNKNOWN:Gs(e.code);return new xo(t,e.message||"")}(s);n=new au(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=xu(e,r.document.name),o=vu(r.document.updateTime);var s=new ya({mapValue:{fields:r.document.fields}}),u=(a=wa.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new iu(u,c,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=xu(e,r.document),o=r.readTime?vu(r.readTime):No.min(),s=wa.newNoDocument(i,o),a=r.removedTargetIds||[],n=new iu([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=xu(e,r.document),o=r.removedTargetIds||[],n=new iu([],o,i,null);else{if(!("filter"in t))return Co();t.filter;var l=t.filter;l.targetId,r=l.count||0,i=new Fs(r),o=l.targetId,n=new ou(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return No.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?No.min():t.readTime?vu(t.readTime):No.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=Au(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=Sa(r)?{documents:Ru(e,r)}:{query:Pu(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=mu(e,t.resumeToken):t.snapshotVersion.compareTo(No.min())>0&&(n.readTime=pu(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Co()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=Au(this.R),t.removeTarget=e,this.cr(t)},t}(Ah),Th=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return mo(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(Io(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(Io(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?vu(e.updateTime):vu(t);return n.isEqual(No.min())&&(n=vu(t)),new ws(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=vu(e.commitTime);return this.listener.Tr(n,t)}return Io(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=Au(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Cu(t.R,e)}))};this.cr(n)},t}(Ah),Mh=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return mo(t,e),t.prototype.br=function(){if(this.Rr)throw new xo(wo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new xo(wo.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===wo.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new xo(wo.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),Ch=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(So(t),this.Vr=!1):Ao("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),Ih=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return go(o,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return Fh(this)?(Ao("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return(t=Ro(e)).Or.add(4),[4,Ph(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,Rh(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new Ch(n,r)};function Rh(e){return go(this,void 0,void 0,(function(){var t,n;return vo(this,(function(r){switch(r.label){case 0:if(!Fh(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Ph(e){return go(this,void 0,void 0,(function(){var t,n;return vo(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function Lh(e,t){var n=Ro(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),Nh(n)?Oh(n):$h(n).er()&&kh(n,t))}function Bh(e,t){var n=Ro(e),r=$h(n);n.$r.delete(t),r.er()&&Dh(n,t),0===n.$r.size&&(r.er()?r.ir():Fh(n)&&n.Br.set("Unknown"))}function kh(e,t){e.qr.U(t.targetId),$h(e).mr(t)}function Dh(e,t){e.qr.U(t),$h(e).yr(t)}function Oh(e){e.qr=new uu({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),$h(e).start(),e.Br.Sr()}function Nh(e){return Fh(e)&&!$h(e).tr()&&e.$r.size>0}function Fh(e){return 0===Ro(e).Or.size}function Uh(e){e.qr=void 0}function Gh(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){return e.$r.forEach((function(t,n){kh(e,t)})),[2]}))}))}function Hh(e,t){return go(this,void 0,void 0,(function(){return vo(this,(function(n){return Uh(e),Nh(e)?(e.Br.Nr(t),Oh(e)):e.Br.set("Unknown"),[2]}))}))}function zh(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o;return vo(this,(function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof au&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o;return vo(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Ao("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Vh(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof iu?e.qr.X(t):t instanceof ou?e.qr.rt(t):e.qr.et(t),n.isEqual(No.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ol(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.$r.get(r);i&&e.$r.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.$r.get(t);if(n){e.$r.set(t,n.withResumeToken(qo.EMPTY_BYTE_STRING,n.snapshotVersion)),Dh(e,t);var r=new Cc(n.target,t,1,n.sequenceNumber);kh(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Ao("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,Vh(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Vh(e,t,n){return go(this,void 0,void 0,(function(){var r=this;return vo(this,(function(i){switch(i.label){case 0:if(!bc(t))throw t;return e.Or.add(1),[4,Ph(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Ol(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return go(r,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return Ao("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,Rh(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function jh(e,t){return t().catch((function(n){return Vh(e,n,t)}))}function Wh(e){return go(this,void 0,void 0,(function(){var t,n,r,i,o;return vo(this,(function(a){switch(a.label){case 0:t=Ro(e),n=ed(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return Fh(e)&&e.kr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Ul(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=ed(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,Vh(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return qh(t)&&Jh(t),[2]}}))}))}function qh(e){return Fh(e)&&!ed(e).tr()&&e.kr.length>0}function Jh(e){ed(e).start()}function Kh(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){return ed(e).Ar(),[2]}))}))}function Xh(e){return go(this,void 0,void 0,(function(){var t,n,r,i;return vo(this,(function(o){for(t=ed(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function Yh(e,t,n){return go(this,void 0,void 0,(function(){var r,i;return vo(this,(function(o){switch(o.label){case 0:return r=e.kr.shift(),i=Mc.from(r,t,n),[4,jh(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Wh(e)];case 2:return o.sent(),[2]}}))}))}function Qh(e,t){return go(this,void 0,void 0,(function(){return vo(this,(function(n){switch(n.label){case 0:return t&&ed(e).pr?[4,function(e,t){return go(this,void 0,void 0,(function(){var n,r;return vo(this,(function(i){switch(i.label){case 0:return Us(r=t.code)&&r!==wo.ABORTED?(n=e.kr.shift(),ed(e).sr(),[4,jh(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,Wh(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return qh(e)&&Jh(e),[2]}}))}))}function Zh(e,t){return go(this,void 0,void 0,(function(){var n;return vo(this,(function(r){switch(r.label){case 0:return n=Ro(e),t?(n.Or.delete(2),[4,Rh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,Ph(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function $h(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=Ro(e);return r.br(),new Sh(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Gh.bind(null,e),Ri:Hh.bind(null,e),_r:zh.bind(null,e)}),e.Mr.push((function(n){return go(t,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),Nh(e)?Oh(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),Uh(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function ed(e){var t=this;return e.Qr||(e.Qr=function(e,t,n){var r=Ro(e);return r.br(),new Th(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Kh.bind(null,e),Ri:Qh.bind(null,e),Ir:Xh.bind(null,e),Tr:Yh.bind(null,e)}),e.Mr.push((function(n){return go(t,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return n?(e.Qr.sr(),[4,Wh(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Qr.stop()];case 3:t.sent(),e.kr.length>0&&(Ao("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Qr}var td=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new fc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xo(wo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function nd(e,t){if(So("AsyncQueue",t+": "+e),bc(e))return new xo(wo.UNAVAILABLE,t+": "+e);throw e}var rd=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ra.comparator(t.key,n.key)}:function(e,t){return ra.comparator(e.key,t.key)},this.keyedMap=Xs(),this.sortedSet=new Hs(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),id=function(){function e(){this.Kr=new Hs(ra.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Kr.get(t);n?0!==e.type&&3===n.type?this.Kr=this.Kr.insert(t,e):3===e.type&&1!==n.type?this.Kr=this.Kr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Kr=this.Kr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Kr=this.Kr.remove(t):1===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):Co():this.Kr=this.Kr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Kr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),od=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,rd.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Za(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),ad=function(){this.Wr=void 0,this.listeners=[]},sd=function(){this.queries=new pl((function(e){return $a(e)}),Za),this.onlineState="Unknown",this.Gr=new Set};function ud(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return vo(this,(function(c){switch(c.label){case 0:if(n=Ro(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ad),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=nd(s,"Initialization of query '"+es(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&dd(n),[2]}}))}))}function cd(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a;return vo(this,(function(s){return n=Ro(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function ld(e,t){for(var n=Ro(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&dd(n)}function hd(e,t,n){var r=Ro(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function dd(e){e.Gr.forEach((function(e){e.next()}))}var fd=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new od(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),pd=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),md=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return xu(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?Mu(this.R,e.document,!1):wa.newNoDocument(this.qn(e.metadata.name),this.Qn(e.metadata.readTime))},e.prototype.Qn=function(e){return vu(e)},e}();!function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=function(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(e)}e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new md(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||$s()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return go(this,void 0,void 0,(function(){var e,t,n,r,i;return vo(this,(function(o){switch(o.label){case 0:return[4,ql(this.localStore,new md(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Jl(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Cl(Object.assign({},this.progress),e))]}}))}))}}();var gd=function(e){this.key=e},vd=function(e){this.key=e},yd=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=$s(),this.mutatedKeys=$s(),this.lo=ns(e),this.fo=new rd(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new id,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=ja(this.query)&&i.size===this.query.limit?i.last():null,c=Wa(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=ts(n.query,t)?t:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=f?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),ja(this.query)||Wa(this.query))for(;a.size>this.query.limit;){var l=ja(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Co()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new od(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new id,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=$s(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new vd(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new gd(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=$s();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return od.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),bd=function(e,t,n){this.query=e,this.targetId=t,this.view=n},wd=function(e){this.key=e,this.bo=!1},xd=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new pl((function(e){return $a(e)}),Za),this.Vo=new Map,this.So=new Set,this.Do=new Hs(ra.comparator),this.Co=new Map,this.No=new Xl,this.xo={},this.Fo=new Map,this.ko=nl.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function _d(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vo(this,(function(u){switch(u.label){case 0:return n=Qd(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Gl(n.localStore,Ya(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Ed(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&Lh(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function Ed(e,t,n,r){return go(this,void 0,void 0,(function(){var i,o,a,s,u,c;return vo(this,(function(l){switch(l.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return go(this,void 0,void 0,(function(){var i,o,a;return vo(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,zl(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(Od(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,zl(e.localStore,t,!0)];case 1:return i=l.sent(),o=new yd(t,i.Bn),a=o._o(i.documents),s=ru.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),Od(e,n,u.To),c=new bd(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function Ad(e,t){return go(this,void 0,void 0,(function(){var n,r,i;return vo(this,(function(o){switch(o.label){case 0:return n=Ro(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!Za(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Hl(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Bh(n.remoteStore,r.targetId),kd(n,r.targetId)})).catch(sl)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return kd(n,r.targetId),[4,Hl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Sd(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o,a;return vo(this,(function(s){switch(s.label){case 0:r=Zd(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(e,t){var n,r=Ro(e),i=Oo.now(),o=t.reduce((function(e,t){return e.add(t.key)}),$s());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=Ts(c,n.get(c.key));null!=l&&a.push(new Rs(c.key,l,ba(l.value.mapValue),xs.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(r.localStore,t)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new Hs(Bo)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ud(r,i.changes)];case 3:return s.sent(),[4,Wh(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=nd(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Td(e,t){return go(this,void 0,void 0,(function(){var n,r;return vo(this,(function(i){switch(i.label){case 0:n=Ro(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Nl(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(Io(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?Io(r.bo):e.removedDocuments.size>0&&(Io(r.bo),r.bo=!1))})),[4,Ud(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,sl(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Md(e,t,n){var r=Ro(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ro(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&dd(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Cd(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o,a,s,u;return vo(this,(function(c){switch(c.label){case 0:return(r=Ro(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new Hs(ra.comparator)).insert(o,wa.newNoDocument(o,No.min())),s=$s().add(o),u=new nu(No.min(),new Map,new js(Bo),a,s),[4,Td(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),Fd(r),[3,4];case 2:return[4,Hl(r.localStore,t,!1).then((function(){return kd(r,t,n)})).catch(sl)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Id(e,t){return go(this,void 0,void 0,(function(){var n,r,i;return vo(this,(function(o){switch(o.label){case 0:n=Ro(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Dl(n.localStore,t)];case 2:return i=o.sent(),Bd(n,r,null),Ld(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ud(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,sl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Rd(e,t,n){return go(this,void 0,void 0,(function(){var r,i;return vo(this,(function(o){switch(o.label){case 0:r=Ro(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=Ro(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return Io(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),Bd(r,t,n),Ld(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Ud(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,sl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Pd(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a;return vo(this,(function(s){switch(s.label){case 0:Fh((n=Ro(e)).remoteStore)||Ao("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(e){var t=Ro(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=nd(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}}))}))}function Ld(e,t){(e.Fo.get(t)||[]).forEach((function(e){e.resolve()})),e.Fo.delete(t)}function Bd(e,t,n){var r=Ro(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function kd(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||Dd(e,t)}))}function Dd(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(Bh(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Fd(e))}function Od(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof gd?(e.No.addReference(o.key,t),Nd(e,o)):o instanceof vd?(Ao("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Dd(e,o.key)):Co()}}function Nd(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(Ao("SyncEngine","New document in limbo: "+n),e.So.add(r),Fd(e))}function Fd(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new ra(zo.fromString(t)),r=e.ko.next();e.Co.set(r,new wd(n)),e.Do=e.Do.insert(n,r),Lh(e.remoteStore,new Cc(Ya(Va(n.path)),r,2,bo.o))}}function Ud(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o,a;return vo(this,(function(s){switch(s.label){case 0:return r=Ro(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=Rl.Pn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return vo(this,(function(h){switch(h.label){case 0:n=Ro(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return pc.forEach(t,(function(t){return pc.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return pc.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!bc(r=h.sent()))throw r;return Ao("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Gd(e,t){return go(this,void 0,void 0,(function(){var n,r;return vo(this,(function(i){switch(i.label){case 0:return(n=Ro(e)).currentUser.isEqual(t)?[3,3]:(Ao("SyncEngine","User change. New user:",t.toKey()),[4,kl(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.Fo.forEach((function(e){e.forEach((function(e){e.reject(new xo(wo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Ud(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Hd(e,t){var n=Ro(e),r=n.Co.get(t);if(r&&r.bo)return $s().add(r.key);var i=$s(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function zd(e,t){return go(this,void 0,void 0,(function(){var n,r,i;return vo(this,(function(o){switch(o.label){case 0:return[4,zl((n=Ro(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&Od(n,t.targetId,i.To),i)]}}))}))}function Vd(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){return[2,jl((t=Ro(e)).localStore).then((function(e){return Ud(t,e)}))]}))}))}function jd(e,t,n,r){return go(this,void 0,void 0,(function(){var i,o;return vo(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=Ro(e),r=Ro(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):pc.resolve(null)}))}))}((i=Ro(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Wh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Bd(i,t,r||null),Ld(i,t),function(e,t){Ro(Ro(e)._n).Gt(t)}(i.localStore,t)):Co(),a.label=4;case 4:return[4,Ud(i,o)];case 5:return a.sent(),[3,7];case 6:Ao("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function Wd(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return vo(this,(function(l){switch(l.label){case 0:return Qd(n=Ro(e)),Zd(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,qd(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Zh(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],Lh(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):c=c.then((function(){return kd(n,t),Hl(n.localStore,t,!0)})),Bh(n.remoteStore,t)})),[4,c]);case 4:return l.sent(),[4,qd(n,u)];case 5:return l.sent(),function(e){var t=Ro(e);t.Co.forEach((function(e,n){Bh(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new Hs(ra.comparator)}(n),n.$o=!1,[4,Zh(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}}))}))}function qd(e,t,n){return go(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,d,f,p,m;return vo(this,(function(g){switch(g.label){case 0:n=Ro(e),r=[],i=[],o=0,a=t,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,Gl(n.localStore,Ya(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=h[l],f=n.Po.get(d),[4,zd(n,f)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Vl(n.localStore,s)];case 8:return m=g.sent(),[4,Gl(n.localStore,m)];case 9:return u=g.sent(),[4,Ed(n,Jd(m),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jd(e){return za(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Kd(e){var t=Ro(e);return Ro(Ro(t.localStore).persistence).fn()}function Xd(e,t,n,r){return go(this,void 0,void 0,(function(){var i,o,a;return vo(this,(function(s){switch(s.label){case 0:return(i=Ro(e)).$o?(Ao("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,jl(i.localStore)];case 3:return o=s.sent(),a=nu.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Ud(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,Hl(i.localStore,t,!0)];case 6:return s.sent(),kd(i,t,r),[3,8];case 7:Co(),s.label=8;case 8:return[2]}}))}))}function Yd(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,d;return vo(this,(function(f){switch(f.label){case 0:if(!(r=Qd(e)).$o)return[3,10];i=0,o=t,f.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(Ao("SyncEngine","Adding an already active target "+a),[3,5]):[4,Vl(r.localStore,a)]):[3,6];case 2:return s=f.sent(),[4,Gl(r.localStore,s)];case 3:return u=f.sent(),[4,Ed(r,Jd(s),u.targetId,!1)];case 4:f.sent(),Lh(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(e){return vo(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,Hl(r.localStore,e,!1).then((function(){Bh(r.remoteStore,e),kd(r,e)})).catch(sl)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?(d=h[l],[5,c(d)]):[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Qd(e){var t=Ro(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Td.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cd.bind(null,t),t.vo._r=ld.bind(null,t.eventManager),t.vo.Mo=hd.bind(null,t.eventManager),t}function Zd(e){var t=Ro(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Id.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rd.bind(null,t),t}var $d=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return this.R=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Qo(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Qo=function(e){return Bl(this.persistence,new Pl,e.initialUser,this.R)},e.prototype.qo=function(e){return new th(rh.bs,this.R)},e.prototype.Bo=function(e){return new ph},e.prototype.terminate=function(){return go(this,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),ef=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Ko=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return mo(t,e),t.prototype.initialize=function(t){return go(this,void 0,void 0,(function(){return vo(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Wl(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,t)];case 3:return n.sent(),[4,Zd(this.Ko.syncEngine)];case 4:return n.sent(),[4,Wh(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Qo=function(e){return Bl(this.persistence,new Pl,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new ll(t,e.asyncQueue)},t.prototype.qo=function(e){var t=Ml(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Kc.withCacheSize(this.cacheSizeBytes):Kc.DEFAULT;return new Al(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,wh(),xh(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new ph},t}($d),tf=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Ko=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return mo(t,e),t.prototype.initialize=function(t){return go(this,void 0,void 0,(function(){var n,r=this;return vo(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof fh?(this.sharedClientState.syncEngine={ui:jd.bind(null,n),ai:Xd.bind(null,n),hi:Yd.bind(null,n),fn:Kd.bind(null,n),ci:Vd.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return go(r,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return[4,Wd(this.Ko.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=wh();if(!fh.yt(t))throw new xo(wo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ml(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fh(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(ef),nf=function(){function e(){}return e.prototype.initialize=function(e,t){return go(this,void 0,void 0,(function(){var n=this;return vo(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Md(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Gd.bind(null,this.syncEngine),[4,Zh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new sd},e.prototype.createDatastore=function(e){var t,n=_h(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new bh(t));return function(e,t,n){return new Mh(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Md(a.syncEngine,e,0)},o=gh.yt()?new gh:new mh,new Ih(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new xd(e,t,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return t=Ro(e),Ao("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,Ph(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}(),rf=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),of=(function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new fc,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return go(this,void 0,void 0,(function(){return vo(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return go(this,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return go(this,void 0,void 0,(function(){var e,t,n,r;return vo(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new pd(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return go(this,void 0,void 0,(function(){var e,t;return vo(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return go(this,void 0,void 0,(function(){var e,t;return vo(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))}}(),function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return go(this,void 0,void 0,(function(){var t,n=this;return vo(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xo(wo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return go(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vo(this,(function(u){switch(u.label){case 0:return n=Ro(e),r=Au(n.R)+"/documents",i={documents:t.map((function(e){return wu(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){Io(!!t.found),t.found.name,t.found.updateTime;var n=xu(e,t.found.name),r=vu(t.found.updateTime),i=new ya({mapValue:{fields:t.found.fields}});return wa.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Io(!!t.missing),Io(!!t.readTime);var n=xu(e,t.missing),r=vu(t.readTime);return wa.newNoDocument(n,r)}(e,t):Co()}(n.R,e);a.set(t.key.toString(),t)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());Io(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Os(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return go(this,void 0,void 0,(function(){var e,t=this;return vo(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=ra.fromPath(n);t.mutations.push(new Ns(r,t.precondition(r)))})),[4,function(e,t){return go(this,void 0,void 0,(function(){var n,r,i;return vo(this,(function(o){switch(o.label){case 0:return n=Ro(e),r=Au(n.R)+"/documents",i={writes:t.map((function(e){return Cu(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Co();t=No.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new xo(wo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?xs.updateTime(t):xs.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(No.min()))throw new xo(wo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xs.updateTime(t)}return xs.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}()),af=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Eh(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return go(e,void 0,void 0,(function(){var e,t,n=this;return vo(this,(function(r){return e=new of(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!ea(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Us(t)}return!1},e}(),sf=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=ih.UNAUTHENTICATED,this.clientId=Lo.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return go(r,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return Ao("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return go(this,void 0,void 0,(function(){return vo(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xo(wo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new fc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return go(e,void 0,void 0,(function(){var e,n;return vo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=nd(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function uf(e,t){return go(this,void 0,void 0,(function(){var n,r,i=this;return vo(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),Ao("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return go(i,void 0,void 0,(function(){return vo(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,kl(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function cf(e,t){return go(this,void 0,void 0,(function(){var n,r;return vo(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,lf(e)];case 1:return n=i.sent(),Ao("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return go(this,void 0,void 0,(function(){var n,r;return vo(this,(function(i){switch(i.label){case 0:return(n=Ro(e)).asyncQueue.verifyOperationInProgress(),Ao("RemoteStore","RemoteStore received new credentials"),r=Fh(n),n.Or.add(3),[4,Ph(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,Rh(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function lf(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(Ao("FirestoreClient","Using default OfflineComponentProvider"),[4,uf(e,new $d)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function hf(e){return go(this,void 0,void 0,(function(){return vo(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(Ao("FirestoreClient","Using default OnlineComponentProvider"),[4,cf(e,new nf)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function df(e){return lf(e).then((function(e){return e.persistence}))}function ff(e){return lf(e).then((function(e){return e.localStore}))}function pf(e){return hf(e).then((function(e){return e.remoteStore}))}function mf(e){return hf(e).then((function(e){return e.syncEngine}))}function gf(e){return go(this,void 0,void 0,(function(){var t,n;return vo(this,(function(r){switch(r.label){case 0:return[4,hf(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=_d.bind(null,t.syncEngine),n.onUnlisten=Ad.bind(null,t.syncEngine),n)]}}))}))}function vf(e,t,n){var r=this;void 0===n&&(n={});var i=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(r,void 0,void 0,(function(){var r;return vo(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new rf({next:function(o){t.enqueueAndForget((function(){return cd(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new xo(wo.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new xo(wo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new fd(Va(n.path),o,{includeMetadataChanges:!0,so:!0});return ud(e,a)},[4,gf(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function yf(e,t,n){var r=this;void 0===n&&(n={});var i=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(r,void 0,void 0,(function(){var r;return vo(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new rf({next:function(n){t.enqueueAndForget((function(){return cd(e,a)})),n.fromCache&&"server"===r.source?i.reject(new xo(wo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new fd(n,o,{includeMetadataChanges:!0,so:!0});return ud(e,a)},[4,gf(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var bf=function(e,t,n,r,i,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},wf=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),xf=new Map,_f=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},Ef=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(ih.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Af=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),Sf=function(){function e(e){var t=this;this.currentUser=ih.UNAUTHENTICATED,this.oc=new fc,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){t.cc++,t.currentUser=t.hc(),t.oc.resolve(),t.uc&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){Ao("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.lc(),t.auth.addAuthTokenListener(t.ac)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):t.uc&&(Ao("FirebaseCredentialsProvider","Auth not yet detected"),t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)})))}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(Ao("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Io("string"==typeof n.accessToken),new _f(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){this.uc=!0,this.asyncQueue=e,this.changeListener=t},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},e.prototype.hc=function(){var e=this.auth&&this.auth.getUid();return Io(null===e||"string"==typeof e),new ih(e)},e.prototype.lc=function(){var e=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return go(e,void 0,void 0,(function(){return vo(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,this.changeListener(this.currentUser)];case 2:return e.sent(),this.uc=!0,[2]}}))}))})))},e}(),Tf=function(){function e(e,t,n){this.fc=e,this.dc=t,this.wc=n,this.type="FirstParty",this.user=ih.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.dc},t=this.fc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.wc&&(e["X-Goog-Iam-Authorization-Token"]=this.wc),e},enumerable:!1,configurable:!0}),e}(),Mf=function(){function e(e,t,n){this.fc=e,this.dc=t,this.wc=n}return e.prototype.getToken=function(){return Promise.resolve(new Tf(this.fc,this.dc,this.wc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(ih.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Cf(e,t,n){if(!n)throw new xo(wo.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function If(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xo(wo.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Rf(e,t,n,r){if(!0===t&&!0===r)throw new xo(wo.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Pf(e){if(!ra.isDocumentKey(e))throw new xo(wo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Lf(e){if(ra.isDocumentKey(e))throw new xo(wo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Bf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Co()}function kf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new xo(wo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Bf(e);throw new xo(wo.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Df(e,t){if(t<=0)throw new xo(wo.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var Of=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xo(wo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xo(wo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,Rf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),Nf=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Of({}),this._settingsFrozen=!1,e instanceof wf?(this._databaseId=e,this._credentials=new Ef):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xo(wo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wf(e.options.projectId)}(e),this._credentials=new Sf(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new xo(wo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new xo(wo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Of(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Ef;switch(e.type){case"gapi":var t=e.client;return Io(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Mf(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new xo(wo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return(e=xf.get(this))&&(Ao("ComponentProvider","Removing Datastore"),xf.delete(this),e.terminate()),Promise.resolve();var e},e}(),Ff=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Gf(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Uf=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Gf=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Va(r))||this)._path=r,i.type="collection",i}return mo(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ff(this.firestore,null,new ra(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Uf);function Hf(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ce(e),Cf("collection","path",t),e instanceof Nf)return Lf(n=zo.fromString.apply(zo,yo([t],r))),new Gf(e,null,n);if(!(e instanceof Ff||e instanceof Gf))throw new xo(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Lf(n=zo.fromString.apply(zo,yo([e.path],r)).child(zo.fromString(t))),new Gf(e.firestore,null,n)}function zf(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=Ce(e),1===arguments.length&&(t=Lo.u()),Cf("doc","path",t),e instanceof Nf)return Pf(n=zo.fromString.apply(zo,yo([t],r))),new Ff(e,null,new ra(n));if(!(e instanceof Ff||e instanceof Gf))throw new xo(wo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Pf(n=e._path.child(zo.fromString.apply(zo,yo([t],r)))),new Ff(e.firestore,e instanceof Gf?e.converter:null,new ra(n))}function Vf(e,t){return e=Ce(e),t=Ce(t),(e instanceof Ff||e instanceof Gf)&&(t instanceof Ff||t instanceof Gf)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function jf(e,t){return e=Ce(e),t=Ce(t),e instanceof Uf&&t instanceof Uf&&e.firestore===t.firestore&&Za(e._query,t._query)&&e.converter===t.converter}var Wf=function(){function e(){var e=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new Eh(this,"async_queue_retry"),this.Ac=function(){var t=xh();t&&Ao("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=xh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Rc(),this.bc(e)},e.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var e=xh();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ac)}},e.prototype.enqueue=function(e){return this.Rc(),this.yc?new Promise((function(e){})):this.bc(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.mc.push(e),t.vc()}))},e.prototype.vc=function(){return go(this,void 0,void 0,(function(){var e,t=this;return vo(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!bc(e=n.sent()))throw e;return Ao("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return t.vc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.bc=function(e){var t=this,n=this._c.then((function(){return t.Tc=!0,e().catch((function(e){throw t.Ec=e,t.Tc=!1,So("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.Tc=!1,e}))}));return this._c=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Rc(),this.Ic.indexOf(e)>-1&&(t=0);var i=td.createAndSchedule(this,e,t,n,(function(e){return r.Pc(e)}));return this.gc.push(i),i},e.prototype.Rc=function(){this.Ec&&Co()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Vc=function(){return go(this,void 0,void 0,(function(){var e;return vo(this,(function(t){switch(t.label){case 0:return[4,e=this._c];case 1:t.sent(),t.label=2;case 2:if(e!==this._c)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Sc=function(e){for(var t=0,n=this.gc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Dc=function(e){var t=this;return this.Vc().then((function(){t.gc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Vc()}))},e.prototype.Cc=function(e){this.Ic.push(e)},e.prototype.Pc=function(e){var t=this.gc.indexOf(e);this.gc.splice(t,1)},e}();function qf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}!function(){function e(){this._progressObserver={},this._taskCompletionResolver=new fc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Jf=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Wf,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return mo(t,e),t.prototype._terminate=function(){return this._firestoreClient||Xf(this),this._firestoreClient.terminate()},t}(Nf);function Kf(e){return e._firestoreClient||Xf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Xf(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new bf(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new sf(e._credentials,e._queue,r)}function Yf(e,t,n){var r=this,i=new fc;return e.asyncQueue.enqueue((function(){return go(r,void 0,void 0,(function(){var r;return vo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,uf(e,n)];case 1:return o.sent(),[4,cf(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===wo.FAILED_PRECONDITION||e.code===wo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Qf(e){if(e._initialized||e._terminated)throw new xo(wo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zf=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new xo(wo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jo(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),$f=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(qo.fromBase64String(t))}catch(t){throw new xo(wo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(qo.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),ep=function(e){this._methodName=e},tp=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new xo(wo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xo(wo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return Bo(this._lat,e._lat)||Bo(this._long,e._long)},e}(),np=/^__.*__$/,rp=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Is(e,this.data,t,this.fieldTransforms)},e}(),ip=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function op(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Co()}}var ap=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),e.prototype.Fc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fc({path:n,$c:!1});return r.Oc(e),r},e.prototype.Mc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fc({path:n,$c:!1});return r.Nc(),r},e.prototype.Lc=function(e){return this.Fc({path:void 0,$c:!0})},e.prototype.Bc=function(e){return Tp(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Nc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Oc(this.path.get(e))},e.prototype.Oc=function(e){if(0===e.length)throw this.Bc("Document fields must not be empty");if(op(this.xc)&&np.test(e))throw this.Bc('Document fields cannot begin and end with "__"')},e}(),sp=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||_h(e)}return e.prototype.Qc=function(e,t,n,r){return void 0===r&&(r=!1),new ap({xc:e,methodName:t,Uc:n,path:jo.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function up(e){var t=e._freezeSettings(),n=_h(e._databaseId);return new sp(e._databaseId,!!t.ignoreUndefinedProperties,n)}function cp(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Qc(o.merge||o.mergeFields?2:0,t,n,i);_p("Data must be an object, but it was:",a,r);var s,u,c=wp(r,a);if(o.merge)s=new Wo(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Ep(t,d[h],n);if(!a.contains(f))throw new xo(wo.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Mp(l,f)||l.push(f)}s=new Wo(l),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new rp(new ya(c),s,u)}var lp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.xc)throw 1===e.xc?e.Bc(this._methodName+"() can only appear at the top level of your update data"):e.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(ep);function hp(e,t,n){return new ap({xc:3,Uc:t.settings.Uc,methodName:e._methodName,$c:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var dp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype._toFieldTransform=function(e){return new bs(e.path,new hs)},t.prototype.isEqual=function(e){return e instanceof t},t}(ep),fp=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return mo(t,e),t.prototype._toFieldTransform=function(e){var t=hp(this,e,!0),n=this.Kc.map((function(e){return bp(e,t)})),r=new ds(n);return new bs(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ep),pp=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return mo(t,e),t.prototype._toFieldTransform=function(e){var t=hp(this,e,!0),n=this.Kc.map((function(e){return bp(e,t)})),r=new ps(n);return new bs(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(ep),mp=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).jc=n,r}return mo(t,e),t.prototype._toFieldTransform=function(e){var t=new gs(e.R,as(e.R,this.jc));return new bs(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(ep);function gp(e,t,n,r){var i=e.Qc(1,t,n);_p("Data must be an object, but it was:",i,r);var o=[],a=ya.empty();Uo(r,(function(e,r){var s=Sp(t,e,n);r=Ce(r);var u=i.Mc(s);if(r instanceof lp)o.push(s);else{var c=bp(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Wo(o);return new ip(a,s,i.fieldTransforms)}function vp(e,t,n,r,i,o){var a=e.Qc(1,t,n),s=[Ep(t,r,n)],u=[i];if(o.length%2!=0)throw new xo(wo.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Ep(t,o[c])),u.push(o[c+1]);for(var l=[],h=ya.empty(),d=s.length-1;d>=0;--d)if(!Mp(l,s[d])){var f=s[d],p=u[d];p=Ce(p);var m=a.Mc(f);if(p instanceof lp)l.push(f);else{var g=bp(p,m);null!=g&&(l.push(f),h.set(f,g))}}var v=new Wo(l);return new ip(h,v,a.fieldTransforms)}function yp(e,t,n,r){return void 0===r&&(r=!1),bp(n,e.Qc(r?4:3,t))}function bp(e,t){if(xp(e=Ce(e)))return _p("Unsupported field value:",t,e),wp(e,t);if(e instanceof ep)return function(e,t){if(!op(t.xc))throw t.Bc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Bc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.$c&&4!==t.xc)throw t.Bc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=bp(o[i],t.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ce(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return as(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Oo.fromDate(e);return{timestampValue:pu(t.R,n)}}if(e instanceof Oo)return n=new Oo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:pu(t.R,n)};if(e instanceof tp)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $f)return{bytesValue:mu(t.R,e._byteString)};if(e instanceof Ff){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:yu(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Bc("Unsupported field value: "+Bf(e))}(e,t)}function wp(e,t){var n={};return Go(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Uo(e,(function(e,r){var i=bp(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function xp(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Oo||e instanceof tp||e instanceof $f||e instanceof Ff||e instanceof ep)}function _p(e,t,n){if(!xp(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Bf(n);throw"an object"===r?t.Bc(e+" a custom object"):t.Bc(e+" "+r)}}function Ep(e,t,n){if((t=Ce(t))instanceof Zf)return t._internalPath;if("string"==typeof t)return Sp(e,t);throw Tp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Ap=new RegExp("[~\\*/\\[\\]]");function Sp(e,t,n){if(t.search(Ap)>=0)throw Tp("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Zf.bind.apply(Zf,yo([void 0],t.split(".")))))._internalPath}catch(r){throw Tp("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Tp(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new xo(wo.INVALID_ARGUMENT,(s+=". ")+e+u)}function Mp(e,t){return e.some((function(e){return e.isEqual(t)}))}var Cp=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ff(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Ip(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Rp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Ip=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Cp);function Rp(e,t){return"string"==typeof t?Sp(e,t):t instanceof Zf?t._internalPath:t._delegate._internalPath}var Pp=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Lp=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return mo(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Rp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Cp),Bp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Lp),kp=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Bp(n._firestore,n._userDataWriter,r.key,r,new Pp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xo(wo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Bp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Bp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Pp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Dp(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function Dp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Co()}}function Op(e,t){return e instanceof Lp&&t instanceof Lp?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof kp&&t instanceof kp&&e._firestore===t._firestore&&jf(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Np(e){if(Wa(e)&&0===e.explicitOrderBy.length)throw new xo(wo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fp=function(){};function Up(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Gp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Wc=t,i.Gc=n,i.zc=r,i.type="where",i}return mo(t,e),t.prototype._apply=function(e){var t=up(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xo(wo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Jp(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(qp(r,e,h))}s={arrayValue:{values:u}}}else s=qp(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Jp(a,o),s=yp(n,"where",a,"in"===o||"not-in"===o);var d=Ta.create(i,o,s);return function(e,t){if(t.g()){var n=Ja(e);if(null!==n&&!n.isEqual(t.field))throw new xo(wo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=qa(e);null!==r&&Kp(0,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new xo(wo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new xo(wo.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,d),d}(e._query,0,t,e.firestore._databaseId,this.Wc,this.Gc,this.zc);return new Uf(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Fp),Hp=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Wc=t,r.Hc=n,r.type="orderBy",r}return mo(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new xo(wo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xo(wo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Na(t,n);return function(e,t){if(null===qa(e)){var n=Ja(e);null!==n&&Kp(0,n,t.field)}}(e,r),r}(e._query,this.Wc,this.Hc);return new Uf(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ha(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Fp),zp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Jc=n,i.Yc=r,i}return mo(t,e),t.prototype._apply=function(e){return new Uf(e.firestore,e.converter,Qa(e._query,this.Jc,this.Yc))},t}(Fp),Vp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Xc=n,i.Zc=r,i}return mo(t,e),t.prototype._apply=function(e){var t=Wp(e,this.type,this.Xc,this.Zc);return new Uf(e.firestore,e.converter,function(e,t){return new Ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Fp),jp=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Xc=n,i.Zc=r,i}return mo(t,e),t.prototype._apply=function(e){var t=Wp(e,this.type,this.Xc,this.Zc);return new Uf(e.firestore,e.converter,function(e,t){return new Ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Fp);function Wp(e,t,n,r){if(n[0]=Ce(n[0]),n[0]instanceof Cp)return function(e,t,n,r,i){if(!r)throw new xo(wo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Xa(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(ha(t,r.key));else{var c=r.data.field(u.field);if(Qo(c))throw new xo(wo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new xo(wo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Da(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=up(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new xo(wo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new xo(wo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ka(e)&&-1!==c.indexOf("/"))throw new xo(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(zo.fromString(c));if(!ra.isDocumentKey(l))throw new xo(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ra(l);s.push(ha(t,h))}else{var d=yp(n,r,c);s.push(d)}}return new Da(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function qp(e,t,n){if("string"==typeof(n=Ce(n))){if(""===n)throw new xo(wo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ka(t)&&-1!==n.indexOf("/"))throw new xo(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(zo.fromString(n));if(!ra.isDocumentKey(r))throw new xo(wo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ha(e,new ra(r))}if(n instanceof Ff)return ha(e,n._key);throw new xo(wo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Bf(n)+".")}function Jp(e,t){if(!Array.isArray(e)||0===e.length)throw new xo(wo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new xo(wo.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Kp(e,t,n){if(!n.isEqual(t))throw new xo(wo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Xp=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Co()}},e.prototype.convertObject=function(e,t){var n=this,r={};return Uo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new tp(Xo(e.latitude),Xo(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=Zo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp($o(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=Ko(e);return new Oo(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=zo.fromString(e);Io(Vu(n));var r=new wf(n.get(1),n.get(3)),i=new ra(n.popFirst(5));return r.isEqual(t)||So("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function Yp(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Qp=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return mo(t,e),t.prototype.convertBytes=function(e){return new $f(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ff(this.firestore,null,t)},t}(Xp),Zp=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=up(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=$p(e,this._firestore),i=Yp(r.converter,t,n),o=cp(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,xs.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=$p(e,this._firestore);return o="string"==typeof(t=Ce(t))||t instanceof Zf?vp(this._dataReader,"WriteBatch.update",a._key,t,n,r):gp(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,xs.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=$p(e,this._firestore);return this._mutations=this._mutations.concat(new Os(t._key,xs.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new xo(wo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function $p(e,t){if((e=Ce(e)).firestore!==t)throw new xo(wo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var em=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return mo(t,e),t.prototype.convertBytes=function(e){return new $f(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ff(this.firestore,null,t)},t}(Xp);function tm(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=kf(e,Ff);var o=kf(e.firestore,Jf),a=up(o);return rm(o,[("string"==typeof(t=Ce(t))||t instanceof Zf?vp(a,"updateDoc",e._key,t,n,r):gp(a,"updateDoc",e._key,t)).toMutation(e._key,xs.exists(!0))])}function nm(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=Ce(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||qf(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(qf(i[s])){var d=i[s];i[s]=null===(t=d.next)||void 0===t?void 0:t.bind(d),i[s+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[s+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(e instanceof Ff)c=kf(e.firestore,Jf),l=Va(e._key.path),u={next:function(t){i[s]&&i[s](im(c,e,t))},error:i[s+1],complete:i[s+2]};else{var f=kf(e,Uf);c=kf(f.firestore,Jf),l=f._query;var p=new em(c);u={next:function(e){i[s]&&i[s](new kp(c,p,f,e))},error:i[s+1],complete:i[s+2]},Np(e._query)}return function(e,t,n,r){var i=this,o=new rf(r),a=new fd(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return go(i,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return t=ud,[4,gf(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return go(i,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return t=cd,[4,gf(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(Kf(c),l,h,u)}function rm(e,t){return function(e,t){var n=this,r=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(n,void 0,void 0,(function(){var n;return vo(this,(function(i){switch(i.label){case 0:return n=Sd,[4,mf(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(Kf(e),t)}function im(e,t,n){var r=n.docs.get(t._key),i=new em(e);return new Lp(e,i,t._key,r,new Pp(n.hasPendingWrites,n.fromCache),t.converter)}var om=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return mo(t,e),t.prototype.get=function(t){var n=this,r=$p(t,this._firestore),i=new em(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Lp(n._firestore,i,r._key,e._document,new Pp(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=up(e)}return e.prototype.get=function(e){var t=this,n=$p(e,this._firestore),r=new Qp(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Co();var i=e[0];if(i.isFoundDocument())return new Cp(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Cp(t._firestore,r,n._key,null,n.converter);throw Co()}))},e.prototype.set=function(e,t,n){var r=$p(e,this._firestore),i=Yp(r.converter,t,n),o=cp(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=$p(e,this._firestore);return o="string"==typeof(t=Ce(t))||t instanceof Zf?vp(this._dataReader,"Transaction.update",a._key,t,n,r):gp(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=$p(e,this._firestore);return this._transaction.delete(t._key),this},e}());function am(){if("undefined"==typeof Uint8Array)throw new xo(wo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function sm(){if("undefined"==typeof atob)throw new xo(wo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var um=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return sm(),new e($f.fromBase64String(t))},e.fromUint8Array=function(t){return am(),new e($f.fromUint8Array(t))},e.prototype.toBase64=function(){return sm(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return am(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),cm=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Qf(e=kf(e,Jf));var n=Kf(e),r=e._freezeSettings(),i=new nf;return Yf(n,i,new ef(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Qf(e=kf(e,Jf));var t=Kf(e),n=e._freezeSettings(),r=new nf;return Yf(t,r,new tf(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new xo(wo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new fc;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return go(t,void 0,void 0,(function(){var t;return vo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return gc.yt()?(t=e+"main",[4,gc.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ml(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),lm=function(){function e(e,t,n){var r=this;this._delegate=t,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof wf||(this.eu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||To("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){void 0===r&&(r={});var i=(e=kf(e,Nf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&To("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:t+":"+n,ssl:!1})),r.mockUserToken){var o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n="demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=pe({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[me.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),me.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new xo(wo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new Af(new _f(o,new ih(a)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return go(t,void 0,void 0,(function(){var t,n;return vo(this,(function(r){switch(r.label){case 0:return[4,df(e)];case 1:return t=r.sent(),[4,pf(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=Ro(e);return t.Or.delete(0),Rh(t)}(n))]}}))}))}))}(Kf(kf(this._delegate,Jf)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return go(t,void 0,void 0,(function(){var t,n;return vo(this,(function(r){switch(r.label){case 0:return[4,df(e)];case 1:return t=r.sent(),[4,pf(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return go(this,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return(t=Ro(e)).Or.add(0),[4,Ph(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Kf(kf(this._delegate,Jf)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Rf("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(t,void 0,void 0,(function(){var t;return vo(this,(function(r){switch(r.label){case 0:return t=Pd,[4,mf(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Kf(kf(this._delegate,Jf)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new rf(t);return e.asyncQueue.enqueueAndForget((function(){return go(n,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return t=function(e,t){Ro(e).Gr.add(t),t.next()},[4,gf(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return go(n,void 0,void 0,(function(){var t;return vo(this,(function(n){switch(n.label){case 0:return t=function(e,t){Ro(e).Gr.delete(t)},[4,gf(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(Kf(e=kf(e,Jf)),qf(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.eu)throw new xo(wo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Am(this,Hf(this._delegate,e))}catch(e){throw gm(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new mm(this,zf(this._delegate,e))}catch(e){throw gm(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new xm(this,function(e,t){if(e=kf(e,Nf),Cf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xo(wo.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Uf(e,null,function(e){return new Ha(zo.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw gm(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(n,void 0,void 0,(function(){var n;return vo(this,(function(i){switch(i.label){case 0:return[4,function(e){return hf(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new af(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(Kf(e),(function(n){return t(new om(e,n))}))}(this._delegate,(function(n){return e(new dm(t,n))}))},e.prototype.batch=function(){var e=this;return Kf(this._delegate),new fm(new Zp(this._delegate,(function(t){return rm(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new xo(wo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new xo(wo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),hm=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return mo(t,e),t.prototype.convertBytes=function(e){return new um(new $f(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return mm.nu(t,this.firestore,null)},t}(Xp),dm=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hm(e)}return e.prototype.get=function(e){var t=this,n=Sm(e);return this._delegate.get(n).then((function(e){return new bm(t._firestore,new Lp(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Sm(e);return n?(If("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Sm(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,yo([a,t,n],i)),this},e.prototype.delete=function(e){var t=Sm(e);return this._delegate.delete(t),this},e}(),fm=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Sm(e);return n?(If("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Sm(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,yo([a,t,n],i)),this},e.prototype.delete=function(e){var t=Sm(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),pm=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new Bp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new wm(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.su=function(t,n){var r=e.iu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new hm(t),n),i.set(n,o)),o},e}();pm.iu=new WeakMap;var mm=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hm(e)}return e.ru=function(t,n,r){if(t.length%2!=0)throw new xo(wo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Ff(n._delegate,r,new ra(t)))},e.nu=function(t,n,r){return new e(n,new Ff(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Am(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Am(this.firestore,Hf(this._delegate,e))}catch(e){throw gm(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=Ce(e))instanceof Ff&&Vf(this._delegate,e)},e.prototype.set=function(e,t){t=If("DocumentReference.set",t);try{return function(e,t,n){e=kf(e,Ff);var r=kf(e.firestore,Jf),i=Yp(e.converter,t,n);return rm(r,[cp(up(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xs.none())])}(this._delegate,e,t)}catch(e){throw gm(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?tm(this._delegate,e):tm.apply(void 0,yo([this._delegate,e,t],n))}catch(e){throw gm(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return rm(kf((e=this._delegate).firestore,Jf),[new Os(e._key,xs.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=vm(t),i=ym(t,(function(t){return new bm(e.firestore,new Lp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return nm(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=kf(e,Ff);var t=kf(e.firestore,Jf),n=Kf(t),r=new em(t);return function(e,t){var n=this,r=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(n,void 0,void 0,(function(){var n;return vo(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return go(this,void 0,void 0,(function(){var r,i;return vo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=Ro(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new xo(wo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=nd(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,ff(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Lp(t,r,e._key,n,new Pp(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=kf(e,Ff);var t=kf(e.firestore,Jf);return vf(Kf(t),e._key,{source:"server"}).then((function(n){return im(t,e,n)}))}(this._delegate):function(e){e=kf(e,Ff);var t=kf(e.firestore,Jf);return vf(Kf(t),e._key).then((function(n){return im(t,e,n)}))}(this._delegate)).then((function(e){return new bm(t.firestore,new Lp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(pm.su(this.firestore,t)):this._delegate.withConverter(null))},e}();function gm(e,t,n){return e.message=e.message.replace(t,n),e}function vm(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!qf(r))return r}return{}}function ym(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qf(e[0])?e[0]:qf(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var bm=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new mm(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return Op(this._delegate,e._delegate)},e}(),wm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mo(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(bm),xm=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hm(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Up(this._delegate,function(e,t,n){var r=t,i=Rp("where",e);return new Gp(i,r,n)}(t,n,r)))}catch(t){throw gm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Up(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Rp("orderBy",e);return new Hp(r,n)}(t,n)))}catch(t){throw gm(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Up(this._delegate,function(e){return Df("limit",e),new zp("limit",e,"F")}(t)))}catch(t){throw gm(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Up(this._delegate,function(e){return Df("limitToLast",e),new zp("limitToLast",e,"L")}(t)))}catch(t){throw gm(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Up(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Vp("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw gm(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Up(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Vp("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw gm(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Up(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new jp("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw gm(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Up(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new jp("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw gm(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return jf(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=kf(e,Uf);var t=kf(e.firestore,Jf),n=Kf(t),r=new em(t);return function(e,t){var n=this,r=new fc;return e.asyncQueue.enqueueAndForget((function(){return go(n,void 0,void 0,(function(){var n;return vo(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return go(this,void 0,void 0,(function(){var r,i,o,a,s;return vo(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,zl(e,t,!0)];case 1:return s=u.sent(),r=new yd(t,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=nd(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,ff(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new kp(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=kf(e,Uf);var t=kf(e.firestore,Jf),n=Kf(t),r=new em(t);return yf(n,e._query,{source:"server"}).then((function(n){return new kp(t,r,e,n)}))}(this._delegate):function(e){e=kf(e,Uf);var t=kf(e.firestore,Jf),n=Kf(t),r=new em(t);return Np(e._query),yf(n,e._query).then((function(n){return new kp(t,r,e,n)}))}(this._delegate)).then((function(e){return new Em(t.firestore,new kp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=vm(t),i=ym(t,(function(t){return new Em(e.firestore,new kp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return nm(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(pm.su(this.firestore,t)):this._delegate.withConverter(null))},e}(),_m=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new wm(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),Em=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new xm(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new wm(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new _m(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new wm(n._firestore,r))}))},e.prototype.isEqual=function(e){return Op(this._delegate,e._delegate)},e}(),Am=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return mo(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new mm(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new mm(this.firestore,void 0===e?zf(this._delegate):zf(this._delegate,e))}catch(e){throw gm(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=kf(e.firestore,Jf),r=zf(e),i=Yp(e.converter,t);return rm(n,[cp(up(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xs.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new mm(t.firestore,e)}))},t.prototype.isEqual=function(e){return Vf(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(pm.su(this.firestore,e)):this._delegate.withConverter(null))},t}(xm);function Sm(e){return kf(e,Ff)}var Tm,Mm=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Zf.bind.apply(Zf,yo([void 0],e)))}return e.documentId=function(){return new e(jo.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=Ce(e))instanceof Zf&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),Cm=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new dp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new lp("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new fp("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new pp("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new mp("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}(),Im={Firestore:lm,GeoPoint:tp,Timestamp:Oo,Blob:um,Transaction:dm,WriteBatch:fm,DocumentReference:mm,DocumentSnapshot:bm,Query:xm,QueryDocumentSnapshot:wm,QuerySnapshot:Em,CollectionReference:Am,FieldPath:Mm,FieldValue:Cm,setLogLevel:function(e){var t;t=e,_o.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ke("firestore",(function(e){return function(e,t){return new lm(e,new Jf(e,t),new cm)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Im)))})(Tm=st),Tm.registerVersion("@firebase/firestore","2.3.2");var Rm=function(e,t){return(Rm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},Pm=function(){return(Pm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Lm(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Bm(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function km(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}Object.create,Object.create;var Dm="firebasestorage.googleapis.com",Om=function(e){function t(n,r){var i=e.call(this,Nm(n),"Firebase Storage: "+r+" ("+Nm(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Rm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._codeEquals=function(e){return Nm(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(we);function Nm(e){return"storage/"+e}function Fm(){return new Om("unknown","An unknown error occurred, please check the error payload for server response.")}function Um(){return new Om("canceled","User canceled the upload/download.")}function Gm(){return new Om("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Hm(e){return new Om("invalid-argument",e)}function zm(){return new Om("app-deleted","The Firebase app was deleted.")}function Vm(e){return new Om("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jm(e,t){return new Om("invalid-format","String does not match format '"+e+"': "+t)}function Wm(e){throw new Om("internal-error","Internal error: "+e)}var qm={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Jm=function(e,t){this.data=e,this.contentType=t||null};function Km(e,t){switch(e){case qm.RAW:return new Jm(Xm(t));case qm.BASE64:case qm.BASE64URL:return new Jm(Ym(e,t));case qm.DATA_URL:return new Jm((n=new Zm(t)).base64?Ym(qm.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw jm(qm.DATA_URL,"Malformed data URL.")}return Xm(t)}(n.rest),new Zm(t).contentType)}var n;throw Fm()}function Xm(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ym(e,t){switch(e){case qm.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw jm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qm.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw jm(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw jm(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Qm,Zm=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw jm(qm.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)},$m={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eg(e){switch(e){case"running":case"pausing":case"canceling":return $m.RUNNING;case"paused":return $m.PAUSED;case"success":return $m.SUCCESS;case"canceled":return $m.CANCELED;case"error":default:return $m.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Qm||(Qm={}));var tg=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Qm.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=Qm.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=Qm.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw Wm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Wm("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Wm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Wm("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),ng=function(){function e(){}return e.prototype.createXhrIo=function(){return new tg},e}(),rg=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw new Om("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===Dm?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var d=h[l.indices.bucket],f=h[l.indices.path];f||(f=""),r=new e(d,f),l.postModify(r);break}}if(null==r)throw function(e){return new Om("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),ig=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function og(e){return"string"==typeof e||e instanceof String}function ag(e){return sg()&&e instanceof Blob}function sg(){return"undefined"!=typeof Blob}function ug(e,t,n,r){if(r<t)throw Hm("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw Hm("Invalid value for '"+e+"'. Expected "+n+" or less.")}function cg(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null==n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function lg(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n.slice(0,-1)}var hg=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());!function(e){return void 0!==e}(s)?i():i(s)}catch(e){o(e)}else null!==a?((r=Fm()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?zm():Um()):o(r=new Om("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new dg(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c||(c=!0,n.apply(null,e))}function h(t){o=setTimeout((function(){o=null,function(t,n){if(n)t(!1,new dg(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===Qm.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new dg(a,n))}else{var s=n.getErrorCode()===Qm.ABORT;t(!1,new dg(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}(d,u())}),t)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.call.apply(l,km([null,e],t));else{var r;u()||a?l.call.apply(l,km([null,e],t)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(e){f||(f=!0,c||(null!==o?(e||(s=2),clearTimeout(o),h(0)):e||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),r),p}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),dg=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function fg(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function pg(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=fg();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(sg())return new Blob(e);throw new Om("unsupported-environment","This browser doesn't seem to support creating Blobs")}var mg=function(){function e(e,t){var n=0,r="";ag(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(ag(this.data_)){var r=(i=this.data_,o=t,a=n,i.webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new e(r)}var i,o,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(sg()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(pg.apply(null,r))}var i=t.map((function(e){return og(e)?Km(qm.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function gg(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function vg(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function yg(e,t){return t}var bg=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||yg},wg=null;function xg(){if(wg)return wg;var e=[];e.push(new bg("bucket")),e.push(new bg("generation")),e.push(new bg("metageneration")),e.push(new bg("name","fullPath",!0));var t=new bg("name");t.xform=function(e,t){return function(e){return!og(e)||e.length<2?e:vg(e)}(t)},e.push(t);var n=new bg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new bg("timeCreated")),e.push(new bg("updated")),e.push(new bg("md5Hash",null,!0)),e.push(new bg("cacheControl",null,!0)),e.push(new bg("contentDisposition",null,!0)),e.push(new bg("contentEncoding",null,!0)),e.push(new bg("contentLanguage",null,!0)),e.push(new bg("contentType",null,!0)),e.push(new bg("metadata","customMetadata",!0)),wg=e}function _g(e,t,n){var r=gg(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new rg(n,r);return t._makeStorageReference(i)}})}(r,e),r}(e,r,n)}function Eg(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var Ag=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Sg(e){if(!e)throw Fm()}function Tg(e,t){return function(n,r){var i=_g(e,r,t);return Sg(null!==i),i}}function Mg(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new Om("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Om("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Om("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Om("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Cg(e){var t=Mg(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new Om("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Ig(e,t,n){var r=cg(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new Ag(r,"GET",Tg(e,n),i);return o.errorHandler=Cg(t),o}function Rg(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=cg(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new Ag(a,"GET",function(e,t){return function(n,r){var i=function(e,t,n){var r=gg(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new rg(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=e._makeStorageReference(new rg(t,l.name)),r.items.push(s)}return r}(e,t,r)}(e,t,r);return Sg(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=Mg(t),u}function Pg(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var Lg=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Bg(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){Sg(!1)}return Sg(!!n&&-1!==(t||["active"]).indexOf(n)),n}var kg=262144;var Dg=function(e,t,n){if(function(e){return"function"==typeof e}(e)||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};function Og(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var Ng=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=xg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=Pg(t,r,i),s={name:a.fullPath},u=cg(o,e.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Eg(a,n),h=e.maxUploadRetryTime,d=new Ag(u,"POST",(function(e){var t;Bg(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){Sg(!1)}return Sg(og(t)),t}),h);return d.urlParams=s,d.headers=c,d.body=l,d.errorHandler=Mg(t),d}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new Ag(n,"POST",(function(e){var t=Bg(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Sg(!1)}n||Sg(!1);var i=Number(n);return Sg(!isNaN(i)),new Lg(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Mg(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=kg*this._chunkMultiplier,n=new Lg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=function(e,t,n,r,i,o,a,s){var u=new Lg(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Om("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d=h+l,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,d);if(null===p)throw Gm();var m=t.maxUploadRetryTime,g=new Ag(n,"POST",(function(e,n){var i,a=Bg(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?Tg(t,o)(e,n):null,new Lg(s,c,"final"===a,i)}),m);return g.headers=f,g.body=p.uploadData(),g.progressCallback=s||null,g.errorHandler=Mg(e),g}(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){return e._error=t,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){kg*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=Ig(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=Pg(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Eg(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=mg.getBlob(c,r,l);if(null===h)throw Gm();var d={name:u.fullPath},f=cg(o,e.host),p=e.maxUploadRetryTime,m=new Ag(f,"POST",Tg(e,n),p);return m.urlParams=d,m.headers=a,m.body=h.uploadData(),m.errorHandler=Mg(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Um(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=eg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new Dg(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(eg(this._state)){case $m.SUCCESS:Og(this._resolve.bind(null,this.snapshot))();break;case $m.CANCELED:case $m.ERROR:Og(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(eg(this._state)){case $m.RUNNING:case $m.PAUSED:e.next&&Og(e.next.bind(e,this.snapshot))();break;case $m.SUCCESS:e.complete&&Og(e.complete.bind(e))();break;case $m.CANCELED:case $m.ERROR:e.error&&Og(e.error.bind(e,this._error))();break;default:e.error&&Og(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),Fg=function(){function e(e,t){this._service=e,this._location=t instanceof rg?t:rg.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new rg(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return vg(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new rg(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw Vm(e)},e}();function Ug(e){var t={prefixes:[],items:[]};return Gg(e,t).then((function(){return t}))}function Gg(e,t,n){return Lm(this,void 0,void 0,(function(){var r,i,o;return Bm(this,(function(a){switch(a.label){case 0:return[4,Hg(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Gg(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Hg(e,t){return Lm(this,void 0,void 0,(function(){var n,r;return Bm(this,(function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&ug("options.maxResults",1,1e3,t.maxResults),n=t||{},r=Rg(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function zg(e){return Lm(this,void 0,void 0,(function(){var t;return Bm(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=cg(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new Ag(r,"GET",function(e,t){return function(n,r){var i=_g(e,r,t);return Sg(null!==i),function(e,t,n){var r=gg(t);if(null===r)return null;if(!og(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return cg("/b/"+o(r)+"/o/"+o(i),n)+lg({alt:"media",token:t})}))[0]}(i,r,e.host)}}(e,n),i);return o.errorHandler=Cg(t),o}(e.storage,e._location,xg()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new Om("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function Vg(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new rg(e._location.bucket,n);return new Fg(e.storage,r)}function jg(e){return/^[A-Za-z]+:\/\//.test(e)}function Wg(e,t){if(e instanceof Kg){var n=e;if(null==n._bucket)throw new Om("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Fg(n,n._bucket);return null!=t?Wg(r,t):r}if(void 0!==t){if(t.includes(".."))throw Hm('`path` param cannot contain ".."');return Vg(e,t)}return e}function qg(e,t){if(t&&jg(t)){if(e instanceof Kg)return new Fg(e,t);throw Hm("To use ref(service, url), the first argument must be a Storage instance.")}return Wg(e,t)}function Jg(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:rg.makeFromBucketSpec(n,e)}var Kg=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Dm,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rg.makeFromBucketSpec(i,this._host):Jg(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=rg.makeFromBucketSpec(this._url,e):this._bucket=Jg(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return Lm(this,void 0,void 0,(function(){var e,t;return Bm(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return Lm(this,void 0,void 0,(function(){var e;return Bm(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new Fg(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new ig(zm());var i=function(e,t,n,r,i,o){var a=lg(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new hg(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return Lm(this,void 0,void 0,(function(){var t,n,r;return Bm(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();function Xg(e,t){return qg(e=Ce(e),t)}var Yg,Qg,Zg=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),$g=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new Zg(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Zg(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new Zg(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Zg(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),ev=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new tv(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new tv(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),tv=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return Vg(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new $g(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Ng(e,new mg(t),n)}(e=Ce(e),t,n)}(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=qm.RAW),this._throwIfRoot("putString");var r=Km(t,e),i=Pm({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new $g(new Ng(this._delegate,new mg(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return function(e){return Ug(e=Ce(e))}(this._delegate).then((function(t){return new ev(t,e.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return Hg(e=Ce(e),t)}(this._delegate,e||void 0).then((function(e){return new ev(e,t.storage)}))},e.prototype.getMetadata=function(){return function(e){return function(e){return Lm(this,void 0,void 0,(function(){var t;return Bm(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=Ig(e.storage,e._location,xg()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=Ce(e))}(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return function(e,t){return Lm(this,void 0,void 0,(function(){var n;return Bm(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=cg(t.fullServerUrl(),e.host),o=Eg(n,r),a=e.maxOperationRetryTime,s=new Ag(i,"PATCH",Tg(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=Cg(t),s}(e.storage,e._location,t,xg()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}(e=Ce(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return function(e){return zg(e=Ce(e))}(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),function(e){return function(e){return Lm(this,void 0,void 0,(function(){var t;return Bm(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=cg(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new Ag(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Cg(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=Ce(e))}(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw Vm(e)},e}(),nv=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(jg(e))throw Hm("ref() expected a child path but got a URL, use refFromURL instead.");return new tv(Xg(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!jg(e))throw Hm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rg.makeFromUrl(e,this._delegate.host)}catch(e){throw Hm("refFromUrl() expected a valid full URL but got an invalid one.")}return new tv(Xg(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){!function(e,t,n){e.host="http://"+t+":"+n}(this._delegate,e,t)},e}();Qg={TaskState:$m,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:qm,Storage:Kg,Reference:tv},(Yg=st).INTERNAL.registerComponent(new ke("storage",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new nv(r,new Kg(r,i,o,new ng,n,st.SDK_VERSION))}),"PUBLIC").setServiceProps(Qg).setMultipleInstances(!0)),Yg.registerVersion("@firebase/storage","0.5.2"),st.initializeApp({apiKey:"AIzaSyCHKamN7E_oaCw4uwEJeR4dDXwHyrUJ1w4",authDomain:"board-176dc.firebaseapp.com",projectId:"board-176dc",storageBucket:"board-176dc.appspot.com",messagingSenderId:"306952014877",appId:"1:306952014877:web:42511567092f2baf238af4",measurementId:"G-SHGDKQH8MB"});var rv=st.auth(),iv=st.auth,ov=st.firestore(),av=st.storage(),sv=n(774),uv=n.n(sv);const cv=function(e){function t(e,r,u,c,d){for(var f,p,m,g,w,_=0,E=0,A=0,S=0,T=0,L=0,k=m=f=0,O=0,N=0,F=0,U=0,G=u.length,H=G-1,z="",V="",j="",W="";O<G;){if(p=u.charCodeAt(O),O===H&&0!==E+S+A+_&&(0!==E&&(p=47===E?10:47),S=A=_=0,G++,H++),0===E+S+A+_){if(O===H&&(0<N&&(z=z.replace(h,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(O)}p=59}switch(p){case 123:for(f=(z=z.trim()).charCodeAt(0),m=1,U=++O;O<G;){switch(p=u.charCodeAt(O)){case 123:m++;break;case 125:m--;break;case 47:switch(p=u.charCodeAt(O+1)){case 42:case 47:e:{for(k=O+1;k<H;++k)switch(u.charCodeAt(k)){case 47:if(42===p&&42===u.charCodeAt(k-1)&&O+2!==k){O=k+1;break e}break;case 10:if(47===p){O=k+1;break e}}O=k}}break;case 91:p++;case 40:p++;case 34:case 39:for(;O++<H&&u.charCodeAt(O)!==p;);}if(0===m)break;O++}switch(m=u.substring(U,O),0===f&&(f=(z=z.replace(l,"").trim()).charCodeAt(0)),f){case 64:switch(0<N&&(z=z.replace(h,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:N=r;break;default:N=P}if(U=(m=t(r,N,m,p,d+1)).length,0<B&&(w=s(3,m,N=n(P,z,F),r,C,M,U,p,d,c),z=N.join(""),void 0!==w&&0===(U=(m=w.trim()).length)&&(p=0,m="")),0<U)switch(p){case 115:z=z.replace(x,a);case 100:case 109:case 45:m=z+"{"+m+"}";break;case 107:m=(z=z.replace(v,"$1 $2"))+"{"+m+"}",m=1===R||2===R&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=z+m,112===c&&(V+=m,m="")}else m="";break;default:m=t(r,n(r,z,F),m,c,d+1)}j+=m,m=F=N=k=f=0,z="",p=u.charCodeAt(++O);break;case 125:case 59:if(1<(U=(z=(0<N?z.replace(h,""):z).trim()).length))switch(0===k&&(f=z.charCodeAt(0),45===f||96<f&&123>f)&&(U=(z=z.replace(" ",":")).length),0<B&&void 0!==(w=s(1,z,r,e,C,M,V.length,c,d,c))&&0===(U=(z=w.trim()).length)&&(z="\0\0"),f=z.charCodeAt(0),p=z.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){W+=z+u.charAt(O);break}default:58!==z.charCodeAt(U-1)&&(V+=i(z,f,p,z.charCodeAt(2)))}F=N=k=f=0,z="",p=u.charCodeAt(++O)}}switch(p){case 13:case 10:47===E?E=0:0===1+f&&107!==c&&0<z.length&&(N=1,z+="\0"),0<B*D&&s(0,z,r,e,C,M,V.length,c,d,c),M=1,C++;break;case 59:case 125:if(0===E+S+A+_){M++;break}default:switch(M++,g=u.charAt(O),p){case 9:case 32:if(0===S+_+E)switch(T){case 44:case 58:case 9:case 32:g="";break;default:32!==p&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===S+E+_&&(N=F=1,g="\f"+g);break;case 108:if(0===S+E+_+I&&0<k)switch(O-k){case 2:112===T&&58===u.charCodeAt(O-3)&&(I=T);case 8:111===L&&(I=L)}break;case 58:0===S+E+_&&(k=O);break;case 44:0===E+A+S+_&&(N=1,g+="\r");break;case 34:case 39:0===E&&(S=S===p?0:0===S?p:S);break;case 91:0===S+E+A&&_++;break;case 93:0===S+E+A&&_--;break;case 41:0===S+E+_&&A--;break;case 40:if(0===S+E+_){if(0===f)switch(2*T+3*L){case 533:break;default:f=1}A++}break;case 64:0===E+A+S+_+k+m&&(m=1);break;case 42:case 47:if(!(0<S+_+A))switch(E){case 0:switch(2*p+3*u.charCodeAt(O+1)){case 235:E=47;break;case 220:U=O,E=42}break;case 42:47===p&&42===T&&U+2!==O&&(33===u.charCodeAt(U+2)&&(V+=u.substring(U,O+1)),g="",E=0)}}0===E&&(z+=g)}L=T,T=p,O++}if(0<(U=V.length)){if(N=r,0<B&&void 0!==(w=s(2,V,N,e,C,M,U,c,d,c))&&0===(V=w).length)return W+V+j;if(V=N.join(",")+"{"+V+"}",0!=R*I){switch(2!==R||o(V,2)||(I=0),I){case 111:V=V.replace(b,":-moz-$1")+V;break;case 112:V=V.replace(y,"::-webkit-input-$1")+V.replace(y,"::-moz-$1")+V.replace(y,":-ms-input-$1")+V}I=0}}return W+V+j}function n(e,t,n){var i=t.trim().split(m);t=i;var o=i.length,a=e.length;switch(a){case 0:case 1:var s=0;for(e=0===a?"":e[0]+" ";s<o;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<o;++s)for(var c=0;c<a;++c)t[u++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var a=e+";",s=2*t+3*n+4*r;if(944===s){e=a.indexOf(":",9)+1;var u=a.substring(e,a.length-1).trim();return u=a.substring(0,e).trim()+u+";",1===R||2===R&&o(u,1)?"-webkit-"+u+u:u}if(0===R||2===R&&!o(a,1))return a;switch(s){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(T,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(u=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+u+a;case 1005:return f.test(a)?a.replace(d,":-webkit-")+a.replace(d,":-moz-")+a:a;case 1e3:switch(t=(u=a.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=a.replace(w,"tb");break;case 232:u=a.replace(w,"tb-rl");break;case 220:u=a.replace(w,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+u+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(t=(a=e).length-10,s=(u=(33===a.charCodeAt(t)?a.substring(0,t):a).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:a=a.replace(u,"-webkit-"+u)+";"+a;break;case 207:case 102:a=a.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+a.replace(u,"-webkit-"+u)+";"+a.replace(u,"-ms-"+u+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return u=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+u+"-ms-flex-"+u+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(E,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(E,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):a.replace(u,"-webkit-"+u)+a.replace(u,"-moz-"+u.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+r&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+a}return a}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),k(2!==t?r:r.replace(A,"$1"),n,t)}function a(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,o,a,s,u,l){for(var h,d=0,f=t;d<B;++d)switch(h=L[d].call(c,e,f,n,r,i,o,a,s,u,l)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function u(e){return void 0!==(e=e.prefix)&&(k=null,e?"function"!=typeof e?R=1:(R=2,k=e):R=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<B){var i=s(-1,n,r,r,C,M,0,0,0,0);void 0!==i&&"string"==typeof i&&(n=i)}var o=t(P,r,n,0,0);return 0<B&&void 0!==(i=s(-2,o,r,r,C,M,o.length,0,0,0))&&(o=i),I=0,M=C=1,o}var l=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,b=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,E=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,M=1,C=1,I=0,R=1,P=[],L=[],B=0,k=null,D=0;return c.use=function e(t){switch(t){case void 0:case null:B=L.length=0;break;default:if("function"==typeof t)L[B++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else D=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},lv={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var hv=n(594);function dv(){return(dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fv=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},pv=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,U.typeOf)(e)},mv=Object.freeze([]),gv=Object.freeze({});function vv(e){return"function"==typeof e}function yv(e){return e.displayName||e.name||"Component"}function bv(e){return e&&"string"==typeof e.styledComponentId}var wv="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",xv="undefined"!=typeof window&&"HTMLElement"in window,_v=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),Ev={};function Av(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Sv=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&Av(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var o=r;o<i;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(a,t[s])&&(this.groupSizes[e]++,a++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,o=r;o<i;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),Tv=new Map,Mv=new Map,Cv=1,Iv=function(e){if(Tv.has(e))return Tv.get(e);for(;Mv.has(Cv);)Cv++;var t=Cv++;return Tv.set(e,t),Mv.set(t,e),t},Rv=function(e){return Mv.get(e)},Pv=function(e,t){Tv.set(e,t),Mv.set(t,e)},Lv="style["+wv+'][data-styled-version="5.3.0"]',Bv=new RegExp("^"+wv+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),kv=function(e,t,n){for(var r,i=n.split(","),o=0,a=i.length;o<a;o++)(r=i[o])&&e.registerName(t,r)},Dv=function(e,t){for(var n=t.innerHTML.split("/*!sc*/\n"),r=[],i=0,o=n.length;i<o;i++){var a=n[i].trim();if(a){var s=a.match(Bv);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(Pv(c,u),kv(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(a)}}},Ov=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},Nv=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(wv))return r}}(n),o=void 0!==i?i.nextSibling:null;r.setAttribute(wv,"active"),r.setAttribute("data-styled-version","5.3.0");var a=Ov();return a&&r.setAttribute("nonce",a),n.insertBefore(r,o),r},Fv=function(){function e(e){var t=this.element=Nv(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}Av(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Uv=function(){function e(e){var t=this.element=Nv(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Gv=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Hv=xv,zv={isServer:!xv,useCSSOMInjection:!_v},Vv=function(){function e(e,t,n){void 0===e&&(e=gv),void 0===t&&(t={}),this.options=dv({},zv,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&xv&&Hv&&(Hv=!1,function(e){for(var t=document.querySelectorAll(Lv),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(wv)&&(Dv(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return Iv(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(dv({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Gv(i):r?new Fv(i):new Uv(i),new Sv(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Iv(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Iv(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Iv(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var o=Rv(i);if(void 0!==o){var a=e.names.get(o),s=t.getGroup(i);if(void 0!==a&&0!==s.length){var u=wv+".g"+i+'[id="'+o+'"]',c="";void 0!==a&&a.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),jv=/(a)(d)/gi,Wv=function(e){return String.fromCharCode(e+(e>25?39:97))};function qv(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Wv(t%52)+n;return(Wv(t%52)+n).replace(jv,"$1-$2")}var Jv=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Kv=function(e){return Jv(5381,e)};function Xv(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(vv(n)&&!bv(n))return!1}return!0}var Yv=Kv("5.3.0"),Qv=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Xv(e),this.componentId=t,this.baseHash=Jv(Yv,t),this.baseStyle=n,Vv.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var o=my(this.rules,e,t,n).join(""),a=qv(Jv(this.baseHash,o.length)>>>0);if(!t.hasNameForId(r,a)){var s=n(o,"."+a,void 0,r);t.insertRules(r,a,s)}i.push(a),this.staticRulesId=a}else{for(var u=this.rules.length,c=Jv(this.baseHash,n.hash),l="",h=0;h<u;h++){var d=this.rules[h];if("string"==typeof d)l+=d;else if(d){var f=my(d,e,t,n),p=Array.isArray(f)?f.join(""):f;c=Jv(c,p+h),l+=p}}if(l){var m=qv(c>>>0);if(!t.hasNameForId(r,m)){var g=n(l,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),Zv=/^\s*\/\/.*$/gm,$v=[":","[",".","#"];function ey(e){var t,n,r,i,o=void 0===e?gv:e,a=o.options,s=void 0===a?gv:a,u=o.plugins,c=void 0===u?mv:u,l=new cv(s),h=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,u,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),f=function(e,r,o){return 0===r&&-1!==$v.indexOf(o[n.length])||o.match(i)?e:"."+t};function p(e,o,a,s){void 0===s&&(s="&");var u=e.replace(Zv,""),c=o&&a?a+" "+o+" { "+u+" }":u;return t=s,n=o,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(a||!o?"":o,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,f))},d,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||Av(15),Jv(e,t.name)}),5381).toString():"",p}var ty=i.createContext(),ny=(ty.Consumer,i.createContext()),ry=(ny.Consumer,new Vv),iy=ey();function oy(){return(0,i.useContext)(ty)||ry}function ay(){return(0,i.useContext)(ny)||iy}function sy(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],o=oy(),a=(0,i.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,i.useMemo)((function(){return ey({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){uv()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(ty.Provider,{value:a},i.createElement(ny.Provider,{value:s},e.children))}var uy=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=iy);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return Av(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=iy),this.name+e.hash},e}(),cy=/([A-Z])/,ly=/([A-Z])/g,hy=/^ms-/,dy=function(e){return"-"+e.toLowerCase()};function fy(e){return cy.test(e)?e.replace(ly,dy).replace(hy,"-ms-"):e}var py=function(e){return null==e||!1===e||""===e};function my(e,t,n,r){if(Array.isArray(e)){for(var i,o=[],a=0,s=e.length;a<s;a+=1)""!==(i=my(e[a],t,n,r))&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}return py(e)?"":bv(e)?"."+e.styledComponentId:vv(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:my(e(t),t,n,r):e instanceof uy?n?(e.inject(n,r),e.getName(r)):e:pv(e)?function e(t,n){var r,i,o=[];for(var a in t)t.hasOwnProperty(a)&&!py(t[a])&&(pv(t[a])?o.push.apply(o,e(t[a],a)):vv(t[a])?o.push(fy(a)+":",t[a],";"):o.push(fy(a)+": "+(r=a,(null==(i=t[a])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in lv?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(o,["}"]):o}(e):e.toString();var u}function gy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vv(e)||pv(e)?my(fv(mv,[e].concat(n))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:my(fv(e,n))}new Set;var vy=function(e,t,n){return void 0===n&&(n=gv),e.theme!==n.theme&&e.theme||t||n.theme},yy=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,by=/(^-|-$)/g;function wy(e){return e.replace(yy,"-").replace(by,"")}var xy=function(e){return qv(Kv(e)>>>0)};function _y(e){return"string"==typeof e&&!0}var Ey=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ay=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Sy(e,t,n){var r=e[n];Ey(t)&&Ey(r)?Ty(r,t):e[n]=t}function Ty(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(Ey(a))for(var s in a)Ay(s)&&Sy(e,a[s],s)}return e}var My=i.createContext();function Cy(e){var t=(0,i.useContext)(My),n=(0,i.useMemo)((function(){return function(e,t){return e?vv(e)?e(t):Array.isArray(e)||"object"!=typeof e?Av(8):t?dv({},t,{},e):e:Av(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(My.Provider,{value:n},e.children):null}My.Consumer;var Iy={};function Ry(e,t,n){var r=bv(e),o=!_y(e),a=t.attrs,s=void 0===a?mv:a,u=t.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":wy(e);Iy[n]=(Iy[n]||0)+1;var r=n+"-"+xy("5.3.0"+n+Iy[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,l=t.displayName,h=void 0===l?function(e){return _y(e)?"styled."+e:"Styled("+yv(e)+")"}(e):l,d=t.displayName&&t.componentId?wy(t.displayName)+"-"+t.componentId:t.componentId||c,f=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,p=t.shouldForwardProp;r&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var m,g=new Qv(n,d,r?e.componentStyle:void 0),v=g.isStatic&&0===s.length,y=function(e,t){return function(e,t,n,r){var o=e.attrs,a=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,h=e.target,d=function(e,t,n){void 0===e&&(e=gv);var r=dv({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,o,a=e;for(t in vv(a)&&(a=a(r)),a)r[t]=i[t]="className"===t?(n=i[t],o=a[t],n&&o?n+" "+o:n||o):a[t]})),[r,i]}(vy(t,(0,i.useContext)(My),s)||gv,t,o),f=d[0],p=d[1],m=function(e,t,n,r){var i=oy(),o=ay();return t?e.generateAndInjectStyles(gv,i,o):e.generateAndInjectStyles(n,i,o)}(a,r,f),g=n,v=p.$as||t.$as||p.as||t.as||h,y=_y(v),b=p!==t?dv({},t,{},p):t,w={};for(var x in b)"$"!==x[0]&&"as"!==x&&("forwardedAs"===x?w.as=b[x]:(c?c(x,hv.Z,v):!y||(0,hv.Z)(x))&&(w[x]=b[x]));return t.style&&p.style!==t.style&&(w.style=dv({},t.style,{},p.style)),w.className=Array.prototype.concat(u,l,m!==l?m:null,t.className,p.className).filter(Boolean).join(" "),w.ref=g,(0,i.createElement)(v,w)}(m,e,t,v)};return y.displayName=h,(m=i.forwardRef(y)).attrs=f,m.componentStyle=g,m.displayName=h,m.shouldForwardProp=p,m.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):mv,m.styledComponentId=d,m.target=r?e.target:e,m.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),o=r&&r+"-"+(_y(e)?e:wy(yv(e)));return Ry(e,dv({},i,{attrs:f,componentId:o}),n)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Ty({},e.defaultProps,t):t}}),m.toString=function(){return"."+m.styledComponentId},o&&z()(m,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var Py=function(e){return function e(t,n,r){if(void 0===r&&(r=gv),!(0,U.isValidElementType)(n))return Av(1,String(n));var i=function(){return t(n,r,gy.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,dv({},r,{},i))},i.attrs=function(i){return e(t,n,dv({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Ry,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Py[e]=Py(e)}));var Ly=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Xv(e),Vv.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(my(this.rules,t,n,r).join(""),""),o=this.componentId+e;n.insertRules(o,o,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Vv.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function By(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=gy.apply(void 0,[e].concat(n)).join(""),o=xy(i);return new uy(o,i)}!function(){var e=function(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=Ov();return"<style "+[n&&'nonce="'+n+'"',wv+'="true"','data-styled-version="5.3.0"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?Av(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return Av(2);var n=((t={})[wv]="",t["data-styled-version"]="5.3.0",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=Ov();return r&&(n.nonce=r),[i.createElement("style",dv({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Vv({isServer:!0}),this.sealed=!1}.prototype;e.collectStyles=function(e){return this.sealed?Av(2):i.createElement(sy,{sheet:this.instance},e)},e.interleaveWithNodeStream=function(e){return Av(3)}}();const ky=Py;function Dy(e,t){if(null==e)return{};var n,r,i=G(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Oy=i.createContext(null);function Ny(){return i.useContext(Oy)}function Fy(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}function Uy(e){return e&&e.ownerDocument||document}function Gy(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Hy(e,t){return i.useMemo((function(){return null==e&&null==t?null:function(n){Gy(e,n),Gy(t,n)}}),[e,t])}var zy="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;const Vy=i.forwardRef((function(e,t){var n=e.children,r=e.container,a=e.disablePortal,s=void 0!==a&&a,u=e.onRendered,c=i.useState(null),l=c[0],h=c[1],d=Hy(i.isValidElement(n)?n.ref:null,t);return zy((function(){s||h(function(e){return e="function"==typeof e?e():e,o.findDOMNode(e)}(r)||document.body)}),[r,s]),zy((function(){if(l&&!s)return Gy(t,l),function(){Gy(t,null)}}),[t,l,s]),zy((function(){u&&(l||s)&&u()}),[u,l,s]),s?i.isValidElement(n)?i.cloneElement(n,{ref:d}):n:l?o.createPortal(n,l):l}));function jy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}var Wy="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;function qy(e){var t=i.useRef(e);return Wy((function(){t.current=e})),i.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}const Jy={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Ky(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xy(e,t,n){return t&&Ky(e.prototype,t),n&&Ky(e,n),e}function Yy(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qy(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Zy(e){return parseInt(window.getComputedStyle(e)["padding-right"],10)||0}function $y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,o=[t,n].concat(Yy(r)),a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,(function(e){1===e.nodeType&&-1===o.indexOf(e)&&-1===a.indexOf(e.tagName)&&Qy(e,i)}))}function eb(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function tb(e,t){var n,r=[],i=[],o=e.container;if(!t.disableScrollLock){if(function(e){var t,n=Uy(e);return n.body===e?(t=n,Uy(t).defaultView||window).innerWidth>n.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(o)){var a=function(){var e=document.createElement("div");e.style.width="99px",e.style.height="99px",e.style.position="absolute",e.style.top="-9999px",e.style.overflow="scroll",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}();r.push({value:o.style.paddingRight,key:"padding-right",el:o}),o.style["padding-right"]="".concat(Zy(o)+a,"px"),n=Uy(o).querySelectorAll(".mui-fixed"),[].forEach.call(n,(function(e){i.push(e.style.paddingRight),e.style.paddingRight="".concat(Zy(e)+a,"px")}))}var s=o.parentElement,u="HTML"===s.nodeName&&"scroll"===window.getComputedStyle(s)["overflow-y"]?s:o;r.push({value:u.style.overflow,key:"overflow",el:u}),u.style.overflow="hidden"}return function(){n&&[].forEach.call(n,(function(e,t){i[t]?e.style.paddingRight=i[t]:e.style.removeProperty("padding-right")})),r.forEach((function(e){var t=e.value,n=e.el,r=e.key;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var nb=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modals=[],this.containers=[]}return Xy(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Qy(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){e.getAttribute&&"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);$y(t,e.mountNode,e.modalRef,r,!0);var i=eb(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblingNodes:r}),n)}},{key:"mount",value:function(e,t){var n=eb(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=tb(r,t))}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(-1===t)return t;var n=eb(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];if(r.modals.splice(r.modals.indexOf(e),1),this.modals.splice(t,1),0===r.modals.length)r.restore&&r.restore(),e.modalRef&&Qy(e.modalRef,!0),$y(r.container,e.mountNode,e.modalRef,r.hiddenSiblingNodes,!1),this.containers.splice(n,1);else{var i=r.modals[r.modals.length-1];i.modalRef&&Qy(i.modalRef,!1)}return t}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}();const rb=function(e){var t=e.children,n=e.disableAutoFocus,r=void 0!==n&&n,a=e.disableEnforceFocus,s=void 0!==a&&a,u=e.disableRestoreFocus,c=void 0!==u&&u,l=e.getDoc,h=e.isEnabled,d=e.open,f=i.useRef(),p=i.useRef(null),m=i.useRef(null),g=i.useRef(),v=i.useRef(null),y=i.useCallback((function(e){v.current=o.findDOMNode(e)}),[]),b=Hy(t.ref,y),w=i.useRef();return i.useEffect((function(){w.current=d}),[d]),!w.current&&d&&"undefined"!=typeof window&&(g.current=l().activeElement),i.useEffect((function(){if(d){var e=Uy(v.current);r||!v.current||v.current.contains(e.activeElement)||(v.current.hasAttribute("tabIndex")||v.current.setAttribute("tabIndex",-1),v.current.focus());var t=function(){null!==v.current&&(e.hasFocus()&&!s&&h()&&!f.current?v.current&&!v.current.contains(e.activeElement)&&v.current.focus():f.current=!1)},n=function(t){!s&&h()&&9===t.keyCode&&e.activeElement===v.current&&(f.current=!0,t.shiftKey?m.current.focus():p.current.focus())};e.addEventListener("focus",t,!0),e.addEventListener("keydown",n,!0);var i=setInterval((function(){t()}),50);return function(){clearInterval(i),e.removeEventListener("focus",t,!0),e.removeEventListener("keydown",n,!0),c||(g.current&&g.current.focus&&g.current.focus(),g.current=null)}}}),[r,s,c,h,d]),i.createElement(i.Fragment,null,i.createElement("div",{tabIndex:0,ref:p,"data-test":"sentinelStart"}),i.cloneElement(t,{ref:b}),i.createElement("div",{tabIndex:0,ref:m,"data-test":"sentinelEnd"}))};var ib={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}};const ob=i.forwardRef((function(e,t){var n=e.invisible,r=void 0!==n&&n,o=e.open,a=Dy(e,["invisible","open"]);return o?i.createElement("div",p({"aria-hidden":!0,ref:t},a,{style:p({},ib.root,r?ib.invisible:{},a.style)})):null}));var ab=new nb;const sb=i.forwardRef((function(e,t){var n=Ny(),r=Fy({name:"MuiModal",props:p({},e),theme:n}),a=r.BackdropComponent,s=void 0===a?ob:a,u=r.BackdropProps,c=r.children,l=r.closeAfterTransition,h=void 0!==l&&l,d=r.container,f=r.disableAutoFocus,m=void 0!==f&&f,g=r.disableBackdropClick,v=void 0!==g&&g,y=r.disableEnforceFocus,b=void 0!==y&&y,w=r.disableEscapeKeyDown,x=void 0!==w&&w,_=r.disablePortal,E=void 0!==_&&_,A=r.disableRestoreFocus,S=void 0!==A&&A,T=r.disableScrollLock,M=void 0!==T&&T,C=r.hideBackdrop,I=void 0!==C&&C,R=r.keepMounted,P=void 0!==R&&R,L=r.manager,B=void 0===L?ab:L,k=r.onBackdropClick,D=r.onClose,O=r.onEscapeKeyDown,N=r.onRendered,F=r.open,U=Dy(r,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),G=i.useState(!0),H=G[0],z=G[1],V=i.useRef({}),j=i.useRef(null),W=i.useRef(null),q=Hy(W,t),J=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(r),K=function(){return Uy(j.current)},X=function(){return V.current.modalRef=W.current,V.current.mountNode=j.current,V.current},Y=function(){B.mount(X(),{disableScrollLock:M}),W.current.scrollTop=0},Q=qy((function(){var e=function(e){return e="function"==typeof e?e():e,o.findDOMNode(e)}(d)||K().body;B.add(X(),e),W.current&&Y()})),Z=i.useCallback((function(){return B.isTopModal(X())}),[B]),$=qy((function(e){j.current=e,e&&(N&&N(),F&&Z()?Y():Qy(W.current,!0))})),ee=i.useCallback((function(){B.remove(X())}),[B]);if(i.useEffect((function(){return function(){ee()}}),[ee]),i.useEffect((function(){F?Q():J&&h||ee()}),[F,ee,J,h,Q]),!P&&!F&&(!J||H))return null;var te=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}}(n||{zIndex:Jy}),ne={};return void 0===c.props.tabIndex&&(ne.tabIndex=c.props.tabIndex||"-1"),J&&(ne.onEnter=jy((function(){z(!1)}),c.props.onEnter),ne.onExited=jy((function(){z(!0),h&&ee()}),c.props.onExited)),i.createElement(Vy,{ref:$,container:d,disablePortal:E},i.createElement("div",p({ref:q,onKeyDown:function(e){"Escape"===e.key&&Z()&&(O&&O(e),x||(e.stopPropagation(),D&&D(e,"escapeKeyDown")))},role:"presentation"},U,{style:p({},te.root,!F&&H?te.hidden:{},U.style)}),I?null:i.createElement(s,p({open:F,onClick:function(e){e.target===e.currentTarget&&(k&&k(e),!v&&D&&D(e,"backdropClick"))}},u)),i.createElement(rb,{disableEnforceFocus:b,disableAutoFocus:m,disableRestoreFocus:S,getDoc:K,isEnabled:Z,open:F},i.cloneElement(c,ne))))}));var ub=i.createContext(null),cb=function(e){e()},lb=function(){return cb},hb={notify:function(){}},db=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=hb,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var e=lb(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=hb)},e}(),fb="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;const pb=function(e){var t=e.store,n=e.context,r=e.children,o=(0,i.useMemo)((function(){var e=new db(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),a=(0,i.useMemo)((function(){return t.getState()}),[t]);fb((function(){var e=o.subscription;return e.trySubscribe(),a!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[o,a]);var s=n||ub;return i.createElement(s.Provider,{value:o},r)};function mb(){return(0,i.useContext)(ub)}function gb(e){void 0===e&&(e=ub);var t=e===ub?mb:function(){return(0,i.useContext)(e)};return function(){return t().store}}var vb=gb();function yb(e){void 0===e&&(e=ub);var t=e===ub?vb:gb(e);return function(){return t().dispatch}}var bb=yb(),wb=function(e,t){return e===t};function xb(e){void 0===e&&(e=ub);var t=e===ub?mb:function(){return(0,i.useContext)(e)};return function(e,n){void 0===n&&(n=wb);var r=t(),o=function(e,t,n,r){var o,a=(0,i.useReducer)((function(e){return e+1}),0)[1],s=(0,i.useMemo)((function(){return new db(n,r)}),[n,r]),u=(0,i.useRef)(),c=(0,i.useRef)(),l=(0,i.useRef)(),h=(0,i.useRef)(),d=n.getState();try{if(e!==c.current||d!==l.current||u.current){var f=e(d);o=void 0!==h.current&&t(f,h.current)?h.current:f}else o=h.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return fb((function(){c.current=e,l.current=d,h.current=o,u.current=void 0})),fb((function(){function e(){try{var e=n.getState(),r=c.current(e);if(t(r,h.current))return;h.current=r,l.current=e}catch(e){u.current=e}a()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),o}(e,n,r.store,r.subscription);return(0,i.useDebugValue)(o),o}}var _b,Eb=xb();function Ab(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Sb(e){return!!e&&!!e[hw]}function Tb(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&Function.toString.call(n)===dw}(e)||Array.isArray(e)||!!e[lw]||!!e.constructor[lw]||Lb(e)||Bb(e))}function Mb(e,t,n){void 0===n&&(n=!1),0===Cb(e)?(n?Object.keys:fw)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Cb(e){var t=e[hw];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Lb(e)?2:Bb(e)?3:0}function Ib(e,t){return 2===Cb(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Rb(e,t,n){var r=Cb(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Pb(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Lb(e){return aw&&e instanceof Map}function Bb(e){return sw&&e instanceof Set}function kb(e){return e.o||e.t}function Db(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=pw(e);delete t[hw];for(var n=fw(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ob(e,t){return void 0===t&&(t=!1),Fb(e)||Sb(e)||!Tb(e)||(Cb(e)>1&&(e.set=e.add=e.clear=e.delete=Nb),Object.freeze(e),t&&Mb(e,(function(e,t){return Ob(t,!0)}),!0)),e}function Nb(){Ab(2)}function Fb(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ub(e){var t=mw[e];return t||Ab(18,e),t}function Gb(){return iw}function Hb(e,t){t&&(Ub("Patches"),e.u=[],e.s=[],e.v=t)}function zb(e){Vb(e),e.p.forEach(Wb),e.p=null}function Vb(e){e===iw&&(iw=e.l)}function jb(e){return iw={p:[],l:iw,h:e,m:!0,_:0}}function Wb(e){var t=e[hw];0===t.i||1===t.i?t.j():t.g=!0}function qb(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||Ub("ES5").S(t,e,r),r?(n[hw].P&&(zb(t),Ab(4)),Tb(e)&&(e=Jb(t,e),t.l||Xb(t,e)),t.u&&Ub("Patches").M(n[hw],e,t.u,t.s)):e=Jb(t,n,[]),zb(t),t.u&&t.v(t.u,t.s),e!==cw?e:void 0}function Jb(e,t,n){if(Fb(t))return t;var r=t[hw];if(!r)return Mb(t,(function(i,o){return Kb(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Xb(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Db(r.k):r.o;Mb(3===r.i?new Set(i):i,(function(t,o){return Kb(e,r,i,t,o,n)})),Xb(e,i,!1),n&&e.u&&Ub("Patches").R(r,n,e.u,e.s)}return r.o}function Kb(e,t,n,r,i,o){if(Sb(i)){var a=Jb(e,i,o&&t&&3!==t.i&&!Ib(t.D,r)?o.concat(r):void 0);if(Rb(n,r,a),!Sb(a))return;e.m=!1}if(Tb(i)&&!Fb(i)){if(!e.h.F&&e._<1)return;Jb(e,i),t&&t.A.l||Xb(e,i)}}function Xb(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Ob(t,n)}function Yb(e,t){var n=e[hw];return(n?kb(n):e)[t]}function Qb(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Zb(e){e.P||(e.P=!0,e.l&&Zb(e.l))}function $b(e){e.o||(e.o=Db(e.t))}function ew(e,t,n){var r=Lb(t)?Ub("MapSet").N(t,n):Bb(t)?Ub("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Gb(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=gw;n&&(i=[r],o=vw);var a=Proxy.revocable(i,o),s=a.revoke,u=a.proxy;return r.k=u,r.j=s,u}(t,n):Ub("ES5").J(t,n);return(n?n.A:Gb()).p.push(r),r}function tw(e){return Sb(e)||Ab(22,e),function e(t){if(!Tb(t))return t;var n,r=t[hw],i=Cb(t);if(r){if(!r.P&&(r.i<4||!Ub("ES5").K(r)))return r.t;r.I=!0,n=nw(t,i),r.I=!1}else n=nw(t,i);return Mb(n,(function(t,i){r&&function(e,t){return 2===Cb(e)?e.get(t):e[t]}(r.t,t)===i||Rb(n,t,e(i))})),3===i?new Set(n):n}(e)}function nw(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Db(e)}_b=o.unstable_batchedUpdates,cb=_b;var rw,iw,ow="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),aw="undefined"!=typeof Map,sw="undefined"!=typeof Set,uw="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,cw=ow?Symbol.for("immer-nothing"):((rw={})["immer-nothing"]=!0,rw),lw=ow?Symbol.for("immer-draftable"):"__$immer_draftable",hw=ow?Symbol.for("immer-state"):"__$immer_state",dw=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),fw="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,pw=Object.getOwnPropertyDescriptors||function(e){var t={};return fw(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},mw={},gw={get:function(e,t){if(t===hw)return e;var n=kb(e);if(!Ib(n,t))return function(e,t,n){var r,i=Qb(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Tb(r)?r:r===Yb(e.t,t)?($b(e),e.o[t]=ew(e.A.h,r,e)):r},has:function(e,t){return t in kb(e)},ownKeys:function(e){return Reflect.ownKeys(kb(e))},set:function(e,t,n){var r=Qb(kb(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Yb(kb(e),t),o=null==i?void 0:i[hw];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Pb(n,i)&&(void 0!==n||Ib(e.t,t)))return!0;$b(e),Zb(e)}return e.o[t]===n&&"number"!=typeof n||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Yb(e.t,t)||t in e.t?(e.D[t]=!1,$b(e),Zb(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=kb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ab(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ab(12)}},vw={};Mb(gw,(function(e,t){vw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),vw.deleteProperty=function(e,t){return gw.deleteProperty.call(this,e[0],t)},vw.set=function(e,t,n){return gw.set.call(this,e[0],t,n,e[0])};var yw=new(function(){function e(e){var t=this;this.O=uw,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&Ab(6),void 0!==r&&"function"!=typeof r&&Ab(7),Tb(e)){var s=jb(t),u=ew(t,e,void 0),c=!0;try{a=n(u),c=!1}finally{c?zb(s):Vb(s)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return Hb(s,r),qb(e,s)}),(function(e){throw zb(s),e})):(Hb(s,r),qb(a,s))}if(!e||"object"!=typeof e){if((a=n(e))===cw)return;return void 0===a&&(a=e),t.F&&Ob(a,!0),a}Ab(21,e)},this.produceWithPatches=function(e,n){return"function"==typeof e?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))}:[t.produce(e,n,(function(e,t){r=e,i=t})),r,i];var r,i},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Tb(e)||Ab(8),Sb(e)&&(e=tw(e));var t=jb(this),n=ew(this,e,void 0);return n[hw].C=!0,Vb(t),n},t.finishDraft=function(e,t){var n=(e&&e[hw]).A;return Hb(n,t),qb(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!uw&&Ab(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}var i=Ub("Patches").$;return Sb(e)?i(e,t):this.produce(e,(function(e){return i(e,t.slice(n+1))}))},e}()),bw=yw.produce;yw.produceWithPatches.bind(yw),yw.setAutoFreeze.bind(yw),yw.setUseProxies.bind(yw),yw.applyPatches.bind(yw),yw.createDraft.bind(yw),yw.finishDraft.bind(yw);const ww=bw;function xw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_w(Object(n),!0).forEach((function(t){xw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aw(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sw="function"==typeof Symbol&&Symbol.observable||"@@observable",Tw=function(){return Math.random().toString(36).substring(7).split("").join(".")},Mw={INIT:"@@redux/INIT"+Tw(),REPLACE:"@@redux/REPLACE"+Tw(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tw()}};function Cw(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Iw(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Aw(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Aw(1));return n(Iw)(e,t)}if("function"!=typeof e)throw new Error(Aw(2));var i=e,o=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error(Aw(3));return o}function h(e){if("function"!=typeof e)throw new Error(Aw(4));if(u)throw new Error(Aw(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(Aw(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function d(e){if(!Cw(e))throw new Error(Aw(7));if(void 0===e.type)throw new Error(Aw(8));if(u)throw new Error(Aw(9));try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++)(0,t[n])();return e}function f(e){if("function"!=typeof e)throw new Error(Aw(10));i=e,d({type:Mw.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(Aw(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Sw]=function(){return this},e}return d({type:Mw.INIT}),(r={dispatch:d,subscribe:h,getState:l,replaceReducer:f})[Sw]=p,r}function Rw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Pw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Aw(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=Rw.apply(void 0,o)(n.dispatch),Ew(Ew({},n),{},{dispatch:r})}}}function Lw(e,t){return e===t}function Bw(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function kw(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lw,n=null,r=null;return function(){return Bw(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var Dw=kw();Dw.withExtraArgument=kw;const Ow=Dw;function Nw(){return(Nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fw(e){return(Fw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uw(e,t){return(Uw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Hw(e,t,n){return(Hw=Gw()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Uw(i,n.prototype),i}).apply(null,arguments)}function zw(e){var t="function"==typeof Map?new Map:void 0;return(zw=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Hw(e,arguments,Fw(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Uw(n,e)})(e)}var Vw="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Rw:Rw.apply(null,arguments)};var jw=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.concat=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return Hw(r,(t=e.prototype.concat).call.apply(t,[this].concat(i)))},i.prepend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?Hw(r,t[0].concat(this)):Hw(r,t.concat(this))},r}(zw(Array));function Ww(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return Nw({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function qw(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Jw(e){var t=e.name,n=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var r=e.reducers||{},i=void 0===e.extraReducers?[]:"function"==typeof e.extraReducers?qw(e.extraReducers):[e.extraReducers],o=i[0],a=void 0===o?{}:o,s=i[1],u=void 0===s?[]:s,c=i[2],l=void 0===c?void 0:c,h=Object.keys(r),d={},f={},p={};h.forEach((function(e){var n,i,o=r[e],a=t+"/"+e;"reducer"in o?(n=o.reducer,i=o.prepare):n=o,d[e]=n,f[a]=n,p[e]=i?Ww(a,i):Ww(a)}));var m=function(e,t,n,r){void 0===n&&(n=[]);var i="function"==typeof t?qw(t):[t,n,r],o=i[0],a=i[1],s=i[2],u=ww(e,(function(){}));return function(e,t){void 0===e&&(e=u);var n=[o[t.type]].concat(a.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[s]),n.reduce((function(e,n){if(n){if(Sb(e)){var r=n(e,t);return void 0===r?e:r}if(Tb(e))return ww(e,(function(e){return n(e,t)}));var i=n(e,t);if(void 0===i){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return e}),e)}}(n,Nw({},a,{},f),u,l);return{name:t,reducer:m,actions:p,caseReducers:d}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[hw];return gw.get(t,e)},set:function(t){var n=this[hw];gw.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][hw];if(!i.P)switch(i.i){case 5:r(i)&&Zb(i);break;case 4:n(i)&&Zb(i)}}}function n(e){for(var t=e.t,n=e.k,r=fw(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==hw){var a=t[o];if(void 0===a&&!Ib(t,o))return!0;var s=n[o],u=s&&s[hw];if(u?u.t!==a:!Pb(s,a))return!0}}var c=!!t[hw];return r.length!==fw(t).length+(c?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var i={};!function(e,t){mw[e]||(mw[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=pw(n);delete o[hw];for(var a=fw(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:Gb(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,hw,{value:o,writable:!0}),i},S:function(e,n,i){i?Sb(n)&&n[hw].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[hw];if(n){var i=n.t,o=n.k,a=n.D,s=n.i;if(4===s)Mb(o,(function(t){t!==hw&&(void 0!==i[t]||Ib(i,t)?a[t]||e(o[t]):(a[t]=!0,Zb(n)))})),Mb(i,(function(e){void 0!==o[e]||Ib(o,e)||(a[e]=!1,Zb(n))}));else if(5===s){if(r(n)&&(Zb(n),a.length=!0),o.length<i.length)for(var u=o.length;u<i.length;u++)a[u]=!1;else for(var c=i.length;c<o.length;c++)a[c]=!0;for(var l=Math.min(o.length,i.length),h=0;h<l;h++)void 0===a[h]&&e(o[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();var Kw=Jw({name:"user",initialState:{isOnline:!1,mode:"dark"},reducers:{setOnline:function(e){e.isOnline=!0},setOffline:function(e){e.isOnline=!1},setDarkMode:function(e){e.mode="dark"},setLightMode:function(e){e.mode="light"}},extraReducers:{}}),Xw=Kw.actions,Yw=Xw.setOnline,Qw=Xw.setOffline,Zw=Xw.setDarkMode,$w=Xw.setLightMode,ex=function(e){return e.user.isOnline},tx=function(e){return e.user.mode};const nx=Kw.reducer;function rx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ix=ky(i.forwardRef((function(e,t){var n=e.children,r=e.iconAttrs,o=(e.iconVerticalAlign,e.iconViewBox),a=e.size,s=e.title,u=Dy(e,["children","iconAttrs","iconVerticalAlign","iconViewBox","size","title"]),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rx(Object(n),!0).forEach((function(t){xw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({viewBox:o,height:void 0!==e.height?e.height:a,width:void 0!==e.width?e.width:a,"aria-hidden":null==s?"true":void 0,focusable:"false",role:null!=s?"img":void 0},r),l=function(e){return Object.keys(e).reduce((function(t,n){return r=n,(0,hv.Z)(r)&&(t[n]=e[n]),t;var r}),{})}(u);return i.createElement("svg",p({},c,l,{ref:t}),s&&i.createElement("title",{key:"icon-title"},s),n)}))).withConfig({displayName:"StyledIconBase",componentId:"ea9ulj-0"})(["display:inline-block;vertical-align:",";overflow:hidden;"],(function(e){return e.iconVerticalAlign})),ox=i.forwardRef((function(e,t){return i.createElement(ix,p({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 20 20"},e,{ref:t}),i.createElement("path",{d:"M1.574 5.286l7.5 4.029c.252.135.578.199.906.199.328 0 .654-.064.906-.199l7.5-4.029c.489-.263.951-1.286.054-1.286H1.521c-.897 0-.435 1.023.053 1.286zm17.039 2.203l-7.727 4.027c-.34.178-.578.199-.906.199s-.566-.021-.906-.199-7.133-3.739-7.688-4.028C.996 7.284 1 7.523 1 7.707V15c0 .42.566 1 1 1h16c.434 0 1-.58 1-1V7.708c0-.184.004-.423-.387-.219z"}))}));ox.displayName="Mail";var ax=i.forwardRef((function(e,t){return i.createElement(ix,p({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),i.createElement("path",{d:"M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}))}));ax.displayName="KeyFill";var sx,ux=n(284),cx=n.n(ux),lx=ky.div(sx||(sx=c(["\n  display: grid;\n  place-items: center;\n  position: absolute;\n  height: 18rem;\n  width: 35rem;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: ",";\n\n  color: ",";\n  h2,\n  p {\n    padding: 0.5rem;\n  }\n  #signUp {\n    margin: 0 auto;\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}));function hx(e){var t=e.Button,n=e.AuthInput,r=Eb(tx),o=u(i.useState(!1),2),a=o[0],s=o[1],c=u((0,i.useState)(null),2),l=c[0],h=c[1],d=u((0,i.useState)(null),2),f=d[0],p=d[1],m=u((0,i.useState)(null),2),g=m[0],v=m[1],y=u((0,i.useState)(!1),2),b=(y[0],y[1],bb(),Eb(ex),new(cx())),w=function(e){var t=e.target.value,n=e.target.name;"email"===n?h(t):"password"===n&&p(t)},x=function(){var e=ce(he().mark((function e(t){var n;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,rv.createUserWithEmailAndPassword(l,f);case 4:return n=e.sent,rv.currentUser.updateProfile({displayName:b.generatePhrase(),photoURL:"https://user-images.githubusercontent.com/80259925/122512461-d7fcfe80-d043-11eb-8861-fa0c407d50ba.png"}),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(1),v(e.t0),"auth/invalid-email"===e.t0.code?alert("  . ",g):"auth/weak-password"===e.t0.code?alert("  .",g):alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),_=i.createElement(lx,{mode:r},i.createElement("h2",{id:"simple-modal-title"},"  "),i.createElement("p",{id:"simple-modal-description"},"E-mail password   ."),i.createElement("form",{onSubmit:x},i.createElement("div",null,i.createElement("div",null,i.createElement("label",{name:"email"},i.createElement(ox,{size:"25"})),i.createElement(n,{mode:r,placeholder:"abc@gmail.com",type:"text",name:"email",required:!0,onChange:w}))),i.createElement("div",null,i.createElement("div",null,i.createElement("label",{name:"password"},i.createElement(ax,{size:"25"})),i.createElement(n,{mode:r,placeholder:"password",type:"password",name:"password",required:!0,onChange:w})),i.createElement("h4",null,g)),i.createElement(t,{id:"signUp",mode:r,type:"submit"},"")));return i.createElement("div",null,i.createElement(t,{mode:r,onClick:function(){s(!0)}},"  "),i.createElement(sb,{open:a,onClose:function(){s(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},_))}var dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};const fx="object"===("undefined"==typeof window?"undefined":dx(window))&&"object"===("undefined"==typeof document?"undefined":dx(document))&&9===document.nodeType;function px(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var mx={}.constructor;function gx(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(gx);if(e.constructor!==mx)return e;var t={};for(var n in e)t[n]=gx(e[n]);return t}function vx(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=gx(t);return r.plugins.onCreateRule(e,i,n)||(e[0],null)}var yx=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},bx=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=yx(e[r]," ");else n=yx(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function wx(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function xx(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;if(e&&o++,a)if(Array.isArray(a))for(var s=0;s<a.length;s++){var u=a[s];for(var c in u){var l=u[c];null!=l&&(r&&(r+="\n"),r+=""+wx(c+": "+bx(l)+";",o))}}else for(var h in a){var d=a[h];null!=d&&(r&&(r+="\n"),r+=""+wx(h+": "+bx(d)+";",o))}for(var f in t){var p=t[f];null!=p&&"fallbacks"!==f&&(r&&(r+="\n"),r+=""+wx(f+": "+bx(p)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r="\n"+r+"\n"),wx(e+" {"+r,--o)+wx("}",o)):r}var _x=/([[\].#*$><+~=|^:(),"'`\s])/g,Ex="undefined"!=typeof CSS&&CSS.escape,Ax=function(e){return Ex?Ex(e):e.replace(_x,"\\$1")},Sx=function(){function e(e,t,n){this.type="style",this.key=void 0,this.isProcessed=!1,this.style=void 0,this.renderer=void 0,this.renderable=void 0,this.options=void 0;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var u=this.options.sheet;return u&&u.attached,this},e}(),Tx=function(e){function t(t,n,r){var i;(i=e.call(this,t,n,r)||this).selectorText=void 0,i.id=void 0,i.renderable=void 0;var o=r.selector,a=r.scoped,s=r.sheet,u=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=u(px(px(i)),s),i.selectorText="."+Ax(i.id)),i}h(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!=typeof n?e[t]=n:Array.isArray(n)&&(e[t]=bx(n))}return e},n.toString=function(e){var t=this.options.sheet,n=t&&t.options.link?p({},e,{allowEmpty:!0}):e;return xx(this.selectorText,this.style,n)},Xy(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;n&&t&&(t.setSelector(n,e)||t.replaceRule(n,this))}},get:function(){return this.selectorText}}]),t}(Sx),Mx={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new Tx(e,t,n)}},Cx={indent:1,children:!0},Ix=/@([\w-]+)/,Rx=function(){function e(e,t,n){this.type="conditional",this.at=void 0,this.key=void 0,this.query=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e;var r=e.match(Ix);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new $x(p({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.toString=function(e){if(void 0===e&&(e=Cx),null==e.indent&&(e.indent=Cx.indent),null==e.children&&(e.children=Cx.children),!1===e.children)return this.query+" {}";var t=this.rules.toString(e);return t?this.query+" {\n"+t+"\n}":""},e}(),Px=/@media|@supports\s+/,Lx={onCreateRule:function(e,t,n){return Px.test(e)?new Rx(e,t,n):null}},Bx={indent:1,children:!0},kx=/@keyframes\s+([\w-]+)/,Dx=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.key=void 0,this.name=void 0,this.id=void 0,this.rules=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0;var r=e.match(kx);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,a=n.generateId;for(var s in this.id=!1===i?this.name:Ax(a(this,o)),this.rules=new $x(p({},n,{parent:this})),t)this.rules.add(s,t[s],p({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){if(void 0===e&&(e=Bx),null==e.indent&&(e.indent=Bx.indent),null==e.children&&(e.children=Bx.children),!1===e.children)return this.at+" "+this.id+" {}";var t=this.rules.toString(e);return t&&(t="\n"+t+"\n"),this.at+" "+this.id+" {"+t+"}"},e}(),Ox=/@keyframes\s+/,Nx=/\$([\w-]+)/g,Fx=function(e,t){return"string"==typeof e?e.replace(Nx,(function(e,n){return n in t?t[n]:e})):e},Ux=function(e,t,n){var r=e[t],i=Fx(r,n);i!==r&&(e[t]=i)},Gx={onCreateRule:function(e,t,n){return"string"==typeof e&&Ox.test(e)?new Dx(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&Ux(e,"animation-name",n.keyframes),"animation"in e&&Ux(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return Fx(e,r.keyframes);default:return e}}},Hx=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).renderable=void 0,t}return h(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=t&&t.options.link?p({},e,{allowEmpty:!0}):e;return xx(this.key,this.style,n)},t}(Sx),zx={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new Hx(e,t,n):null}},Vx=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=xx(this.at,this.style[n]),this.style[n+1]&&(t+="\n");return t}return xx(this.at,this.style,e)},e}(),jx=/@font-face/,Wx={onCreateRule:function(e,t,n){return jx.test(e)?new Vx(e,t,n):null}},qx=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.key=void 0,this.style=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return xx(this.key,this.style,e)},e}(),Jx={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new qx(e,t,n):null}},Kx=function(){function e(e,t,n){this.type="simple",this.key=void 0,this.value=void 0,this.options=void 0,this.isProcessed=!1,this.renderable=void 0,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Xx={"@charset":!0,"@import":!0,"@namespace":!0},Yx=[Mx,Lx,Gx,zx,Wx,Jx,{onCreateRule:function(e,t,n){return e in Xx?new Kx(e,t,n):null}}],Qx={process:!0},Zx={force:!0,process:!0},$x=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=void 0,this.classes=void 0,this.keyframes=void 0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,a=r.jss,s=r.Renderer,u=r.generateId,c=r.scoped,l=p({classes:this.classes,parent:i,sheet:o,jss:a,Renderer:s,generateId:u,scoped:c,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(l.selector="."+Ax(this.classes[h]));var d=vx(h,t,l);if(!d)return null;this.register(d);var f=void 0===l.index?this.index.length:l.index;return this.index.splice(f,0,d),d},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Tx?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Dx&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Tx?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Dx&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.map[e],t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=Qx);var i=this.options,o=i.jss.plugins,a=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t,u=s.style;if(o.onUpdate(n,t,a,r),r.process&&u&&u!==s.style){for(var c in o.onProcessStyle(s.style,s,a),s.style){var l=s.style[c];l!==u[c]&&s.prop(c,l,Zx)}for(var h in u){var d=s.style[h],f=u[h];null==d&&d!==f&&s.prop(h,null,Zx)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var o=this.index[i].toString(e);(o||r)&&(t&&(t+="\n"),t+=o)}return t},e}(),e_=function(){function e(e,t){for(var n in this.options=void 0,this.deployed=void 0,this.attached=void 0,this.rules=void 0,this.renderer=void 0,this.classes=void 0,this.keyframes=void 0,this.queue=void 0,this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=p({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new $x(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),t_=function(){function e(){this.plugins={internal:[],external:[]},this.registry=void 0}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),n_=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=G(t,["attached"]),i="",o=0;o<this.registry.length;o++){var a=this.registry[o];null!=n&&a.attached!==n||(i&&(i+="\n"),i+=a.toString(r))}return i},Xy(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),r_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),i_="2f1acc6c3a606b082e5eef5e54414ffb";null==r_[i_]&&(r_[i_]=0);var o_=r_[i_]++,a_=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+o_+i+t:o+n.key+"-"+o_+(i?"-"+i:"")+"-"+t}},s_=function(e){var t;return function(){return t||(t=e()),t}},u_=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(e){return""}},c_=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=bx(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(e){return!1}return!0},l_=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(e){}},h_=function(e,t){return e.selectorText=t,e.selectorText===t},d_=s_((function(){return document.querySelector("head")}));var f_=s_((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),p_=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(e){return!1}return e.cssRules[n]},m_=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},g_=function(){function e(e){this.getPropertyValue=u_,this.setProperty=c_,this.removeProperty=l_,this.setSelector=h_,this.element=void 0,this.sheet=void 0,this.hasInsertedRules=!1,this.cssRules=[],e&&n_.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var o=f_();o&&this.element.setAttribute("nonce",o)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=function(e){var t=n_.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"==typeof r){var i=function(e){for(var t=d_(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"==typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else d_().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var o=m_(n,t);if(!1===(i=p_(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,i)}return this.insertRules(r.rules,i),i}var a=e.toString();if(!a)return!1;var s=m_(n,t),u=p_(n,a,s);return!1!==u&&(this.hasInsertedRules=!0,this.refCssRule(e,s,u),u)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof e_&&(this.cssRules[t]=n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),v_=0,y_=function(){function e(e){this.id=v_++,this.version="10.6.0",this.plugins=new t_,this.options={id:{minify:!1},createGenerateId:a_,Renderer:fx?g_:null,plugins:[]},this.generateId=a_({minify:!1});for(var t=0;t<Yx.length;t++)this.plugins.use(Yx[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=p({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!=typeof n&&(n=0===n_.index?0:n_.index+1);var r=new e_(e,p({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),n_.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"==typeof e)return this.createRule(void 0,e,t);var r=p({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=vx(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}();function b_(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var o=b_(r);o&&(t||(t={}),t[n]=o)}}return t}var w_="object"==typeof CSS&&null!=CSS&&"number"in CSS,x_=function(e){return new y_(e)};function __(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;if(e.Component,!n)return t;var r=p({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}x_();const E_=function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},A_=function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},S_=function(e,t,n){e.get(t).delete(n)},T_="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var M_=["checked","disabled","error","focused","focusVisible","required","expanded","selected"],C_=Date.now(),I_="fnValues"+C_,R_="fnStyle"+ ++C_;var P_="@global",L_="@global ",B_=function(){function e(e,t,n){for(var r in this.type="global",this.at=P_,this.rules=void 0,this.options=void 0,this.key=void 0,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new $x(p({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(){return this.rules.toString()},e}(),k_=function(){function e(e,t,n){this.type="global",this.at=P_,this.options=void 0,this.rule=void 0,this.isProcessed=!1,this.key=void 0,this.key=e,this.options=n;var r=e.substr(L_.length);this.rule=n.jss.createRule(r,t,p({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),D_=/\s*,\s*/g;function O_(e,t){for(var n=e.split(D_),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var N_=/\s*,\s*/g,F_=/&/g,U_=/\$([\w-]+)/g;var G_=/[A-Z]/g,H_=/^ms-/,z_={};function V_(e){return"-"+e.toLowerCase()}const j_=function(e){if(z_.hasOwnProperty(e))return z_[e];var t=e.replace(G_,V_);return z_[e]=H_.test(t)?"-"+t:t};function W_(e){var t={};for(var n in e)t[0===n.indexOf("--")?n:j_(n)]=e[n];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(W_):t.fallbacks=W_(e.fallbacks)),t}var q_=w_&&CSS?CSS.px:"px",J_=w_&&CSS?CSS.ms:"ms",K_=w_&&CSS?CSS.percent:"%";function X_(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var Y_=X_({"animation-delay":J_,"animation-duration":J_,"background-position":q_,"background-position-x":q_,"background-position-y":q_,"background-size":q_,border:q_,"border-bottom":q_,"border-bottom-left-radius":q_,"border-bottom-right-radius":q_,"border-bottom-width":q_,"border-left":q_,"border-left-width":q_,"border-radius":q_,"border-right":q_,"border-right-width":q_,"border-top":q_,"border-top-left-radius":q_,"border-top-right-radius":q_,"border-top-width":q_,"border-width":q_,"border-block":q_,"border-block-end":q_,"border-block-end-width":q_,"border-block-start":q_,"border-block-start-width":q_,"border-block-width":q_,"border-inline":q_,"border-inline-end":q_,"border-inline-end-width":q_,"border-inline-start":q_,"border-inline-start-width":q_,"border-inline-width":q_,"border-start-start-radius":q_,"border-start-end-radius":q_,"border-end-start-radius":q_,"border-end-end-radius":q_,margin:q_,"margin-bottom":q_,"margin-left":q_,"margin-right":q_,"margin-top":q_,"margin-block":q_,"margin-block-end":q_,"margin-block-start":q_,"margin-inline":q_,"margin-inline-end":q_,"margin-inline-start":q_,padding:q_,"padding-bottom":q_,"padding-left":q_,"padding-right":q_,"padding-top":q_,"padding-block":q_,"padding-block-end":q_,"padding-block-start":q_,"padding-inline":q_,"padding-inline-end":q_,"padding-inline-start":q_,"mask-position-x":q_,"mask-position-y":q_,"mask-size":q_,height:q_,width:q_,"min-height":q_,"max-height":q_,"min-width":q_,"max-width":q_,bottom:q_,left:q_,top:q_,right:q_,inset:q_,"inset-block":q_,"inset-block-end":q_,"inset-block-start":q_,"inset-inline":q_,"inset-inline-end":q_,"inset-inline-start":q_,"box-shadow":q_,"text-shadow":q_,"column-gap":q_,"column-rule":q_,"column-rule-width":q_,"column-width":q_,"font-size":q_,"font-size-delta":q_,"letter-spacing":q_,"text-decoration-thickness":q_,"text-indent":q_,"text-stroke":q_,"text-stroke-width":q_,"word-spacing":q_,motion:q_,"motion-offset":q_,outline:q_,"outline-offset":q_,"outline-width":q_,perspective:q_,"perspective-origin-x":K_,"perspective-origin-y":K_,"transform-origin":K_,"transform-origin-x":K_,"transform-origin-y":K_,"transform-origin-z":K_,"transition-delay":J_,"transition-duration":J_,"vertical-align":q_,"flex-basis":q_,"shape-margin":q_,size:q_,gap:q_,grid:q_,"grid-gap":q_,"row-gap":q_,"grid-row-gap":q_,"grid-column-gap":q_,"grid-template-rows":q_,"grid-template-columns":q_,"grid-auto-rows":q_,"grid-auto-columns":q_,"box-shadow-x":q_,"box-shadow-y":q_,"box-shadow-blur":q_,"box-shadow-spread":q_,"font-line-height":q_,"text-shadow-x":q_,"text-shadow-y":q_,"text-shadow-blur":q_});function Q_(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Q_(e,t[r],n);else if("object"==typeof t)if("fallbacks"===e)for(var i in t)t[i]=Q_(i,t[i],n);else for(var o in t)t[o]=Q_(e+"-"+o,t[o],n);else if("number"==typeof t&&!1===isNaN(t)){var a=n[e]||Y_[e];return!a||0===t&&a===q_?t.toString():"function"==typeof a?a(t).toString():""+t+a}return t}var Z_="",$_="",eE="",tE="",nE=fx&&"ontouchstart"in document.documentElement;if(fx){var rE={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},iE=document.createElement("p").style;for(var oE in rE)if(oE+"Transform"in iE){Z_=oE,$_=rE[oE];break}"Webkit"===Z_&&"msHyphens"in iE&&(Z_="ms",$_=rE.ms,tE="edge"),"Webkit"===Z_&&"-apple-trailing-word"in iE&&(eE="apple")}var aE=Z_,sE=$_,uE=eE,cE=tE,lE=nE,hE={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===aE?"-webkit-"+e:sE+e)}},dE={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===aE?sE+"print-"+e:e)}},fE=/[-\s]+(.)?/g;function pE(e,t){return t?t.toUpperCase():""}function mE(e){return e.replace(fE,pE)}function gE(e){return mE("-"+e)}var vE,yE={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===aE){var n="mask-image";if(mE(n)in t)return e;if(aE+gE(n)in t)return sE+e}return e}},bE={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==uE||lE?e:sE+e)}},wE={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:sE+e)}},xE={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:sE+e)}},_E={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===aE||"ms"===aE&&"edge"!==cE?sE+e:e)}},EE={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===aE||"ms"===aE||"apple"===uE?sE+e:e)}},AE={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===aE?"WebkitColumn"+gE(e)in t&&sE+"column-"+e:"Moz"===aE&&"page"+gE(e)in t&&"page-"+e)}},SE={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===aE)return e;var n=e.replace("-inline","");return aE+gE(n)in t&&sE+n}},TE={supportedProperty:function(e,t){return mE(e)in t&&e}},ME={supportedProperty:function(e,t){var n=gE(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:aE+n in t?sE+e:"Webkit"!==aE&&"Webkit"+n in t&&"-webkit-"+e}},CE={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===aE?""+sE+e:e)}},IE={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===aE?sE+"scroll-chaining":e)}},RE={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},PE={supportedProperty:function(e,t){var n=RE[e];return!!n&&aE+gE(n)in t&&sE+n}},LE={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},BE=Object.keys(LE),kE=function(e){return sE+e},DE=[hE,dE,yE,bE,wE,xE,_E,EE,AE,SE,TE,ME,CE,IE,PE,{supportedProperty:function(e,t,n){var r=n.multiple;if(BE.indexOf(e)>-1){var i=LE[e];if(!Array.isArray(i))return aE+gE(i)in t&&sE+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(aE+gE(i[0])in t))return!1;return i.map(kE)}return!1}}],OE=DE.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),NE=DE.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Yy(t.noPrefill)),e}),[]),FE={};if(fx){vE=document.createElement("p");var UE=window.getComputedStyle(document.documentElement,"");for(var GE in UE)isNaN(GE)||(FE[UE[GE]]=UE[GE]);NE.forEach((function(e){return delete FE[e]}))}function HE(e,t){if(void 0===t&&(t={}),!vE)return e;if(null!=FE[e])return FE[e];"transition"!==e&&"transform"!==e||(t[e]=e in vE.style);for(var n=0;n<OE.length&&(FE[e]=OE[n](e,vE.style,t),!FE[e]);n++);try{vE.style[e]=""}catch(e){return!1}return FE[e]}var zE,VE={},jE={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},WE=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function qE(e,t,n){return"var"===t?"var":"all"===t?"all":"all"===n?", all":(t?HE(t):", "+HE(n))||t||n}function JE(e,t){var n=t;if(!zE||"content"===e)return t;if("string"!=typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=VE[r])return VE[r];try{zE.style[e]=n}catch(e){return VE[r]=!1,!1}if(jE[e])n=n.replace(WE,qE);else if(""===zE.style[e]&&("-ms-flex"===(n=sE+n)&&(zE.style[e]="-ms-flexbox"),zE.style[e]=n,""===zE.style[e]))return VE[r]=!1,!1;return zE.style[e]="",VE[r]=n,VE[r]}fx&&(zE=document.createElement("p"));var KE,XE=x_({plugins:[{onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var r=vx(e,{},n);return r[R_]=t,r},onProcessStyle:function(e,t){if(I_ in t||R_ in t)return e;var n={};for(var r in e){var i=e[r];"function"==typeof i&&(delete e[r],n[r]=i)}return t[I_]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[R_];o&&(i.style=o(e)||{});var a=i[I_];if(a)for(var s in a)i.prop(s,a[s](e),r)}},{onCreateRule:function(e,t,n){if(!e)return null;if(e===P_)return new B_(e,t,n);if("@"===e[0]&&e.substr(0,L_.length)===L_)return new k_(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),!1===n.scoped&&(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r["@global"]:null;if(i){for(var o in i)t.addRule(o,i[o],p({},n,{selector:O_(o,e.selector)}));delete r["@global"]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,P_.length)===P_){var o=O_(i.substr(P_.length),e.selector);t.addRule(o,r[i],p({},n,{selector:o})),delete r[i]}}(e,t))}},function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?(i=i).selector:r}}function t(e,t){for(var n=t.split(N_),r=e.split(N_),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var u=r[s];i&&(i+=", "),i+=-1!==u.indexOf("&")?u.replace(F_,a):a+" "+u}return i}function n(e,t,n){if(n)return p({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=p({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var a,s,u=i,c=u.options.parent;for(var l in r){var h=-1!==l.indexOf("&"),d="@"===l[0];if(h||d){if(a=n(u,c,a),h){var f=t(l,u.selector);s||(s=e(c,o)),f=f.replace(U_,s),c.addRule(f,r[l],p({},a,{selector:f}))}else d&&c.addRule(l,{},a).addRule(u.key,r[l],{selector:u.selector});delete r[l]}}return r}}}(),{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=W_(e[t]);return e}return W_(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=j_(t);return t===r?e:(n.prop(r,e),null)}},function(e){void 0===e&&(e={});var t=X_(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Q_(r,e[r],t);return e},onChangeValue:function(e,n){return Q_(n,e,t)}}}(),"undefined"==typeof window?null:function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=HE(n);o&&o!==n&&(i=!0);var a=!1,s=JE(o,bx(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]||"ms"===aE?n:"@"+sE+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return JE(t,bx(e))||e}}}(),(KE=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length},{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var n={},r=Object.keys(e).sort(KE),i=0;i<r.length;i++)n[r[i]]=e[r[i]];return n}})]}),YE={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),u=0,c=function(){return u+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==M_.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[T_]&&""===a?"".concat(o,"-").concat(c()):o}return"".concat(s).concat(i).concat(c())}}(),jss:XE,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},QE=i.createContext(YE),ZE=-1e9;function $E(){return ZE+=1}function eA(e){return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tA(e){return e&&"object"===eA(e)&&e.constructor===Object}function nA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?p({},e):e;return tA(e)&&tA(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(tA(t[i])&&i in e?r[i]=nA(e[i],t[i],n):r[i]=t[i])})),r}function rA(e){var t="function"==typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(e){throw e}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],a=p({},i);return Object.keys(o).forEach((function(e){a[e]=nA(a[e],o[e])})),a},options:{}}}const iA={};function oA(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=__({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function aA(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,a=e.name;if(!i.disableGeneration){var s=A_(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},E_(i.sheetsManager,o,r,s));var u=p({},o.options,i,{theme:r,flip:"boolean"==typeof i.flip?i.flip:"rtl"===r.direction});u.generateId=u.serverGenerateClassName||u.generateClassName;var c=i.sheetsRegistry;if(0===s.refs){var l;i.sheetsCache&&(l=A_(i.sheetsCache,o,r));var h=o.create(r,a);l||((l=i.jss.createStyleSheet(h,p({link:!1},u))).attach(),i.sheetsCache&&E_(i.sheetsCache,o,r,l)),c&&c.add(l),s.staticSheet=l,s.dynamicStyles=b_(h)}if(s.dynamicStyles){var d=i.jss.createStyleSheet(s.dynamicStyles,p({link:!0},u));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=__({baseClasses:s.staticSheet.classes,newClasses:d.classes}),c&&c.add(d)}else n.classes=s.staticSheet.classes;s.refs+=1}}function sA(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function uA(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=A_(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(S_(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function cA(e,t){var n,r=i.useRef([]),o=i.useMemo((function(){return{}}),t);r.current!==o&&(r.current=o,n=e()),i.useEffect((function(){return function(){n&&n()}}),[o])}function lA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,o=t.Component,a=t.defaultTheme,s=void 0===a?iA:a,u=Dy(t,["name","classNamePrefix","Component","defaultTheme"]),c=rA(e),l=n||r||"makeStyles";c.options={index:$E(),name:n,meta:l,classNamePrefix:l};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ny()||s,r=p({},i.useContext(QE),u),a=i.useRef(),l=i.useRef();cA((function(){var i={name:n,state:{},stylesCreator:c,stylesOptions:r,theme:t};return aA(i,e),l.current=!1,a.current=i,function(){uA(i)}}),[t,c]),i.useEffect((function(){l.current&&sA(a.current,e),l.current=!0}));var h=oA(a.current,e.classes,o);return h};return h}var hA=["xs","sm","md","lg","xl"];function dA(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=Dy(e,["values","unit","step"]);function u(e){var t="number"==typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function c(e,t){var r=hA.indexOf(t);return r===hA.length-1?u(e):"@media (min-width:".concat("number"==typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"==typeof n[hA[r+1]]?n[hA[r+1]]:t)-a/100).concat(i,")")}return p({keys:hA,values:n,up:u,down:function(e){var t=hA.indexOf(e)+1,r=n[hA[t]];return t===hA.length?u("xs"):"@media (max-width:".concat(("number"==typeof r&&t>0?r:e)-a/100).concat(i,")")},between:c,only:function(e){return c(e,e)},width:function(e){return n[e]}},s)}function fA(e,t,n){var r;return p({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p({paddingLeft:t(2),paddingRight:t(2)},n,xw({},e.up("sm"),p({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},xw(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),xw(r,e.up("sm"),{minHeight:64}),r)},n)}function pA(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}const mA={black:"#000",white:"#fff"},gA={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},vA="#7986cb",yA="#3f51b5",bA="#303f9f",wA="#ff4081",xA="#f50057",_A="#c51162",EA="#e57373",AA="#f44336",SA="#d32f2f",TA="#ffb74d",MA="#ff9800",CA="#f57c00",IA="#64b5f6",RA="#2196f3",PA="#1976d2",LA="#81c784",BA="#4caf50",kA="#388e3c";function DA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function OA(e){if(e.type)return e;if("#"===e.charAt(0))return OA(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(pA(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function NA(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function FA(e){var t="hsl"===(e=OA(e)).type?OA(function(e){var t=(e=OA(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",u=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",u.push(t[3])),NA({type:s,values:u})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function UA(e,t){return e=OA(e),t=DA(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,NA(e)}function GA(e,t){if(e=OA(e),t=DA(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return NA(e)}function HA(e,t){if(e=OA(e),t=DA(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return NA(e)}var zA={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:mA.white,default:gA[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},VA={text:{primary:mA.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:gA[800],default:"#303030"},action:{active:mA.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function jA(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=HA(e.main,i):"dark"===t&&(e.dark=GA(e.main,o)))}function WA(e){var t=e.primary,n=void 0===t?{light:vA,main:yA,dark:bA}:t,r=e.secondary,i=void 0===r?{light:wA,main:xA,dark:_A}:r,o=e.error,a=void 0===o?{light:EA,main:AA,dark:SA}:o,s=e.warning,u=void 0===s?{light:TA,main:MA,dark:CA}:s,c=e.info,l=void 0===c?{light:IA,main:RA,dark:PA}:c,h=e.success,d=void 0===h?{light:LA,main:BA,dark:kA}:h,f=e.type,m=void 0===f?"light":f,g=e.contrastThreshold,v=void 0===g?3:g,y=e.tonalOffset,b=void 0===y?.2:y,w=Dy(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function x(e){return function(e,t){var n=FA(e),r=FA(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,VA.text.primary)>=v?VA.text.primary:zA.text.primary}var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=p({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(pA(4,t));if("string"!=typeof e.main)throw new Error(pA(5,JSON.stringify(e.main)));return jA(e,"light",n,b),jA(e,"dark",r,b),e.contrastText||(e.contrastText=x(e.main)),e},E={dark:VA,light:zA};return nA(p({common:mA,type:m,primary:_(n),secondary:_(i,"A400","A200","A700"),error:_(a),warning:_(u),info:_(l),success:_(d),grey:gA,contrastThreshold:v,getContrastText:x,augmentColor:_,tonalOffset:b},E[m]),w)}function qA(e){return Math.round(1e5*e)/1e5}var JA={textTransform:"uppercase"},KA='"Roboto", "Helvetica", "Arial", sans-serif';function XA(e,t){var n="function"==typeof t?t(e):t,r=n.fontFamily,i=void 0===r?KA:r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,u=void 0===s?300:s,c=n.fontWeightRegular,l=void 0===c?400:c,h=n.fontWeightMedium,d=void 0===h?500:h,f=n.fontWeightBold,m=void 0===f?700:f,g=n.htmlFontSize,v=void 0===g?16:g,y=n.allVariants,b=n.pxToRem,w=Dy(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),x=a/14,_=b||function(e){return"".concat(e/v*x,"rem")},E=function(e,t,n,r,o){return p({fontFamily:i,fontWeight:e,fontSize:_(t),lineHeight:n},i===KA?{letterSpacing:"".concat(qA(r/t),"em")}:{},o,y)},A={h1:E(u,96,1.167,-1.5),h2:E(u,60,1.2,-.5),h3:E(l,48,1.167,0),h4:E(l,34,1.235,.25),h5:E(l,24,1.334,0),h6:E(d,20,1.6,.15),subtitle1:E(l,16,1.75,.15),subtitle2:E(d,14,1.57,.1),body1:E(l,16,1.5,.15),body2:E(l,14,1.43,.15),button:E(d,14,1.75,.4,JA),caption:E(l,12,1.66,.4),overline:E(l,12,2.66,1,JA)};return nA(p({htmlFontSize:v,pxToRem:_,round:qA,fontFamily:i,fontSize:a,fontWeightLight:u,fontWeightRegular:l,fontWeightMedium:d,fontWeightBold:m},A),w,{clone:!1})}function YA(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const QA=["none",YA(0,2,1,-1,0,1,1,0,0,1,3,0),YA(0,3,1,-2,0,2,2,0,0,1,5,0),YA(0,3,3,-2,0,3,4,0,0,1,8,0),YA(0,2,4,-1,0,4,5,0,0,1,10,0),YA(0,3,5,-1,0,5,8,0,0,1,14,0),YA(0,3,5,-1,0,6,10,0,0,1,18,0),YA(0,4,5,-2,0,7,10,1,0,2,16,1),YA(0,5,5,-3,0,8,10,1,0,3,14,2),YA(0,5,6,-3,0,9,12,1,0,3,16,2),YA(0,6,6,-3,0,10,14,1,0,4,18,3),YA(0,6,7,-4,0,11,15,1,0,4,20,3),YA(0,7,8,-4,0,12,17,2,0,5,22,4),YA(0,7,8,-4,0,13,19,2,0,5,24,4),YA(0,7,9,-4,0,14,21,2,0,5,26,4),YA(0,8,9,-5,0,15,22,2,0,6,28,5),YA(0,8,10,-5,0,16,24,2,0,6,30,5),YA(0,8,11,-5,0,17,26,2,0,6,32,5),YA(0,9,11,-5,0,18,28,2,0,7,34,6),YA(0,9,12,-6,0,19,29,2,0,7,36,6),YA(0,10,13,-6,0,20,31,3,0,8,38,7),YA(0,10,13,-6,0,21,33,3,0,8,40,7),YA(0,10,14,-6,0,22,35,3,0,8,42,7),YA(0,11,14,-7,0,23,36,3,0,9,44,8),YA(0,11,15,-7,0,24,38,3,0,9,46,8)],ZA={borderRadius:4};var $A={xs:0,sm:600,md:960,lg:1280,xl:1920},eS={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat($A[e],"px)")}};const tS=function(e,t){return t?nA(e,t,{clone:!1}):e};var nS,rS={m:"margin",p:"padding"},iS={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},oS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},aS=(nS={},function(e){return void 0===nS[e]&&(nS[e]=function(e){if(e.length>2){if(!oS[e])return[e];e=oS[e]}var t=u(e.split(""),2),n=t[0],r=t[1],i=rS[n],o=iS[r]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]}(e)),nS[e]}),sS=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function uS(e){var t=e.spacing||8;return"number"==typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"==typeof t?t:function(){}}function cS(e){var t=uS(e.theme);return Object.keys(e).map((function(n){if(-1===sS.indexOf(n))return null;var r=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"==typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:"-".concat(n)}(t,n),e}),{})}}(aS(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||eS;return t.reduce((function(e,i,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===eA(t)){var i=e.theme.breakpoints||eS;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(tS,{})}function lS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=uS({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"==typeof e)return e;var n=t(e);return"number"==typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}cS.propTypes={},cS.filterProps=sS;var hS={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},dS={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fS(e){return"".concat(Math.round(e),"ms")}const pS={easing:hS,duration:dS,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?dS.standard:n,i=t.easing,o=void 0===i?hS.easeInOut:i,a=t.delay,s=void 0===a?0:a;return Dy(t,["duration","easing","delay"]),(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"==typeof r?r:fS(r)," ").concat(o," ").concat("string"==typeof s?s:fS(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},mS=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,o=e.palette,a=void 0===o?{}:o,s=e.spacing,u=e.typography,c=void 0===u?{}:u,l=Dy(e,["breakpoints","mixins","palette","spacing","typography"]),h=WA(a),d=dA(n),f=lS(s),p=nA({breakpoints:d,direction:"ltr",mixins:fA(d,f,i),overrides:{},palette:h,props:{},shadows:QA,typography:XA(h,c),spacing:f,shape:ZA,transitions:pS,zIndex:Jy},l),m=arguments.length,g=new Array(m>1?m-1:0),v=1;v<m;v++)g[v-1]=arguments[v];return g.reduce((function(e,t){return nA(e,t)}),p)}();var gS=i.forwardRef((function(e,t){return i.createElement(ix,p({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),i.createElement("path",{d:"M20.283 10.356h-8.327v3.451h4.792c-.446 2.193-2.313 3.453-4.792 3.453a5.27 5.27 0 01-5.279-5.28 5.27 5.27 0 015.279-5.279c1.259 0 2.397.447 3.29 1.178l2.6-2.599c-1.584-1.381-3.615-2.233-5.89-2.233a8.908 8.908 0 00-8.934 8.934 8.907 8.907 0 008.934 8.934c4.467 0 8.529-3.249 8.529-8.934 0-.528-.081-1.097-.202-1.625z"}))}));gS.displayName="Google";var vS=i.forwardRef((function(e,t){return i.createElement(ix,p({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),i.createElement("path",{fillRule:"evenodd",d:"M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 012.496-.336 9.554 9.554 0 012.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z",clipRule:"evenodd"}))}));vS.displayName="Github";var yS,bS="Google",wS="GitHub",xS=ky.div(yS||(yS=c(["\n  li {\n    display: grid;\n    place-items: center;\n    flex-direction: column;\n    margin: 1.5rem;\n    border: 0.5px solid #a4a1a1;\n    height: 2rem;\n    cursor: pointer;\n  }\n  #Google {\n    background-color: white;\n    color: rgb(61, 62, 63);\n  }\n"])));function _S(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)"),backgroundColor:"rgb(35,35,35)",color:"white"}}var ES=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return lA(e,p({defaultTheme:mS},t))}((function(e){return{paper:{position:"absolute",width:400,boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function AS(e){var t=e.Button,n=Eb(tx),r=ES(),o=u((0,i.useState)(_S),1)[0],a=u((0,i.useState)(!1),2),s=a[0],c=a[1],l=function(){var e=ce(he().mark((function e(t){var n;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,bS===t?n=new iv.GoogleAuthProvider:wS===t&&(n=new iv.GithubAuthProvider),e.next=5,rv.signInWithPopup(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),h=i.createElement("div",{style:o,className:r.paper},i.createElement("div",null,i.createElement("ul",null,i.createElement(xS,null,i.createElement("li",{key:bS,id:bS,onClick:function(){return l(bS)}},i.createElement("span",null,i.createElement(gS,{size:"25"}),"Google LogIn")),i.createElement("li",{key:wS,id:wS,onClick:function(){return l(wS)}},i.createElement("span",null,i.createElement(vS,{size:"25"}),"GitHub LogIn"))))));return i.createElement("div",null,i.createElement(t,{mode:n,onClick:function(){c(!0)}},"SNS "),i.createElement(sb,{open:s,onClose:function(){c(!1)}},h))}var SS=function(e,t){return(SS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function TS(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}SS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var MS=function(){return(MS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function CS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function IS(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function RS(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}Object.create,Object.create;var PS=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},LS={measureLayout:PS(["layout","layoutId","drag","_layoutResetTransform"]),animation:PS(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:PS(["exit"]),drag:PS(["drag","dragControls"]),focus:PS(["whileFocus"]),hover:PS(["whileHover","onHoverStart","onHoverEnd"]),tap:PS(["whileTap","onTap","onTapStart","onTapCancel"]),pan:PS(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:PS(["layout","layoutId"])},BS=(0,i.createContext)({strict:!1}),kS=Object.keys(LS),DS=kS.length,OS=(0,i.createContext)({transformPagePoint:function(e){return e},isStatic:!1}),NS=(0,i.createContext)({}),FS=(0,i.createContext)(null);function US(e){var t=(0,i.useRef)(null);return null===t.current&&(t.current=e()),t.current}function GS(){var e=(0,i.useContext)(FS);if(null===e)return[!0,null];var t=e.isPresent,n=e.onExitComplete,r=e.register,o=VS();return(0,i.useEffect)((function(){return r(o)}),[]),!t&&n?[!1,function(){return null==n?void 0:n(o)}]:[!0]}var HS=0,zS=function(){return HS++},VS=function(){return US(zS)},jS=(0,i.createContext)(null),WS="undefined"!=typeof window,qS=WS?i.useLayoutEffect:i.useEffect;function JS(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function KS(e){return Array.isArray(e)}function XS(e){return"string"==typeof e||KS(e)}function YS(e,t,n,r,i){var o;return void 0===r&&(r={}),void 0===i&&(i={}),"string"==typeof t&&(t=null===(o=e.variants)||void 0===o?void 0:o[t]),"function"==typeof t?t(null!=n?n:e.custom,r,i):t}function QS(e,t,n){var r=e.getProps();return YS(r,t,null!=n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function ZS(e){var t;return"function"==typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||XS(e.initial)||XS(e.animate)||XS(e.whileHover)||XS(e.whileDrag)||XS(e.whileTap)||XS(e.whileFocus)||XS(e.exit)}function $S(e){return Boolean(ZS(e)||e.variants)}function eT(e){return Array.isArray(e)?e.join(" "):e}function tT(e){var t=e.preloadedFeatures,n=e.createVisualElement,r=e.useRender,o=e.useVisualState,a=e.Component;return t&&function(e){for(var t in e){var n=e[t];null!==n&&(LS[t].Component=n)}}(t),(0,i.forwardRef)((function(e,t){var s=(0,i.useContext)(OS).isStatic,u=null,c=function(e,t){var n=function(e,t){if(ZS(e)){var n=e.initial,r=e.animate;return{initial:!1===n||XS(n)?n:void 0,animate:XS(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,i.useContext)(NS)),r=n.initial,o=n.animate;return(0,i.useMemo)((function(){return{initial:r,animate:o}}),t?[eT(r),eT(o)]:[])}(e,s),l=o(e,s);return!s&&WS&&(c.visualElement=function(e,t,n,r){var o=(0,i.useContext)(OS),a=(0,i.useContext)(BS),s=(0,i.useContext)(NS).visualElement,u=(0,i.useContext)(FS),c=function(e){var t=e.layoutId,n=(0,i.useContext)(jS);return n&&void 0!==t?n+"-"+t:t}(n),l=(0,i.useRef)(void 0);r||(r=a.renderer),!l.current&&r&&(l.current=r(e,{visualState:t,parent:s,props:MS(MS({},n),{layoutId:c}),presenceId:null==u?void 0:u.id,blockInitialAnimation:!1===(null==u?void 0:u.initial)}));var h=l.current;return qS((function(){h&&(h.setProps(MS(MS(MS({},o),n),{layoutId:c})),h.isPresent=function(e){return null===e||e.isPresent}(u),h.isPresenceRoot=!s||s.presenceId!==(null==u?void 0:u.id),h.syncRender())})),(0,i.useEffect)((function(){var e;h&&(null===(e=h.animationState)||void 0===e||e.animateChanges())})),qS((function(){return function(){return null==h?void 0:h.notifyUnmount()}}),[]),h}(a,l,e,n),u=function(e,t,n){var r=[];if((0,i.useContext)(BS),!t)return null;for(var o=0;o<DS;o++){var a=kS[o],s=LS[a],u=s.isEnabled,c=s.Component;u(e)&&c&&r.push(i.createElement(c,MS({key:a},e,{visualElement:t})))}return r}(e,c.visualElement)),i.createElement(i.Fragment,null,i.createElement(NS.Provider,{value:c},r(a,e,function(e,t,n){return(0,i.useCallback)((function(r){var i;r&&(null===(i=e.mount)||void 0===i||i.call(e,r)),t&&(r?t.mount(r):t.unmount()),n&&("function"==typeof n?n(r):JS(n)&&(n.current=r))}),[t])}(l,c.visualElement,t),l,s)),u)}))}function nT(e){function t(t,n){return void 0===n&&(n={}),tT(e(t,n))}var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var rT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function iT(e){return"string"==typeof e&&!e.includes("-")&&!!(rT.indexOf(e)>-1||/[A-Z]/.test(e))}var oT={},aT=["","X","Y","Z"],sT=["transformPerspective","x","y","z"];function uT(e,t){return sT.indexOf(e)-sT.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return aT.forEach((function(t){return sT.push(e+t)}))}));var cT=new Set(sT);function lT(e){return cT.has(e)}var hT=new Set(["originX","originY","originZ"]);function dT(e){return hT.has(e)}function fT(e,t){var n=t.layout,r=t.layoutId;return lT(e)||dT(e)||(n||void 0!==r)&&(!!oT[e]||"opacity"===e)}var pT=function(e){return null!==e&&"object"==typeof e&&e.getVelocity},mT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function gT(e){return e.startsWith("--")}var vT=function(e,t){return t&&"number"==typeof e?t.transform(e):e},yT=function(){return(yT=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create,Object.create;var bT=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},wT=function(e){return e%1?Number(e.toFixed(5)):e},xT=/(-)?([\d]*\.?[\d])+/g,_T=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,ET=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function AT(e){return"string"==typeof e}var ST=function(e){return{test:function(t){return AT(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},TT=ST("deg"),MT=ST("%"),CT=ST("px"),IT=ST("vh"),RT=ST("vw"),PT=yT(yT({},MT),{parse:function(e){return MT.parse(e)/100},transform:function(e){return MT.transform(100*e)}}),LT={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},BT=yT(yT({},LT),{transform:bT(0,1)}),kT=yT(yT({},LT),{default:1}),DT=MS(MS({},LT),{transform:Math.round}),OT={borderWidth:CT,borderTopWidth:CT,borderRightWidth:CT,borderBottomWidth:CT,borderLeftWidth:CT,borderRadius:CT,radius:CT,borderTopLeftRadius:CT,borderTopRightRadius:CT,borderBottomRightRadius:CT,borderBottomLeftRadius:CT,width:CT,maxWidth:CT,height:CT,maxHeight:CT,size:CT,top:CT,right:CT,bottom:CT,left:CT,padding:CT,paddingTop:CT,paddingRight:CT,paddingBottom:CT,paddingLeft:CT,margin:CT,marginTop:CT,marginRight:CT,marginBottom:CT,marginLeft:CT,rotate:TT,rotateX:TT,rotateY:TT,rotateZ:TT,scale:kT,scaleX:kT,scaleY:kT,scaleZ:kT,skew:TT,skewX:TT,skewY:TT,distance:CT,translateX:CT,translateY:CT,translateZ:CT,x:CT,y:CT,z:CT,perspective:CT,transformPerspective:CT,opacity:BT,originX:PT,originY:PT,originZ:CT,zIndex:DT,fillOpacity:BT,strokeOpacity:BT,numOctaves:DT};function NT(e,t,n,r,i,o,a,s){var u,c=e.style,l=e.vars,h=e.transform,d=e.transformKeys,f=e.transformOrigin;d.length=0;var p=!1,m=!1,g=!0;for(var v in t){var y=t[v];if(gT(v))l[v]=y;else{var b=OT[v],w=vT(y,b);if(lT(v)){if(p=!0,h[v]=w,d.push(v),!g)continue;y!==(null!==(u=b.default)&&void 0!==u?u:0)&&(g=!1)}else if(dT(v))f[v]=w,m=!0;else if((null==n?void 0:n.isHydrated)&&(null==r?void 0:r.isHydrated)&&oT[v]){var x=oT[v].process(y,r,n),_=oT[v].applyTo;if(_)for(var E=_.length,A=0;A<E;A++)c[_[A]]=x;else c[v]=x}else c[v]=w}}r&&n&&a&&s?(c.transform=a(r.deltaFinal,r.treeScale,p?h:void 0),o&&(c.transform=o(h,c.transform)),c.transformOrigin=s(r)):(p&&(c.transform=function(e,t,n,r){var i=e.transform,o=e.transformKeys,a=t.enableHardwareAcceleration,s=void 0===a||a,u=t.allowTransformNone,c=void 0===u||u,l="";o.sort(uT);for(var h=!1,d=o.length,f=0;f<d;f++){var p=o[f];l+=(mT[p]||p)+"("+i[p]+") ","z"===p&&(h=!0)}return!h&&s?l+="translateZ(0)":l=l.trim(),r?l=r(i,n?"":l):c&&n&&(l="none"),l}(e,i,g,o)),m&&(c.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,o=e.originZ;return n+" "+i+" "+(void 0===o?0:o)}(f)))}function FT(e,t,n){for(var r in t)pT(t[r])||fT(r,n)||(e[r]=t[r])}function UT(e,t,n){var r={},o=function(e,t,n){var r={};return FT(r,e.style||{},e),Object.assign(r,function(e,t,n){var r=e.transformTemplate;return(0,i.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};NT(e,t,void 0,void 0,{enableHardwareAcceleration:!n},r);var i=e.style;return MS(MS({},e.vars),i)}),[t])}(e,t,n)),e.transformValues&&(r=e.transformValues(r)),r}(e,t,n);return Boolean(e.drag)&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),r.style=o,r}var GT=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","_layoutResetTransform","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function HT(e){return GT.has(e)}var zT=function(e){return!HT(e)};try{var VT=n(594).Z;zT=function(e){return e.startsWith("on")?!HT(e):VT(e)}}catch(Be){}function jT(e,t,n){return"string"==typeof e?e:CT.transform(t+n*e)}var WT=function(e,t){return CT.transform(e*t)},qT={offset:"stroke-dashoffset",array:"stroke-dasharray"},JT={offset:"strokeDashoffset",array:"strokeDasharray"};function KT(e,t,n,r,i,o,a,s){var u=t.attrX,c=t.attrY,l=t.originX,h=t.originY,d=t.pathLength,f=t.pathSpacing,p=void 0===f?1:f,m=t.pathOffset,g=void 0===m?0:m;NT(e,CS(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r,i,o,a,s),e.attrs=e.style,e.style={};var v=e.attrs,y=e.style,b=e.dimensions,w=e.totalPathLength;v.transform&&(b&&(y.transform=v.transform),delete v.transform),b&&(void 0!==l||void 0!==h||y.transform)&&(y.transformOrigin=function(e,t,n){return jT(t,e.x,e.width)+" "+jT(n,e.y,e.height)}(b,void 0!==l?l:.5,void 0!==h?h:.5)),void 0!==u&&(v.x=u),void 0!==c&&(v.y=c),void 0!==w&&void 0!==d&&function(e,t,n,r,i,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=!0);var a=o?qT:JT;e[a.offset]=WT(-i,t);var s=WT(n,t),u=WT(r,t);e[a.array]=s+" "+u}(v,w,d,p,g,!1)}var XT=function(){return MS(MS({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function YT(e,t){var n=(0,i.useMemo)((function(){var n=XT();return KT(n,t,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),MS(MS({},n.attrs),{style:MS({},n.style)})}),[t]);if(e.style){var r={};FT(r,e.style,e),n.style=MS(MS({},r),n.style)}return n}function QT(e){return void 0===e&&(e=!1),function(t,n,r,o,a){var s=o.latestValues,u=(iT(t)?YT:UT)(n,s,a),c=function(e,t,n){var r={};for(var i in e)(zT(i)||!0===n&&HT(i)||!t&&!HT(i))&&(r[i]=e[i]);return r}(n,"string"==typeof t,e),l=MS(MS(MS({},c),u),{ref:r});return(0,i.createElement)(t,l)}}var ZT=/([a-z])([A-Z])/g,$T=function(e){return e.replace(ZT,"$1-$2").toLowerCase()};function eM(e,t){var n=t.style,r=t.vars;for(var i in Object.assign(e.style,n),r)e.style.setProperty(i,r[i])}var tM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform"]);function nM(e,t){for(var n in eM(e,t),t.attrs)e.setAttribute(tM.has(n)?n:$T(n),t.attrs[n])}function rM(e){var t=e.style,n={};for(var r in t)(pT(t[r])||fT(r,e))&&(n[r]=t[r]);return n}function iM(e){var t=rM(e);for(var n in e)pT(e[n])&&(t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]);return t}function oM(e){return"object"==typeof e&&"function"==typeof e.start}var aM=function(e){return Array.isArray(e)},sM=function(e){return aM(e)?e[e.length-1]||0:e};function uM(e,t,n,r){var i=e.scrapeMotionValuesFromProps,o=e.createRenderState,a=e.onMount,s={latestValues:lM(t,n,r,i),renderState:o()};return a&&(s.mount=function(e){return a(t,e,s)}),s}var cM=function(e){return function(t,n){var r=(0,i.useContext)(NS),o=(0,i.useContext)(FS);return n?uM(e,t,r,o):US((function(){return uM(e,t,r,o)}))}};function lM(e,t,n,r){var i,o,a={},s=!1===(null==n?void 0:n.initial),u=r(e);for(var c in u)a[c]=(i=u[c],o=void 0,function(e){return Boolean(e&&"object"==typeof e&&e.mix&&e.toValue)}(o=pT(i)?i.get():i)?o.toValue():o);var l=e.initial,h=e.animate,d=ZS(e),f=$S(e);t&&f&&!d&&!1!==e.inherit&&(null!=l||(l=t.initial),null!=h||(h=t.animate));var p=s||!1===l?h:l;return p&&"boolean"!=typeof p&&!oM(p)&&(Array.isArray(p)?p:[p]).forEach((function(t){var n=YS(e,t);if(n){var r=n.transitionEnd;n.transition;var i=CS(n,["transitionEnd","transition"]);for(var o in i)a[o]=i[o];for(var o in r)a[o]=r[o]}})),a}var hM,dM={useVisualState:cM({scrapeMotionValuesFromProps:iM,createRenderState:XT,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}"path"===t.tagName&&(r.totalPathLength=t.getTotalLength()),KT(r,i,void 0,void 0,{enableHardwareAcceleration:!1},e.transformTemplate),nM(t,r)}})},fM={useVisualState:cM({scrapeMotionValuesFromProps:rM,createRenderState:function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}}})};function pM(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function mM(e,t,n,r){(0,i.useEffect)((function(){var i=e.current;if(n&&i)return pM(i,t,n,r)}),[e,t,n,r])}function gM(e){return"undefined"!=typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function vM(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.Exit="exit"}(hM||(hM={}));var yM={pageX:0,pageY:0};function bM(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||yM;return{x:n[t+"X"],y:n[t+"Y"]}}function wM(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function xM(e,t){return void 0===t&&(t="page"),{point:vM(e)?bM(e,t):wM(e,t)}}var _M=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,xM(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},EM={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},AM={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function SM(e){return WS&&null===window.onpointerdown?e:WS&&null===window.ontouchstart?AM[e]:WS&&null===window.onmousedown?EM[e]:e}function TM(e,t,n,r){return pM(e,SM(t),_M(n,"pointerdown"===t),r)}function MM(e,t,n,r){return mM(e,SM(t),n&&_M(n,"pointerdown"===t),r)}function CM(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var IM=CM("dragHorizontal"),RM=CM("dragVertical");function PM(e){var t=!1;if("y"===e)t=RM();else if("x"===e)t=IM();else{var n=IM(),r=RM();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function LM(){var e=PM(!0);return!e||(e(),!1)}function BM(e,t,n){return function(r,i){var o;gM(r)&&!LM()&&(null==n||n(r,i),null===(o=e.animationState)||void 0===o||o.setActive(hM.Hover,t))}}var kM=function(e,t){return!!t&&(e===t||kM(e,t.parentElement))};function DM(e){return(0,i.useEffect)((function(){return function(){return e()}}),[])}var OM=function(e,t){return function(n){return t(e(n))}},NM=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(OM)},FM=function(e){return function(t){return e(t),null}},UM={tap:FM((function(e){var t=e.onTap,n=e.onTapStart,r=e.onTapCancel,o=e.whileTap,a=e.visualElement,s=t||n||r||o,u=(0,i.useRef)(!1),c=(0,i.useRef)(null);function l(){var e;null===(e=c.current)||void 0===e||e.call(c),c.current=null}function h(){var e;return l(),u.current=!1,null===(e=a.animationState)||void 0===e||e.setActive(hM.Tap,!1),!LM()}function d(e,n){h()&&(kM(a.getInstance(),e.target)?null==t||t(e,n):null==r||r(e,n))}function f(e,t){h()&&(null==r||r(e,t))}MM(a,"pointerdown",s?function(e,t){var r;l(),u.current||(u.current=!0,c.current=NM(TM(window,"pointerup",d),TM(window,"pointercancel",f)),null==n||n(e,t),null===(r=a.animationState)||void 0===r||r.setActive(hM.Tap,!0))}:void 0),DM(l)})),focus:FM((function(e){var t=e.whileFocus,n=e.visualElement;mM(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(hM.Focus,!0)}:void 0),mM(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(hM.Focus,!1)}:void 0)})),hover:FM((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;MM(i,"pointerenter",t||r?BM(i,!0,t):void 0),MM(i,"pointerleave",n||r?BM(i,!1,n):void 0)}))};function GM(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var HM=function(){return(HM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function zM(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create;var VM=function(e,t,n){return Math.min(Math.max(n,e),t)};function jM(e,t){return e*Math.sqrt(1-t*t)}var WM=["duration","bounce"],qM=["stiffness","damping","mass"];function JM(e,t){return t.some((function(t){return void 0!==e[t]}))}function KM(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,o=e.restSpeed,a=void 0===o?2:o,s=e.restDelta,u=zM(e,["from","to","restSpeed","restDelta"]),c={done:!1,value:n},l=function(e){var t=HM({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!JM(e,qM)&&JM(e,WM)){var n=function(e){var t,n,r=e.duration,i=void 0===r?800:r,o=e.bounce,a=void 0===o?.25:o,s=e.velocity,u=void 0===s?0:s,c=e.mass,l=void 0===c?1:c,h=1-a;h=VM(.05,1,h),i=VM(.01,10,i/1e3),h<1?(t=function(e){var t=e*h,n=t*i;return.001-(t-u)/jM(e,h)*Math.exp(-n)},n=function(e){var n=e*h*i,r=n*u+u,o=Math.pow(h,2)*Math.pow(e,2)*i,a=Math.exp(-n),s=jM(Math.pow(e,2),h);return(.001-t(e)>0?-1:1)*((r-o)*a)/s}):(t=function(e){return Math.exp(-e*i)*((e-u)*i+1)-.001},n=function(e){return Math.exp(-e*i)*(i*i*(u-e))});var d=function(e,t,n){for(var r=n,i=1;i<12;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i*=1e3,isNaN(d))return{stiffness:100,damping:10,duration:i};var f=Math.pow(d,2)*l;return{stiffness:f,damping:2*h*Math.sqrt(l*f),duration:i}}(e);(t=HM(HM(HM({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(u),h=l.stiffness,d=l.damping,f=l.mass,p=l.velocity,m=l.duration,g=l.isResolvedFromDuration,v=XM,y=XM;function b(){var e=p?-p/1e3:0,t=i-n,r=d/(2*Math.sqrt(h*f)),o=Math.sqrt(h/f)/1e3;if(null!=s||(s=Math.abs(i-n)<=1?.01:.4),r<1){var a=jM(o,r);v=function(n){var s=Math.exp(-r*o*n);return i-s*((e+r*o*t)/a*Math.sin(a*n)+t*Math.cos(a*n))},y=function(n){var i=Math.exp(-r*o*n);return r*o*i*(Math.sin(a*n)*(e+r*o*t)/a+t*Math.cos(a*n))-i*(Math.cos(a*n)*(e+r*o*t)-a*t*Math.sin(a*n))}}else if(1===r)v=function(n){return i-Math.exp(-o*n)*(t+(e+o*t)*n)};else{var u=o*Math.sqrt(r*r-1);v=function(n){var a=Math.exp(-r*o*n),s=Math.min(u*n,300);return i-a*((e+r*o*t)*Math.sinh(s)+u*t*Math.cosh(s))/u}}}return b(),{next:function(e){var t=v(e);if(g)c.done=e>=m;else{var n=1e3*y(e),r=Math.abs(n)<=a,o=Math.abs(i-t)<=s;c.done=r&&o}return c.value=c.done?i:t,c},flipTarget:function(){var e;p=-p,n=(e=[i,n])[0],i=e[1],b()}}}KM.needsInterpolation=function(e,t){return"string"==typeof e||"string"==typeof t};var XM=function(e){return 0},YM=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},QM=function(e,t,n){return-n*e+n*t+e},ZM=function(e,t){return function(n){return Boolean(AT(n)&&ET.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},$M=function(e,t,n){return function(r){var i;if(!AT(r))return r;var o=r.match(xT),a=o[0],s=o[1],u=o[2],c=o[3];return(i={})[e]=parseFloat(a),i[t]=parseFloat(s),i[n]=parseFloat(u),i.alpha=void 0!==c?parseFloat(c):1,i}},eC=bT(0,255),tC=yT(yT({},LT),{transform:function(e){return Math.round(eC(e))}}),nC={test:ZM("rgb","red"),parse:$M("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,o=void 0===i?1:i;return"rgba("+tC.transform(t)+", "+tC.transform(n)+", "+tC.transform(r)+", "+wT(BT.transform(o))+")"}},rC={test:ZM("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:nC.transform},iC={test:ZM("hsl","hue"),parse:$M("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,o=void 0===i?1:i;return"hsla("+Math.round(t)+", "+MT.transform(wT(n))+", "+MT.transform(wT(r))+", "+wT(BT.transform(o))+")"}},oC=function(e,t,n){var r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},aC=[rC,nC,iC],sC=function(e){return aC.find((function(t){return t.test(e)}))},uC=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},cC=function(e,t){var n=sC(e),r=sC(t);uC(e),uC(t),n.transform,r.transform;var i=n.parse(e),o=r.parse(t),a=HM({},i),s=n===iC?QM:oC;return function(e){for(var t in a)"alpha"!==t&&(a[t]=s(i[t],o[t],e));return a.alpha=QM(i.alpha,o.alpha,e),n.transform(a)}},lC={test:function(e){return nC.test(e)||rC.test(e)||iC.test(e)},parse:function(e){return nC.test(e)?nC.parse(e):iC.test(e)?iC.parse(e):rC.parse(e)},transform:function(e){return AT(e)?e:e.hasOwnProperty("red")?nC.transform(e):iC.transform(e)}},hC="${c}",dC="${n}";function fC(e){var t=[],n=0,r=e.match(_T);r&&(n=r.length,e=e.replace(_T,hC),t.push.apply(t,r.map(lC.parse)));var i=e.match(xT);return i&&(e=e.replace(xT,dC),t.push.apply(t,i.map(LT.parse))),{values:t,numColors:n,tokenised:e}}function pC(e){return fC(e).values}function mC(e){var t=fC(e),n=t.values,r=t.numColors,i=t.tokenised,o=n.length;return function(e){for(var t=i,n=0;n<o;n++)t=t.replace(n<r?hC:dC,n<r?lC.transform(e[n]):wT(e[n]));return t}}var gC=function(e){return"number"==typeof e?0:e},vC={test:function(e){var t,n,r,i;return isNaN(e)&&AT(e)&&(null!==(n=null===(t=e.match(xT))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(_T))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:pC,createTransformer:mC,getAnimatableNone:function(e){var t=pC(e);return mC(e)(t.map(gC))}},yC=function(e){return"number"==typeof e};function bC(e,t){return yC(e)?function(n){return QM(e,t,n)}:lC.test(e)?cC(e,t):EC(e,t)}var wC=function(e,t){var n=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||t)}([],e),r=n.length,i=e.map((function(e,n){return bC(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},xC=function(e,t){var n=HM(HM({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=bC(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}};function _C(e){for(var t=vC.parse(e),n=t.length,r=0,i=0,o=0,a=0;a<n;a++)r||"number"==typeof t[a]?r++:void 0!==t[a].hue?o++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:o}}var EC=function(e,t){var n=vC.createTransformer(t),r=_C(e),i=_C(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&(r.numNumbers,i.numNumbers),NM(wC(r.parsed,i.parsed),n)},AC=function(e,t){return function(n){return QM(e,t,n)}};function SC(e,t,n){var r=void 0===n?{}:n,i=r.clamp,o=void 0===i||i,a=r.ease,s=r.mixer,u=e.length;t.length,!a||!Array.isArray(a)||a.length,e[0]>e[u-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var c=function(e,t,n){for(var r=[],i=n||function(e){return"number"==typeof e?AC:"string"==typeof e?lC.test(e)?cC:EC:Array.isArray(e)?wC:"object"==typeof e?xC:void 0}(e[0]),o=e.length-1,a=0;a<o;a++){var s=i(e[a],e[a+1]);if(t){var u=Array.isArray(t)?t[a]:t;s=NM(u,s)}r.push(s)}return r}(t,a,s),l=2===u?function(e,t){var n=e[0],r=e[1],i=t[0];return function(e){return i(YM(n,r,e))}}(e,c):function(e,t){var n=e.length,r=n-1;return function(i){var o=0,a=!1;if(i<=e[0]?a=!0:i>=e[r]&&(o=r-1,a=!0),!a){for(var s=1;s<n&&!(e[s]>i||s===r);s++);o=s-1}var u=YM(e[o],e[o+1],i);return t[o](u)}}(e,c);return o?function(t){return l(VM(e[0],e[u-1],t))}:l}var TC,MC=function(e){return function(t){return 1-e(1-t)}},CC=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},IC=function(e){return function(t){return t*t*((e+1)*t-e)}},RC=function(e){return e},PC=(2,function(e){return Math.pow(e,2)}),LC=MC(PC),BC=CC(PC),kC=function(e){return 1-Math.sin(Math.acos(e))},DC=MC(kC),OC=CC(DC),NC=IC(1.525),FC=MC(NC),UC=CC(NC),GC=(TC=IC(1.525),function(e){return(e*=2)<1?.5*TC(e):.5*(2-Math.pow(2,-10*(e-1)))}),HC=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},zC=MC(HC);function VC(e,t){return e.map((function(){return t||BC})).splice(0,e.length-1)}function jC(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,o=e.ease,a=e.offset,s=e.duration,u=void 0===s?300:s,c={done:!1,value:n},l=Array.isArray(i)?i:[n,i],h=function(e,t){return e.map((function(e){return e*t}))}(a&&a.length===l.length?a:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(l),u);function d(){return SC(h,l,{ease:Array.isArray(o)?o:VC(l,o)})}var f=d();return{next:function(e){return c.value=f(e),c.done=e>=u,c},flipTarget:function(){l.reverse(),f=d()}}}var WC={keyframes:jC,spring:KM,decay:function(e){var t=e.velocity,n=void 0===t?0:t,r=e.from,i=void 0===r?0:r,o=e.power,a=void 0===o?.8:o,s=e.timeConstant,u=void 0===s?350:s,c=e.restDelta,l=void 0===c?.5:c,h=e.modifyTarget,d={done:!1,value:i},f=a*n,p=i+f,m=void 0===h?p:h(p);return m!==p&&(f=m-i),{next:function(e){var t=-f*Math.exp(-e/u);return d.done=!(t>l||t<-l),d.value=d.done?m:m+t,d},flipTarget:function(){}}}},qC=1/60*1e3,JC="undefined"!=typeof performance?function(){return performance.now()}:function(){return Date.now()},KC="undefined"!=typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(JC())}),qC)},XC=!0,YC=!1,QC=!1,ZC={delta:0,timestamp:0},$C=["read","update","preRender","render","postRender"],eI=$C.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,o=new WeakSet,a={schedule:function(e,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var u=s&&i,c=u?t:n;return a&&o.add(e),-1===c.indexOf(e)&&(c.push(e),u&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(s){var u;if(i=!0,t=(u=[n,t])[0],(n=u[1]).length=0,r=t.length)for(var c=0;c<r;c++){var l=t[c];l(s),o.has(l)&&(a.schedule(l),e())}i=!1}};return a}((function(){return YC=!0})),e}),{}),tI=$C.reduce((function(e,t){var n=eI[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),YC||aI(),n.schedule(e,t,r)},e}),{}),nI=$C.reduce((function(e,t){return e[t]=eI[t].cancel,e}),{}),rI=$C.reduce((function(e,t){return e[t]=function(){return eI[t].process(ZC)},e}),{}),iI=function(e){return eI[e].process(ZC)},oI=function(e){YC=!1,ZC.delta=XC?qC:Math.max(Math.min(e-ZC.timestamp,40),1),ZC.timestamp=e,QC=!0,$C.forEach(iI),QC=!1,YC&&(XC=!1,KC(oI))},aI=function(){YC=!0,XC=!0,QC||KC(oI)},sI=function(){return ZC};const uI=tI;function cI(e,t,n){return void 0===n&&(n=0),e-t-n}var lI=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return uI.update(t,!0)},stop:function(){return nI.update(t)}}};function hI(e){var t,n,r,i,o,a=e.from,s=e.autoplay,u=void 0===s||s,c=e.driver,l=void 0===c?lI:c,h=e.elapsed,d=void 0===h?0:h,f=e.repeat,p=void 0===f?0:f,m=e.repeatType,g=void 0===m?"loop":m,v=e.repeatDelay,y=void 0===v?0:v,b=e.onPlay,w=e.onStop,x=e.onComplete,_=e.onRepeat,E=e.onUpdate,A=zM(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),S=A.to,T=0,M=A.duration,C=!1,I=!0,R=function(e){if(Array.isArray(e.to))return jC;if(WC[e.type])return WC[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?jC:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?KM:jC}(A);(null===(n=(t=R).needsInterpolation)||void 0===n?void 0:n.call(t,a,S))&&(o=SC([0,100],[a,S],{clamp:!1}),a=0,S=100);var P=R(HM(HM({},A),{from:a,to:S}));return u&&(null==b||b(),(r=l((function(e){if(I||(e=-e),d+=e,!C){var t=P.next(Math.max(0,d));i=t.value,o&&(i=o(i)),C=I?t.done:d<=0}null==E||E(i),C&&(0===T&&(null!=M||(M=d)),T<p?function(e,t,n,r){return r?e>=t+n:e<=-n}(d,M,y,I)&&(T++,"reverse"===g?d=function(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=!0),r?cI(t+-e,t,n):t-(e-t)+n}(d,M,y,I=T%2==0):(d=cI(d,M,y),"mirror"===g&&P.flipTarget()),C=!1,_&&_()):(r.stop(),x&&x()))}))).start()),{stop:function(){null==w||w(),r.stop()}}}function dI(e,t){return t?e*(1e3/t):0}var fI=function(e){return 1e3*e},pI=function(e,t){return 1-3*t+3*e},mI=function(e,t){return 3*t-6*e},gI=function(e){return 3*e},vI=function(e,t,n){return((pI(t,n)*e+mI(t,n))*e+gI(t))*e},yI=function(e,t,n){return 3*pI(t,n)*e*e+2*mI(t,n)*e+gI(t)},bI=.1;function wI(e,t,n,r){if(e===t&&n===r)return RC;for(var i=new Float32Array(11),o=0;o<11;++o)i[o]=vI(o*bI,e,n);return function(o){return 0===o||1===o?o:vI(function(t){for(var r=0,o=1;10!==o&&i[o]<=t;++o)r+=bI;--o;var a=r+(t-i[o])/(i[o+1]-i[o])*bI,s=yI(a,e,n);return s>=.001?function(e,t,n,r){for(var i=0;i<8;++i){var o=yI(t,n,r);if(0===o)return t;t-=(vI(t,n,r)-e)/o}return t}(t,a,e,n):0===s?a:function(e,t,n,r,i){var o,a,s=0;do{(o=vI(a=t+(n-t)/2,r,i)-e)>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,r,r+bI,e,n)}(o),t,r)}}var xI={linear:RC,easeIn:PC,easeInOut:BC,easeOut:LC,circIn:kC,circInOut:OC,circOut:DC,backIn:NC,backInOut:UC,backOut:FC,anticipate:GC,bounceIn:zC,bounceInOut:function(e){return e<.5?.5*(1-HC(1-2*e)):.5*HC(2*e-1)+.5},bounceOut:HC},_I=function(e){if(Array.isArray(e)){e.length;var t=IS(e,4);return wI(t[0],t[1],t[2],t[3])}return"string"==typeof e?xI[e]:e},EI=function(e,t){return!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!vC.test(t)||t.startsWith("url(")))},AI=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},SI=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}},TI=function(){return{type:"keyframes",ease:"linear",duration:.3}},MI=function(e){return{type:"keyframes",duration:.8,values:e}},CI={x:AI,y:AI,z:AI,rotate:AI,rotateX:AI,rotateY:AI,rotateZ:AI,scaleX:SI,scaleY:SI,scale:SI,opacity:TI,backgroundColor:TI,color:TI,default:SI},II=new Set(["brightness","contrast","saturate","opacity"]);function RI(e){var t=e.slice(0,-1).split("("),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=(r.match(xT)||[])[0];if(!i)return e;var o=r.replace(i,""),a=II.has(n)?1:0;return i!==r&&(a*=100),n+"("+a+o+")"}var PI=/([a-z-]*)\(.*?\)/g,LI=yT(yT({},vC),{getAnimatableNone:function(e){var t=e.match(PI);return t?t.map(RI).join(" "):e}}),BI=MS(MS({},OT),{color:lC,backgroundColor:lC,outlineColor:lC,fill:lC,stroke:lC,borderColor:lC,borderTopColor:lC,borderRightColor:lC,borderBottomColor:lC,borderLeftColor:lC,filter:LI,WebkitFilter:LI}),kI=function(e){return BI[e]};function DI(e,t){var n,r=kI(e);return r!==LI&&(r=vC),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}function OI(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=RS([],IS(e.to)),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=CS(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=MS(MS({},e),function(e,t){var n;return n=aM(t)?MI:CI[e]||CI.default,MS({to:t},n(t))}(n,t.to))),MS(MS({},t),function(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,o=e.loop,a=CS(e,["ease","times","yoyo","flip","loop"]),s=MS({},a);return n&&(s.offset=n),a.duration&&(s.duration=fI(a.duration)),a.repeatDelay&&(s.repeatDelay=fI(a.repeatDelay)),t&&(s.ease=function(e){return Array.isArray(e)&&"number"!=typeof e[0]}(t)?t.map(_I):_I(t)),"tween"===a.type&&(s.type="keyframes"),(r||o||i)&&(r?s.repeatType="reverse":o?s.repeatType="loop":i&&(s.repeatType="mirror"),s.repeat=o||r||i||a.repeat),"spring"!==a.type&&(s.type="keyframes"),s}(e))}function NI(e){return 0===e||"string"==typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function FI(e){return"number"==typeof e?0:DI("",e)}function UI(e,t){return e[t]||e.default||e}function GI(e,t,n,r){return void 0===r&&(r={}),t.start((function(i){var o,a,s=function(e,t,n,r,i){var o,a=UI(r,e),s=null!==(o=a.from)&&void 0!==o?o:t.get(),u=EI(e,n);return"none"===s&&u&&"string"==typeof n?s=DI(e,n):NI(s)&&"string"==typeof n?s=FI(n):!Array.isArray(n)&&NI(n)&&"string"==typeof s&&(n=FI(s)),EI(e,s)&&u&&!1!==a.type?function(){var r={from:s,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===a.type||"decay"===a.type?function(e){var t,n=e.from,r=void 0===n?0:n,i=e.velocity,o=void 0===i?0:i,a=e.min,s=e.max,u=e.power,c=void 0===u?.8:u,l=e.timeConstant,h=void 0===l?750:l,d=e.bounceStiffness,f=void 0===d?500:d,p=e.bounceDamping,m=void 0===p?10:p,g=e.restDelta,v=void 0===g?1:g,y=e.modifyTarget,b=e.driver,w=e.onUpdate,x=e.onComplete;function _(e){return void 0!==a&&e<a||void 0!==s&&e>s}function E(e){return void 0===a?s:void 0===s||Math.abs(a-e)<Math.abs(s-e)?a:s}function A(e){null==t||t.stop(),t=hI(HM(HM({},e),{driver:b,onUpdate:function(t){var n;null==w||w(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:x}))}function S(e){A(HM({type:"spring",stiffness:f,damping:m,restDelta:v},e))}if(_(r))S({from:r,velocity:o,to:E(r)});else{var T=c*o+r;void 0!==y&&(T=y(T));var M,C,I=E(T),R=I===a?-1:1;A({type:"decay",from:r,velocity:o,timeConstant:h,power:c,restDelta:v,modifyTarget:y,onUpdate:_(T)?function(e){M=C,C=e,o=dI(e-M,sI().delta),(1===R&&e>I||-1===R&&e<I)&&S({from:e,to:I,velocity:o})}:void 0})}return{stop:function(){return null==t?void 0:t.stop()}}}(MS(MS({},r),a)):hI(MS(MS({},OI(a,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=a.onUpdate)||void 0===t||t.call(a,e)},onComplete:function(){var e;r.onComplete(),null===(e=a.onComplete)||void 0===e||e.call(a)}}))}:function(){var e;return t.set(n),i(),null===(e=null==a?void 0:a.onComplete)||void 0===e||e.call(a),{stop:function(){}}}}(e,t,n,r,i),u=function(e,t){var n;return null!==(n=(UI(e,t)||{}).delay)&&void 0!==n?n:0}(r,e),c=function(){return a=s()};return u?o=setTimeout(c,fI(u)):c(),function(){clearTimeout(o),null==a||a.stop()}}))}var HI=function(e){return/^\-?\d*\.?\d+$/.test(e)};function zI(e,t){-1===e.indexOf(t)&&e.push(t)}function VI(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var jI=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return zI(this.subscriptions,e),function(){return VI(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var o=this.subscriptions[i];o&&o(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),WI=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new jI,this.velocityUpdateSubscribers=new jI,this.renderSubscribers=new jI,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=sI(),i=r.delta,o=r.timestamp;n.lastUpdated!==o&&(n.timeDelta=i,n.lastUpdated=o,uI.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return uI.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?dI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function qI(e){return new WI(e)}var JI=function(e){return function(t){return t.test(e)}},KI=[LT,CT,MT,TT,RT,IT,{test:function(e){return"auto"===e},parse:function(e){return e}}],XI=function(e){return KI.find(JI(e))},YI=RS(RS([],IS(KI)),[lC,vC]),QI=function(e){return YI.find(JI(e))};function ZI(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,qI(n))}function $I(e,t){var n=QS(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,o=void 0===i?{}:i;r.transition;var a=CS(r,["transitionEnd","transition"]);for(var s in a=MS(MS({},a),o))ZI(e,s,sM(a[s]))}function eR(e,t){RS([],IS(t)).reverse().forEach((function(n){var r,i=e.getVariant(n);i&&$I(e,i),null===(r=e.variantChildren)||void 0===r||r.forEach((function(e){eR(e,t)}))}))}function tR(e,t){if(t)return(t[e]||t.default||t).from}function nR(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(),Array.isArray(t)){var i=t.map((function(t){return rR(e,t,n)}));r=Promise.all(i)}else if("string"==typeof t)r=rR(e,t,n);else{var o="function"==typeof t?QS(e,t,n.custom):t;r=iR(e,o,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}function rR(e,t,n){var r;void 0===n&&(n={});var i=QS(e,t,n.custom),o=(i||{}).transition,a=void 0===o?e.getDefaultTransition()||{}:o;n.transitionOverride&&(a=n.transitionOverride);var s=i?function(){return iR(e,i,n)}:function(){return Promise.resolve()},u=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=a.delayChildren,o=void 0===i?0:i,s=a.staggerChildren,u=a.staggerDirection;return function(e,t,n,r,i,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=1);var a=[],s=(e.variantChildren.size-1)*r,u=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),s-e*r};return Array.from(e.variantChildren).sort(oR).forEach((function(e,r){a.push(rR(e,t,MS(MS({},o),{delay:n+u(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(a)}(e,t,o+r,s,u,n)}:function(){return Promise.resolve()},c=a.when;if(c){var l=IS("beforeChildren"===c?[s,u]:[u,s],2),h=l[0],d=l[1];return h().then(d)}return Promise.all([s(),u(n.delay)])}function iR(e,t,n){var r,i=void 0===n?{}:n,o=i.delay,a=void 0===o?0:o,s=i.transitionOverride,u=i.type,c=e.makeTargetAnimatable(t),l=c.transition,h=void 0===l?e.getDefaultTransition():l,d=c.transitionEnd,f=CS(c,["transition","transitionEnd"]);s&&(h=s);var p=[],m=u&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[u]);for(var g in f){var v=e.getValue(g),y=f[g];if(!(!v||void 0===y||m&&aR(m,g))){var b=GI(g,v,y,MS({delay:a},h));p.push(b)}}return Promise.all(p).then((function(){d&&$I(e,d)}))}function oR(e,t){return e.sortNodePosition(t)}function aR(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var sR=[hM.Animate,hM.Hover,hM.Tap,hM.Drag,hM.Focus,hM.Exit],uR=RS([],IS(sR)).reverse(),cR=sR.length;function lR(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var hR={animation:FM((function(e){var t=e.visualElement,n=e.animate;t.animationState||(t.animationState=function(e){var t=function(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return nR(e,n,r)})))}}(e),n=function(){var e;return(e={})[hM.Animate]=lR(!0),e[hM.Hover]=lR(),e[hM.Tap]=lR(),e[hM.Drag]=lR(),e[hM.Focus]=lR(),e[hM.Exit]=lR(),e}(),r={},i=!0,o=function(t,n){var r=QS(e,n);if(r){r.transition;var i=r.transitionEnd,o=CS(r,["transition","transitionEnd"]);t=MS(MS(MS({},t),o),i)}return t};function a(a,s){for(var u,c=e.getProps(),l=e.getVariantContext(!0)||{},h=[],d=new Set,f={},p=1/0,m=function(t){var r=uR[t],m=n[r],g=null!==(u=c[r])&&void 0!==u?u:l[r],v=XS(g),y=r===s?m.isActive:null;!1===y&&(p=t);var b=g===l[r]&&g!==c[r]&&v;if(b&&i&&e.manuallyAnimateOnMount&&(b=!1),m.protectedKeys=MS({},f),!m.isActive&&null===y||!g&&!m.prevProp||oM(g)||"boolean"==typeof g)return"continue";var w=function(e,t){return"string"==typeof t?t!==e:!!KS(t)&&!GM(t,e)}(m.prevProp,g)||r===s&&m.isActive&&!b&&v||t>p&&v,x=Array.isArray(g)?g:[g],_=x.reduce(o,{});!1===y&&(_={});var E=m.prevResolvedValues,A=void 0===E?{}:E,S=MS(MS({},A),_),T=function(e){w=!0,d.delete(e),m.needsAnimating[e]=!0};for(var M in S){var C=_[M],I=A[M];f.hasOwnProperty(M)||(C!==I?aM(C)&&aM(I)?GM(C,I)?m.protectedKeys[M]=!0:T(M):void 0!==C?T(M):d.add(M):void 0!==C&&d.has(M)?T(M):m.protectedKeys[M]=!0)}m.prevProp=g,m.prevResolvedValues=_,m.isActive&&(f=MS(MS({},f),_)),i&&e.blockInitialAnimation&&(w=!1),w&&!b&&h.push.apply(h,RS([],IS(x.map((function(e){return{animation:e,options:MS({type:r},a)}})))))},g=0;g<cR;g++)m(g);if(r=MS({},f),d.size){var v={};d.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(v[t]=n)})),h.push({animation:v})}var y=Boolean(h.length);return i&&!1===c.initial&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(h):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:a,setActive:function(t,r,i){var o;return n[t].isActive===r?Promise.resolve():(null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r,a(i,t))},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}(t)),oM(n)&&(0,i.useEffect)((function(){return n.subscribe(t)}),[n])})),exit:FM((function(e){var t=e.custom,n=e.visualElement,r=IS(GS(),2),o=r[0],a=r[1],s=(0,i.useContext)(FS);(0,i.useEffect)((function(){var e,r,i=null===(e=n.animationState)||void 0===e?void 0:e.setActive(hM.Exit,!o,{custom:null!==(r=null==s?void 0:s.custom)&&void 0!==r?r:t});!o&&(null==i||i.then(a))}),[o])}))},dR=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},fR=function(e){return dR(e)&&e.hasOwnProperty("z")},pR=function(e,t){return Math.abs(e-t)};function mR(e,t){if(yC(e)&&yC(t))return pR(e,t);if(dR(e)&&dR(t)){var n=pR(e.x,t.x),r=pR(e.y,t.y),i=fR(e)&&fR(t)?pR(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var gR=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=bR(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=mR(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,o=sI().timestamp;r.history.push(MS(MS({},i),{timestamp:o}));var a=r.handlers,s=a.onStart,u=a.onMove;t||(s&&s(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),u&&u(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=vR(t,r.transformPagePoint),gM(e)&&0===e.buttons?r.handlePointerUp(e,t):uI.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,o=n.onSessionEnd,a=bR(vR(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,a),o&&o(e,a)},!(vM(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var o=vR(xM(e),this.transformPagePoint),a=o.point,s=sI().timestamp;this.history=[MS(MS({},a),{timestamp:s})];var u=t.onSessionStart;u&&u(e,bR(o,this.history)),this.removeListeners=NM(TM(window,"pointermove",this.handlePointerMove),TM(window,"pointerup",this.handlePointerUp),TM(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),nI.update(this.updatePoint)},e}();function vR(e,t){return t?{point:t(e.point)}:e}function yR(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bR(e,t){var n=e.point;return{point:n,delta:yR(n,xR(t)),offset:yR(n,wR(t)),velocity:_R(t,.1)}}function wR(e){return e[0]}function xR(e){return e[e.length-1]}function _R(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=xR(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>fI(t)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ER(e){return e}function AR(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}var SR={translate:0,scale:1,origin:0,originPoint:0};function TR(){return{x:MS({},SR),y:MS({},SR)}}function MR(e){return[e("x"),e("y")]}function CR(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?QM(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?QM(i,e,n.max):Math.min(e,i)),e}function IR(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function RR(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=IS([i,r],2))[0],i=n[1]),{min:e.min+r,max:e.min+i}}function PR(e,t,n){return{min:LR(e,t),max:LR(e,n)}}function LR(e,t){var n;return"number"==typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function BR(e,t){return AR(function(e,t){var n=e.top,r=e.left,i=e.bottom,o=e.right;void 0===t&&(t=ER);var a=t({x:r,y:n}),s=t({x:o,y:i});return{top:a.y,left:a.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}function kR(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),mR(e,t)<n}function DR(e){return e.max-e.min}function OR(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=QM(t.min,t.max,e.origin),e.scale=DR(n)/DR(t),kR(e.scale,1,1e-4)&&(e.scale=1),e.translate=QM(n.min,n.max,e.origin)-e.originPoint,kR(e.translate)&&(e.translate=0)}function NR(e,t,n,r){OR(e.x,t.x,n.x,FR(r.originX)),OR(e.y,t.y,n.y,FR(r.originY))}function FR(e){return"number"==typeof e?e:.5}function UR(e,t,n){e.min=n.min+t.min,e.max=e.min+DR(t)}var GR=function(e,t){return e.depth-t.depth};function HR(e){return e.projection.isEnabled||e.shouldResetTransform()}function zR(e,t){void 0===t&&(t=[]);var n=e.parent;return n&&zR(n,t),HR(e)&&t.push(e),t}function VR(e){if(!e.shouldResetTransform()){var t,n=e.getLayoutState();e.notifyBeforeLayoutMeasure(n.layout),n.isHydrated=!0,n.layout=e.measureViewportBox(),n.layoutCorrected=(t=n.layout,{x:MS({},t.x),y:MS({},t.y)}),e.notifyLayoutMeasure(n.layout,e.prevViewportBox||n.layout),uI.update((function(){return e.rebaseProjectionTarget()}))}}function jR(e,t){return{min:t.min-e.min,max:t.max-e.min}}function WR(e,t){return{x:jR(e.x,t.x),y:jR(e.y,t.y)}}function qR(e,t){var n=e.getLayoutId(),r=t.getLayoutId();return n!==r||void 0===r&&e!==t}function JR(e){var t=e.getProps(),n=t.drag,r=t._dragX;return n&&!r}function KR(e,t){e.min=t.min,e.max=t.max}function XR(e,t,n){return n+t*(e-n)}function YR(e,t,n,r,i){return void 0!==i&&(e=XR(e,i,r)),XR(e,n,r)+t}function QR(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=YR(e.min,t,n,r,i),e.max=YR(e.max,t,n,r,i)}function ZR(e,t){var n=t.x,r=t.y;QR(e.x,n.translate,n.scale,n.originPoint),QR(e.y,r.translate,r.scale,r.originPoint)}function $R(e,t,n,r){var i=IS(r,3),o=i[0],a=i[1],s=i[2];e.min=t.min,e.max=t.max;var u=void 0!==n[s]?n[s]:.5,c=QM(t.min,t.max,u);QR(e,n[o],n[a],c,n.scale)}var eP=["x","scaleX","originX"],tP=["y","scaleY","originY"];function nP(e,t,n){$R(e.x,t.x,n,eP),$R(e.y,t.y,n,tP)}function rP(e,t,n,r,i){return e=XR(e-=t,1/n,r),void 0!==i&&(e=XR(e,1/i,r)),e}function iP(e,t,n){var r=IS(n,3),i=r[0],o=r[1],a=r[2];!function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5);var o=QM(e.min,e.max,r)-t;e.min=rP(e.min,t,n,o,i),e.max=rP(e.max,t,n,o,i)}(e,t[i],t[o],t[a],t.scale)}function oP(e,t){iP(e.x,t,eP),iP(e.y,t,tP)}var aP=new Set;function sP(e,t,n){e[n]||(e[n]=[]),e[n].push(t)}function uP(e){return aP.add(e),function(){return aP.delete(e)}}function cP(){if(aP.size){var e=0,t=[[]],n=[],r=function(n){return sP(t,n,e)},i=function(t){sP(n,t,e),e++};aP.forEach((function(t){t(r,i),e=0})),aP.clear();for(var o=n.length,a=0;a<=o;a++)t[a]&&t[a].forEach(hP),n[a]&&n[a].forEach(hP)}}var lP,hP=function(e){return e()},dP=new WeakMap,fP=function(){function e(e){var t=e.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic={x:{min:0,max:1},y:{min:0,max:1}},this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=t,this.visualElement.enableLayoutProjection(),dP.set(t,this)}return e.prototype.start=function(e,t){var n=this,r=void 0===t?{}:t,i=r.snapToCursor,o=void 0!==i&&i,a=r.cursorProgress,s=this.props.transformPagePoint;this.panSession=new gR(e,{onSessionStart:function(e){var t;n.stopMotion();var r=function(e){return xM(e,"client")}(e).point;null===(t=n.cancelLayout)||void 0===t||t.call(n),n.cancelLayout=uP((function(e,t){var i=zR(n.visualElement),s=function(e){var t=[],n=function(e){HR(e)&&t.push(e),e.children.forEach(n)};return e.children.forEach(n),t.sort(GR)}(n.visualElement),u=RS(RS([],IS(i)),IS(s)),c=!1;n.isLayoutDrag()&&n.visualElement.lockProjectionTarget(),t((function(){u.forEach((function(e){return e.resetTransform()}))})),e((function(){VR(n.visualElement),s.forEach(VR)})),t((function(){u.forEach((function(e){return e.restoreTransform()})),o&&(c=n.snapToCursor(r))})),e((function(){Boolean(n.getAxisMotionValue("x")&&!n.isExternalDrag())||n.visualElement.rebaseProjectionTarget(!0,n.visualElement.measureViewportBox(!1)),n.visualElement.scheduleUpdateLayoutProjection();var e=n.visualElement.projection;MR((function(t){if(!c){var i=e.target[t],o=i.min,s=i.max;n.cursorProgress[t]=a?a[t]:YM(o,s,r[t])}var u=n.getAxisMotionValue(t);u&&(n.originPoint[t]=u.get())}))})),t((function(){rI.update(),rI.preRender(),rI.render(),rI.postRender()})),e((function(){return n.resolveDragConstraints()}))}))},onStart:function(e,t){var r,i,o,a=n.props,s=a.drag,u=a.dragPropagation;(!s||u||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=PM(s),n.openGlobalLock))&&(cP(),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,e,t),null===(o=n.visualElement.animationState)||void 0===o||o.setActive(hM.Drag,!0))},onMove:function(e,t){var r,i,o,a,s=n.props,u=s.dragPropagation,c=s.dragDirectionLock;if(u||n.openGlobalLock){var l=t.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}(l),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis("x",t.point,l),n.updateAxis("y",t.point,l),null===(a=(o=n.props).onDrag)||void 0===a||a.call(o,e,t),lP=e}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:s})},e.prototype.resolveDragConstraints=function(){var e=this,t=this.props,n=t.dragConstraints,r=t.dragElastic,i=this.visualElement.getLayoutState().layoutCorrected;this.constraints=!!n&&(JS(n)?this.resolveRefConstraints(i,n):function(e,t){var n=t.top,r=t.left,i=t.bottom,o=t.right;return{x:IR(e.x,r,o),y:IR(e.y,n,i)}}(i,n)),this.elastic=function(e){return!1===e?e=0:!0===e&&(e=.35),{x:PR(e,"left","right"),y:PR(e,"top","bottom")}}(r),this.constraints&&!this.hasMutatedConstraints&&MR((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(e,t){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,o=t.current;this.constraintsBox=BR(o,i);var a=function(e,t){return{x:RR(e.x,t.x),y:RR(e.y,t.y)}}(e,this.constraintsBox);if(r){var s=r(function(e){var t=e.x,n=e.y;return{top:n.min,bottom:n.max,left:t.min,right:t.max}}(a));this.hasMutatedConstraints=!!s,s&&(a=AR(s))}return a},e.prototype.cancelDrag=function(){var e,t;this.visualElement.unlockProjectionTarget(),null===(e=this.cancelLayout)||void 0===e||e.call(this),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(hM.Drag,!1)},e.prototype.stop=function(e,t){var n,r,i;null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var o=this.isDragging;if(this.cancelDrag(),o){var a=t.velocity;this.animateDragEnd(a),null===(i=(r=this.props).onDragEnd)||void 0===i||i.call(r,e,t)}},e.prototype.snapToCursor=function(e){var t=this;return MR((function(n){if(pP(n,t.props.drag,t.currentDirection)){var r=t.getAxisMotionValue(n);if(!r)return t.cursorProgress[n]=.5,!0;var i=t.visualElement.getLayoutState().layout,o=i[n].max-i[n].min,a=i[n].min+o/2,s=e[n]-a;t.originPoint[n]=e[n],r.set(s)}})).includes(!0)},e.prototype.updateAxis=function(e,t,n){if(pP(e,this.props.drag,this.currentDirection))return this.getAxisMotionValue(e)?this.updateAxisMotionValue(e,n):this.updateVisualElementAxis(e,t)},e.prototype.updateAxisMotionValue=function(e,t){var n=this.getAxisMotionValue(e);if(t&&n){var r=this.originPoint[e]+t[e],i=this.constraints?CR(r,this.constraints[e],this.elastic[e]):r;n.set(i)}},e.prototype.updateVisualElementAxis=function(e,t){var n,r=this.visualElement.getLayoutState().layout[e],i=r.max-r.min,o=this.cursorProgress[e],a=function(e,t,n,r,i){var o=e-t*n;return r?CR(o,r,i):o}(t[e],i,o,null===(n=this.constraints)||void 0===n?void 0:n[e],this.elastic[e]);this.visualElement.setProjectionTargetAxis(e,a,a+i)},e.prototype.setProps=function(e){var t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,o=e.dragPropagation,a=void 0!==o&&o,s=e.dragConstraints,u=void 0!==s&&s,c=e.dragElastic,l=void 0===c?.35:c,h=e.dragMomentum,d=void 0===h||h,f=CS(e,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=MS({drag:n,dragDirectionLock:i,dragPropagation:a,dragConstraints:u,dragElastic:l,dragMomentum:d},f)},e.prototype.getAxisMotionValue=function(e){var t=this.props,n=t.layout,r=t.layoutId,i="_drag"+e.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(e,0)},e.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue("x")},e.prototype.isExternalDrag=function(){var e=this.props,t=e._dragX,n=e._dragY;return t||n},e.prototype.animateDragEnd=function(e){var t=this,n=this.props,r=n.drag,i=n.dragMomentum,o=n.dragElastic,a=n.dragTransition,s=function(e,t){void 0===t&&(t=!0);var n,r=e.getProjectionParent();return!!r&&(t?oP(n=WR(r.projection.target,e.projection.target),r.getLatestValues()):n=WR(r.getLayoutState().layout,e.getLayoutState().layout),MR((function(t){return e.setProjectionTargetAxis(t,n[t].min,n[t].max,!0)})),!0)}(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),u=this.constraints||{};if(s&&Object.keys(u).length&&this.isLayoutDrag()){var c=this.visualElement.getProjectionParent();if(c){var l=WR(c.projection.targetFinal,u);MR((function(e){var t=l[e],n=t.min,r=t.max;u[e]={min:isNaN(n)?void 0:n,max:isNaN(r)?void 0:r}}))}}var h=MR((function(n){var c;if(pP(n,r,t.currentDirection)){var l=null!==(c=null==u?void 0:u[n])&&void 0!==c?c:{},h=o?200:1e6,d=o?40:1e7,f=MS(MS({type:"inertia",velocity:i?e[n]:0,bounceStiffness:h,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},a),l);return t.getAxisMotionValue(n)?t.startAxisValueAnimation(n,f):t.visualElement.startLayoutAnimation(n,f,s)}}));return Promise.all(h).then((function(){var e,n;null===(n=(e=t.props).onDragTransitionEnd)||void 0===n||n.call(e)}))},e.prototype.stopMotion=function(){var e=this;MR((function(t){var n=e.getAxisMotionValue(t);n?n.stop():e.visualElement.stopLayoutAnimation()}))},e.prototype.startAxisValueAnimation=function(e,t){var n=this.getAxisMotionValue(e);if(n){var r=n.get();return n.set(r),n.set(r),GI(e,n,0,t)}},e.prototype.scalePoint=function(){var e=this,t=this.props,n=t.drag;if(JS(t.dragConstraints)&&this.constraintsBox){this.stopMotion();var r={x:0,y:0};MR((function(t){var n,i,o,a,s;r[t]=(n=e.visualElement.projection.target[t],i=e.constraintsBox[t],o=.5,a=DR(n),(s=DR(i))>a?o=YM(i.min,i.max-a,n.min):a>s&&(o=YM(n.min,n.max-s,i.min)),function(e){return VM(0,1,e)}(o))})),this.updateConstraints((function(){MR((function(t){if(pP(t,n,null)){var i=function(e,t,n){var r=e.max-e.min,i=QM(t.min,t.max-r,n);return{min:i,max:i+r}}(e.visualElement.projection.target[t],e.constraintsBox[t],r[t]),o=i.min,a=i.max;e.visualElement.setProjectionTargetAxis(t,o,a)}}))})),setTimeout(cP,1)}},e.prototype.updateConstraints=function(e){var t=this;this.cancelLayout=uP((function(n,r){var i=zR(t.visualElement);r((function(){return i.forEach((function(e){return e.resetTransform()}))})),n((function(){return VR(t.visualElement)})),r((function(){return i.forEach((function(e){return e.restoreTransform()}))})),n((function(){t.resolveDragConstraints()})),e&&r(e)}))},e.prototype.mount=function(e){var t=this,n=TM(e.getInstance(),"pointerdown",(function(e){var n=t.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=pM(window,"resize",(function(){t.scalePoint()})),i=e.onLayoutUpdate((function(){t.isDragging&&t.resolveDragConstraints()})),o=e.prevDragCursor;return o&&this.start(lP,{cursorProgress:o}),function(){null==n||n(),null==r||r(),null==i||i(),t.cancelDrag()}},e}();function pP(e,t,n){return!(!0!==t&&t!==e||null!==n&&n!==e)}var mP,gP,vP={pan:FM((function(e){var t=e.onPan,n=e.onPanStart,r=e.onPanEnd,o=e.onPanSessionStart,a=e.visualElement,s=t||n||r||o,u=(0,i.useRef)(null),c=(0,i.useContext)(OS).transformPagePoint,l={onSessionStart:o,onStart:n,onMove:t,onEnd:function(e,t){u.current=null,r&&r(e,t)}};(0,i.useEffect)((function(){null!==u.current&&u.current.updateHandlers(l)})),MM(a,"pointerdown",s&&function(e){u.current=new gR(e,l,{transformPagePoint:c})}),DM((function(){return u.current&&u.current.end()}))})),drag:FM((function(e){var t=e.dragControls,n=e.visualElement,r=(0,i.useContext)(OS).transformPagePoint,o=US((function(){return new fP({visualElement:n})}));o.setProps(MS(MS({},e),{transformPagePoint:r})),(0,i.useEffect)((function(){return t&&t.subscribe(o)}),[o]),(0,i.useEffect)((function(){return o.mount(n)}),[])}))};function yP(e){return"string"==typeof e&&e.startsWith("var(--")}!function(e){e[e.Entering=0]="Entering",e[e.Present=1]="Present",e[e.Exiting=2]="Exiting"}(mP||(mP={})),function(e){e[e.Hide=0]="Hide",e[e.Show=1]="Show"}(gP||(gP={}));var bP=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function wP(e,t,n){void 0===n&&(n=1);var r=IS(function(e){var t=bP.exec(e);if(!t)return[,];var n=IS(t,3);return[n[1],n[2]]}(e),2),i=r[0],o=r[1];if(i){var a=window.getComputedStyle(t).getPropertyValue(i);return a?a.trim():yP(o)?wP(o,t,n+1):o}}function xP(e,t){return e/(t.max-t.min)*100}var _P="_$css",EP={process:function(e,t,n){var r=n.target;if("string"==typeof e){if(!CT.test(e))return e;e=parseFloat(e)}return xP(e,r.x)+"% "+xP(e,r.y)+"%"}},AP={borderRadius:MS(MS({},EP),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:EP,borderTopRightRadius:EP,borderBottomLeftRadius:EP,borderBottomRightRadius:EP,boxShadow:{process:function(e,t){var n=t.delta,r=t.treeScale,i=e,o=e.includes("var("),a=[];o&&(e=e.replace(bP,(function(e){return a.push(e),_P})));var s=vC.parse(e);if(s.length>5)return i;var u=vC.createTransformer(e),c="number"!=typeof s[0]?1:0,l=n.x.scale*r.x,h=n.y.scale*r.y;s[0+c]/=l,s[1+c]/=h;var d=QM(l,h,.5);"number"==typeof s[2+c]&&(s[2+c]/=d),"number"==typeof s[3+c]&&(s[3+c]/=d);var f=u(s);if(o){var p=0;f=f.replace(_P,(function(){var e=a[p];return p++,e}))}return f}}},SP=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameTarget={x:{min:0,max:1},y:{min:0,max:1}},t.currentAnimationTarget={x:{min:0,max:1},y:{min:0,max:1}},t.isAnimating={x:!1,y:!1},t.stopAxisAnimation={x:void 0,y:void 0},t.isAnimatingTree=!1,t.animate=function(e,n,r){void 0===r&&(r={});var i=r.originBox,o=r.targetBox,a=r.visibilityAction,s=r.shouldStackAnimate,u=r.onComplete,c=r.prevParent,l=CS(r,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent"]),h=t.props,d=h.visualElement,f=h.layout;if(!1===s)return t.isAnimatingTree=!1,t.safeToRemove();if(!t.isAnimatingTree||!0===s){s&&(t.isAnimatingTree=!0),n=i||n,e=o||e;var p=!1,m=d.getProjectionParent();if(m){var g=m.prevViewportBox,v=m.getLayoutState().layout;c&&(o&&(v=c.getLayoutState().layout),i&&!qR(c,m)&&c.prevViewportBox&&(g=c.prevViewportBox)),g&&PP(c,i,o)&&(p=!0,n=WR(g,n),e=WR(v,e))}var y=TP(n,e),b=MR((function(r){var i,o;if("position"===f){var s=e[r].max-e[r].min;n[r].max=n[r].min+s}if(!d.projection.isTargetLocked)return void 0===a?y?t.animateAxis(r,e[r],n[r],MS(MS({},l),{isRelative:p})):(null===(o=(i=t.stopAxisAnimation)[r])||void 0===o||o.call(i),d.setProjectionTargetAxis(r,e[r].min,e[r].max,p)):void d.setVisibility(a===gP.Show)}));return d.syncRender(),Promise.all(b).then((function(){t.isAnimatingTree=!1,u&&u(),d.notifyLayoutAnimationComplete()}))}},t}return TS(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props.visualElement;t.animateMotionValue=GI,t.enableLayoutProjection(),this.unsubLayoutReady=t.onLayoutUpdate(this.animate),t.layoutSafeToRemove=function(){return e.safeToRemove()},function(e){for(var t in e)oT[t]=e[t]}(AP)},t.prototype.componentWillUnmount=function(){var e=this;this.unsubLayoutReady(),MR((function(t){var n,r;return null===(r=(n=e.stopAxisAnimation)[t])||void 0===r?void 0:r.call(n)}))},t.prototype.animateAxis=function(e,t,n,r){var i,o,a=this,s=void 0===r?{}:r,u=s.transition,c=s.isRelative;if(!this.isAnimating[e]||!IP(t,this.currentAnimationTarget[e])){null===(o=(i=this.stopAxisAnimation)[e])||void 0===o||o.call(i),this.isAnimating[e]=!0;var l=this.props.visualElement,h=this.frameTarget[e],d=l.getProjectionAnimationProgress()[e];d.clearListeners(),d.set(0),d.set(0);var f=function(){var r=d.get()/1e3;!function(e,t,n,r){e.min=QM(t.min,n.min,r),e.max=QM(t.max,n.max,r)}(h,n,t,r),l.setProjectionTargetAxis(e,h.min,h.max,c)};f();var p=d.onChange(f);this.stopAxisAnimation[e]=function(){a.isAnimating[e]=!1,d.stop(),p()},this.currentAnimationTarget[e]=t;var m=u||l.getDefaultTransition()||RP;return GI("x"===e?"layoutX":"layoutY",d,1e3,m&&UI(m,"layout")).then(this.stopAxisAnimation[e])}},t.prototype.safeToRemove=function(){var e,t;null===(t=(e=this.props).safeToRemove)||void 0===t||t.call(e)},t.prototype.render=function(){return null},t}(i.Component);function TP(e,t){return!(CP(e)||CP(t)||IP(e.x,t.x)&&IP(e.y,t.y))}var MP={min:0,max:0};function CP(e){return IP(e.x,MP)&&IP(e.y,MP)}function IP(e,t){return e.min===t.min&&e.max===t.max}var RP={duration:.45,ease:[.4,0,.1,1]};function PP(e,t,n){return e||!e&&!(t||n)}var LP={layoutReady:function(e){return e.notifyLayoutReady()}};function BP(){var e=new Set;return{add:function(t){return e.add(t)},flush:function(t){var n=void 0===t?LP:t,r=n.layoutReady,i=n.parent;uP((function(t,n){var o=Array.from(e).sort(GR),a=i?zR(i):[];n((function(){RS(RS([],IS(a)),IS(o)).forEach((function(e){return e.resetTransform()}))})),t((function(){o.forEach(VR)})),n((function(){a.forEach((function(e){return e.restoreTransform()})),o.forEach(r)})),t((function(){o.forEach((function(e){e.isPresent&&(e.presence=mP.Present)}))})),n((function(){rI.preRender(),rI.render()})),t((function(){uI.postRender((function(){return o.forEach(kP)})),e.clear()}))})),cP()}}}function kP(e){e.prevViewportBox=e.projection.target}var DP=(0,i.createContext)(BP()),OP=(0,i.createContext)(BP());function NP(e){return!!e.forceUpdate}var FP=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return TS(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.syncLayout,n=e.framerSyncLayout,r=e.visualElement;NP(t)&&t.register(r),NP(n)&&n.register(r),r.onUnmount((function(){NP(t)&&t.remove(r),NP(n)&&n.remove(r)}))},t.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;return NP(t)?t.syncUpdate():(function(e){e.shouldResetTransform()||(e.prevViewportBox=e.measureViewportBox(!1),e.rebaseProjectionTarget(!1,e.prevViewportBox))}(n),t.add(n)),null},t.prototype.componentDidUpdate=function(){var e=this.props.syncLayout;NP(e)||e.flush()},t.prototype.render=function(){return null},t}(i.Component),UP={measureLayout:function(e){var t=(0,i.useContext)(DP),n=(0,i.useContext)(OP);return i.createElement(FP,MS({},e,{syncLayout:t,framerSyncLayout:n}))},layoutAnimation:function(e){var t=IS(GS(),2)[1];return i.createElement(SP,MS({},e,{safeToRemove:t}))}};function GP(){return{isHydrated:!1,layout:{x:{min:0,max:1},y:{min:0,max:1}},layoutCorrected:{x:{min:0,max:1},y:{min:0,max:1}},treeScale:{x:1,y:1},delta:TR(),deltaFinal:TR(),deltaTransform:""}}var HP=GP();function zP(e,t,n){var r=e.x,i=e.y,o="translate3d("+r.translate/t.x+"px, "+i.translate/t.y+"px, 0) ";if(n){var a=n.rotate,s=n.rotateX,u=n.rotateY;a&&(o+="rotate("+a+") "),s&&(o+="rotateX("+s+") "),u&&(o+="rotateY("+u+") ")}return o+="scale("+r.scale+", "+i.scale+")",n||o!==jP?o:""}function VP(e){var t=e.deltaFinal;return 100*t.x.origin+"% "+100*t.y.origin+"% 0"}var jP=zP(HP.delta,HP.treeScale,{x:1,y:1}),WP=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];var qP=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){zI(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){VI(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(GR),this.isDirty=!1,this.children.forEach(e)},e}(),JP=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,o=e.makeTargetAnimatable,a=e.measureViewportBox,s=e.render,u=e.readValueFromInstance,c=e.resetTransform,l=e.restoreTransform,h=e.removeValueFromRenderState,d=e.sortNodePosition,f=e.scrapeMotionValuesFromProps;return function(e,t){var p=e.parent,m=e.props,g=e.presenceId,v=e.blockInitialAnimation,y=e.visualState;void 0===t&&(t={});var b,w,x,_,E,A,S=y.latestValues,T=y.renderState,M=function(){var e=WP.map((function(){return new jI})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){return WP.forEach((function(r){var i;null===(i=t[r])||void 0===i||i.call(t);var o="on"+r,a=e[o];a&&(t[r]=n[o](a))}))}};return e.forEach((function(e,t){n["on"+WP[t]]=function(t){return e.add(t)},n["notify"+WP[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,RS([],IS(t)))}})),n}(),C={isEnabled:!1,isHydrated:!1,isTargetLocked:!1,target:{x:{min:0,max:1},y:{min:0,max:1}},targetFinal:{x:{min:0,max:1},y:{min:0,max:1}}},I=C,R=S,P=GP(),L=!1,B=new Map,k=new Map,D={},O=MS({},S);function N(){b&&(q.isProjectionReady()&&(nP(I.targetFinal,I.target,R),NR(P.deltaFinal,P.layoutCorrected,I.targetFinal,S)),F(),s(b,T))}function F(){var e=S;if(_&&_.isActive()){var n=_.getCrossfadeState(q);n&&(e=n)}r(q,T,e,I,P,t,m)}function U(){M.notifyUpdate(S)}function G(){q.layoutTree.forEach(XP)}var H=f(m);for(var z in H){var V=H[z];void 0!==S[z]&&pT(V)&&V.set(S[z],!1)}var j=ZS(m),W=$S(m),q=MS(MS({treeType:n,current:null,depth:p?p.depth+1:0,parent:p,children:new Set,path:p?RS(RS([],IS(p.path)),[p]):[],layoutTree:p?p.layoutTree:new qP,presenceId:g,projection:C,variantChildren:W?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null==p?void 0:p.isMounted()),blockInitialAnimation:v,isMounted:function(){return Boolean(b)},mount:function(e){b=q.current=e,q.pointTo(q),W&&p&&!j&&(A=null==p?void 0:p.addVariantChild(q)),null==p||p.children.add(q)},unmount:function(){nI.update(U),nI.render(N),nI.preRender(q.updateLayoutProjection),k.forEach((function(e){return e()})),q.stopLayoutAnimation(),q.layoutTree.remove(q),null==A||A(),null==p||p.children.delete(q),null==x||x(),M.clearAllListeners()},addVariantChild:function(e){var t,n=q.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return d&&n===e.treeType?d(q.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return W?q:null==p?void 0:p.getClosestVariantNode()},scheduleUpdateLayoutProjection:p?p.scheduleUpdateLayoutProjection:function(){return uI.preRender(q.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return m.layoutId},getInstance:function(){return b},getStaticValue:function(e){return S[e]},setStaticValue:function(e,t){return S[e]=t},getLatestValues:function(){return S},setVisibility:function(e){q.isVisible!==e&&(q.isVisible=e,q.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),o(q,e,m,t)},addValue:function(e,t){q.hasValue(e)&&q.removeValue(e),B.set(e,t),S[e]=t.get(),function(e,t){var n=t.onChange((function(t){S[e]=t,m.onUpdate&&uI.update(U,!1,!0)})),r=t.onRenderRequest(q.scheduleRender);k.set(e,(function(){n(),r()}))}(e,t)},removeValue:function(e){var t;B.delete(e),null===(t=k.get(e))||void 0===t||t(),k.delete(e),delete S[e],h(e,T)},hasValue:function(e){return B.has(e)},getValue:function(e,t){var n=B.get(e);return void 0===n&&void 0!==t&&(n=qI(t),q.addValue(e,n)),n},forEachValue:function(e){return B.forEach(e)},readValue:function(e){var n;return null!==(n=S[e])&&void 0!==n?n:u(b,e,t)},setBaseTarget:function(e,t){O[e]=t},getBaseTarget:function(e){if(i){var t=i(m,e);if(void 0!==t&&!pT(t))return t}return O[e]}},M),{build:function(){return F(),T},scheduleRender:function(){uI.render(N,!1,!0)},syncRender:N,setProps:function(e){m=e,M.updatePropListeners(e),D=function(e,t,n){var r;for(var i in t){var o=t[i],a=n[i];if(pT(o))e.addValue(i,o);else if(pT(a))e.addValue(i,qI(o));else if(a!==o)if(e.hasValue(i)){var s=e.getValue(i);!s.hasAnimated&&s.set(o)}else e.addValue(i,qI(null!==(r=e.getStaticValue(i))&&void 0!==r?r:o))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(q,f(m),D)},getProps:function(){return m},getVariant:function(e){var t;return null===(t=m.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return m.transition},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null==p?void 0:p.getVariantContext();if(!j){var t=(null==p?void 0:p.getVariantContext())||{};return void 0!==m.initial&&(t.initial=m.initial),t}for(var n={},r=0;r<ZP;r++){var i=QP[r],o=m[i];(XS(o)||!1===o)&&(n[i]=o)}return n},enableLayoutProjection:function(){C.isEnabled=!0,q.layoutTree.add(q)},lockProjectionTarget:function(){C.isTargetLocked=!0},unlockProjectionTarget:function(){q.stopLayoutAnimation(),C.isTargetLocked=!1},getLayoutState:function(){return P},setCrossfader:function(e){_=e},isProjectionReady:function(){return C.isEnabled&&C.isHydrated&&P.isHydrated},startLayoutAnimation:function(e,t,n){void 0===n&&(n=!1);var r=q.getProjectionAnimationProgress()[e],i=n?C.relativeTarget[e]:C.target[e],o=i.min,a=i.max-o;return r.clearListeners(),r.set(o),r.set(o),r.onChange((function(t){q.setProjectionTargetAxis(e,t,t+a,n)})),q.animateMotionValue(e,r,0,t)},stopLayoutAnimation:function(){MR((function(e){return q.getProjectionAnimationProgress()[e].stop()}))},measureViewportBox:function(e){void 0===e&&(e=!0);var n=a(b,t);return e||oP(n,S),n},getProjectionAnimationProgress:function(){return E||(E={x:qI(0),y:qI(0)}),E},setProjectionTargetAxis:function(e,t,n,r){var i;void 0===r&&(r=!1),r?(C.relativeTarget||(C.relativeTarget={x:{min:0,max:1},y:{min:0,max:1}}),i=C.relativeTarget[e]):(C.relativeTarget=void 0,i=C.target[e]),C.isHydrated=!0,i.min=t,i.max=n,L=!0,M.notifySetAxisTarget()},rebaseProjectionTarget:function(e,t){void 0===t&&(t=P.layout);var n=q.getProjectionAnimationProgress(),r=n.x,i=n.y,o=!(C.relativeTarget||C.isTargetLocked||r.isAnimating()||i.isAnimating());(e||o)&&MR((function(e){var n=t[e],r=n.min,i=n.max;q.setProjectionTargetAxis(e,r,i)}))},notifyLayoutReady:function(e){!function(e){var t=e.getProjectionParent();if(t){var n=WR(t.getLayoutState().layout,e.getLayoutState().layout);MR((function(t){e.setProjectionTargetAxis(t,n[t].min,n[t].max,!0)}))}else e.rebaseProjectionTarget()}(q),q.notifyLayoutUpdate(P.layout,q.prevViewportBox||P.layout,e)},resetTransform:function(){return c(q,b,m)},restoreTransform:function(){return l(b,T)},updateLayoutProjection:function(){if(q.isProjectionReady()){var e=P.delta,t=P.treeScale,n=t.x,r=t.y,i=P.deltaTransform;(function(e,t,n,r){var i,o,a=e.delta,s=e.layout,u=e.layoutCorrected,c=e.treeScale,l=t.target;o=s,KR((i=u).x,o.x),KR(i.y,o.y),function(e,t,n){var r=n.length;if(r){var i,o;t.x=t.y=1;for(var a=0;a<r;a++)o=(i=n[a]).getLayoutState().delta,t.x*=o.x.scale,t.y*=o.y.scale,ZR(e,o),JR(i)&&nP(e,e,i.getLatestValues())}}(u,c,n),NR(a,u,l,r)})(P,I,q.path,S),L&&q.notifyViewportBoxUpdate(I.target,e),L=!1;var o=zP(e,t);o===i&&n===t.x&&r===t.y||q.scheduleRender(),P.deltaTransform=o}},updateTreeLayoutProjection:function(){q.layoutTree.forEach(KP),uI.preRender(G,!1,!0)},getProjectionParent:function(){if(void 0===w){for(var e=!1,t=q.path.length-1;t>=0;t--){var n=q.path[t];if(n.projection.isEnabled){e=n;break}}w=e}return w},resolveRelativeTargetBox:function(){var e=q.getProjectionParent();if(C.relativeTarget&&e&&(function(e,t){UR(e.target.x,e.relativeTarget.x,t.target.x),UR(e.target.y,e.relativeTarget.y,t.target.y)}(C,e.projection),JR(e))){var t=C.target;nP(t,t,e.getLatestValues())}},shouldResetTransform:function(){return Boolean(m._layoutResetTransform)},pointTo:function(e){I=e.projection,R=e.getLatestValues(),null==x||x(),x=NM(e.onSetAxisTarget(q.scheduleUpdateLayoutProjection),e.onLayoutAnimationComplete((function(){var e;q.isPresent?q.presence=mP.Present:null===(e=q.layoutSafeToRemove)||void 0===e||e.call(q)})))},isPresent:!0,presence:mP.Entering});return q}};function KP(e){e.resolveRelativeTargetBox()}function XP(e){e.updateLayoutProjection()}var YP,QP=RS(["initial"],IS(sR)),ZP=QP.length,$P=new Set(["width","height","top","left","right","bottom","x","y"]),eL=function(e){return $P.has(e)},tL=function(e,t){e.set(t,!1),e.set(t)},nL=function(e){return e===LT||e===CT};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(YP||(YP={}));var rL=function(e,t){return parseFloat(e.split(", ")[t])},iL=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var o=i.match(/^matrix3d\((.+)\)$/);if(o)return rL(o[1],t);var a=i.match(/^matrix\((.+)\)$/);return a?rL(a[1],e):0}},oL=new Set(["x","y","z"]),aL=sT.filter((function(e){return!oL.has(e)})),sL={width:function(e){var t=e.x;return t.max-t.min},height:function(e){var t=e.y;return t.max-t.min},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:iL(4,13),y:iL(5,14)};function uL(e,t,n,r){return function(e){return Object.keys(e).some(eL)}(t)?function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=MS({},t),r=MS({},r);var i=Object.keys(t).filter(eL),o=[],a=!1,s=[];if(i.forEach((function(i){var u=e.getValue(i);if(e.hasValue(i)){var c,l=n[i],h=t[i],d=XI(l);if(aM(h))for(var f=h.length,p=null===h[0]?1:0;p<f;p++)c?XI(h[p]):(c=XI(h[p]))===d||nL(d)&&nL(c);else c=XI(h);if(d!==c)if(nL(d)&&nL(c)){var m=u.get();"string"==typeof m&&u.set(parseFloat(m)),"string"==typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===CT&&(t[i]=h.map(parseFloat))}else(null==d?void 0:d.transform)&&(null==c?void 0:c.transform)&&(0===l||0===h)?0===l?u.set(c.transform(l)):t[i]=d.transform(h):(a||(o=function(e){var t=[];return aL.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),a=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],tL(u,h))}})),s.length){var u=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),o=getComputedStyle(i),a=o.display,s={top:o.top,left:o.left,bottom:o.bottom,right:o.right,transform:o.transform};"none"===a&&t.setStaticValue("display",e.display||"block"),t.syncRender();var u=t.measureViewportBox();return n.forEach((function(n){var i=t.getValue(n);tL(i,sL[n](r,s)),e[n]=sL[n](u,o)})),e}(t,e,s);return o.length&&o.forEach((function(t){var n=IS(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),{target:u,transitionEnd:r}}return{target:t,transitionEnd:r}}(e,t,n,r):{target:t,transitionEnd:r}}var cL={treeType:"dom",readValueFromInstance:function(e,t){if(lT(t)){var n=kI(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(gT(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return BR(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=n.transformValues;void 0===r&&(r=!0);var o=t.transition,a=t.transitionEnd,s=CS(t,["transition","transitionEnd"]),u=function(e,t,n){var r,i,o={};for(var a in e)o[a]=null!==(r=tR(a,t))&&void 0!==r?r:null===(i=n.getValue(a))||void 0===i?void 0:i.get();return o}(s,o||{},e);if(i&&(a&&(a=i(a)),s&&(s=i(s)),u&&(u=i(u))),r){!function(e,t,n){var r,i,o,a,s=Object.keys(t).filter((function(t){return!e.hasValue(t)})),u=s.length;if(u)for(var c=0;c<u;c++){var l=s[c],h=t[l],d=null;Array.isArray(h)&&(d=h[0]),null===d&&(d=null!==(i=null!==(r=n[l])&&void 0!==r?r:e.readValue(l))&&void 0!==i?i:t[l]),null!=d&&("string"==typeof d&&HI(d)?d=parseFloat(d):!QI(d)&&vC.test(h)&&(d=DI(l,h)),e.addValue(l,qI(d)),null!==(o=(a=n)[l])&&void 0!==o||(a[l]=d),e.setBaseTarget(l,d))}}(e,s,u);var c=function(e,t,n,r){var i=function(e,t,n){var r,i=CS(t,[]),o=e.getInstance();if(!(o instanceof HTMLElement))return{target:i,transitionEnd:n};for(var a in n&&(n=MS({},n)),e.forEachValue((function(e){var t=e.get();if(yP(t)){var n=wP(t,o);n&&e.set(n)}})),i){var s=i[a];if(yP(s)){var u=wP(s,o);u&&(i[a]=u,n&&(null!==(r=n[a])&&void 0!==r||(n[a]=s)))}}return{target:i,transitionEnd:n}}(e,t,r);return uL(e,t=i.target,n,r=i.transitionEnd)}(e,s,u,a);a=c.transitionEnd,s=c.target}return MS({transition:o,transitionEnd:a},s)},scrapeMotionValuesFromProps:rM,build:function(e,t,n,r,i,o,a){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden");var s=r.isEnabled&&i.isHydrated;NT(t,n,r,i,o,a.transformTemplate,s?zP:void 0,s?VP:void 0)},render:eM},lL=JP(cL),hL=JP(MS(MS({},cL),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return lT(t)?(null===(n=kI(t))||void 0===n?void 0:n.default)||0:(t=tM.has(t)?t:$T(t),e.getAttribute(t))},scrapeMotionValuesFromProps:iM,build:function(e,t,n,r,i,o,a){var s=r.isEnabled&&i.isHydrated;KT(t,n,r,i,o,a.transformTemplate,s?zP:void 0,s?VP:void 0)},render:nM})),dL=function(e,t){return iT(e)?hL(t,{enableHardwareAcceleration:!1}):lL(t,{enableHardwareAcceleration:!0})},fL=MS(MS(MS(MS({},hR),UM),vP),UP),pL=nT((function(e,t){return function(e,t,n,r){var i=t.forwardMotionProps,o=void 0!==i&&i,a=iT(e)?dM:fM;return MS(MS({},a),{preloadedFeatures:n,useRender:QT(o),createVisualElement:r,Component:e})}(e,t,fL,dL)}));const mL=function(e){var t={hidden:{opacity:0,pathLength:0},visible:{opacity:1,pathLength:1,transition:{duration:2,ease:"easeInOut"}}};return i.createElement(pL.svg,p({width:144,height:144,fill:"none",xmlns:"http://www.w3.org/2000/svg",variants:{hidden:{rotate:-100,scale:.2},visible:{rotate:0,scale:.4,transition:{duration:1}}},initial:"hidden",animate:"visible"},e),i.createElement(pL.path,{d:"M0 11C0 4.925 4.925 0 11 0h122c6.075 0 11 4.925 11 11v122c0 6.075-4.925 11-11 11H11c-6.075 0-11-4.925-11-11V11z",fill:"#282727",variants:t,initial:"hidden",animate:"visible"}),i.createElement(pL.path,{d:"M74.059 36.049c-3.88.376-7.707 1.966-10.834 4.498-1.803 1.462-2.905 2.95-3.794 5.13-.743 1.813-1.41 4.644-1.504 6.362-.188 3.31 1.128 7.064 4.016 11.459.872 1.325 1.333 1.838 2.504 2.745.504.393 1.119.906 1.358 1.129.478.444 1.051 1.317 1.273 1.94.171.488.18 1.19.009 1.514-.171.334-.803.915-1.248 1.138-1.23.632-2.136.59-5.767-.24-1.034-.24-2.94-.65-4.23-.915-3.955-.812-5.81-1.41-8.45-2.728a20.448 20.448 0 01-3.605-2.343c-1.59-1.282-4.118-3.566-5.417-4.908-1.512-1.556-1.692-1.676-2.854-1.916-2.153-.427-3.238.462-5.365 4.413-.838 1.548-2.299 4.891-3.067 7.003-2 5.49-2.675 8.167-2.948 11.596-.111 1.436-.06 5.832.094 7.311.273 2.762.888 5.114 1.802 6.935.436.872 1.538 2.505 2.325 3.455l.64.769-2.102.522c-7.552 1.898-11.833 4.019-13.03 6.448-.23.47-.273.641-.273 1.197 0 .915.316 1.565 1.214 2.462.769.77 1.52 1.283 2.973 2.036 6.45 3.343 20.207 5.917 36.526 6.824 5.152.29 7.382.342 13.927.342 6.544 0 8.774-.052 13.926-.342 16.32-.907 30.075-3.481 36.526-6.824 1.453-.753 2.205-1.266 2.973-2.036.898-.897 1.214-1.547 1.214-2.462 0-.565-.034-.727-.291-1.232-1.367-2.779-7.365-5.361-16.874-7.277a62.685 62.685 0 01-1.897-.402c-.009-.017.222-.41.53-.88 1.059-1.642 1.965-3.686 2.426-5.482.504-1.932.65-4.258.385-5.892-.351-2.129-1.239-4.626-2.418-6.798-1.564-2.873-2.333-3.685-5.87-6.216-2.093-1.505-2.589-1.924-3.443-2.925-1.299-1.505-1.965-2.634-2.239-3.771-.427-1.813-.043-3.89 1.188-6.37.914-1.84.99-1.942 1.623-2.121 1.555-.445 5.802-2.848 8.527-4.815 1.675-1.214 2.486-2.214 2.76-3.412.128-.538.128-2.274.008-3.104-.162-1.06-.538-1.71-1.153-1.992-.666-.3-1.008-.222-2.785.684-1.504.77-1.983.906-2.675.787-.29-.052-.811-.231-1.17-.402-.829-.393-2.974-1.215-3.64-1.394-.572-.154-.504-.085-2.734-2.642-1.487-1.702-2.11-2.164-4.674-3.48-3.776-1.933-6.433-2.865-9.33-3.25-1.23-.163-3.964-.231-5.066-.128z",fill:"#fff",variants:t,initial:"hidden",animate:"visible"}),i.createElement(pL.path,{d:"M95.337 59.375c-4.247.637-1.77-8.943 0-13.813.424-.425 4.069 1.063 5.838 1.86 2.548-1.488 4.247-1.86 4.778-1.86 2.123.85 1.769 4.428 1.327 6.11 0 1.275-5.662 4.781-8.493 6.375-.637.425-2.566 1.062-3.45 1.328z",fill:"#FFF614",variants:t,initial:"hidden",animate:"visible"}),i.createElement(pL.path,{d:"M104.678 98.771c-23.566 20.727-60.164 9.565-75.518 1.393-3.213-2.674-11.158-1.114-14.728 0-7.07 9.36 2.945 14.301 8.837 15.601 6.213 6.686 46.685 5.571 66.145 4.178 31.493-.891 35.974-8.728 34.278-12.536 1.285-4.457-12.14-7.614-19.014-8.636z",fill:"#282727",variants:t,initial:"hidden",animate:"visible"}),i.createElement("ellipse",{cx:84.455,cy:49.016,rx:2.389,ry:2.391,fill:"#282727"}),i.createElement("ellipse",{cx:84.19,cy:54.063,rx:32.91,ry:32.938,fill:"#CBE9F0",fillOpacity:.5}),i.createElement("path",{d:"M114 36.913L106 42v-9l8 3.913z",fill:"#fff"}),i.createElement("ellipse",{cx:118,cy:31.5,rx:15,ry:9.5,fill:"#fff"}),i.createElement("circle",{cx:112,cy:32,r:2,fill:"#C4C4C4"}),i.createElement("circle",{cx:118,cy:32,r:2,fill:"#C4C4C4"}),i.createElement("circle",{cx:124,cy:32,r:2,fill:"#C4C4C4"}))},gL="129",vL={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yL={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bL=0,wL=1,xL=2,_L=3,EL=0,AL=1,SL=2,TL=3,ML=0,CL=1,IL=2,RL=1,PL=2,LL=0,BL=1,kL=2,DL=3,OL=4,NL=5,FL=100,UL=101,GL=102,HL=103,zL=104,VL=200,jL=201,WL=202,qL=203,JL=204,KL=205,XL=206,YL=207,QL=208,ZL=209,$L=210,eB=0,tB=1,nB=2,rB=3,iB=4,oB=5,aB=6,sB=7,uB=0,cB=1,lB=2,hB=0,dB=1,fB=2,pB=3,mB=4,gB=5,vB=300,yB=301,bB=302,wB=303,xB=304,_B=306,EB=307,AB=1e3,SB=1001,TB=1002,MB=1003,CB=1004,IB=1004,RB=1005,PB=1005,LB=1006,BB=1007,kB=1007,DB=1008,OB=1008,NB=1009,FB=1010,UB=1011,GB=1012,HB=1013,zB=1014,VB=1015,jB=1016,WB=1017,qB=1018,JB=1019,KB=1020,XB=1021,YB=1022,QB=1023,ZB=1024,$B=1025,ek=QB,tk=1026,nk=1027,rk=1028,ik=1029,ok=1030,ak=1031,sk=1032,uk=1033,ck=33776,lk=33777,hk=33778,dk=33779,fk=35840,pk=35841,mk=35842,gk=35843,vk=36196,yk=37492,bk=37496,wk=37808,xk=37809,_k=37810,Ek=37811,Ak=37812,Sk=37813,Tk=37814,Mk=37815,Ck=37816,Ik=37817,Rk=37818,Pk=37819,Lk=37820,Bk=37821,kk=36492,Dk=37840,Ok=37841,Nk=37842,Fk=37843,Uk=37844,Gk=37845,Hk=37846,zk=37847,Vk=37848,jk=37849,Wk=37850,qk=37851,Jk=37852,Kk=37853,Xk=2200,Yk=2201,Qk=2202,Zk=2300,$k=2301,eD=2302,tD=2400,nD=2401,rD=2402,iD=2500,oD=2501,aD=0,sD=1,uD=2,cD=3e3,lD=3001,hD=3007,dD=3002,fD=3003,pD=3004,mD=3005,gD=3006,vD=3200,yD=3201,bD=0,wD=1,xD=0,_D=7680,ED=7681,AD=7682,SD=7683,TD=34055,MD=34056,CD=5386,ID=512,RD=513,PD=514,LD=515,BD=516,kD=517,DD=518,OD=519,ND=35044,FD=35048,UD=35040,GD=35045,HD=35049,zD=35041,VD=35046,jD=35050,WD=35042,qD="100",JD="300 es";class KD{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const XD=[];for(let e=0;e<256;e++)XD[e]=(e<16?"0":"")+e.toString(16);let YD=1234567;const QD=Math.PI/180,ZD=180/Math.PI;function $D(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(XD[255&e]+XD[e>>8&255]+XD[e>>16&255]+XD[e>>24&255]+"-"+XD[255&t]+XD[t>>8&255]+"-"+XD[t>>16&15|64]+XD[t>>24&255]+"-"+XD[63&n|128]+XD[n>>8&255]+"-"+XD[n>>16&255]+XD[n>>24&255]+XD[255&r]+XD[r>>8&255]+XD[r>>16&255]+XD[r>>24&255]).toUpperCase()}function eO(e,t,n){return Math.max(t,Math.min(n,e))}function tO(e,t){return(e%t+t)%t}function nO(e,t,n){return(1-n)*e+n*t}function rO(e){return 0==(e&e-1)&&0!==e}function iO(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function oO(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var aO=Object.freeze({__proto__:null,DEG2RAD:QD,RAD2DEG:ZD,generateUUID:$D,clamp:eO,euclideanModulo:tO,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:nO,damp:function(e,t,n,r){return nO(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(tO(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(YD=e%2147483647),YD=16807*YD%2147483647,(YD-1)/2147483646},degToRad:function(e){return e*QD},radToDeg:function(e){return e*ZD},isPowerOfTwo:rO,ceilPowerOfTwo:iO,floorPowerOfTwo:oO,setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),c=o((t+r)/2),l=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*l,u*h,u*d,s*c);break;case"YZY":e.set(u*d,s*l,u*h,s*c);break;case"ZXZ":e.set(u*h,u*d,s*l,s*c);break;case"XZX":e.set(s*l,u*p,u*f,s*c);break;case"YXY":e.set(u*f,s*l,u*p,s*c);break;case"ZYZ":e.set(u*p,u*f,s*l,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class sO{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}sO.prototype.isVector2=!0;class uO{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],w=r[2],x=r[5],_=r[8];return i[0]=o*p+a*v+s*w,i[3]=o*m+a*y+s*x,i[6]=o*g+a*b+s*_,i[1]=u*p+c*v+l*w,i[4]=u*m+c*y+l*x,i[7]=u*g+c*b+l*_,i[2]=h*p+d*v+f*w,i[5]=h*m+d*y+f*x,i[8]=h*g+d*b+f*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=c*o-a*u,h=a*s-c*i,d=u*i-o*s,f=t*l+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=l*p,e[1]=(r*u-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=d*p,e[7]=(n*s-u*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let cO;uO.prototype.isMatrix3=!0;class lO{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===cO&&(cO=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),cO.width=e.width,cO.height=e.height;const n=cO.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=cO}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let hO=0;class dO extends KD{constructor(e=dO.DEFAULT_IMAGE,t=dO.DEFAULT_MAPPING,n=SB,r=SB,i=LB,o=DB,a=QB,s=NB,u=1,c=cD){super(),Object.defineProperty(this,"id",{value:hO++}),this.uuid=$D(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=s,this.offset=new sO(0,0),this.repeat=new sO(1,1),this.center=new sO(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new uO,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=$D()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(fO(r[e].image)):t.push(fO(r[e]))}else t=fO(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==vB)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case AB:e.x=e.x-Math.floor(e.x);break;case SB:e.x=e.x<0?0:1;break;case TB:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case AB:e.y=e.y-Math.floor(e.y);break;case SB:e.y=e.y<0?0:1;break;case TB:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function fO(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?lO.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}dO.DEFAULT_IMAGE=void 0,dO.DEFAULT_MAPPING=vB,dO.prototype.isTexture=!0;class pO{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,u=s[0],c=s[4],l=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(l-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<a&&Math.abs(l+p)<a&&Math.abs(f+m)<a&&Math.abs(u+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(u+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,b=(l+p)/4,w=(f+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=w/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=w/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(l-p)*(l-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(l-p)/v,this.z=(h-c)/v,this.w=Math.acos((u+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}pO.prototype.isVector4=!0;class mO extends KD{constructor(e,t,n){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new pO(0,0,e,t),this.scissorTest=!1,this.viewport=new pO(0,0,e,t),n=n||{},this.texture=new dO(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:LB,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}mO.prototype.isWebGLRenderTarget=!0;class gO extends mO{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}gO.prototype.isWebGLMultipleRenderTargets=!0;class vO extends mO{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}vO.prototype.isWebGLMultisampleRenderTarget=!0;class yO{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=u,e[t+2]=c,void(e[t+3]=l);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(l!==p||s!==h||u!==d||c!==f){let e=1-a;const t=s*h+u*d+c*f+l*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,u=u*e+d*i,c=c*e+f*i,l=l*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=e,u*=e,c*=e,l*=e}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],u=n[r+2],c=n[r+3],l=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return e[t]=a*f+c*l+s*d-u*h,e[t+1]=s*f+c*h+u*l-a*d,e[t+2]=u*f+c*d+a*h-s*l,e[t+3]=c*f-a*l-s*h-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*c*l+u*d*f,this._y=u*d*l-h*c*f,this._z=u*c*f+h*d*l,this._w=u*c*l-h*d*f;break;case"YXZ":this._x=h*c*l+u*d*f,this._y=u*d*l-h*c*f,this._z=u*c*f-h*d*l,this._w=u*c*l+h*d*f;break;case"ZXY":this._x=h*c*l-u*d*f,this._y=u*d*l+h*c*f,this._z=u*c*f+h*d*l,this._w=u*c*l-h*d*f;break;case"ZYX":this._x=h*c*l-u*d*f,this._y=u*d*l+h*c*f,this._z=u*c*f-h*d*l,this._w=u*c*l+h*d*f;break;case"YZX":this._x=h*c*l+u*d*f,this._y=u*d*l+h*c*f,this._z=u*c*f-h*d*l,this._w=u*c*l-h*d*f;break;case"XZY":this._x=h*c*l-u*d*f,this._y=u*d*l-h*c*f,this._z=u*c*f+h*d*l,this._w=u*c*l+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],u=t[2],c=t[6],l=t[10],h=n+a+l;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-u)*e,this._z=(o-r)*e}else if(n>a&&n>l){const e=2*Math.sqrt(1+n-a-l);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+u)/e}else if(a>l){const e=2*Math.sqrt(1+a-n-l);this._w=(i-u)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+l-n-a);this._w=(o-r)/e,this._x=(i+u)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(eO(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(s),c=Math.atan2(u,a),l=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*l+this._w*h,this._x=n*l+this._x*h,this._y=r*l+this._y*h,this._z=i*l+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}yO.prototype.isQuaternion=!0;class bO{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(xO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(xO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return wO.copy(this).projectOnVector(e),this.sub(wO)}reflect(e){return this.sub(wO.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(eO(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}bO.prototype.isVector3=!0;const wO=new bO,xO=new yO;class _O{constructor(e=new bO(1/0,1/0,1/0),t=new bO(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=e.length;s<u;s+=3){const u=e[s],c=e[s+1],l=e[s+2];u<t&&(t=u),c<n&&(n=c),l<r&&(r=l),u>i&&(i=u),c>o&&(o=c),l>a&&(a=l)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,u=e.count;s<u;s++){const u=e.getX(s),c=e.getY(s),l=e.getZ(s);u<t&&(t=u),c<n&&(n=c),l<r&&(r=l),u>i&&(i=u),c>o&&(o=c),l>a&&(a=l)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=AO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new bO),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new bO),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),SO.copy(t.boundingBox),SO.applyMatrix4(e.matrixWorld),this.union(SO));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new bO),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,AO),AO.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(LO),BO.subVectors(this.max,LO),TO.subVectors(e.a,LO),MO.subVectors(e.b,LO),CO.subVectors(e.c,LO),IO.subVectors(MO,TO),RO.subVectors(CO,MO),PO.subVectors(TO,CO);let t=[0,-IO.z,IO.y,0,-RO.z,RO.y,0,-PO.z,PO.y,IO.z,0,-IO.x,RO.z,0,-RO.x,PO.z,0,-PO.x,-IO.y,IO.x,0,-RO.y,RO.x,0,-PO.y,PO.x,0];return!!OO(t,TO,MO,CO,BO)&&(t=[1,0,0,0,1,0,0,0,1],!!OO(t,TO,MO,CO,BO)&&(kO.crossVectors(IO,RO),t=[kO.x,kO.y,kO.z],OO(t,TO,MO,CO,BO)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new bO),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return AO.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(AO).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(EO[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),EO[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),EO[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),EO[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),EO[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),EO[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),EO[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),EO[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(EO)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}_O.prototype.isBox3=!0;const EO=[new bO,new bO,new bO,new bO,new bO,new bO,new bO,new bO],AO=new bO,SO=new _O,TO=new bO,MO=new bO,CO=new bO,IO=new bO,RO=new bO,PO=new bO,LO=new bO,BO=new bO,kO=new bO,DO=new bO;function OO(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){DO.fromArray(e,o);const a=i.x*Math.abs(DO.x)+i.y*Math.abs(DO.y)+i.z*Math.abs(DO.z),s=t.dot(DO),u=n.dot(DO),c=r.dot(DO);if(Math.max(-Math.max(s,u,c),Math.min(s,u,c))>a)return!1}return!0}const NO=new _O,FO=new bO,UO=new bO,GO=new bO;class HO{constructor(e=new bO,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):NO.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new bO),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new _O),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){GO.subVectors(e,this.center);const t=GO.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(GO.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return UO.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(FO.copy(e.center).add(UO)),this.expandByPoint(FO.copy(e.center).sub(UO)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const zO=new bO,VO=new bO,jO=new bO,WO=new bO,qO=new bO,JO=new bO,KO=new bO;class XO{constructor(e=new bO,t=new bO(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new bO),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zO)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new bO),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=zO.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(zO.copy(this.direction).multiplyScalar(t).add(this.origin),zO.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){VO.copy(e).add(t).multiplyScalar(.5),jO.copy(t).sub(e).normalize(),WO.copy(this.origin).sub(VO);const i=.5*e.distanceTo(t),o=-this.direction.dot(jO),a=WO.dot(this.direction),s=-WO.dot(jO),u=WO.lengthSq(),c=Math.abs(1-o*o);let l,h,d,f;if(c>0)if(l=o*s-a,h=o*a-s,f=i*c,l>=0)if(h>=-f)if(h<=f){const e=1/c;l*=e,h*=e,d=l*(l+o*h+2*a)+h*(o*l+h+2*s)+u}else h=i,l=Math.max(0,-(o*h+a)),d=-l*l+h*(h+2*s)+u;else h=-i,l=Math.max(0,-(o*h+a)),d=-l*l+h*(h+2*s)+u;else h<=-f?(l=Math.max(0,-(-o*i+a)),h=l>0?-i:Math.min(Math.max(-i,-s),i),d=-l*l+h*(h+2*s)+u):h<=f?(l=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+u):(l=Math.max(0,-(o*i+a)),h=l>0?i:Math.min(Math.max(-i,-s),i),d=-l*l+h*(h+2*s)+u);else h=o>0?-i:i,l=Math.max(0,-(o*h+a)),d=-l*l+h*(h+2*s)+u;return n&&n.copy(this.direction).multiplyScalar(l).add(this.origin),r&&r.copy(jO).multiplyScalar(h).add(VO),d}intersectSphere(e,t){zO.subVectors(e.center,this.origin);const n=zO.dot(this.direction),r=zO.dot(zO)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,zO)}intersectTriangle(e,t,n,r,i){qO.subVectors(t,e),JO.subVectors(n,e),KO.crossVectors(qO,JO);let o,a=this.direction.dot(KO);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}WO.subVectors(this.origin,e);const s=o*this.direction.dot(JO.crossVectors(WO,JO));if(s<0)return null;const u=o*this.direction.dot(qO.cross(WO));if(u<0)return null;if(s+u>a)return null;const c=-o*WO.dot(KO);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class YO{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,u,c,l,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=u,g[6]=c,g[10]=l,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new YO).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/QO.setFromMatrixColumn(e,0).length(),i=1/QO.setFromMatrixColumn(e,1).length(),o=1/QO.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*l,r=a*c,i=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=n+r*u,t[5]=e-i*u,t[9]=-a*s,t[2]=i-e*u,t[6]=r+n*u,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*l,r=u*c,i=u*l;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*l,r=u*c,i=u*l;t[0]=e-i*a,t[4]=-o*l,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*l,r=a*c,i=a*l;t[0]=s*c,t[4]=r*u-n,t[8]=e*u+i,t[1]=s*l,t[5]=i*u+e,t[9]=n*u-r,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*u,r=a*s,i=a*u;t[0]=s*c,t[4]=i-e*l,t[8]=r*l+n,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=n*l+r,t[10]=e-i*l}else if("XZY"===e.order){const e=o*s,n=o*u,r=a*s,i=a*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=e*l+i,t[5]=o*c,t[9]=n*l-r,t[2]=r*l-n,t[6]=a*c,t[10]=i*l+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose($O,e,eN)}lookAt(e,t,n){const r=this.elements;return rN.subVectors(e,t),0===rN.lengthSq()&&(rN.z=1),rN.normalize(),tN.crossVectors(n,rN),0===tN.lengthSq()&&(1===Math.abs(n.z)?rN.x+=1e-4:rN.z+=1e-4,rN.normalize(),tN.crossVectors(n,rN)),tN.normalize(),nN.crossVectors(rN,tN),r[0]=tN.x,r[4]=nN.x,r[8]=rN.x,r[1]=tN.y,r[5]=nN.y,r[9]=rN.y,r[2]=tN.z,r[6]=nN.z,r[10]=rN.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],w=n[15],x=r[0],_=r[4],E=r[8],A=r[12],S=r[1],T=r[5],M=r[9],C=r[13],I=r[2],R=r[6],P=r[10],L=r[14],B=r[3],k=r[7],D=r[11],O=r[15];return i[0]=o*x+a*S+s*I+u*B,i[4]=o*_+a*T+s*R+u*k,i[8]=o*E+a*M+s*P+u*D,i[12]=o*A+a*C+s*L+u*O,i[1]=c*x+l*S+h*I+d*B,i[5]=c*_+l*T+h*R+d*k,i[9]=c*E+l*M+h*P+d*D,i[13]=c*A+l*C+h*L+d*O,i[2]=f*x+p*S+m*I+g*B,i[6]=f*_+p*T+m*R+g*k,i[10]=f*E+p*M+m*P+g*D,i[14]=f*A+p*C+m*L+g*O,i[3]=v*x+y*S+b*I+w*B,i[7]=v*_+y*T+b*R+w*k,i[11]=v*E+y*M+b*P+w*D,i[15]=v*A+y*C+b*L+w*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],d=e[14];return e[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*u*h+i*o*h-r*o*d+r*u*c-i*s*c)+e[11]*(+t*u*l-t*a*d-i*o*l+n*o*d+i*a*c-n*u*c)+e[15]*(-r*a*c-t*s*l+t*a*h+r*o*l-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=l*m*u-p*h*u+p*s*d-a*m*d-l*s*g+a*h*g,y=f*h*u-c*m*u-f*s*d+o*m*d+c*s*g-o*h*g,b=c*p*u-f*l*u+f*a*d-o*p*d-c*a*g+o*l*g,w=f*l*s-c*p*s-f*a*h+o*p*h+c*a*m-o*l*m,x=t*v+n*y+r*b+i*w;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/x;return e[0]=v*_,e[1]=(p*h*i-l*m*i-p*r*d+n*m*d+l*r*g-n*h*g)*_,e[2]=(a*m*i-p*s*i+p*r*u-n*m*u-a*r*g+n*s*g)*_,e[3]=(l*s*i-a*h*i-l*r*u+n*h*u+a*r*d-n*s*d)*_,e[4]=y*_,e[5]=(c*m*i-f*h*i+f*r*d-t*m*d-c*r*g+t*h*g)*_,e[6]=(f*s*i-o*m*i-f*r*u+t*m*u+o*r*g-t*s*g)*_,e[7]=(o*h*i-c*s*i+c*r*u-t*h*u-o*r*d+t*s*d)*_,e[8]=b*_,e[9]=(f*l*i-c*p*i-f*n*d+t*p*d+c*n*g-t*l*g)*_,e[10]=(o*p*i-f*a*i+f*n*u-t*p*u-o*n*g+t*a*g)*_,e[11]=(c*a*i-o*l*i-c*n*u+t*l*u+o*n*d-t*a*d)*_,e[12]=w*_,e[13]=(c*p*r-f*l*r+f*n*h-t*p*h-c*n*m+t*l*m)*_,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*_,e[15]=(o*l*r-c*a*r+c*n*s-t*l*s-o*n*h+t*a*h)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,h=i*u,d=i*c,f=i*l,p=o*c,m=o*l,g=a*l,v=s*u,y=s*c,b=s*l,w=n.x,x=n.y,_=n.z;return r[0]=(1-(p+g))*w,r[1]=(d+b)*w,r[2]=(f-y)*w,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*_,r[9]=(m-v)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=QO.set(r[0],r[1],r[2]).length();const o=QO.set(r[4],r[5],r[6]).length(),a=QO.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ZO.copy(this);const s=1/i,u=1/o,c=1/a;return ZO.elements[0]*=s,ZO.elements[1]*=s,ZO.elements[2]*=s,ZO.elements[4]*=u,ZO.elements[5]*=u,ZO.elements[6]*=u,ZO.elements[8]*=c,ZO.elements[9]*=c,ZO.elements[10]*=c,t.setFromRotationMatrix(ZO),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),u=1/(n-r),c=1/(o-i),l=(t+e)*s,h=(n+r)*u,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}YO.prototype.isMatrix4=!0;const QO=new bO,ZO=new YO,$O=new bO(0,0,0),eN=new bO(1,1,1),tN=new bO,nN=new bO,rN=new bO,iN=new YO,oN=new yO;class aN{constructor(e=0,t=0,n=0,r=aN.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],l=r[2],h=r[6],d=r[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(eO(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-eO(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-l,i),this._z=0);break;case"ZXY":this._x=Math.asin(eO(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-l,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-eO(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(eO(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-l,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-eO(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return iN.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iN,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return oN.setFromEuler(this),this.setFromQuaternion(oN,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new bO(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}aN.prototype.isEuler=!0,aN.DefaultOrder="XYZ",aN.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class sN{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let uN=0;const cN=new bO,lN=new yO,hN=new YO,dN=new bO,fN=new bO,pN=new bO,mN=new yO,gN=new bO(1,0,0),vN=new bO(0,1,0),yN=new bO(0,0,1),bN={type:"added"},wN={type:"removed"};class xN extends KD{constructor(){super(),Object.defineProperty(this,"id",{value:uN++}),this.uuid=$D(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xN.DefaultUp.clone();const e=new bO,t=new aN,n=new yO,r=new bO(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new YO},normalMatrix:{value:new uO}}),this.matrix=new YO,this.matrixWorld=new YO,this.matrixAutoUpdate=xN.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new sN,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return lN.setFromAxisAngle(e,t),this.quaternion.multiply(lN),this}rotateOnWorldAxis(e,t){return lN.setFromAxisAngle(e,t),this.quaternion.premultiply(lN),this}rotateX(e){return this.rotateOnAxis(gN,e)}rotateY(e){return this.rotateOnAxis(vN,e)}rotateZ(e){return this.rotateOnAxis(yN,e)}translateOnAxis(e,t){return cN.copy(e).applyQuaternion(this.quaternion),this.position.add(cN.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(gN,e)}translateY(e){return this.translateOnAxis(vN,e)}translateZ(e){return this.translateOnAxis(yN,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(hN.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?dN.copy(e):dN.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),fN.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hN.lookAt(fN,dN,this.up):hN.lookAt(dN,fN,this.up),this.quaternion.setFromRotationMatrix(hN),r&&(hN.extractRotation(r.matrixWorld),lN.setFromRotationMatrix(hN),this.quaternion.premultiply(lN.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bN)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wN)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(wN)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),hN.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),hN.multiply(e.parent.matrixWorld)),e.applyMatrix4(hN),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new bO),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new yO),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fN,e,pN),e}getWorldScale(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new bO),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(fN,mN,e),e}getWorldDirection(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new bO),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),u=o(e.skeletons),c=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),u.length>0&&(n.skeletons=u),c.length>0&&(n.animations=c)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}xN.DefaultUp=new bO(0,1,0),xN.DefaultMatrixAutoUpdate=!0,xN.prototype.isObject3D=!0;const _N=new bO,EN=new bO,AN=new uO;class SN{constructor(e=new bO(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=_N.subVectors(n,t).cross(EN.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new bO),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new bO);const n=e.delta(_N),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new bO),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||AN.getNormalMatrix(e),r=this.coplanarPoint(_N).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}SN.prototype.isPlane=!0;const TN=new bO,MN=new bO,CN=new bO,IN=new bO,RN=new bO,PN=new bO,LN=new bO,BN=new bO,kN=new bO,DN=new bO;class ON{constructor(e=new bO,t=new bO,n=new bO){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new bO),r.subVectors(n,t),TN.subVectors(e,t),r.cross(TN);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){TN.subVectors(r,t),MN.subVectors(n,t),CN.subVectors(e,t);const o=TN.dot(TN),a=TN.dot(MN),s=TN.dot(CN),u=MN.dot(MN),c=MN.dot(CN),l=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new bO),0===l)return i.set(-2,-1,-1);const h=1/l,d=(u*s-a*c)*h,f=(o*c-a*s)*h;return i.set(1-d-f,f,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,IN),IN.x>=0&&IN.y>=0&&IN.x+IN.y<=1}static getUV(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,IN),s.set(0,0),s.addScaledVector(i,IN.x),s.addScaledVector(o,IN.y),s.addScaledVector(a,IN.z),s}static isFrontFacing(e,t,n,r){return TN.subVectors(n,t),MN.subVectors(e,t),TN.cross(MN).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return TN.subVectors(this.c,this.b),MN.subVectors(this.a,this.b),.5*TN.cross(MN).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new bO),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ON.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new SN),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ON.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return ON.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return ON.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ON.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new bO);const n=this.a,r=this.b,i=this.c;let o,a;RN.subVectors(r,n),PN.subVectors(i,n),BN.subVectors(e,n);const s=RN.dot(BN),u=PN.dot(BN);if(s<=0&&u<=0)return t.copy(n);kN.subVectors(e,r);const c=RN.dot(kN),l=PN.dot(kN);if(c>=0&&l<=c)return t.copy(r);const h=s*l-c*u;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(RN,o);DN.subVectors(e,i);const d=RN.dot(DN),f=PN.dot(DN);if(f>=0&&d<=f)return t.copy(i);const p=d*u-s*f;if(p<=0&&u>=0&&f<=0)return a=u/(u-f),t.copy(n).addScaledVector(PN,a);const m=c*f-d*l;if(m<=0&&l-c>=0&&d-f>=0)return LN.subVectors(i,r),a=(l-c)/(l-c+(d-f)),t.copy(r).addScaledVector(LN,a);const g=1/(m+p+h);return o=p*g,a=h*g,t.copy(n).addScaledVector(RN,o).addScaledVector(PN,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let NN=0;class FN extends KD{constructor(){super(),Object.defineProperty(this,"id",{value:NN++}),this.uuid=$D(),this.name="",this.type="Material",this.fog=!0,this.blending=BL,this.side=ML,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=JL,this.blendDst=KL,this.blendEquation=FL,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=rB,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=OD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_D,this.stencilZFail=_D,this.stencilZPass=_D,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===RL;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==BL&&(n.blending=this.blending),this.side!==ML&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}FN.prototype.isMaterial=!0;const UN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},GN={h:0,s:0,l:0},HN={h:0,s:0,l:0};function zN(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function VN(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function jN(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class WN{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=tO(e,1),t=eO(t,0,1),n=eO(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=zN(i,r,e+1/3),this.g=zN(i,r,e),this.b=zN(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=UN[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=VN(e.r),this.g=VN(e.g),this.b=VN(e.b),this}copyLinearToSRGB(e){return this.r=jN(e.r),this.g=jN(e.g),this.b=jN(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const u=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=u<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=u,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(GN),GN.h+=e,GN.s+=t,GN.l+=n,this.setHSL(GN.h,GN.s,GN.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(GN),e.getHSL(HN);const n=nO(GN.h,HN.h,t),r=nO(GN.s,HN.s,t),i=nO(GN.l,HN.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}WN.NAMES=UN,WN.prototype.isColor=!0,WN.prototype.r=1,WN.prototype.g=1,WN.prototype.b=1;class qN extends FN{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new WN(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=uB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this}}qN.prototype.isMeshBasicMaterial=!0;const JN=new bO,KN=new sO;class XN{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=ND,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new WN),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new sO),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new bO),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new pO),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)KN.fromBufferAttribute(this,t),KN.applyMatrix3(e),this.setXY(t,KN.x,KN.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)JN.fromBufferAttribute(this,t),JN.applyMatrix3(e),this.setXYZ(t,JN.x,JN.y,JN.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)JN.x=this.getX(t),JN.y=this.getY(t),JN.z=this.getZ(t),JN.applyMatrix4(e),this.setXYZ(t,JN.x,JN.y,JN.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)JN.x=this.getX(t),JN.y=this.getY(t),JN.z=this.getZ(t),JN.applyNormalMatrix(e),this.setXYZ(t,JN.x,JN.y,JN.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)JN.x=this.getX(t),JN.y=this.getY(t),JN.z=this.getZ(t),JN.transformDirection(e),this.setXYZ(t,JN.x,JN.y,JN.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==ND&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}XN.prototype.isBufferAttribute=!0;class YN extends XN{constructor(e,t,n){super(new Int8Array(e),t,n)}}class QN extends XN{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class ZN extends XN{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class $N extends XN{constructor(e,t,n){super(new Int16Array(e),t,n)}}class eF extends XN{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class tF extends XN{constructor(e,t,n){super(new Int32Array(e),t,n)}}class nF extends XN{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class rF extends XN{constructor(e,t,n){super(new Uint16Array(e),t,n)}}rF.prototype.isFloat16BufferAttribute=!0;class iF extends XN{constructor(e,t,n){super(new Float32Array(e),t,n)}}class oF extends XN{constructor(e,t,n){super(new Float64Array(e),t,n)}}function aF(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}const sF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function uF(e,t){return new sF[e](t)}let cF=0;const lF=new YO,hF=new xN,dF=new bO,fF=new _O,pF=new _O,mF=new bO;class gF extends KD{constructor(){super(),Object.defineProperty(this,"id",{value:cF++}),this.uuid=$D(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(aF(e)>65535?nF:eF)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new uO).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return lF.makeRotationFromQuaternion(e),this.applyMatrix4(lF),this}rotateX(e){return lF.makeRotationX(e),this.applyMatrix4(lF),this}rotateY(e){return lF.makeRotationY(e),this.applyMatrix4(lF),this}rotateZ(e){return lF.makeRotationZ(e),this.applyMatrix4(lF),this}translate(e,t,n){return lF.makeTranslation(e,t,n),this.applyMatrix4(lF),this}scale(e,t,n){return lF.makeScale(e,t,n),this.applyMatrix4(lF),this}lookAt(e){return hF.lookAt(e),hF.updateMatrix(),this.applyMatrix4(hF.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dF).negate(),this.translate(dF.x,dF.y,dF.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new iF(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new _O);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new bO(-1/0,-1/0,-1/0),new bO(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];fF.setFromBufferAttribute(n),this.morphTargetsRelative?(mF.addVectors(this.boundingBox.min,fF.min),this.boundingBox.expandByPoint(mF),mF.addVectors(this.boundingBox.max,fF.max),this.boundingBox.expandByPoint(mF)):(this.boundingBox.expandByPoint(fF.min),this.boundingBox.expandByPoint(fF.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new HO);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new bO,1/0);if(e){const n=this.boundingSphere.center;if(fF.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];pF.setFromBufferAttribute(n),this.morphTargetsRelative?(mF.addVectors(fF.min,pF.min),fF.expandByPoint(mF),mF.addVectors(fF.max,pF.max),fF.expandByPoint(mF)):(fF.expandByPoint(pF.min),fF.expandByPoint(pF.max))}fF.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)mF.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(mF));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)mF.fromBufferAttribute(o,t),a&&(dF.fromBufferAttribute(e,t),mF.add(dF)),r=Math.max(r,n.distanceToSquared(mF))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new XN(new Float32Array(4*a),4));const s=t.tangent.array,u=[],c=[];for(let e=0;e<a;e++)u[e]=new bO,c[e]=new bO;const l=new bO,h=new bO,d=new bO,f=new sO,p=new sO,m=new sO,g=new bO,v=new bO;function y(e,t,n){l.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),f.fromArray(o,2*e),p.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(l),d.sub(l),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(i),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const w=new bO,x=new bO,_=new bO,E=new bO;function A(e){_.fromArray(i,3*e),E.copy(_);const t=u[e];w.copy(t),w.sub(_.multiplyScalar(_.dot(t))).normalize(),x.crossVectors(E,t);const n=x.dot(c[e])<0?-1:1;s[4*e]=w.x,s[4*e+1]=w.y,s[4*e+2]=w.z,s[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)A(n[e+0]),A(n[e+1]),A(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new XN(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new bO,i=new bO,o=new bO,a=new bO,s=new bO,u=new bO,c=new bO,l=new bO;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),l.subVectors(r,i),c.cross(l),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),u.fromBufferAttribute(n,p),a.add(c),s.add(c),u.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,u.x,u.y,u.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),l.subVectors(r,i),c.cross(l),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s);for(let e=0,t=s;e<u;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)mF.fromBufferAttribute(e,t),mF.normalize(),e.setXYZ(t,mF.x,mF.y,mF.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let e=0,i=t.length;e<i;e++){a=t[e]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new XN(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new gF,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new gF).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}gF.prototype.isBufferGeometry=!0;const vF=new YO,yF=new XO,bF=new HO,wF=new bO,xF=new bO,_F=new bO,EF=new bO,AF=new bO,SF=new bO,TF=new bO,MF=new bO,CF=new bO,IF=new sO,RF=new sO,PF=new sO,LF=new bO,BF=new bO;class kF extends xN{constructor(e=new gF,t=new qN){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),bF.copy(n.boundingSphere),bF.applyMatrix4(i),!1===e.ray.intersectsSphere(bF))return;if(vF.copy(i).invert(),yF.copy(e.ray).applyMatrix4(vF),null!==n.boundingBox&&!1===yF.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,l=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=r[f.materialIndex];for(let n=Math.max(f.start,d.start),r=Math.min(f.start+f.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=DF(this,p,e,yF,a,s,u,c,l,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=f.materialIndex,t.push(o))}}else for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),f=i.getX(n+2);o=DF(this,r,e,yF,a,s,u,c,l,h,d,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],f=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3)o=DF(this,f,e,yF,a,s,u,c,l,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}else for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3)o=DF(this,r,e,yF,a,s,u,c,l,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function DF(e,t,n,r,i,o,a,s,u,c,l,h){wF.fromBufferAttribute(i,c),xF.fromBufferAttribute(i,l),_F.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){TF.set(0,0,0),MF.set(0,0,0),CF.set(0,0,0);for(let e=0,t=o.length;e<t;e++){const t=d[e],n=o[e];0!==t&&(EF.fromBufferAttribute(n,c),AF.fromBufferAttribute(n,l),SF.fromBufferAttribute(n,h),a?(TF.addScaledVector(EF,t),MF.addScaledVector(AF,t),CF.addScaledVector(SF,t)):(TF.addScaledVector(EF.sub(wF),t),MF.addScaledVector(AF.sub(xF),t),CF.addScaledVector(SF.sub(_F),t)))}wF.add(TF),xF.add(MF),_F.add(CF)}e.isSkinnedMesh&&(e.boneTransform(c,wF),e.boneTransform(l,xF),e.boneTransform(h,_F));const f=function(e,t,n,r,i,o,a,s){let u;if(u=t.side===CL?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==IL,s),null===u)return null;BF.copy(s),BF.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(BF);return c<n.near||c>n.far?null:{distance:c,point:BF.clone(),object:e}}(e,t,n,r,wF,xF,_F,LF);if(f){s&&(IF.fromBufferAttribute(s,c),RF.fromBufferAttribute(s,l),PF.fromBufferAttribute(s,h),f.uv=ON.getUV(LF,wF,xF,_F,IF,RF,PF,new sO)),u&&(IF.fromBufferAttribute(u,c),RF.fromBufferAttribute(u,l),PF.fromBufferAttribute(u,h),f.uv2=ON.getUV(LF,wF,xF,_F,IF,RF,PF,new sO));const e={a:c,b:l,c:h,normal:new bO,materialIndex:0};ON.getNormal(wF,xF,_F,e.normal),f.face=e}return f}kF.prototype.isMesh=!0;class OF extends gF{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],u=[],c=[],l=[];let h=0,d=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,b=f/g,w=o/2,x=f/2,_=p/2,E=m+1,A=g+1;let S=0,T=0;const M=new bO;for(let o=0;o<A;o++){const a=o*b-x;for(let s=0;s<E;s++){const h=s*y-w;M[e]=h*r,M[t]=a*i,M[n]=_,u.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=p>0?1:-1,c.push(M.x,M.y,M.z),l.push(s/m),l.push(1-o/g),S+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+E*e,r=h+t+E*(e+1),i=h+(t+1)+E*(e+1),o=h+(t+1)+E*e;s.push(n,r,o),s.push(r,i,o),T+=6}a.addGroup(d,T,v),d+=T,h+=S}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new iF(u,3)),this.setAttribute("normal",new iF(c,3)),this.setAttribute("uv",new iF(l,2))}}function NF(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function FF(e){const t={};for(let n=0;n<e.length;n++){const r=NF(e[n]);for(const e in r)t[e]=r[e]}return t}const UF={clone:NF,merge:FF};class GF extends FN{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=NF(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}GF.prototype.isShaderMaterial=!0;class HF extends xN{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new YO,this.projectionMatrix=new YO,this.projectionMatrixInverse=new YO}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new bO),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}HF.prototype.isCamera=!0;class zF extends HF{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ZD*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*QD*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ZD*Math.atan(Math.tan(.5*QD*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*QD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}zF.prototype.isPerspectiveCamera=!0;const VF=90;class jF extends xN{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new zF(VF,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new bO(1,0,0)),this.add(r);const i=new zF(VF,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new bO(-1,0,0)),this.add(i);const o=new zF(VF,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new bO(0,1,0)),this.add(o);const a=new zF(VF,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new bO(0,-1,0)),this.add(a);const s=new zF(VF,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new bO(0,0,1)),this.add(s);const u=new zF(VF,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new bO(0,0,-1)),this.add(u)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,u]=this.children,c=e.xr.enabled,l=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,u),e.setRenderTarget(l),e.xr.enabled=c}}class WF extends dO{constructor(e,t,n,r,i,o,a,s,u,c){super(e=void 0!==e?e:[],t=void 0!==t?t:yB,n,r,i,o,a=void 0!==a?a:YB,s,u,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}WF.prototype.isCubeTexture=!0;class qF extends mO{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new WF(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:LB,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=QB,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new OF(5,5,5),a=new GF({name:"CubemapFromEquirect",uniforms:NF(n),vertexShader:r,fragmentShader:i,side:CL,blending:LL});a.uniforms.tEquirect.value=t;const s=new kF(o,a),u=t.minFilter;return t.minFilter===DB&&(t.minFilter=LB),new jF(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}qF.prototype.isWebGLCubeRenderTarget=!0;const JF=new HO,KF=new bO;class XF{constructor(e=new SN,t=new SN,n=new SN,r=new SN,i=new SN,o=new SN){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,l-s,p-h,y-m).normalize(),t[1].setComponents(a+r,l+s,p+h,y+m).normalize(),t[2].setComponents(a+i,l+u,p+d,y+g).normalize(),t[3].setComponents(a-i,l-u,p-d,y-g).normalize(),t[4].setComponents(a-o,l-c,p-f,y-v).normalize(),t[5].setComponents(a+o,l+c,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),JF.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(JF)}intersectsSprite(e){return JF.center.set(0,0,0),JF.radius=.7071067811865476,JF.applyMatrix4(e.matrixWorld),this.intersectsSphere(JF)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(KF.x=r.normal.x>0?e.max.x:e.min.x,KF.y=r.normal.y>0?e.max.y:e.min.y,KF.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(KF)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function YF(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function QF(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}class ZF extends gF{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),u=a+1,c=s+1,l=e/a,h=t/s,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<u;n++){const r=n*l-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+u*e,r=t+u*(e+1),i=t+1+u*(e+1),o=t+1+u*e;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new iF(f,3)),this.setAttribute("normal",new iF(p,3)),this.setAttribute("uv",new iF(m,2))}}const $F={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), rawDiffuseColor, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), rawDiffuseColor, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSNMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition.xyz / vWorldPosition.w;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\tfloat ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );\n\tvec3 f0 = vec3( pow( ior - 1.0, 2.0 ) / pow( ior + 1.0, 2.0 ) );\n\tvec3 f90 = vec3( 1.0 );\n\tvec3 f_transmission = totalTransmission * getIBLVolumeRefraction(\n\t\tnormal, v, viewDir, roughnessFactor, diffuseColor.rgb, f0, f90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance);\n\tdiffuseColor.rgb = mix( diffuseColor.rgb, f_transmission, totalTransmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec4 vWorldPosition;\n\tvec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {\n\t\tvec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length(vec3(modelMatrix[0].xyz));\n\t\tmodelScale.y = length(vec3(modelMatrix[1].xyz));\n\t\tmodelScale.z = length(vec3(modelMatrix[2].xyz));\n\t\treturn normalize(refractionVector) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness(float roughness, float ior) {\n\t\treturn roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);\n\t}\n\tvec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {\n\t\tfloat framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);\n\t\treturn texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;\n\t}\n\tvec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {\n\t\tif (attenuationDistance == 0.0) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;\n\t\t\tvec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec3 getIBLVolumeRefraction(vec3 n, vec3 v, vec3 viewDir, float perceptualRoughness, vec3 baseColor, vec3 f0, vec3 f90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec3 attenuationColor, float attenuationDistance) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);\n\t\tvec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);\n\t\tfloat NdotV = saturate(dot(n, viewDir));\n\t\tvec2 brdf = integrateSpecularBRDF(NdotV, perceptualRoughness);\n\t\tvec3 specularColor = f0 * brdf.x + f90 * brdf.y;\n\t\treturn (1.0 - specularColor) * attenuatedColor * baseColor;\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform vec3 attenuationColor;\n\tuniform float attenuationDistance;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <transmission_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef USE_TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t\tfloat thicknessFactor = thickness;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\tvec3 rawDiffuseColor = diffuseColor.rgb;\n\t#include <transmission_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#ifdef USE_TRANSMISSION\n\tvarying vec4 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition;\n#endif\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},eU={common:{diffuse:{value:new WN(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new uO},uv2Transform:{value:new uO},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new sO(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new WN(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new WN(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new uO}},sprite:{diffuse:{value:new WN(16777215)},opacity:{value:1},center:{value:new sO(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new uO}}},tU={basic:{uniforms:FF([eU.common,eU.specularmap,eU.envmap,eU.aomap,eU.lightmap,eU.fog]),vertexShader:$F.meshbasic_vert,fragmentShader:$F.meshbasic_frag},lambert:{uniforms:FF([eU.common,eU.specularmap,eU.envmap,eU.aomap,eU.lightmap,eU.emissivemap,eU.fog,eU.lights,{emissive:{value:new WN(0)}}]),vertexShader:$F.meshlambert_vert,fragmentShader:$F.meshlambert_frag},phong:{uniforms:FF([eU.common,eU.specularmap,eU.envmap,eU.aomap,eU.lightmap,eU.emissivemap,eU.bumpmap,eU.normalmap,eU.displacementmap,eU.fog,eU.lights,{emissive:{value:new WN(0)},specular:{value:new WN(1118481)},shininess:{value:30}}]),vertexShader:$F.meshphong_vert,fragmentShader:$F.meshphong_frag},standard:{uniforms:FF([eU.common,eU.envmap,eU.aomap,eU.lightmap,eU.emissivemap,eU.bumpmap,eU.normalmap,eU.displacementmap,eU.roughnessmap,eU.metalnessmap,eU.fog,eU.lights,{emissive:{value:new WN(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$F.meshphysical_vert,fragmentShader:$F.meshphysical_frag},toon:{uniforms:FF([eU.common,eU.aomap,eU.lightmap,eU.emissivemap,eU.bumpmap,eU.normalmap,eU.displacementmap,eU.gradientmap,eU.fog,eU.lights,{emissive:{value:new WN(0)}}]),vertexShader:$F.meshtoon_vert,fragmentShader:$F.meshtoon_frag},matcap:{uniforms:FF([eU.common,eU.bumpmap,eU.normalmap,eU.displacementmap,eU.fog,{matcap:{value:null}}]),vertexShader:$F.meshmatcap_vert,fragmentShader:$F.meshmatcap_frag},points:{uniforms:FF([eU.points,eU.fog]),vertexShader:$F.points_vert,fragmentShader:$F.points_frag},dashed:{uniforms:FF([eU.common,eU.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$F.linedashed_vert,fragmentShader:$F.linedashed_frag},depth:{uniforms:FF([eU.common,eU.displacementmap]),vertexShader:$F.depth_vert,fragmentShader:$F.depth_frag},normal:{uniforms:FF([eU.common,eU.bumpmap,eU.normalmap,eU.displacementmap,{opacity:{value:1}}]),vertexShader:$F.normal_vert,fragmentShader:$F.normal_frag},sprite:{uniforms:FF([eU.sprite,eU.fog]),vertexShader:$F.sprite_vert,fragmentShader:$F.sprite_frag},background:{uniforms:{uvTransform:{value:new uO},t2D:{value:null}},vertexShader:$F.background_vert,fragmentShader:$F.background_frag},cube:{uniforms:FF([eU.envmap,{opacity:{value:1}}]),vertexShader:$F.cube_vert,fragmentShader:$F.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$F.equirect_vert,fragmentShader:$F.equirect_frag},distanceRGBA:{uniforms:FF([eU.common,eU.displacementmap,{referencePosition:{value:new bO},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$F.distanceRGBA_vert,fragmentShader:$F.distanceRGBA_frag},shadow:{uniforms:FF([eU.lights,eU.fog,{color:{value:new WN(0)},opacity:{value:1}}]),vertexShader:$F.shadow_vert,fragmentShader:$F.shadow_frag}};function nU(e,t,n,r,i){const o=new WN(0);let a,s,u=0,c=null,l=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,d(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,d(o,u)},render:function(n,i){let f=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));const m=e.xr,g=m.getSession&&m.getSession();g&&"additive"===g.environmentBlendMode&&(p=null),null===p?d(o,u):p&&p.isColor&&(d(p,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===_B)?(void 0===s&&(s=new kF(new OF(1,1,1),new GF({name:"BackgroundCubeMaterial",uniforms:NF(tU.cube.uniforms),vertexShader:tU.cube.vertexShader,fragmentShader:tU.cube.fragmentShader,side:CL,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(s)),s.material.uniforms.envMap.value=p,s.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,c===p&&l===p.version&&h===e.toneMapping||(s.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):p&&p.isTexture&&(void 0===a&&(a=new kF(new ZF(2,2),new GF({name:"BackgroundMaterial",uniforms:NF(tU.background.uniforms),vertexShader:tU.background.vertexShader,fragmentShader:tU.background.fragmentShader,side:ML,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),c===p&&l===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=p,l=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function rU(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},u=d(null);let c=u;function l(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function y(){b(),c!==u&&(c=u,l(c.object))}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){let w=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let u=s[t.id];void 0===u&&(u={},s[t.id]=u);let c=u[n.id];void 0===c&&(c={},u[n.id]=c);let l=c[a];return void 0===l&&(l=d(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=l),l}(y,h,u);c!==t&&(c=t,l(c.object)),w=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],o=r[e];if(void 0===t)return!0;if(t.attribute!==o)return!0;if(t.data!==o.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(y,b),w&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],o={};o.attribute=t,t.data&&(o.data=t.data),n[e]=o,i++}c.attributes=n,c.attributesNum=i,c.index=t}(y,b)}else{const e=!0===u.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,w=!0)}!0===i.isInstancedMesh&&(w=!0),null!==b&&n.update(b,34963),w&&(function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const u=s.attributes,c=a.getAttributes(),l=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r>=0){const o=u[t];if(void 0!==o){const t=o.normalized,i=o.itemSize,a=n.get(o);if(void 0===a)continue;const u=a.buffer,c=a.type,l=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):p(r),e.bindBuffer(34962,u),v(r,i,c,t,a*l,h*l)}else o.isInstancedBufferAttribute?(m(r,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):p(r),e.bindBuffer(34962,u),v(r,i,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r+0,4,a,!1,64,0),e.vertexAttribPointer(r+1,4,a,!1,64,16),e.vertexAttribPointer(r+2,4,a,!1,64,32),e.vertexAttribPointer(r+3,4,a,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const o=t.buffer,a=t.type;m(r,1),e.bindBuffer(34962,o),e.vertexAttribPointer(r,3,a,!1,12,0)}else if(void 0!==l){const n=l[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}g()}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:g}}function iU(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let u,c;if(i)u=e,c="drawArraysInstanced";else if(u=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===u)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[c](o,r,a,s),n.update(a,o,s)}}function oU(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const u=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(36183):0}}function aU(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new SN,s=new uO,u={value:null,needsUpdate:!1};function c(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function l(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=u.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}u.value=c,u.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=l(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,l(null)},this.endShadows=function(){o=!1,c()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!f)o?l(null):c();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;u.value=i,i=l(h,a,t,s);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function sU(e){let t=new WeakMap;function n(e,t){return t===wB?e.mapping=yB:t===xB&&(e.mapping=bB),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===wB||o===xB){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new qF(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function uU(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function cU(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const u=o.get(s);u&&(t.remove(u),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(aF(n)>65535?nF:eF)(n,1);s.version=a;const u=o.get(e);u&&t.remove(u),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function lU(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,u,c){if(0===c)return;let l,h;if(i)l=e,h="drawElementsInstanced";else if(l=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===l)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[h](o,u,a,r*s,c),n.update(u,o,c)}}function hU(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function dU(e,t){return e[0]-t[0]}function fU(e,t){return Math.abs(t[1])-Math.abs(e[1])}function pU(e){const t={},n=new Float32Array(8),r=[];for(let e=0;e<8;e++)r[e]=[e,0];return{update:function(i,o,a,s){const u=i.morphTargetInfluences,c=void 0===u?0:u.length;let l=t[o.id];if(void 0===l){l=[];for(let e=0;e<c;e++)l[e]=[e,0];t[o.id]=l}for(let e=0;e<c;e++){const t=l[e];t[0]=e,t[1]=u[e]}l.sort(fU);for(let e=0;e<8;e++)e<c&&l[e][1]?(r[e][0]=l[e][0],r[e][1]=l[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(dU);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let f=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],a=t[1];i!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+e)!==h[i]&&o.setAttribute("morphTarget"+e,h[i]),d&&o.getAttribute("morphNormal"+e)!==d[i]&&o.setAttribute("morphNormal"+e,d[i]),n[e]=a,f+=a):(h&&!0===o.hasAttribute("morphTarget"+e)&&o.deleteAttribute("morphTarget"+e),d&&!0===o.hasAttribute("morphNormal"+e)&&o.deleteAttribute("morphNormal"+e),n[e]=0)}const p=o.morphTargetsRelative?1:1-f;s.getUniforms().setValue(e,"morphTargetBaseInfluence",p),s.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function mU(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,s=e.geometry,u=t.get(e,s);return i.get(u)!==a&&(t.update(u),i.set(u,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",o)&&e.addEventListener("dispose",o),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),u},dispose:function(){i=new WeakMap}}}tU.physical={uniforms:FF([tU.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new sO(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new WN(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new sO},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new WN(0)}}]),vertexShader:$F.meshphysical_vert,fragmentShader:$F.meshphysical_frag};class gU extends dO{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=MB,this.minFilter=MB,this.wrapR=SB,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}gU.prototype.isDataTexture2DArray=!0;class vU extends dO{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=MB,this.minFilter=MB,this.wrapR=SB,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}vU.prototype.isDataTexture3D=!0;const yU=new dO,bU=new gU,wU=new vU,xU=new WF,_U=[],EU=[],AU=new Float32Array(16),SU=new Float32Array(9),TU=new Float32Array(4);function MU(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=_U[i];if(void 0===o&&(o=new Float32Array(i),_U[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function CU(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function IU(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function RU(e,t){let n=EU[t];void 0===n&&(n=new Int32Array(t),EU[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function PU(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function LU(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(CU(n,t))return;e.uniform2fv(this.addr,t),IU(n,t)}}function BU(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(CU(n,t))return;e.uniform3fv(this.addr,t),IU(n,t)}}function kU(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(CU(n,t))return;e.uniform4fv(this.addr,t),IU(n,t)}}function DU(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(CU(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),IU(n,t)}else{if(CU(n,r))return;TU.set(r),e.uniformMatrix2fv(this.addr,!1,TU),IU(n,r)}}function OU(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(CU(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),IU(n,t)}else{if(CU(n,r))return;SU.set(r),e.uniformMatrix3fv(this.addr,!1,SU),IU(n,r)}}function NU(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(CU(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),IU(n,t)}else{if(CU(n,r))return;AU.set(r),e.uniformMatrix4fv(this.addr,!1,AU),IU(n,r)}}function FU(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function UU(e,t){const n=this.cache;CU(n,t)||(e.uniform2iv(this.addr,t),IU(n,t))}function GU(e,t){const n=this.cache;CU(n,t)||(e.uniform3iv(this.addr,t),IU(n,t))}function HU(e,t){const n=this.cache;CU(n,t)||(e.uniform4iv(this.addr,t),IU(n,t))}function zU(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function VU(e,t){const n=this.cache;CU(n,t)||(e.uniform2uiv(this.addr,t),IU(n,t))}function jU(e,t){const n=this.cache;CU(n,t)||(e.uniform3uiv(this.addr,t),IU(n,t))}function WU(e,t){const n=this.cache;CU(n,t)||(e.uniform4uiv(this.addr,t),IU(n,t))}function qU(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||yU,i)}function JU(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||wU,i)}function KU(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||xU,i)}function XU(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||bU,i)}function YU(e,t){e.uniform1fv(this.addr,t)}function QU(e,t){const n=MU(t,this.size,2);e.uniform2fv(this.addr,n)}function ZU(e,t){const n=MU(t,this.size,3);e.uniform3fv(this.addr,n)}function $U(e,t){const n=MU(t,this.size,4);e.uniform4fv(this.addr,n)}function eG(e,t){const n=MU(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function tG(e,t){const n=MU(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function nG(e,t){const n=MU(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function rG(e,t){e.uniform1iv(this.addr,t)}function iG(e,t){e.uniform2iv(this.addr,t)}function oG(e,t){e.uniform3iv(this.addr,t)}function aG(e,t){e.uniform4iv(this.addr,t)}function sG(e,t){e.uniform1uiv(this.addr,t)}function uG(e,t){e.uniform2uiv(this.addr,t)}function cG(e,t){e.uniform3uiv(this.addr,t)}function lG(e,t){e.uniform4uiv(this.addr,t)}function hG(e,t,n){const r=t.length,i=RU(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||yU,i[e])}function dG(e,t,n){const r=t.length,i=RU(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||xU,i[e])}function fG(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return PU;case 35664:return LU;case 35665:return BU;case 35666:return kU;case 35674:return DU;case 35675:return OU;case 35676:return NU;case 5124:case 35670:return FU;case 35667:case 35671:return UU;case 35668:case 35672:return GU;case 35669:case 35673:return HU;case 5125:return zU;case 36294:return VU;case 36295:return jU;case 36296:return WU;case 35678:case 36198:case 36298:case 36306:case 35682:return qU;case 35679:case 36299:case 36307:return JU;case 35680:case 36300:case 36308:case 36293:return KU;case 36289:case 36303:case 36311:case 36292:return XU}}(t.type)}function pG(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return YU;case 35664:return QU;case 35665:return ZU;case 35666:return $U;case 35674:return eG;case 35675:return tG;case 35676:return nG;case 5124:case 35670:return rG;case 35667:case 35671:return iG;case 35668:case 35672:return oG;case 35669:case 35673:return aG;case 5125:return sG;case 36294:return uG;case 36295:return cG;case 36296:return lG;case 35678:case 36198:case 36298:case 36306:case 35682:return hG;case 35680:case 36300:case 36308:case 36293:return dG}}(t.type)}function mG(e){this.id=e,this.seq=[],this.map={}}pG.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),IU(t,e)},mG.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const gG=/(\w+)(\])?(\[|\.)?/g;function vG(e,t){e.seq.push(t),e.map[t.id]=t}function yG(e,t,n){const r=e.name,i=r.length;for(gG.lastIndex=0;;){const o=gG.exec(r),a=gG.lastIndex;let s=o[1];const u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){vG(n,void 0===c?new fG(s,e,t):new pG(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new mG(s),vG(n,e)),n=e}}}function bG(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);yG(n,e.getUniformLocation(t,n.name),this)}}function wG(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}bG.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},bG.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},bG.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},bG.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let xG=0;function _G(e){switch(e){case cD:return["Linear","( value )"];case lD:return["sRGB","( value )"];case dD:return["RGBE","( value )"];case pD:return["RGBM","( value, 7.0 )"];case mD:return["RGBM","( value, 16.0 )"];case gD:return["RGBD","( value, 256.0 )"];case hD:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case fD:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function EG(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function AG(e,t){const n=_G(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function SG(e,t){const n=_G(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function TG(e,t){let n;switch(t){case dB:n="Linear";break;case fB:n="Reinhard";break;case pB:n="OptimizedCineon";break;case mB:n="ACESFilmic";break;case gB:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function MG(e){return""!==e}function CG(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function IG(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const RG=/^[ \t]*#include +<([\w\d./]+)>/gm;function PG(e){return e.replace(RG,LG)}function LG(e,t){const n=$F[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return PG(n)}const BG=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,kG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DG(e){return e.replace(kG,NG).replace(BG,OG)}function OG(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),NG(0,t,n,r)}function NG(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function FG(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function UG(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const u=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===AL?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===SL?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===TL&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case yB:case bB:t="ENVMAP_TYPE_CUBE";break;case _B:case EB:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),l=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case bB:case EB:t="ENVMAP_MODE_REFRACTION"}return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case uB:t="ENVMAP_BLENDING_MULTIPLY";break;case cB:t="ENVMAP_BLENDING_MIX";break;case lB:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission>0)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(MG).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(MG).join("\n"),g.length>0&&(g+="\n"),v=[f,p].filter(MG).join("\n"),v.length>0&&(v+="\n")):(g=[FG(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(MG).join("\n"),v=[f,FG(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+l:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+u:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==hB?"#define TONE_MAPPING":"",n.toneMapping!==hB?$F.tonemapping_pars_fragment:"",n.toneMapping!==hB?TG("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",$F.encodings_pars_fragment,n.map?AG("mapTexelToLinear",n.mapEncoding):"",n.matcap?AG("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?AG("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?AG("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?AG("lightMapTexelToLinear",n.lightMapEncoding):"",SG("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(MG).join("\n")),a=PG(a),a=CG(a,n),a=IG(a,n),s=PG(s),s=CG(s,n),s=IG(s,n),a=DG(a),s=DG(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===JD?"":"out highp vec4 pc_fragColor;",n.glslVersion===JD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const b=y+v+s,w=wG(i,35633,y+g+a),x=wG(i,35632,b);if(i.attachShader(m,w),i.attachShader(m,x),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(m).trim(),t=i.getShaderInfoLog(w).trim(),n=i.getShaderInfoLog(x).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(m,35714)){r=!1;const t=EG(i,w,"vertex"),n=EG(i,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(m,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let _,E;return i.deleteShader(w),i.deleteShader(x),this.getUniforms=function(){return void 0===_&&(_=new bG(i,m)),_},this.getAttributes=function(){return void 0===E&&(E=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,m)),E},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=xG++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}function GG(e,t,n,r,i,o){const a=[],s=r.isWebGL2,u=r.logarithmicDepthBuffer,c=r.floatVertexTextures,l=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function m(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=cD,t}return{getParameters:function(i,a,p,g,v){const y=g.fog,b=i.isMeshStandardMaterial?g.environment:null,w=t.get(i.envMap||b),x=f[i.type],_=v.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=l,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(v):0;let E,A;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),x){const e=tU[x];E=e.vertexShader,A=e.fragmentShader}else E=i.vertexShader,A=i.fragmentShader;const S=e.getRenderTarget();return{isWebGL2:s,shaderID:x,shaderName:i.type,vertexShader:E,fragmentShader:A,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===v.isInstancedMesh,instancingColor:!0===v.isInstancedMesh&&null!==v.instanceColor,supportsVertexTextures:h,outputEncoding:null!==S?m(S.texture):e.outputEncoding,map:!!i.map,mapEncoding:m(i.map),matcap:!!i.matcap,matcapEncoding:m(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:m(w),envMapCubeUV:!!w&&(w.mapping===_B||w.mapping===EB),lightMap:!!i.lightMap,lightMapEncoding:m(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:m(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===wD,tangentSpaceNormalMap:i.normalMapType===bD,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmission:!!i.transmission,transmissionMap:!!i.transmissionMap,thicknessMap:!!i.thicknessMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexAlphas:!0===i.vertexColors&&v.geometry&&v.geometry.attributes.color&&4===v.geometry.attributes.color.itemSize,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmission||i.transmissionMap||i.thicknessMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmission||i.transmissionMap||i.thicknessMap||!i.displacementMap),fog:!!y,useFog:i.fog,fogExp2:y&&y.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===v.isSkinnedMesh&&_>0,maxBones:_,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:hB,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===IL,flipSided:i.side===CL,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<p.length;e++)n.push(t[p[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=tU[t];n=UF.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=a.length;e<t;e++){const t=a[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new UG(e,n,t,i),a.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},programs:a}}function HG(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function zG(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function VG(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function jG(e){const t=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,u,c){let l=t[n];const h=e.get(o);return void 0===l?(l={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:u,group:c},t[n]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=o,l.program=h.program||a,l.groupOrder=s,l.renderOrder=r.renderOrder,l.z=u,l.group=c),n++,l}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,u,c){const l=s(e,t,n,a,u,c);n.transmission>0?i.push(l):!0===n.transparent?o.push(l):r.push(l)},unshift:function(e,t,n,a,u,c){const l=s(e,t,n,a,u,c);n.transmission>0?i.unshift(l):!0===n.transparent?o.unshift(l):r.unshift(l)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||zG),i.length>1&&i.sort(t||VG),o.length>1&&o.sort(t||VG)}}}function WG(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new jG(e),t.set(n,[i])):r>=t.get(n).length?(i=new jG(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function qG(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new bO,color:new WN};break;case"SpotLight":n={position:new bO,direction:new bO,color:new WN,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new bO,color:new WN,distance:0,decay:0};break;case"HemisphereLight":n={direction:new bO,skyColor:new WN,groundColor:new WN};break;case"RectAreaLight":n={color:new WN,position:new bO,halfWidth:new bO,halfHeight:new bO}}return e[t.id]=n,n}}}let JG=0;function KG(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function XG(e,t){const n=new qG,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sO};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sO,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new bO);const o=new bO,a=new YO,s=new YO;return{setup:function(o){let a=0,s=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,l=0,h=0,d=0,f=0,p=0,m=0,g=0;o.sort(KG);for(let e=0,t=o.length;e<t;e++){const t=o[e],v=t.color,y=t.intensity,b=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=v.r*y,s+=v.g*y,u+=v.b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=w,i.directionalShadowMatrix[c]=t.shadow.matrix,p++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(v).multiplyScalar(y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=w,i.spotShadowMatrix[h]=t.shadow.matrix,g++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(v).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[l]=n,i.pointShadowMap[l]=w,i.pointShadowMatrix[l]=t.shadow.matrix,m++}i.point[l]=e,l++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y),e.groundColor.copy(t.groundColor).multiplyScalar(y),i.hemi[f]=e,f++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=eU.LTC_FLOAT_1,i.rectAreaLTC2=eU.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=eU.LTC_HALF_1,i.rectAreaLTC2=eU.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=s,i.ambient[2]=u;const v=i.hash;v.directionalLength===c&&v.pointLength===l&&v.spotLength===h&&v.rectAreaLength===d&&v.hemiLength===f&&v.numDirectionalShadows===p&&v.numPointShadows===m&&v.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=d,i.point.length=l,i.hemi.length=f,i.directionalShadow.length=p,i.directionalShadowMap.length=p,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=p,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,v.directionalLength=c,v.pointLength=l,v.spotLength=h,v.rectAreaLength=d,v.hemiLength=f,v.numDirectionalShadows=p,v.numPointShadows=m,v.numSpotShadows=g,i.version=JG++)},setupView:function(e,t){let n=0,r=0,u=0,c=0,l=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[u];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),u++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(d.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[l];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),l++}}},state:i}}function YG(e,t){const n=new XG(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function QG(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new YG(e,t),n.set(r,[o])):i>=n.get(r).length?(o=new YG(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}class ZG extends FN{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=vD,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}ZG.prototype.isMeshDepthMaterial=!0;class $G extends FN{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new bO,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function eH(e,t,n){let r=new XF;const i=new sO,o=new sO,a=new pO,s=[],u=[],c={},l=n.maxTextureSize,h={0:CL,1:ML,2:IL},d=new GF({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new sO},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new gF;p.setAttribute("position",new XN(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new kF(p,d),g=this;function v(n,r){const i=t.update(m);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,f,m,null)}function y(e){const t=e<<0;let n=s[t];return void 0===n&&(n=new ZG({depthPacking:yD,morphTargets:e}),s[t]=n),n}function b(e){const t=e<<0;let n=u[t];return void 0===n&&(n=new $G({morphTargets:e}),u[t]=n),n}function w(t,n,r,i,o,a,s){let u=null,l=y,d=t.customDepthMaterial;if(!0===i.isPointLight&&(l=b,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0),u=l(e)}else u=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=u.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=u.clone(),n[t]=i),u=i}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=s===TL?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function x(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===TL)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let u=0,c=t.length;u<c;u++){const c=t[u],l=i[c.materialIndex];if(l&&l.visible){const t=w(n,r,l,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=w(n,r,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const u=n.children;for(let e=0,t=u.length;e<t;e++)x(u[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=AL,this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const u=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(LL),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let u=0,c=t.length;u<c;u++){const c=t[u],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),o.copy(h.mapSize),(i.x>l||i.y>l)&&(i.x>l&&(o.x=Math.floor(l/f.x),i.x=o.x*f.x,h.mapSize.x=o.x),i.y>l&&(o.y=Math.floor(l/f.y),i.y=o.y*f.y,h.mapSize.y=o.y)),null===h.map&&!h.isPointLightShadow&&this.type===TL){const e={minFilter:LB,magFilter:LB,format:QB};h.map=new mO(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.mapPass=new mO(i.x,i.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:MB,magFilter:MB,format:QB};h.map=new mO(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const p=h.getViewportCount();for(let e=0;e<p;e++){const t=h.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),h.updateMatrices(c,e),r=h.getFrustum(),x(n,s,h.camera,c,this.type)}h.isPointLightShadow||this.type!==TL||v(h,s),h.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(u,c,h)}}function tH(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new pO;let r=null;const i=new pO(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?N(2929):F(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case eB:e.depthFunc(512);break;case tB:e.depthFunc(519);break;case nB:e.depthFunc(513);break;case rB:e.depthFunc(515);break;case iB:e.depthFunc(514);break;case oB:e.depthFunc(518);break;case aB:e.depthFunc(516);break;case sB:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){t||(e?N(2960):F(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}};let s={},u=null,c={},l=null,h=!1,d=null,f=null,p=null,m=null,g=null,v=null,y=null,b=!1,w=null,x=null,_=null,E=null,A=null;const S=e.getParameter(35661);let T=!1,M=0;const C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(M=parseFloat(/^WebGL (\d)/.exec(C)[1]),T=M>=1):-1!==C.indexOf("OpenGL ES")&&(M=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),T=M>=2);let I=null,R={};const P=e.getParameter(3088),L=e.getParameter(2978),B=(new pO).fromArray(P),k=(new pO).fromArray(L);function D(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return o}const O={};function N(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function F(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}O[3553]=D(3553,3553,1),O[34067]=D(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),N(2929),o.setFunc(rB),z(!1),V(wL),N(2884),H(LL);const U={[FL]:32774,[UL]:32778,[GL]:32779};if(r)U[HL]=32775,U[zL]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(U[HL]=e.MIN_EXT,U[zL]=e.MAX_EXT)}const G={[VL]:0,[jL]:1,[WL]:768,[JL]:770,[$L]:776,[QL]:774,[XL]:772,[qL]:769,[KL]:771,[ZL]:775,[YL]:773};function H(t,n,r,i,o,a,s,u){if(t!==LL){if(!1===h&&(N(3042),h=!0),t===NL)o=o||n,a=a||r,s=s||i,n===f&&o===g||(e.blendEquationSeparate(U[n],U[o]),f=n,g=o),r===p&&i===m&&a===v&&s===y||(e.blendFuncSeparate(G[r],G[i],G[a],G[s]),p=r,m=i,v=a,y=s),d=t,b=null;else if(t!==d||u!==b){if(f===FL&&g===FL||(e.blendEquation(32774),f=FL,g=FL),u)switch(t){case BL:e.blendFuncSeparate(1,771,1,771);break;case kL:e.blendFunc(1,1);break;case DL:e.blendFuncSeparate(0,0,769,771);break;case OL:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case BL:e.blendFuncSeparate(770,771,1,771);break;case kL:e.blendFunc(770,1);break;case DL:e.blendFunc(0,769);break;case OL:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,m=null,v=null,y=null,d=t,b=u}}else!0===h&&(F(3042),h=!1)}function z(t){w!==t&&(t?e.frontFace(2304):e.frontFace(2305),w=t)}function V(t){t!==bL?(N(2884),t!==x&&(t===wL?e.cullFace(1029):t===xL?e.cullFace(1028):e.cullFace(1032))):F(2884),x=t}function j(t,n,r){t?(N(32823),E===n&&A===r||(e.polygonOffset(n,r),E=n,A=r)):F(32823)}function W(t){void 0===t&&(t=33984+S-1),I!==t&&(e.activeTexture(t),I=t)}return{buffers:{color:i,depth:o,stencil:a},enable:N,disable:F,bindFramebuffer:function(t,n){return null===n&&null!==u&&(n=u),c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,r&&(36009===t&&(c[36160]=n),36160===t&&(c[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==u&&(e.bindFramebuffer(36160,t),u=t)},useProgram:function(t){return l!==t&&(e.useProgram(t),l=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===IL?F(2884):N(2884);let n=e.side===CL;t&&(n=!n),z(n),e.blending===BL&&!1===e.transparent?H(LL):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;a.setTest(r),r&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),j(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?N(32926):F(32926)},setFlipSided:z,setCullFace:V,setLineWidth:function(t){t!==_&&(T&&e.lineWidth(t),_=t)},setPolygonOffset:j,setScissorTest:function(e){e?N(3089):F(3089)},activeTexture:W,bindTexture:function(t,n){null===I&&W();let r=R[I];void 0===r&&(r={type:void 0,texture:void 0},R[I]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||O[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=R[I];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===k.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),k.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},I=null,R={},u=null,c={},l=null,h=!1,d=null,f=null,p=null,m=null,g=null,v=null,y=null,b=!1,w=null,x=null,_=null,E=null,A=null,B.set(0,0,e.canvas.width,e.canvas.height),k.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function nH(e,t,n,r,i,o,a){const s=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,l=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let f,p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return p?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?oO:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===f&&(f=m(o,a));const s=n?m(o,a):f;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return rO(e.width)&&rO(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==MB&&e.minFilter!==LB}function b(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log2(Math.max(i,o))}function w(n,r,i){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function x(e){return e===MB||e===CB||e===RB?9728:9729}function _(t){const n=t.target;n.removeEventListener("dispose",_),function(t){const n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&d.delete(n),a.memory.textures--}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(t){if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}}(n)}let A=0;function S(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void P(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function T(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),u=r.image[0]&&r.image[0].isDataTexture,l=[];for(let e=0;e<6;e++)l[e]=a||u?u?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,c);const h=l[0],d=v(h)||s,f=o.convert(r.format),p=o.convert(r.type),m=w(r.internalFormat,f,p);let x;if(I(34067,r,d),a){for(let e=0;e<6;e++){x=l[e].mipmaps;for(let t=0;t<x.length;t++){const i=x[t];r.format!==QB&&r.format!==YB?null!==f?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,f,p,i.data)}}t.__maxMipLevel=x.length-1}else{x=r.mipmaps;for(let e=0;e<6;e++)if(u){n.texImage2D(34069+e,0,m,l[e].width,l[e].height,0,f,p,l[e].data);for(let t=0;t<x.length;t++){const r=x[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,p,r.data)}}else{n.texImage2D(34069+e,0,m,f,p,l[e]);for(let t=0;t<x.length;t++){const r=x[t];n.texImage2D(34069+e,t+1,m,f,p,r.image[e])}}t.__maxMipLevel=x.length}y(r,d)&&b(34067,r,h.width,h.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const M={[AB]:10497,[SB]:33071,[TB]:33648},C={[MB]:9728,[CB]:9984,[RB]:9986,[LB]:9729,[BB]:9985,[DB]:9987};function I(n,o,a){if(a?(e.texParameteri(n,10242,M[o.wrapS]),e.texParameteri(n,10243,M[o.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,M[o.wrapR]),e.texParameteri(n,10240,C[o.magFilter]),e.texParameteri(n,10241,C[o.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),o.wrapS===SB&&o.wrapT===SB||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(o.magFilter)),e.texParameteri(n,10241,x(o.minFilter)),o.minFilter!==MB&&o.minFilter!==LB&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.type===VB&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===jB&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",_),t.__webglTexture=e.createTexture(),a.memory.textures++)}function P(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const u=function(e){return!s&&(e.wrapS!==SB||e.wrapT!==SB||e.minFilter!==MB&&e.minFilter!==LB)}(r)&&!1===v(r.image),c=g(r.image,u,!1,l),h=v(c)||s,d=o.convert(r.format);let f,p=o.convert(r.type),m=w(r.internalFormat,d,p);I(a,r,h);const x=r.mipmaps;if(r.isDepthTexture)m=6402,s?m=r.type===VB?36012:r.type===zB?33190:r.type===KB?35056:33189:r.type===VB&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===tk&&6402===m&&r.type!==GB&&r.type!==zB&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=GB,p=o.convert(r.type)),r.format===nk&&6402===m&&(m=34041,r.type!==KB&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=KB,p=o.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,p,null);else if(r.isDataTexture)if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,p,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)f=x[e],r.format!==QB&&r.format!==YB?null!==d?n.compressedTexImage2D(3553,e,m,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,f.width,f.height,0,d,p,f.data);t.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,p,c.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,m,d,p,f);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,d,p,c),t.__maxMipLevel=0;y(r,h)&&b(a,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function L(t,i,a,s,u){const c=o.convert(a.format),l=o.convert(a.type),h=w(a.internalFormat,c,l);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,c,l,null):n.texImage2D(u,0,h,i.width,i.height,0,c,l,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function B(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===VB?i=36012:t.type===zB&&(i=33190));const r=k(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=k(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),a=o.convert(t.type),s=w(t.internalFormat,i,a);if(r){const t=k(n);e.renderbufferStorageMultisample(36161,t,s,n.width,n.height)}else e.renderbufferStorage(36161,s,n.width,n.height)}e.bindRenderbuffer(36161,null)}function k(e){return s&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let D=!1,O=!1;this.allocateTextureUnit=function(){const e=A;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),A+=1,e},this.resetTextureUnits=function(){A=0},this.setTexture2D=S,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?P(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=T,this.setupRenderTarget=function(t){const u=t.texture,c=r.get(t),l=r.get(u);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(l.__webglTexture=e.createTexture(),l.__version=u.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=!0===t.isWebGLMultisampleRenderTarget,p=u.isDataTexture3D||u.isDataTexture2DArray,m=v(t)||s;if(!s||u.format!==YB||u.type!==VB&&u.type!==jB||(u.format=QB,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(f)if(s){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const r=o.convert(u.format),i=o.convert(u.type),a=w(u.internalFormat,r,i),s=k(t);e.renderbufferStorageMultisample(36161,s,a,t.width,t.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),B(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,l.__webglTexture),I(34067,u,m);for(let e=0;e<6;e++)L(c.__webglFramebuffer[e],t,u,36064,34069+e);y(u,m)&&b(34067,u,t.width,t.height),n.bindTexture(34067,null)}else if(d){const e=t.texture;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=r.get(o);n.bindTexture(3553,a.__webglTexture),I(3553,o,m),L(c.__webglFramebuffer,t,o,36064+i,3553),y(o,m)&&b(3553,o,t.width,t.height)}n.bindTexture(3553,null)}else{let e=3553;p&&(s?e=u.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(e,l.__webglTexture),I(e,u,m),L(c.__webglFramebuffer,t,u,36064,e),y(u,m)&&b(3553,u,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&function(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),S(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===tk)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(i.depthTexture.format!==nk)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),B(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),B(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){const t=v(e)||s,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let o=0,a=i.length;o<a;o++){const a=i[o];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),b(t,a,e.width,e.height),n.bindTexture(t,null)}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(s){const i=t.width,o=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),S(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===O&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),O=!0),e=e.texture),T(e,t)}}function rH(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===NB)return 5121;if(e===WB)return 32819;if(e===qB)return 32820;if(e===JB)return 33635;if(e===FB)return 5120;if(e===UB)return 5122;if(e===GB)return 5123;if(e===HB)return 5124;if(e===zB)return 5125;if(e===VB)return 5126;if(e===jB)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===XB)return 6406;if(e===YB)return 6407;if(e===QB)return 6408;if(e===ZB)return 6409;if(e===$B)return 6410;if(e===tk)return 6402;if(e===nk)return 34041;if(e===rk)return 6403;if(e===ik)return 36244;if(e===ok)return 33319;if(e===ak)return 33320;if(e===sk)return 36248;if(e===uk)return 36249;if(e===ck||e===lk||e===hk||e===dk){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===ck)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===lk)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===hk)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===dk)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===fk||e===pk||e===mk||e===gk){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===fk)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===pk)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===mk)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===gk)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===vk)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===yk||e===bk)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===yk)return n.COMPRESSED_RGB8_ETC2;if(e===bk)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===wk||e===xk||e===_k||e===Ek||e===Ak||e===Sk||e===Tk||e===Mk||e===Ck||e===Ik||e===Rk||e===Pk||e===Lk||e===Bk||e===Dk||e===Ok||e===Nk||e===Fk||e===Uk||e===Gk||e===Hk||e===zk||e===Vk||e===jk||e===Wk||e===qk||e===Jk||e===Kk?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===kk?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===KB?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}$G.prototype.isMeshDistanceMaterial=!0;class iH extends zF{constructor(e=[]){super(),this.cameras=e}}iH.prototype.isArrayCamera=!0;class oH extends xN{constructor(){super(),this.type="Group"}}oH.prototype.isGroup=!0;const aH={type:"move"};class sH{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new oH,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new oH,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new bO,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new bO),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new oH,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new bO,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new bO),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(aH))),u&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===u.joints[r.jointName]){const e=new oH;e.matrixAutoUpdate=!1,e.visible=!1,u.joints[r.jointName]=e,u.add(e)}const i=u.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=u.joints["index-finger-tip"],i=u.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;u.inputState.pinching&&a>s+c?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&a<=s-c&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==o),this}}class uH extends KD{constructor(e,t){super();const n=this,r=e.state;let i=null,o=1,a=null,s="local-floor",u=null;const c=[],l=new Map,h=new zF;h.layers.enable(1),h.viewport=new pO;const d=new zF;d.layers.enable(2),d.viewport=new pO;const f=[h,d],p=new iH;p.layers.enable(1),p.layers.enable(2);let m=null,g=null;function v(e){const t=l.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function y(){l.forEach((function(e,t){e.disconnect(t)})),l.clear(),m=null,g=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),A.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function b(e){const t=i.inputSources;for(let e=0;e<c.length;e++)l.set(t[e],c[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=l.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),l.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=l.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=c[e];return void 0===t&&(t=new sH,c[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=c[e];return void 0===t&&(t=new sH,c[e]=t),t.getGripSpace()},this.getHand=function(e){let t=c[e];return void 0===t&&(t=new sH,c[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",y),i.addEventListener("inputsourceschange",b);const e=t.getContextAttributes();!0!==e.xrCompatible&&await t.makeXRCompatible();const r={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o},u=new XRWebGLLayer(i,t,r);i.updateRenderState({baseLayer:u}),a=await i.requestReferenceSpace(s),A.setContext(i),A.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const w=new bO,x=new bO;function _(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;p.near=d.near=h.near=e.near,p.far=d.far=h.far=e.far,m===p.near&&g===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),m=p.near,g=p.far);const t=e.parent,n=p.cameras;_(p,t);for(let e=0;e<n.length;e++)_(n[e],t);e.matrixWorld.copy(p.matrixWorld),e.matrix.copy(p.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){w.setFromMatrixPosition(t.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);const r=w.distanceTo(x),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*l,f=a*h,p=r/(-l+h),m=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,v=s+p,y=d-m,b=f+(r-m),_=u*s/v*g,E=c*s/v*g;e.projectionMatrix.makePerspective(y,b,_,E,g,v)}(p,h,d):p.projectionMatrix.copy(h.projectionMatrix)},this.getCamera=function(){return p};let E=null;const A=new YF;A.setAnimationLoop((function(e,t){if(u=t.getViewerPose(a),null!==u){const e=u.views,t=i.renderState.baseLayer;r.bindXRFramebuffer(t.framebuffer);let n=!1;e.length!==p.cameras.length&&(p.cameras.length=0,n=!0);for(let r=0;r<e.length;r++){const i=e[r],o=t.getViewport(i),a=f[r];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&p.matrix.copy(a.matrix),!0===n&&p.cameras.push(a)}}const n=i.inputSources;for(let e=0;e<c.length;e++){const r=c[e],i=n[e];r.update(i,t,a)}E&&E(e,t)})),this.setAnimationLoop=function(e){E=e},this.dispose=function(){}}}function cH(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===CL&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===CL&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===CL&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===CL&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===CL&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===CL&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen),t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===CL&&e.clearcoatNormalScale.value.negate()),e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),t.transmission>0&&(e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===CL&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===CL&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===CL&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===CL&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function lH(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",l=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=cD,this.physicallyCorrectLights=!1,this.toneMapping=hB,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,b=null,w=-1,x=null;const _=new pO,E=new pO;let A=null,S=t.width,T=t.height,M=1,C=null,I=null;const R=new pO(0,0,S,T),P=new pO(0,0,S,T);let L=!1;const B=[],k=new XF;let D=!1,O=!1,N=null;const F=new YO,U=new bO,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return null===b?M:1}let z,V,j,W,q,J,K,X,Y,Q,Z,$,ee,te,ne,re,ie,oe,ae,se,ue,ce,le=n;function he(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:l};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",me,!1),null===le){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),le=he(t,e),null===le)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===le.getShaderPrecisionFormat&&(le.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function de(){z=new uU(le),V=new oU(le,z,e),z.init(V),ue=new rH(le,z,V),j=new tH(le,z,V),B[0]=1029,W=new hU(le),q=new HG,J=new nH(le,z,j,q,V,ue,W),K=new sU(m),X=new QF(le,V),ce=new rU(le,z,X,V),Y=new cU(le,X,W,ce),Q=new mU(le,Y,X,W),oe=new pU(le),ne=new aU(q),Z=new GG(m,K,z,V,ce,ne),$=new cH(q),ee=new WG(q),te=new QG(z,V),ie=new nU(m,K,j,Q,s),re=new eH(m,Q,V),ae=new iU(le,z,W,V),se=new lU(le,z,W,V),W.programs=Z.programs,m.capabilities=V,m.extensions=z,m.properties=q,m.renderLists=ee,m.shadowMap=re,m.state=j,m.info=W}de();const fe=new uH(m,le);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=W.autoReset,t=re.enabled,n=re.autoUpdate,r=re.needsUpdate,i=re.type;de(),W.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=r,re.type=i}function ge(e){const t=e.target;t.removeEventListener("dispose",ge),function(e){(function(e){const t=q.get(e).programs;void 0!==t&&t.forEach((function(e){Z.releaseProgram(e)}))})(e),q.remove(e)}(t)}this.xr=fe,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){const e=z.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=z.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return M},this.setPixelRatio=function(e){void 0!==e&&(M=e,this.setSize(S,T,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new sO),e.set(S,T)},this.setSize=function(e,n,r){fe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(S=e,T=n,t.width=Math.floor(e*M),t.height=Math.floor(n*M),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new sO),e.set(S*M,T*M).floor()},this.setDrawingBufferSize=function(e,n,r){S=e,T=n,M=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new pO),e.copy(_)},this.getViewport=function(e){return e.copy(R)},this.setViewport=function(e,t,n,r){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,r),j.viewport(_.copy(R).multiplyScalar(M).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),j.scissor(E.copy(P).multiplyScalar(M).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){j.setScissorTest(L=e)},this.setOpaqueSort=function(e){C=e},this.setTransparentSort=function(e){I=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new WN),e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),le.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",me,!1),ee.dispose(),te.dispose(),q.dispose(),K.dispose(),Q.dispose(),ce.dispose(),fe.dispose(),fe.removeEventListener("sessionstart",ye),fe.removeEventListener("sessionend",be),N&&(N.dispose(),N=null),we.stop()},this.renderBufferImmediate=function(e,t){ce.initAttributes();const n=q.get(e);e.hasPositions&&!n.position&&(n.position=le.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=le.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=le.createBuffer()),e.hasColors&&!n.color&&(n.color=le.createBuffer());const r=t.getAttributes();e.hasPositions&&(le.bindBuffer(34962,n.position),le.bufferData(34962,e.positionArray,35048),ce.enableAttribute(r.position),le.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(le.bindBuffer(34962,n.normal),le.bufferData(34962,e.normalArray,35048),ce.enableAttribute(r.normal),le.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(le.bindBuffer(34962,n.uv),le.bufferData(34962,e.uvArray,35048),ce.enableAttribute(r.uv),le.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(le.bindBuffer(34962,n.color),le.bufferData(34962,e.colorArray,35048),ce.enableAttribute(r.color),le.vertexAttribPointer(r.color,3,5126,!1,0,0)),ce.disableUnusedAttributes(),le.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=G);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=Te(e,t,r,i);j.setMaterial(r,a);let u=n.index;const c=n.attributes.position;if(null===u){if(void 0===c||0===c.count)return}else if(0===u.count)return;let l,h=1;!0===r.wireframe&&(u=Y.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&oe.update(i,n,r,s),ce.setup(i,r,s,n,u);let d=ae;null!==u&&(l=X.get(u),d=se,d.setIndex(l));const f=null!==u?u.count:c.count,p=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==o?o.start*h:0,v=null!==o?o.count*h:1/0,y=Math.max(p,g),b=Math.min(f,p+m,g+v)-1,w=Math.max(0,b-y+1);if(0!==w){if(i.isMesh)!0===r.wireframe?(j.setLineWidth(r.wireframeLinewidth*H()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),j.setLineWidth(e*H()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,w,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,w,e)}else d.render(y,w)}},this.compile=function(e,t){d=te.get(e),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)Ae(n[r],e,t);else Ae(n,e,t)}))};let ve=null;function ye(){we.stop()}function be(){we.start()}const we=new YF;function xe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=Q.update(e),i=e.material;i.visible&&h.push(e,t,i,n,U.z,null)}}else if(e.isImmediateRenderObject)r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F),h.push(e,null,e.material,n,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||k.intersectsObject(e))){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(F);const t=Q.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&h.push(e,t,s,n,U.z,a)}}else i.visible&&h.push(e,t,i,n,U.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)xe(i[e],t,n,r)}function _e(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,u=null===r?o.material:r,c=o.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];a.layers.test(r.layers)&&(j.viewport(_.copy(r.viewport)),d.setupLightsView(r),Ee(a,t,r,s,u,c))}}else Ee(a,t,n,s,u,c)}}function Ee(e,t,n,r,i,o){if(e.onBeforeRender(m,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=Te(n,t,i,e);j.setMaterial(i),ce.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,r)}else m.renderBufferDirect(n,t,r,i,e,o);e.onAfterRender(m,t,n,r,i,o)}function Ae(e,t,n){!0!==t.isScene&&(t=G);const r=q.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=Z.getParameters(e,i.state,o,t,n),u=Z.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=K.get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",ge),c=new Map,r.programs=c);let l=c.get(u);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===a)return Se(e,s),l}else s.uniforms=Z.getUniforms(e),e.onBuild(s,m),e.onBeforeCompile(s,m),l=Z.acquireProgram(s,u),c.set(u,l),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Se(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=l.getUniforms(),p=bG.seqWithValue(f.seq,h);return r.currentProgram=l,r.uniformsList=p,l}function Se(e,t){const n=q.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas}function Te(e,t,n,r){!0!==t.isScene&&(t=G),J.resetTextureUnits();const i=t.fog,o=n.isMeshStandardMaterial?t.environment:null,a=null===b?m.outputEncoding:b.texture.encoding,s=K.get(n.envMap||o),u=!0===n.vertexColors&&r.geometry&&r.geometry.attributes.color&&4===r.geometry.attributes.color.itemSize,c=q.get(n),l=d.state.lights;if(!0===D&&(!0===O||e!==x)){const t=e===x&&n.id===w;ne.setState(n,e,t)}let h=!1;n.version===c.__version?c.needsLights&&c.lightsStateVersion!==l.state.version||c.outputEncoding!==a||r.isInstancedMesh&&!1===c.instancing?h=!0:r.isInstancedMesh||!0!==c.instancing?r.isSkinnedMesh&&!1===c.skinning?h=!0:r.isSkinnedMesh||!0!==c.skinning?c.envMap!==s||n.fog&&c.fog!==i?h=!0:void 0===c.numClippingPlanes||c.numClippingPlanes===ne.numPlanes&&c.numIntersection===ne.numIntersection?c.vertexAlphas!==u&&(h=!0):h=!0:h=!0:h=!0:(h=!0,c.__version=n.version);let f=c.currentProgram;!0===h&&(f=Ae(n,t,r));let p=!1,g=!1,v=!1;const y=f.getUniforms(),_=c.uniforms;if(j.useProgram(f.program)&&(p=!0,g=!0,v=!0),n.id!==w&&(w=n.id,g=!0),p||x!==e){if(y.setValue(le,"projectionMatrix",e.projectionMatrix),V.logarithmicDepthBuffer&&y.setValue(le,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,g=!0,v=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=y.map.cameraPosition;void 0!==t&&t.setValue(le,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&y.setValue(le,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&y.setValue(le,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){y.setOptional(le,r,"bindMatrix"),y.setOptional(le,r,"bindMatrixInverse");const e=r.skeleton;e&&(V.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),y.setValue(le,"boneTexture",e.boneTexture,J),y.setValue(le,"boneTextureSize",e.boneTextureSize)):y.setOptional(le,e,"boneMatrices"))}var E,A;return(g||c.receiveShadow!==r.receiveShadow)&&(c.receiveShadow=r.receiveShadow,y.setValue(le,"receiveShadow",r.receiveShadow)),g&&(y.setValue(le,"toneMappingExposure",m.toneMappingExposure),c.needsLights&&(A=v,(E=_).ambientLightColor.needsUpdate=A,E.lightProbe.needsUpdate=A,E.directionalLights.needsUpdate=A,E.directionalLightShadows.needsUpdate=A,E.pointLights.needsUpdate=A,E.pointLightShadows.needsUpdate=A,E.spotLights.needsUpdate=A,E.spotLightShadows.needsUpdate=A,E.rectAreaLights.needsUpdate=A,E.hemisphereLights.needsUpdate=A),i&&n.fog&&$.refreshFogUniforms(_,i),$.refreshMaterialUniforms(_,n,M,T,N),bG.upload(le,c.uniformsList,_,J)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(bG.upload(le,c.uniformsList,_,J),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&y.setValue(le,"center",r.center),y.setValue(le,"modelViewMatrix",r.modelViewMatrix),y.setValue(le,"normalMatrix",r.normalMatrix),y.setValue(le,"modelMatrix",r.matrixWorld),f}we.setAnimationLoop((function(e){ve&&ve(e)})),"undefined"!=typeof window&&we.setContext(window),this.setAnimationLoop=function(e){ve=e,fe.setAnimationLoop(e),null===e?we.stop():we.start()},fe.addEventListener("sessionstart",ye),fe.addEventListener("sessionend",be),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===fe.enabled&&!0===fe.isPresenting&&(!0===fe.cameraAutoUpdate&&fe.updateCamera(t),t=fe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,b),d=te.get(e,p.length),d.init(),p.push(d),F.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(F),O=this.localClippingEnabled,D=ne.init(this.clippingPlanes,O,t),h=ee.get(e,f.length),h.init(),f.push(h),xe(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(C,I),!0===D&&ne.beginShadows();const n=d.state.shadowsArray;re.render(n,e,t),d.setupLights(),d.setupLightsView(t),!0===D&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(h,e);const r=h.opaque,i=h.transmissive,o=h.transparent;r.length>0&&_e(r,e,t),i.length>0&&function(e,t,n,r){null===N&&(N=new mO(1024,1024,{generateMipmaps:!0,minFilter:DB,magFilter:MB,wrapS:SB,wrapT:SB}));const i=m.getRenderTarget();m.setRenderTarget(N),m.clear(),_e(e,n,r),J.updateRenderTargetMipmap(N),m.setRenderTarget(i),_e(t,n,r)}(r,i,e,t),o.length>0&&_e(o,e,t),null!==b&&(J.updateRenderTargetMipmap(b),J.updateMultisampleRenderTarget(b)),!0===e.isScene&&e.onAfterRender(m,e,t),j.buffers.depth.setTest(!0),j.buffers.depth.setMask(!0),j.buffers.color.setMask(!0),j.setPolygonOffset(!1),ce.resetDefaultState(),w=-1,x=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e,t=0,n=0){b=e,v=t,y=n,e&&void 0===q.get(e).__webglFramebuffer&&J.setupRenderTarget(e);let r=null,i=!1,o=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?q.get(e).__webglMultisampledFramebuffer:a,_.copy(e.viewport),E.copy(e.scissor),A=e.scissorTest}else _.copy(R).multiplyScalar(M).floor(),E.copy(P).multiplyScalar(M).floor(),A=L;if(j.bindFramebuffer(36160,r)&&V.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(B.length!==n.length||36064!==B[0]){for(let e=0,t=n.length;e<t;e++)B[e]=36064+e;B.length=n.length,t=!0}}else 1===B.length&&36064===B[0]||(B[0]=36064,B.length=1,t=!0);else 1===B.length&&1029===B[0]||(B[0]=1029,B.length=1,t=!0);t&&(V.isWebGL2?le.drawBuffers(B):z.get("WEBGL_draw_buffers").drawBuffersWEBGL(B))}if(j.viewport(_),j.scissor(E),j.setScissorTest(A),i){const r=q.get(e.texture);le.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=q.get(e.texture),i=t||0;le.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){j.bindFramebuffer(36160,s);try{const a=e.texture,s=a.format,u=a.type;if(s!==QB&&ue.convert(s)!==le.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=u===jB&&(z.has("EXT_color_buffer_half_float")||V.isWebGL2&&z.has("EXT_color_buffer_float"));if(!(u===NB||ue.convert(u)===le.getParameter(35738)||u===VB&&(V.isWebGL2||z.has("OES_texture_float")||z.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===le.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&le.readPixels(t,n,r,i,ue.convert(s),ue.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==b?q.get(b).__webglFramebuffer:null;j.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);let a=ue.convert(t.format);V.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),J.setTexture2D(t,0),le.copyTexImage2D(3553,n,a,e.x,e.y,i,o,0),j.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=ue.convert(n.format),s=ue.convert(n.type);J.setTexture2D(n,0),le.pixelStorei(37440,n.flipY),le.pixelStorei(37441,n.premultiplyAlpha),le.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?le.texSubImage2D(3553,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?le.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):le.texSubImage2D(3553,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&le.generateMipmap(3553),j.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:o,height:a,data:s}=n.image,u=ue.convert(r.format),c=ue.convert(r.type);let l;if(r.isDataTexture3D)J.setTexture3D(r,0),l=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(r,0),l=35866}le.pixelStorei(37440,r.flipY),le.pixelStorei(37441,r.premultiplyAlpha),le.pixelStorei(3317,r.unpackAlignment);const h=le.getParameter(3314),d=le.getParameter(32878),f=le.getParameter(3316),p=le.getParameter(3315),g=le.getParameter(32877);le.pixelStorei(3314,o),le.pixelStorei(32878,a),le.pixelStorei(3316,e.min.x),le.pixelStorei(3315,e.min.y),le.pixelStorei(32877,e.min.z),le.texSubImage3D(l,i,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,u,c,s),le.pixelStorei(3314,h),le.pixelStorei(32878,d),le.pixelStorei(3316,f),le.pixelStorei(3315,p),le.pixelStorei(32877,g),0===i&&r.generateMipmaps&&le.generateMipmap(l),j.unbindTexture()},this.initTexture=function(e){J.setTexture2D(e,0),j.unbindTexture()},this.resetState=function(){v=0,y=0,b=null,j.reset(),ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class hH extends lH{}hH.prototype.isWebGL1Renderer=!0;class dH{constructor(e,t=25e-5){this.name="",this.color=new WN(e),this.density=t}clone(){return new dH(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}dH.prototype.isFogExp2=!0;class fH{constructor(e,t=1,n=1e3){this.name="",this.color=new WN(e),this.near=t,this.far=n}clone(){return new fH(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}fH.prototype.isFog=!0;class pH extends xN{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}pH.prototype.isScene=!0;class mH{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ND,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=$D()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=$D()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=$D()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}mH.prototype.isInterleavedBuffer=!0;const gH=new bO;class vH{constructor(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)gH.x=this.getX(t),gH.y=this.getY(t),gH.z=this.getZ(t),gH.applyMatrix4(e),this.setXYZ(t,gH.x,gH.y,gH.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)gH.x=this.getX(t),gH.y=this.getY(t),gH.z=this.getZ(t),gH.applyNormalMatrix(e),this.setXYZ(t,gH.x,gH.y,gH.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)gH.x=this.getX(t),gH.y=this.getY(t),gH.z=this.getZ(t),gH.transformDirection(e),this.setXYZ(t,gH.x,gH.y,gH.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new XN(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vH(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}vH.prototype.isInterleavedBufferAttribute=!0;class yH extends FN{constructor(e){super(),this.type="SpriteMaterial",this.color=new WN(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let bH;yH.prototype.isSpriteMaterial=!0;const wH=new bO,xH=new bO,_H=new bO,EH=new sO,AH=new sO,SH=new YO,TH=new bO,MH=new bO,CH=new bO,IH=new sO,RH=new sO,PH=new sO;class LH extends xN{constructor(e){if(super(),this.type="Sprite",void 0===bH){bH=new gF;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new mH(e,5);bH.setIndex([0,1,2,0,2,3]),bH.setAttribute("position",new vH(t,3,0,!1)),bH.setAttribute("uv",new vH(t,2,3,!1))}this.geometry=bH,this.material=void 0!==e?e:new yH,this.center=new sO(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xH.setFromMatrixScale(this.matrixWorld),SH.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_H.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xH.multiplyScalar(-_H.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;BH(TH.set(-.5,-.5,0),_H,o,xH,r,i),BH(MH.set(.5,-.5,0),_H,o,xH,r,i),BH(CH.set(.5,.5,0),_H,o,xH,r,i),IH.set(0,0),RH.set(1,0),PH.set(1,1);let a=e.ray.intersectTriangle(TH,MH,CH,!1,wH);if(null===a&&(BH(MH.set(-.5,.5,0),_H,o,xH,r,i),RH.set(0,1),a=e.ray.intersectTriangle(TH,CH,MH,!1,wH),null===a))return;const s=e.ray.origin.distanceTo(wH);s<e.near||s>e.far||t.push({distance:s,point:wH.clone(),uv:ON.getUV(wH,TH,MH,CH,IH,RH,PH,new sO),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function BH(e,t,n,r,i,o){EH.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(AH.x=o*EH.x-i*EH.y,AH.y=i*EH.x+o*EH.y):AH.copy(EH),e.copy(t),e.x+=AH.x,e.y+=AH.y,e.applyMatrix4(SH)}LH.prototype.isSprite=!0;const kH=new bO,DH=new bO;class OH extends xN{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){kH.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(kH);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){kH.setFromMatrixPosition(e.matrixWorld),DH.setFromMatrixPosition(this.matrixWorld);const n=kH.distanceTo(DH)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const NH=new bO,FH=new pO,UH=new pO,GH=new bO,HH=new YO;class zH extends kF{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new YO,this.bindMatrixInverse=new YO}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new pO,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;FH.fromBufferAttribute(r.attributes.skinIndex,e),UH.fromBufferAttribute(r.attributes.skinWeight,e),NH.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=UH.getComponent(e);if(0!==r){const i=FH.getComponent(e);HH.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(GH.copy(NH).applyMatrix4(HH),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}zH.prototype.isSkinnedMesh=!0;class VH extends xN{constructor(){super(),this.type="Bone"}}VH.prototype.isBone=!0;class jH extends dO{constructor(e,t,n,r,i,o,a,s,u,c,l,h){super(null,o,a,s,u,c,r,i,l,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==u?u:MB,this.minFilter=void 0!==c?c:MB,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}jH.prototype.isDataTexture=!0;const WH=new YO,qH=new YO;class JH{constructor(e=[],t=[]){this.uuid=$D(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new YO)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new YO;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:qH;WH.multiplyMatrices(i,t[r]),WH.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new JH(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=iO(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new jH(t,e,e,QB,VB);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new VH),this.bones.push(i),this.boneInverses.push((new YO).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}const KH=new YO,XH=new YO,YH=[],QH=new kF;class ZH extends kF{constructor(e,t,n){super(e,t),this.instanceMatrix=new XN(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(QH.geometry=this.geometry,QH.material=this.material,void 0!==QH.material)for(let i=0;i<r;i++){this.getMatrixAt(i,KH),XH.multiplyMatrices(n,KH),QH.matrixWorld=XH,QH.raycast(e,YH);for(let e=0,n=YH.length;e<n;e++){const n=YH[e];n.instanceId=i,n.object=this,t.push(n)}YH.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new XN(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}ZH.prototype.isInstancedMesh=!0;class $H extends FN{constructor(e){super(),this.type="LineBasicMaterial",this.color=new WN(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}$H.prototype.isLineBasicMaterial=!0;const ez=new bO,tz=new bO,nz=new YO,rz=new XO,iz=new HO;class oz extends xN{constructor(e=new gF,t=new $H){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)ez.fromBufferAttribute(t,e-1),tz.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ez.distanceTo(tz);e.setAttribute("lineDistance",new iF(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),iz.copy(n.boundingSphere),iz.applyMatrix4(r),iz.radius+=i,!1===e.ray.intersectsSphere(iz))return;nz.copy(r).invert(),rz.copy(e.ray).applyMatrix4(nz);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,u=new bO,c=new bO,l=new bO,h=new bO,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r)for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=d){const o=r.getX(n),a=r.getX(n+1);if(u.fromBufferAttribute(i,o),c.fromBufferAttribute(i,a),rz.distanceSqToSegment(u,c,h,l)>s)continue;h.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=d){if(u.fromBufferAttribute(i,n),c.fromBufferAttribute(i,n+1),rz.distanceSqToSegment(u,c,h,l)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:l.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}oz.prototype.isLine=!0;const az=new bO,sz=new bO;class uz extends oz{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)az.fromBufferAttribute(t,e),sz.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+az.distanceTo(sz);e.setAttribute("lineDistance",new iF(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}uz.prototype.isLineSegments=!0;class cz extends oz{constructor(e,t){super(e,t),this.type="LineLoop"}}cz.prototype.isLineLoop=!0;class lz extends FN{constructor(e){super(),this.type="PointsMaterial",this.color=new WN(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}lz.prototype.isPointsMaterial=!0;const hz=new YO,dz=new XO,fz=new HO,pz=new bO;class mz extends xN{constructor(e=new gF,t=new lz){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),fz.copy(n.boundingSphere),fz.applyMatrix4(r),fz.radius+=i,!1===e.ray.intersectsSphere(fz))return;hz.copy(r).invert(),dz.copy(e.ray).applyMatrix4(hz);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i)for(let n=Math.max(0,o.start),u=Math.min(i.count,o.start+o.count);n<u;n++){const o=i.getX(n);pz.fromBufferAttribute(a,o),gz(pz,o,s,r,e,t,this)}else for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)pz.fromBufferAttribute(a,n),gz(pz,n,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function gz(e,t,n,r,i,o,a){const s=dz.distanceSqToPoint(e);if(s<n){const n=new bO;dz.closestPointToPoint(e,n),n.applyMatrix4(r);const u=i.ray.origin.distanceTo(n);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}mz.prototype.isPoints=!0;class vz extends dO{constructor(e,t,n,r,i,o,a,s,u){super(e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:YB,this.minFilter=void 0!==o?o:LB,this.magFilter=void 0!==i?i:LB,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}vz.prototype.isVideoTexture=!0;class yz extends dO{constructor(e,t,n,r,i,o,a,s,u,c,l,h){super(null,o,a,s,u,c,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}yz.prototype.isCompressedTexture=!0;class bz extends dO{constructor(e,t,n,r,i,o,a,s,u){super(e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}}bz.prototype.isCanvasTexture=!0;class wz extends dO{constructor(e,t,n,r,i,o,a,s,u,c){if((c=void 0!==c?c:tk)!==tk&&c!==nk)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===tk&&(n=GB),void 0===n&&c===nk&&(n=KB),super(null,r,i,o,a,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:MB,this.minFilter=void 0!==s?s:MB,this.flipY=!1,this.generateMipmaps=!1}}wz.prototype.isDepthTexture=!0;class xz extends gF{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],u=new bO,c=new sO;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let i=0,l=3;i<=t;i++,l+=3){const h=n+i/t*r;u.x=e*Math.cos(h),u.y=e*Math.sin(h),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[l]/e+1)/2,c.y=(o[l+1]/e+1)/2,s.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new iF(o,3)),this.setAttribute("normal",new iF(a,3)),this.setAttribute("uv",new iF(s,2))}}class _z extends gF{constructor(e=1,t=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const u=this;r=Math.floor(r),i=Math.floor(i);const c=[],l=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,o=new sO,p=new bO;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)l.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),f++;const w=f;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*b,p.z=y*n,l.push(p.x,p.y,p.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*i*b+.5,d.push(o.x,o.y),f++}for(let e=0;e<r;e++){const t=i+e,r=w+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}u.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new bO,v=new bO;let y=0;const b=(t-e)/n;for(let u=0;u<=i;u++){const c=[],g=u/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,u=Math.sin(i),p=Math.cos(i);v.x=y*u,v.y=-g*n+m,v.z=y*p,l.push(v.x,v.y,v.z),o.set(u,b,p).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}u.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new iF(l,3)),this.setAttribute("normal",new iF(h,3)),this.setAttribute("uv",new iF(d,2))}}class Ez extends _z{constructor(e=1,t=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}}class Az extends gF{constructor(e,t,n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const a=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),u=i-r;for(let e=0;e<=u;e++)o[r][e]=0===e&&r===i?a:a.clone().lerp(s,e/u)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(o[e][n+1]),s(o[e+1][n]),s(o[e][n])):(s(o[e][n+1]),s(o[e+1][n+1]),s(o[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function u(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new bO,r=new bO,i=new bO;for(let o=0;o<t.length;o+=3)u(t[o+0],n),u(t[o+1],r),u(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new bO;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new bO;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=l(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new bO,t=new bO,n=new bO,r=new bO,a=new sO,s=new sO,u=new sO;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),u.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=l(r);c(a,d+0,e,f),c(s,d+2,t,f),c(u,d+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new iF(i,3)),this.setAttribute("normal",new iF(i.slice(),3)),this.setAttribute("uv",new iF(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class Sz extends Az{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}}const Tz=new bO,Mz=new bO,Cz=new bO,Iz=new ON;class Rz extends gF{constructor(e,t){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,!0===e.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=Math.pow(10,4),r=Math.cos(QD*t),i=e.getIndex(),o=e.getAttribute("position"),a=i?i.count:o.count,s=[0,0,0],u=["a","b","c"],c=new Array(3),l={},h=[];for(let e=0;e<a;e+=3){i?(s[0]=i.getX(e),s[1]=i.getX(e+1),s[2]=i.getX(e+2)):(s[0]=e,s[1]=e+1,s[2]=e+2);const{a:t,b:a,c:d}=Iz;if(t.fromBufferAttribute(o,s[0]),a.fromBufferAttribute(o,s[1]),d.fromBufferAttribute(o,s[2]),Iz.getNormal(Cz),c[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,c[1]=`${Math.round(a.x*n)},${Math.round(a.y*n)},${Math.round(a.z*n)}`,c[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],i=c[t],o=Iz[u[e]],a=Iz[u[t]],d=`${n}_${i}`,f=`${i}_${n}`;f in l&&l[f]?(Cz.dot(l[f].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),l[f]=null):d in l||(l[d]={index0:s[e],index1:s[t],normal:Cz.clone()})}}for(const e in l)if(l[e]){const{index0:t,index1:n}=l[e];Tz.fromBufferAttribute(o,t),Mz.fromBufferAttribute(o,n),h.push(Tz.x,Tz.y,Tz.z),h.push(Mz.x,Mz.y,Mz.z)}this.setAttribute("position",new iF(h,3))}}function Pz(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Zz(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Zz(o,e[o],e[o+1],a);return a&&qz(a,a.next)&&($z(a),a=a.next),a}function Lz(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!qz(r,r.next)&&0!==Wz(r.prev,r,r.next))r=r.next;else{if($z(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Bz(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Hz(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,u,c=e;for(;e.prev!==e.next;)if(s=e.prev,u=e.next,o?Dz(e,r,i,o):kz(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),$z(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?Bz(e=Oz(Lz(e),t,n),t,n,r,i,o,2):2===a&&Nz(e,t,n,r,i,o):Bz(Lz(e),t,n,r,i,o,1);break}}function kz(e){const t=e.prev,n=e,r=e.next;if(Wz(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Vz(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Wz(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Dz(e,t,n,r){const i=e.prev,o=e,a=e.next;if(Wz(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Hz(s,u,t,n,r),d=Hz(c,l,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&Vz(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Wz(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Vz(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Wz(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Vz(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Wz(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Vz(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Wz(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Oz(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!qz(i,o)&&Jz(i,r,r.next,o)&&Yz(i,o)&&Yz(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),$z(r),$z(r.next),r=e=o),r=r.next}while(r!==e);return Lz(r)}function Nz(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&jz(a,e)){let s=Qz(a,e);return a=Lz(a,a.next),s=Lz(s,s.next),Bz(a,t,n,r,i,o),void Bz(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function Fz(e,t){return e.x-t.x}function Uz(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,u=o.x,c=o.y;let l,h=1/0;n=o;do{r>=n.x&&n.x>=u&&r!==n.x&&Vz(i<c?r:a,i,u,c,i<c?a:r,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(r-n.x),Yz(n,e)&&(l<h||l===h&&(n.x>o.x||n.x===o.x&&Gz(o,n)))&&(o=n,h=l)),n=n.next}while(n!==s);return o}(e,t)){const n=Qz(t,e);Lz(t,t.next),Lz(n,n.next)}}function Gz(e,t){return Wz(e.prev,e,t.prev)<0&&Wz(t.next,e,e.next)<0}function Hz(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function zz(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Vz(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function jz(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Jz(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Yz(e,t)&&Yz(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Wz(e.prev,e,t.prev)||Wz(e,t.prev,t))||qz(e,t)&&Wz(e.prev,e,e.next)>0&&Wz(t.prev,t,t.next)>0)}function Wz(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function qz(e,t){return e.x===t.x&&e.y===t.y}function Jz(e,t,n,r){const i=Xz(Wz(e,t,n)),o=Xz(Wz(e,t,r)),a=Xz(Wz(n,r,e)),s=Xz(Wz(n,r,t));return i!==o&&a!==s||!(0!==i||!Kz(e,n,t))||!(0!==o||!Kz(e,r,t))||!(0!==a||!Kz(n,e,r))||!(0!==s||!Kz(n,t,r))}function Kz(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Xz(e){return e>0?1:e<0?-1:0}function Yz(e,t){return Wz(e.prev,e,e.next)<0?Wz(e,t,e.next)>=0&&Wz(e,e.prev,t)>=0:Wz(e,t,e.prev)<0||Wz(e,e.next,t)<0}function Qz(e,t){const n=new eV(e.i,e.x,e.y),r=new eV(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Zz(e,t,n,r){const i=new eV(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function eV(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class tV{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return tV.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];nV(e),rV(n,e);let o=e.length;t.forEach(nV);for(let e=0;e<t.length;e++)r.push(o),o+=t[e].length,rV(n,t[e]);const a=function(e,t,n){n=n||2;const r=t&&t.length,i=r?t[0]*n:e.length;let o=Pz(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,u,c,l,h,d,f;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,u,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,u=o<a-1?t[o+1]*r:e.length,c=Pz(e,s,u,r,!1),c===c.next&&(c.steiner=!0),i.push(zz(c));for(i.sort(Fz),o=0;o<i.length;o++)Uz(i[o],n),n=Lz(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],u=l=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<u&&(u=d),h>c&&(c=h),d>l&&(l=d);f=Math.max(c-s,l-u),f=0!==f?1/f:0}return Bz(o,a,n,s,u,f),a}(n,r);for(let e=0;e<a.length;e+=3)i.push(a.slice(e,e+3));return i}}function nV(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function rV(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class iV extends gF{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)o(e[t]);function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let u=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:l-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:oV;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let g,v,y,b,w,x=!1;p&&(g=p.getSpacedPoints(s),x=!0,c=!1,v=p.computeFrenetFrames(s,!1),y=new bO,b=new bO,w=new bO),c||(f=0,l=0,h=0,d=0);const _=e.extractPoints(a);let E=_.shape;const A=_.holes;if(!tV.isClockWise(E)){E=E.reverse();for(let e=0,t=A.length;e<t;e++){const t=A[e];tV.isClockWise(t)&&(A[e]=t.reverse())}}const S=tV.triangulateShape(E,A),T=E;for(let e=0,t=A.length;e<t;e++){const t=A[e];E=E.concat(t)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=E.length,I=S.length;function R(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,u=n.x-e.x,c=n.y-e.y,l=a*a+s*s,h=a*c-s*u;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(l),d=Math.sqrt(u*u+c*c),f=t.x-s/h,p=t.y+a/h,m=((n.x-c/d-f)*c-(n.y+u/d-p)*u)/(a*c-s*u);r=f+a*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new sO(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?u>Number.EPSILON&&(e=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new sO(r/o,i/o)}const P=[];for(let e=0,t=T.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),P[e]=R(T[e],T[n],T[r]);const L=[];let B,k=P.concat();for(let e=0,t=A.length;e<t;e++){const t=A[e];B=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),B[e]=R(t[e],t[r],t[i]);L.push(B),k=k.concat(B)}for(let e=0;e<f;e++){const t=e/f,n=l*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=M(T[e],P[e],r);N(t.x,t.y,-n)}for(let e=0,t=A.length;e<t;e++){const t=A[e];B=L[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],B[e],r);N(i.x,i.y,-n)}}}const D=h+d;for(let e=0;e<C;e++){const t=c?M(E[e],k[e],D):E[e];x?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),w.copy(g[0]).add(b).add(y),N(w.x,w.y,w.z)):N(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<C;t++){const n=c?M(E[t],k[t],D):E[t];x?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),w.copy(g[e]).add(b).add(y),N(w.x,w.y,w.z)):N(n.x,n.y,u/s*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=l*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=T.length;e<t;e++){const t=M(T[e],P[e],r);N(t.x,t.y,u+n)}for(let e=0,t=A.length;e<t;e++){const t=A[e];B=L[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],B[e],r);x?N(i.x,i.y+g[s-1].y,g[s-1].x+n):N(i.x,i.y,u+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=C*e,o=C*(e+1);U(t+r+n,t+i+n,t+i+o,t+r+o)}}}function N(e,t,n){o.push(e),o.push(t),o.push(n)}function F(e,t,i){G(e),G(t),G(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);H(a[0]),H(a[1]),H(a[2])}function U(e,t,i,o){G(e),G(t),G(o),G(t),G(i),G(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function G(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=C*e;for(let e=0;e<I;e++){const n=S[e];F(n[2]+t,n[1]+t,n[0]+t)}e=s+2*f,t=C*e;for(let e=0;e<I;e++){const n=S[e];F(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<I;e++){const t=S[e];F(t[2],t[1],t[0])}for(let e=0;e<I;e++){const t=S[e];F(t[0]+C*s,t[1]+C*s,t[2]+C*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;O(T,t),t+=T.length;for(let e=0,n=A.length;e<n;e++){const n=A[e];O(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new iF(r,3)),this.setAttribute("uv",new iF(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}const oV={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],u=t[3*r+1],c=t[3*i],l=t[3*i+1];return[new sO(o,a),new sO(s,u),new sO(c,l)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],u=t[3*n+2],c=t[3*r],l=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-l)<Math.abs(a-c)?[new sO(a,1-u),new sO(c,1-h),new sO(d,1-p),new sO(m,1-v)]:[new sO(s,1-u),new sO(l,1-h),new sO(f,1-p),new sO(g,1-v)]}};class aV extends Az{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}}class sV extends gF{constructor(e,t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=eO(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/t,u=new bO,c=new sO;for(let i=0;i<=t;i++){const l=n+i*s*r,h=Math.sin(l),d=Math.cos(l);for(let n=0;n<=e.length-1;n++)u.x=e[n].x*h,u.y=e[n].y,u.z=e[n].x*d,o.push(u.x,u.y,u.z),c.x=i/t,c.y=n/(e.length-1),a.push(c.x,c.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,o=r,a=r+e.length,s=r+e.length+1,u=r+1;i.push(o,a,u),i.push(a,s,u)}if(this.setIndex(i),this.setAttribute("position",new iF(o,3)),this.setAttribute("uv",new iF(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new bO,i=new bO,o=new bO,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class uV extends Az{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}}class cV extends gF{constructor(e,t,n){super(),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],o=[],a=[],s=1e-5,u=new bO,c=new bO,l=new bO,h=new bO,d=new bO;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=t+1;for(let r=0;r<=n;r++){const f=r/n;for(let n=0;n<=t;n++){const r=n/t;e(r,f,c),i.push(c.x,c.y,c.z),r-s>=0?(e(r-s,f,l),h.subVectors(c,l)):(e(r+s,f,l),h.subVectors(l,c)),f-s>=0?(e(r,f-s,l),d.subVectors(c,l)):(e(r,f+s,l),d.subVectors(l,c)),u.crossVectors(h,d).normalize(),o.push(u.x,u.y,u.z),a.push(r,f)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*f+n,i=e*f+n+1,o=(e+1)*f+n+1,a=(e+1)*f+n;r.push(t,i,a),r.push(i,o,a)}this.setIndex(r),this.setAttribute("position",new iF(i,3)),this.setAttribute("normal",new iF(o,3)),this.setAttribute("uv",new iF(a,2))}}class lV extends gF{constructor(e=.5,t=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],u=[],c=[];let l=e;const h=(t-e)/(r=Math.max(1,r)),d=new bO,f=new sO;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=l*Math.cos(r),d.y=l*Math.sin(r),s.push(d.x,d.y,d.z),u.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}l+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,s=r+n+2,u=r+1;a.push(i,o,u),a.push(o,s,u)}}this.setIndex(a),this.setAttribute("position",new iF(s,3)),this.setAttribute("normal",new iF(u,3)),this.setAttribute("uv",new iF(c,2))}}class hV extends gF{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))u(e);else for(let t=0;t<e.length;t++)u(e[t]),this.addGroup(a,s,t),a+=s,s=0;function u(e){const a=r.length/3,u=e.extractPoints(t);let c=u.shape;const l=u.holes;!1===tV.isClockWise(c)&&(c=c.reverse());for(let e=0,t=l.length;e<t;e++){const t=l[e];!0===tV.isClockWise(t)&&(l[e]=t.reverse())}const h=tV.triangulateShape(c,l);for(let e=0,t=l.length;e<t;e++){const t=l[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+a,i=t[1]+a,o=t[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new iF(r,3)),this.setAttribute("normal",new iF(i,3)),this.setAttribute("uv",new iF(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class dV extends gF{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let u=0;const c=[],l=new bO,h=new bO,d=[],f=[],p=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==o?y=.5/t:d==n&&s==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;l.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),l.y=e*Math.cos(o+v*a),l.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),f.push(l.x,l.y,l.z),h.copy(l).normalize(),p.push(h.x,h.y,h.z),m.push(s+y,1-v),g.push(u++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],a=c[e+1][r],u=c[e+1][r+1];(0!==e||o>0)&&d.push(t,i,u),(e!==n-1||s<Math.PI)&&d.push(i,a,u)}this.setIndex(d),this.setAttribute("position",new iF(f,3)),this.setAttribute("normal",new iF(p,3)),this.setAttribute("uv",new iF(m,2))}}class fV extends Az{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}}class pV extends iV{constructor(e,t={}){const n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new gF;const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class mV extends gF{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],u=[],c=new bO,l=new bO,h=new bO;for(let o=0;o<=n;o++)for(let d=0;d<=r;d++){const f=d/r*i,p=o/n*Math.PI*2;l.x=(e+t*Math.cos(p))*Math.cos(f),l.y=(e+t*Math.cos(p))*Math.sin(f),l.z=t*Math.sin(p),a.push(l.x,l.y,l.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(l,c).normalize(),s.push(h.x,h.y,h.z),u.push(d/r),u.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,a=(r+1)*(e-1)+t,s=(r+1)*e+t;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new iF(a,3)),this.setAttribute("normal",new iF(s,3)),this.setAttribute("uv",new iF(u,2))}}class gV extends gF{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],u=[],c=[],l=new bO,h=new bO,d=new bO,f=new bO,p=new bO,m=new bO,g=new bO;for(let a=0;a<=n;++a){const y=a/n*i*Math.PI*2;v(y,i,o,e,d),v(y+.01,i,o,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),f=t*Math.sin(i);l.x=d.x+(o*g.x+f*p.x),l.y=d.y+(o*g.y+f*p.y),l.z=d.z+(o*g.z+f*p.z),s.push(l.x,l.y,l.z),h.subVectors(l,d).normalize(),u.push(h.x,h.y,h.z),c.push(a/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;a.push(n,i,s),a.push(i,o,s)}function v(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new iF(s,3)),this.setAttribute("normal",new iF(u,3)),this.setAttribute("uv",new iF(c,2))}}class vV extends gF{constructor(e,t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new bO,s=new bO,u=new sO;let c=new bO;const l=[],h=[],d=[],f=[];function p(i){c=e.getPointAt(i/t,c);const u=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*u.x+i*d.x,s.y=o*u.y+i*d.y,s.z=o*u.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,l.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)u.x=e/t,u.y=n/r,d.push(u.x,u.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;f.push(n,i,a),f.push(i,o,a)}}()}(),this.setIndex(f),this.setAttribute("position",new iF(l,3)),this.setAttribute("normal",new iF(h,3)),this.setAttribute("uv",new iF(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}}class yV extends gF{constructor(e){if(super(),this.type="WireframeGeometry",!0===e.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const t=[],n=[0,0],r={},i=new bO;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,t=s.length;e<t;++e){const t=s[e],i=t.start;for(let e=i,o=i+t.count;e<o;e+=3)for(let t=0;t<3;t++){const i=a.getX(e+t),o=a.getX(e+(t+1)%3);n[0]=Math.min(i,o),n[1]=Math.max(i,o);const s=n[0]+","+n[1];void 0===r[s]&&(r[s]={index1:n[0],index2:n[1]})}}for(const e in r){const n=r[e];i.fromBufferAttribute(o,n.index1),t.push(i.x,i.y,i.z),i.fromBufferAttribute(o,n.index2),t.push(i.x,i.y,i.z)}}else{const n=e.attributes.position;for(let e=0,r=n.count/3;e<r;e++)for(let r=0;r<3;r++){const o=3*e+r;i.fromBufferAttribute(n,o),t.push(i.x,i.y,i.z);const a=3*e+(r+1)%3;i.fromBufferAttribute(n,a),t.push(i.x,i.y,i.z)}}this.setAttribute("position",new iF(t,3))}}var bV=Object.freeze({__proto__:null,BoxGeometry:OF,BoxBufferGeometry:OF,CircleGeometry:xz,CircleBufferGeometry:xz,ConeGeometry:Ez,ConeBufferGeometry:Ez,CylinderGeometry:_z,CylinderBufferGeometry:_z,DodecahedronGeometry:Sz,DodecahedronBufferGeometry:Sz,EdgesGeometry:Rz,ExtrudeGeometry:iV,ExtrudeBufferGeometry:iV,IcosahedronGeometry:aV,IcosahedronBufferGeometry:aV,LatheGeometry:sV,LatheBufferGeometry:sV,OctahedronGeometry:uV,OctahedronBufferGeometry:uV,ParametricGeometry:cV,ParametricBufferGeometry:cV,PlaneGeometry:ZF,PlaneBufferGeometry:ZF,PolyhedronGeometry:Az,PolyhedronBufferGeometry:Az,RingGeometry:lV,RingBufferGeometry:lV,ShapeGeometry:hV,ShapeBufferGeometry:hV,SphereGeometry:dV,SphereBufferGeometry:dV,TetrahedronGeometry:fV,TetrahedronBufferGeometry:fV,TextGeometry:pV,TextBufferGeometry:pV,TorusGeometry:mV,TorusBufferGeometry:mV,TorusKnotGeometry:gV,TorusKnotBufferGeometry:gV,TubeGeometry:vV,TubeBufferGeometry:vV,WireframeGeometry:yV});class wV extends FN{constructor(e){super(),this.type="ShadowMaterial",this.color=new WN(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}wV.prototype.isShadowMaterial=!0;class xV extends GF{constructor(e){super(e),this.type="RawShaderMaterial"}}xV.prototype.isRawShaderMaterial=!0;class _V extends FN{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new WN(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new WN(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bD,this.normalScale=new sO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this}}_V.prototype.isMeshStandardMaterial=!0;class EV extends _V{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new sO(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=eO(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new WN(1,1,1),this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new WN).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this}}EV.prototype.isMeshPhysicalMaterial=!0;class AV extends FN{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new WN(16777215),this.specular=new WN(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new WN(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bD,this.normalScale=new sO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=uB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}AV.prototype.isMeshPhongMaterial=!0;class SV extends FN{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new WN(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new WN(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bD,this.normalScale=new sO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}SV.prototype.isMeshToonMaterial=!0;class TV extends FN{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bD,this.normalScale=new sO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}TV.prototype.isMeshNormalMaterial=!0;class MV extends FN{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new WN(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new WN(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=uB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}MV.prototype.isMeshLambertMaterial=!0;class CV extends FN{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new WN(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bD,this.normalScale=new sO(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}CV.prototype.isMeshMatcapMaterial=!0;class IV extends $H{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}IV.prototype.isLineDashedMaterial=!0;var RV=Object.freeze({__proto__:null,ShadowMaterial:wV,SpriteMaterial:yH,RawShaderMaterial:xV,ShaderMaterial:GF,PointsMaterial:lz,MeshPhysicalMaterial:EV,MeshStandardMaterial:_V,MeshPhongMaterial:AV,MeshToonMaterial:SV,MeshNormalMaterial:TV,MeshLambertMaterial:MV,MeshDepthMaterial:ZG,MeshDistanceMaterial:$G,MeshBasicMaterial:qN,MeshMatcapMaterial:CV,LineDashedMaterial:IV,LineBasicMaterial:$H,Material:FN});const PV={arraySlice:function(e,t,n){return PV.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),u=[],c=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*i;if(!(o<n||o>=r)){u.push(t.times[e]);for(let n=0;n<s;++n)c.push(t.values[e*s+n])}}0!==u.length&&(t.times=PV.convertArray(u,t.times.constructor),t.values=PV.convertArray(c,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)continue;let s=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);let c=0;const l=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=l/3);const h=r.times.length-1;let d;if(o<=r.times[0]){const e=s,t=u-s;d=PV.arraySlice(r.values,e,t)}else if(o>=r.times[h]){const e=h*u+s,t=e+u-s;d=PV.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=u-s;e.evaluate(o),d=PV.arraySlice(e.resultBuffer,t,n)}"quaternion"===i&&(new yO).fromArray(d).normalize().conjugate().toArray(d);const f=a.times.length;for(let e=0;e<f;++e){const t=e*l+c;if("quaternion"===i)yO.multiplyQuaternionsFlat(a.values,t,d,0,a.values,t);else{const e=l-2*c;for(let n=0;n<e;++n)a.values[t+n]-=d[n]}}}return e.blendMode=oD,e}};class LV{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}LV.prototype.beforeStart_=LV.prototype.copySampleValue_,LV.prototype.afterEnd_=LV.prototype.copySampleValue_;class BV extends LV{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tD,endingEnd:tD}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case nD:i=e,a=2*t-n;break;case rD:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case nD:o=e,s=2*n-t;break;case rD:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let e=0;e!==a;++e)i[e]=g*o[c+e]+v*o[u+e]+y*o[s+e]+b*o[l+e];return i}}class kV extends LV{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c;for(let e=0;e!==a;++e)i[e]=o[u+e]*l+o[s+e]*c;return i}}class DV extends LV{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class OV{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=PV.convertArray(t,this.TimeBufferType),this.values=PV.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:PV.convertArray(e.times,Array),values:PV.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new BV(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Zk:t=this.InterpolantFactoryMethodDiscrete;break;case $k:t=this.InterpolantFactoryMethodLinear;break;case eD:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zk;case this.InterpolantFactoryMethodLinear:return $k;case this.InterpolantFactoryMethodSmooth:return eD}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=PV.arraySlice(n,i,o),this.values=PV.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&PV.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=PV.arraySlice(this.times),t=PV.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===eD,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=PV.arraySlice(e,0,o),this.values=PV.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=PV.arraySlice(this.times,0),t=PV.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}OV.prototype.TimeBufferType=Float32Array,OV.prototype.ValueBufferType=Float32Array,OV.prototype.DefaultInterpolation=$k;class NV extends OV{}NV.prototype.ValueTypeName="bool",NV.prototype.ValueBufferType=Array,NV.prototype.DefaultInterpolation=Zk,NV.prototype.InterpolantFactoryMethodLinear=void 0,NV.prototype.InterpolantFactoryMethodSmooth=void 0;class FV extends OV{}FV.prototype.ValueTypeName="color";class UV extends OV{}UV.prototype.ValueTypeName="number";class GV extends LV{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let u=e*a;for(let e=u+a;u!==e;u+=4)yO.slerpFlat(i,0,o,u-a,o,u,s);return i}}class HV extends OV{InterpolantFactoryMethodLinear(e){return new GV(this.times,this.values,this.getValueSize(),e)}}HV.prototype.ValueTypeName="quaternion",HV.prototype.DefaultInterpolation=$k,HV.prototype.InterpolantFactoryMethodSmooth=void 0;class zV extends OV{}zV.prototype.ValueTypeName="string",zV.prototype.ValueBufferType=Array,zV.prototype.DefaultInterpolation=Zk,zV.prototype.InterpolantFactoryMethodLinear=void 0,zV.prototype.InterpolantFactoryMethodSmooth=void 0;class VV extends OV{}VV.prototype.ValueTypeName="vector";class jV{constructor(e,t=-1,n,r=iD){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=$D(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(WV(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(OV.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let e=0;e<i;e++){let a=[],s=[];a.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const u=PV.getKeyframeOrder(a);a=PV.sortedArray(a,1,u),s=PV.sortedArray(s,1,u),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new UV(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(i);if(o&&o.length>1){const e=o[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const o=[];for(const e in r)o.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];PV.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const u=e.hierarchy||[];for(let e=0;e<u.length;e++){const i=u[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new UV(".morphTargetInfluence["+n+"]",e,o))}s=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(VV,o+".position",i,"pos",r),n(HV,o+".quaternion",i,"rot",r),n(VV,o+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function WV(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return UV;case"vector":case"vector2":case"vector3":case"vector4":return VV;case"color":return FV;case"quaternion":return HV;case"bool":case"boolean":return NV;case"string":return zV}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];PV.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const qV={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class JV{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return u.push(e,t),this},this.removeHandler=function(e){const t=u.indexOf(e);return-1!==t&&u.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=u.length;t<n;t+=2){const n=u[t],r=u[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const KV=new JV;class XV{constructor(e){this.manager=void 0!==e?e:KV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const YV={};class QV extends XV{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=qV.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0!==YV[e])return void YV[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let s;if(a){const n=a[1],o=!!a[2];let s=a[3];s=decodeURIComponent(s),o&&(s=atob(s));try{let r;const o=(this.responseType||"").toLowerCase();switch(o){case"arraybuffer":case"blob":const e=new Uint8Array(s.length);for(let t=0;t<s.length;t++)e[t]=s.charCodeAt(t);r="blob"===o?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(s,n);break;case"json":r=JSON.parse(s);break;default:r=s}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{YV[e]=[],YV[e].push({onLoad:t,onProgress:n,onError:r}),s=new XMLHttpRequest,s.open("GET",e,!0),s.addEventListener("load",(function(t){const n=this.response,r=YV[e];if(delete YV[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),qV.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),s.addEventListener("progress",(function(t){const n=YV[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),s.addEventListener("error",(function(t){const n=YV[e];delete YV[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),s.addEventListener("abort",(function(t){const n=YV[e];delete YV[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(s.responseType=this.responseType),void 0!==this.withCredentials&&(s.withCredentials=this.withCredentials),s.overrideMimeType&&s.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)s.setRequestHeader(e,this.requestHeader[e]);s.send(null)}return i.manager.itemStart(e),s}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class ZV extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new QV(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=jV.parse(e[n]);t.push(r)}return t}}class $V extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],a=new yz,s=new QV(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let u=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},u+=1,6===u&&(1===n.mipmapCount&&(a.minFilter=LB),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=LB),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class ej extends XV{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=qV.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),qV.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class tj extends XV{constructor(e){super(e)}load(e,t,n,r){const i=new WF,o=new ej(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}class nj extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new jH,a=new QV(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:SB,o.wrapT=void 0!==n.wrapT?n.wrapT:SB,o.magFilter=void 0!==n.magFilter?n.magFilter:LB,o.minFilter=void 0!==n.minFilter?n.minFilter:LB,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=DB),1===n.mipmapCount&&(o.minFilter=LB),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class rj extends XV{constructor(e){super(e)}load(e,t,n,r){const i=new dO,o=new ej(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?YB:QB,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class ij{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,u=i-1;for(;s<=u;)if(r=Math.floor(s+(u-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new sO:new bO);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new bO,r=[],i=[],o=[],a=new bO,s=new YO;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new bO),r[t].normalize()}i[0]=new bO,o[0]=new bO;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),l=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),l<=u&&(u=l,n.set(0,1,0)),h<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(r[t-1],r[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(eO(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(eO(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class oj extends ij{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new sO,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=u-this.aY;s=n*e-r*t+this.aX,u=n*t+r*e+this.aY}return n.set(s,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}oj.prototype.isEllipseCurve=!0;class aj extends oj{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function sj(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;u*=a,c*=a,i(t,n,u,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}aj.prototype.isArcCurve=!0;const uj=new bO,cj=new sj,lj=new sj,hj=new sj;class dj extends ij{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new bO){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,u=Math.floor(o),c=o-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/i)+1)*i:0===c&&u===i-1&&(u=i-2,c=1),this.closed||u>0?a=r[(u-1)%i]:(uj.subVectors(r[0],r[1]).add(r[0]),a=uj);const l=r[u%i],h=r[(u+1)%i];if(this.closed||u+2<i?s=r[(u+2)%i]:(uj.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=uj),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(l),e),n=Math.pow(l.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),cj.initNonuniformCatmullRom(a.x,l.x,h.x,s.x,t,n,r),lj.initNonuniformCatmullRom(a.y,l.y,h.y,s.y,t,n,r),hj.initNonuniformCatmullRom(a.z,l.z,h.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(cj.initCatmullRom(a.x,l.x,h.x,s.x,this.tension),lj.initCatmullRom(a.y,l.y,h.y,s.y,this.tension),hj.initCatmullRom(a.z,l.z,h.z,s.z,this.tension));return n.set(cj.calc(c),lj.calc(c),hj.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new bO).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function fj(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function pj(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function mj(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}dj.prototype.isCatmullRomCurve3=!0;class gj extends ij{constructor(e=new sO,t=new sO,n=new sO,r=new sO){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new sO){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(mj(e,r.x,i.x,o.x,a.x),mj(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}gj.prototype.isCubicBezierCurve=!0;class vj extends ij{constructor(e=new bO,t=new bO,n=new bO,r=new bO){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new bO){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(mj(e,r.x,i.x,o.x,a.x),mj(e,r.y,i.y,o.y,a.y),mj(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}vj.prototype.isCubicBezierCurve3=!0;class yj extends ij{constructor(e=new sO,t=new sO){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new sO){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new sO;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}yj.prototype.isLineCurve=!0;class bj extends ij{constructor(e=new bO,t=new bO){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new bO){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wj extends ij{constructor(e=new sO,t=new sO,n=new sO){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new sO){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(pj(e,r.x,i.x,o.x),pj(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}wj.prototype.isQuadraticBezierCurve=!0;class xj extends ij{constructor(e=new bO,t=new bO,n=new bO){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new bO){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(pj(e,r.x,i.x,o.x),pj(e,r.y,i.y,o.y),pj(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}xj.prototype.isQuadraticBezierCurve3=!0;class _j extends ij{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new sO){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(fj(a,s.x,u.x,c.x,l.x),fj(a,s.y,u.y,c.y,l.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new sO).fromArray(n))}return this}}_j.prototype.isSplineCurve=!0;var Ej=Object.freeze({__proto__:null,ArcCurve:aj,CatmullRomCurve3:dj,CubicBezierCurve:gj,CubicBezierCurve3:vj,EllipseCurve:oj,LineCurve:yj,LineCurve3:bj,QuadraticBezierCurve:wj,QuadraticBezierCurve3:xj,SplineCurve:_j});class Aj extends ij{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new yj(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],o=i.getLength(),a=0===o?0:1-e/o;return i.getPointAt(a)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Ej[n.type]).fromJSON(n))}return this}}class Sj extends Aj{constructor(e){super(),this.type="Path",this.currentPoint=new sO,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new yj(this.currentPoint.clone(),new sO(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new wj(this.currentPoint.clone(),new sO(e,t),new sO(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new gj(this.currentPoint.clone(),new sO(e,t),new sO(n,r),new sO(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new _j(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const u=new oj(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=u.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Tj extends Sj{constructor(e){super(e),this.uuid=$D(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Sj).fromJSON(n))}return this}}class Mj extends xN{constructor(e,t=1){super(),this.type="Light",this.color=new WN(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Mj.prototype.isLight=!0;class Cj extends Mj{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(xN.DefaultUp),this.updateMatrix(),this.groundColor=new WN(t)}copy(e){return Mj.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Cj.prototype.isHemisphereLight=!0;const Ij=new YO,Rj=new bO,Pj=new bO;class Lj{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new sO(512,512),this.map=null,this.mapPass=null,this.matrix=new YO,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new XF,this._frameExtents=new sO(1,1),this._viewportCount=1,this._viewports=[new pO(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Rj.setFromMatrixPosition(e.matrixWorld),t.position.copy(Rj),Pj.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Pj),t.updateMatrixWorld(),Ij.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ij),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Bj extends Lj{constructor(){super(new zF(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*ZD*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Bj.prototype.isSpotLightShadow=!0;class kj extends Mj{constructor(e,t,n=0,r=Math.PI/3,i=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(xN.DefaultUp),this.updateMatrix(),this.target=new xN,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new Bj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}kj.prototype.isSpotLight=!0;const Dj=new YO,Oj=new bO,Nj=new bO;class Fj extends Lj{constructor(){super(new zF(90,1,.5,500)),this._frameExtents=new sO(4,2),this._viewportCount=6,this._viewports=[new pO(2,1,1,1),new pO(0,1,1,1),new pO(3,1,1,1),new pO(1,1,1,1),new pO(3,0,1,1),new pO(1,0,1,1)],this._cubeDirections=[new bO(1,0,0),new bO(-1,0,0),new bO(0,0,1),new bO(0,0,-1),new bO(0,1,0),new bO(0,-1,0)],this._cubeUps=[new bO(0,1,0),new bO(0,1,0),new bO(0,1,0),new bO(0,1,0),new bO(0,0,1),new bO(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Oj.setFromMatrixPosition(e.matrixWorld),n.position.copy(Oj),Nj.copy(n.position),Nj.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Nj),n.updateMatrixWorld(),r.makeTranslation(-Oj.x,-Oj.y,-Oj.z),Dj.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dj)}}Fj.prototype.isPointLightShadow=!0;class Uj extends Mj{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Fj}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Uj.prototype.isPointLight=!0;class Gj extends HF{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Gj.prototype.isOrthographicCamera=!0;class Hj extends Lj{constructor(){super(new Gj(-5,5,5,-5,.5,500))}}Hj.prototype.isDirectionalLightShadow=!0;class zj extends Mj{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(xN.DefaultUp),this.updateMatrix(),this.target=new xN,this.shadow=new Hj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}zj.prototype.isDirectionalLight=!0;class Vj extends Mj{constructor(e,t){super(e,t),this.type="AmbientLight"}}Vj.prototype.isAmbientLight=!0;class jj extends Mj{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}jj.prototype.isRectAreaLight=!0;class Wj{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new bO)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}Wj.prototype.isSphericalHarmonics3=!0;class qj extends Mj{constructor(e=new Wj,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}qj.prototype.isLightProbe=!0;class Jj extends XV{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new QV(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new RV[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new WN).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new WN).setHex(i.value);break;case"v2":r.uniforms[t].value=(new sO).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new bO).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new pO).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new uO).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new YO).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new sO).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new sO).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),r}setTextures(e){return this.textures=e,this}}class Kj{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}class Xj extends gF{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}Xj.prototype.isInstancedBufferGeometry=!0;class Yj extends XN{constructor(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r||1}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Yj.prototype.isInstancedBufferAttribute=!0;class Qj extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new QV(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=uF(i.type,o),s=new mH(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new Xj:new gF,o=e.data.index;if(void 0!==o){const e=uF(o.type,o.array);i.setIndex(new XN(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let o;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);o=new vH(t,n.itemSize,n.offset,n.normalized)}else{const e=uF(n.type,n.array);o=new(n.isInstancedBufferAttribute?Yj:XN)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),void 0!==n.usage&&o.setUsage(n.usage),void 0!==n.updateRange&&(o.updateRange.offset=n.updateRange.offset,o.updateRange.count=n.updateRange.count),i.setAttribute(t,o)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new vH(t,i.itemSize,i.offset,i.normalized)}else{const e=uF(i.type,i.array);a=new XN(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),o.push(a)}i.morphAttributes[t]=o}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(let e=0,t=u.length;e!==t;++e){const t=u[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new bO;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new HO(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class Zj extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?Kj.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new QV(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,i,s,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),void 0!==t){let e=!1;for(const t in o)if(o[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(u)}return u}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Tj).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new JH).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};let r;if(void 0!==e){const i=new Qj;for(let o=0,a=e.length;o<a;o++){let a;const s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new bV[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":a=new bV[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new bV[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new bV[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new bV[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new bV[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new bV[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new bV[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new bV[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new bV[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new bV[s.type]((new Ej[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new bV[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new bV[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];r.push(n)}a=new bV[s.type](r,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let e=0,n=s.shapes.length;e<n;e++){const n=t[s.shapes[e]];r.push(n)}const e=s.options.extrudePath;void 0!==e&&(s.options.extrudePath=(new Ej[e.type]).fromJSON(e)),a=new bV[s.type](r,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Jj;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=jV.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:uF(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new JV(t);i=new ej(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=o(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new jH(t.data,t.width,t.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image];Array.isArray(s)?(a=new WF(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new jH(s.data,s.width,s.height):new dO(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,$j)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],eW),a.wrapT=n(o.wrap[1],eW)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,tW)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,tW)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),r[o.uuid]=a}return r}parseObject(e,t,n,r){let i,o,a;function s(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new pH,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new WN(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new fH(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new dH(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new zF(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Gj(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Vj(e.color,e.intensity);break;case"DirectionalLight":i=new zj(e.color,e.intensity);break;case"PointLight":i=new Uj(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new jj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new kj(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Cj(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new qj).fromJSON(e);break;case"SkinnedMesh":o=s(e.geometry),a=u(e.material),i=new zH(o,a),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":o=s(e.geometry),a=u(e.material),i=new kF(o,a);break;case"InstancedMesh":o=s(e.geometry),a=u(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;i=new ZH(o,a,t),i.instanceMatrix=new XN(new Float32Array(n.array),16),void 0!==r&&(i.instanceColor=new XN(new Float32Array(r.array),r.itemSize));break;case"LOD":i=new OH;break;case"Line":i=new oz(s(e.geometry),u(e.material));break;case"LineLoop":i=new cz(s(e.geometry),u(e.material));break;case"LineSegments":i=new uz(s(e.geometry),u(e.material));break;case"PointCloud":case"Points":i=new mz(s(e.geometry),u(e.material));break;case"Sprite":i=new LH(u(e.material));break;case"Group":i=new oH;break;case"Bone":i=new VH;break;default:i=new xN}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)i.add(this.parseObject(o[e],t,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const $j={UVMapping:vB,CubeReflectionMapping:yB,CubeRefractionMapping:bB,EquirectangularReflectionMapping:wB,EquirectangularRefractionMapping:xB,CubeUVReflectionMapping:_B,CubeUVRefractionMapping:EB},eW={RepeatWrapping:AB,ClampToEdgeWrapping:SB,MirroredRepeatWrapping:TB},tW={NearestFilter:MB,NearestMipmapNearestFilter:CB,NearestMipmapLinearFilter:RB,LinearFilter:LB,LinearMipmapNearestFilter:BB,LinearMipmapLinearFilter:DB};class nW extends XV{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=qV.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){qV.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}nW.prototype.isImageBitmapLoader=!0;class rW{constructor(){this.type="ShapePath",this.color=new WN,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Sj,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Tj;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,u=a.y-n.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(n=t[o],s=-s,a=t[i],u=-u),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=u*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=tV.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,u;const c=[];if(1===o.length)return s=o[0],u=new Tj,u.curves=s.curves,c.push(u),c;let l=!i(o[0].getPoints());l=e?!l:l;const h=[],d=[];let f,p,m=[],g=0;d[g]=void 0,m[g]=[];for(let t=0,n=o.length;t<n;t++)s=o[t],f=s.getPoints(),a=i(f),a=e?!a:a,a?(!l&&d[g]&&g++,d[g]={s:new Tj,p:f},d[g].s.curves=s.curves,l&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){u=d[e].s,c.push(u),p=m[e];for(let e=0,t=p.length;e<t;e++)u.holes.push(p[e].h)}return c}}class iW{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function(e,t,n){const r=Array.from(e),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,u=0;for(let e=0;e<r.length;e++){const t=r[e];if("\n"===t)s=0,u-=o;else{const e=oW(t,i,s,u,n);s+=e.offsetX,a.push(e.path)}}return a}(e,t,this.data);for(let e=0,t=r.length;e<t;e++)Array.prototype.push.apply(n,r[e].toShapes());return n}}function oW(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const a=new rW;let s,u,c,l,h,d,f,p;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=e.length;i<o;)switch(e[i++]){case"m":s=e[i++]*t+n,u=e[i++]*t+r,a.moveTo(s,u);break;case"l":s=e[i++]*t+n,u=e[i++]*t+r,a.lineTo(s,u);break;case"q":c=e[i++]*t+n,l=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,a.quadraticCurveTo(h,d,c,l);break;case"b":c=e[i++]*t+n,l=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,f=e[i++]*t+n,p=e[i++]*t+r,a.bezierCurveTo(h,d,f,p,c,l)}}return{offsetX:o.ha*t,path:a}}iW.prototype.isFont=!0;class aW extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new QV(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const r=i.parse(n);t&&t(r)}),n,r)}parse(e){return new iW(e)}}let sW;const uW={getContext:function(){return void 0===sW&&(sW=new(window.AudioContext||window.webkitAudioContext)),sW},setContext:function(e){sW=e}};class cW extends XV{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new QV(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);uW.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class lW extends qj{constructor(e,t,n=1){super(void 0,n);const r=(new WN).set(e),i=(new WN).set(t),o=new bO(r.r,r.g,r.b),a=new bO(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}lW.prototype.isHemisphereLightProbe=!0;class hW extends qj{constructor(e,t=1){super(void 0,t);const n=(new WN).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}hW.prototype.isAmbientLightProbe=!0;const dW=new YO,fW=new YO;class pW{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zF,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zF,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,o=t.near*Math.tan(QD*t.fov*.5)/t.zoom;let a,s;fW.elements[12]=-r,dW.elements[12]=r,a=-o*t.aspect+i,s=o*t.aspect+i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*t.aspect-i,s=o*t.aspect-i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fW),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dW)}}class mW{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=gW(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=gW();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function gW(){return("undefined"==typeof performance?Date:performance).now()}const vW=new bO,yW=new yO,bW=new bO,wW=new bO;class xW extends xN{constructor(){super(),this.type="AudioListener",this.context=uW.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mW}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vW,yW,bW),wW.set(0,0,-1).applyQuaternion(yW),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(vW.x,e),t.positionY.linearRampToValueAtTime(vW.y,e),t.positionZ.linearRampToValueAtTime(vW.z,e),t.forwardX.linearRampToValueAtTime(wW.x,e),t.forwardY.linearRampToValueAtTime(wW.y,e),t.forwardZ.linearRampToValueAtTime(wW.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(vW.x,vW.y,vW.z),t.setOrientation(wW.x,wW.y,wW.z,n.x,n.y,n.z)}}class _W extends xN{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const EW=new bO,AW=new yO,SW=new bO,TW=new bO;class MW extends _W{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(EW,AW,SW),TW.set(0,0,1).applyQuaternion(AW);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(EW.x,e),t.positionY.linearRampToValueAtTime(EW.y,e),t.positionZ.linearRampToValueAtTime(EW.z,e),t.orientationX.linearRampToValueAtTime(TW.x,e),t.orientationY.linearRampToValueAtTime(TW.y,e),t.orientationZ.linearRampToValueAtTime(TW.z,e)}else t.setPosition(EW.x,EW.y,EW.z),t.setOrientation(TW.x,TW.y,TW.z)}}class CW{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class IW{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){yO.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;yO.multiplyQuaternionsFlat(e,o,e,t,e,n),yO.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const RW=new RegExp("[\\[\\]\\.:\\/]","g"),PW="[^\\[\\]\\.:\\/]",LW="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",BW=/((?:WC+[\/:])*)/.source.replace("WC",PW),kW=/(WCOD+)?/.source.replace("WCOD",LW),DW=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PW),OW=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PW),NW=new RegExp("^"+BW+kW+DW+OW+"$"),FW=["material","materials","bones"];class UW{constructor(e,t,n){this.path=t,this.parsedPath=n||UW.parseTrackName(t),this.node=UW.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new UW.Composite(e,t,n):new UW(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(RW,"")}static parseTrackName(e){const t=NW.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==FW.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=UW.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}UW.Composite=class{constructor(e,t,n){const r=n||UW.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},UW.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},UW.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},UW.prototype.GetterByBindingType=[UW.prototype._getValue_direct,UW.prototype._getValue_array,UW.prototype._getValue_arrayElement,UW.prototype._getValue_toArray],UW.prototype.SetterByBindingTypeAndVersioning=[[UW.prototype._setValue_direct,UW.prototype._setValue_direct_setNeedsUpdate,UW.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[UW.prototype._setValue_array,UW.prototype._setValue_array_setNeedsUpdate,UW.prototype._setValue_array_setMatrixWorldNeedsUpdate],[UW.prototype._setValue_arrayElement,UW.prototype._setValue_arrayElement_setNeedsUpdate,UW.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[UW.prototype._setValue_fromArray,UW.prototype._setValue_fromArray_setNeedsUpdate,UW.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class GW{constructor(){this.uuid=$D(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,u=this.nCachedObjects_;for(let c=0,l=arguments.length;c!==l;++c){const l=arguments[c],h=l.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(l);for(let e=0,t=o;e!==t;++e)i[e].push(new UW(l,n[e],r[e]))}else if(d<u){a=e[d];const s=--u,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=l;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new UW(l,n[e],r[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,u=t[s];if(void 0!==u&&u>=i){const o=i++,c=e[o];t[c.uuid]=u,e[u]=c,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[u];t[u]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,u=t[s];if(void 0!==u)if(delete t[s],u<i){const a=--i,s=e[a],c=--o,l=e[c];t[s.uuid]=u,e[u]=s,t[l.uuid]=a,e[a]=l,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[c];t[u]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=u),e[u]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[u]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(let n=c,r=s.length;n!==r;++n){const r=s[n];l[n]=new UW(r,e,t)}return l}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}GW.prototype.isAnimationObjectGroup=!0;class HW{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:tD,endingEnd:tD};for(let e=0;e!==o;++e){const t=i[e].createInterpolant(null);a[e]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Yk,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case oD:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);break;case iD:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===Qk;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===Xk){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=nD,r.endingEnd=nD):(r.endingStart=e?this.zeroSlopeAtStart?nD:tD:rD,r.endingEnd=t?this.zeroSlopeAtEnd?nD:tD:rD)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}class zW extends KD{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName;let c=u[s];void 0===c&&(c={},u[s]=c);for(let e=0;e!==i;++e){const i=r[e],u=i.name;let l=c[u];if(void 0!==l)o[e]=l;else{if(l=o[e],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,u));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;l=new IW(UW.create(n,u,r),i.ValueTypeName,i.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,u),o[e]=l}a[e].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new kV(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?jV.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let u=null;if(void 0===n&&(n=null!==o?o.blendMode:iD),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;const c=new HW(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?jV.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(r,e,i,o);const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}zW.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class VW{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new VW(void 0===this.value.clone?this.value:this.value.clone())}}class jW extends mH{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n||1}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}jW.prototype.isInstancedInterleavedBuffer=!0;class WW{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}WW.prototype.isGLBufferAttribute=!0;class qW{constructor(e,t,n=0,r=1/0){this.ray=new XO(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new sN,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!1,n=[]){return KW(e,this,n,t),n.sort(JW),n}intersectObjects(e,t=!1,n=[]){for(let r=0,i=e.length;r<i;r++)KW(e[r],this,n,t);return n.sort(JW),n}}function JW(e,t){return e.distance-t.distance}function KW(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)KW(r[e],t,n,!0)}}class XW{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(eO(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class YW{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const QW=new sO;class ZW{constructor(e=new sO(1/0,1/0),t=new sO(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=QW.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new sO),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new sO),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new sO),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new sO),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return QW.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}ZW.prototype.isBox2=!0;const $W=new bO,eq=new bO;class tq{constructor(e=new bO,t=new bO){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new bO),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new bO),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new bO),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){$W.subVectors(e,this.start),eq.subVectors(this.end,this.start);const n=eq.dot(eq);let r=eq.dot($W)/n;return t&&(r=eO(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new bO),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class nq extends xN{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}nq.prototype.isImmediateRenderObject=!0;const rq=new bO;class iq extends xN{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new gF,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,o=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new iF(r,3));const i=new $H({fog:!1,toneMapped:!1});this.cone=new uz(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rq.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rq),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const oq=new bO,aq=new YO,sq=new YO;class uq extends uz{constructor(e){const t=cq(e),n=new gF,r=[],i=[],o=new WN(0,0,1),a=new WN(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new iF(r,3)),n.setAttribute("color",new iF(i,3)),super(n,new $H({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");sq.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(aq.multiplyMatrices(sq,i.matrixWorld),oq.setFromMatrixPosition(aq),r.setXYZ(n,oq.x,oq.y,oq.z),aq.multiplyMatrices(sq,i.parent.matrixWorld),oq.setFromMatrixPosition(aq),r.setXYZ(n+1,oq.x,oq.y,oq.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function cq(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,cq(e.children[n]));return t}class lq extends kF{constructor(e,t,n){super(new dV(t,4,2),new qN({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const hq=new bO,dq=new WN,fq=new WN;class pq extends xN{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new uV(t);r.rotateY(.5*Math.PI),this.material=new qN({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new XN(o,3)),this.add(new kF(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");dq.copy(this.light.color),fq.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?dq:fq;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(hq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class mq extends uz{constructor(e=10,t=10,n=4473924,r=8947848){n=new WN(n),r=new WN(r);const i=t/2,o=e/t,a=e/2,s=[],u=[];for(let e=0,c=0,l=-a;e<=t;e++,l+=o){s.push(-a,0,l,a,0,l),s.push(l,0,-a,l,0,a);const t=e===i?n:r;t.toArray(u,c),c+=3,t.toArray(u,c),c+=3,t.toArray(u,c),c+=3,t.toArray(u,c),c+=3}const c=new gF;c.setAttribute("position",new iF(s,3)),c.setAttribute("color",new iF(u,3)),super(c,new $H({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class gq extends uz{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new WN(i),o=new WN(o);const a=[],s=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),u=Math.sin(r)*e,c=Math.cos(r)*e;a.push(0,0,0),a.push(u,0,c);const l=1&n?i:o;s.push(l.r,l.g,l.b),s.push(l.r,l.g,l.b)}for(let t=0;t<=n;t++){const u=1&t?i:o,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;a.push(n,0,i),s.push(u.r,u.g,u.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,a.push(n,0,i),s.push(u.r,u.g,u.b)}}const u=new gF;u.setAttribute("position",new iF(a,3)),u.setAttribute("color",new iF(s,3)),super(u,new $H({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const vq=new bO,yq=new bO,bq=new bO;class wq extends xN{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new gF;r.setAttribute("position",new iF([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new $H({fog:!1,toneMapped:!1});this.lightPlane=new oz(r,i),this.add(this.lightPlane),r=new gF,r.setAttribute("position",new iF([0,0,0,0,0,1],3)),this.targetLine=new oz(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){vq.setFromMatrixPosition(this.light.matrixWorld),yq.setFromMatrixPosition(this.light.target.matrixWorld),bq.subVectors(yq,vq),this.lightPlane.lookAt(yq),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(yq),this.targetLine.scale.z=bq.length()}}const xq=new bO,_q=new HF;class Eq extends uz{constructor(e){const t=new gF,n=new $H({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new WN(16755200),s=new WN(16711680),u=new WN(43775),c=new WN(16777215),l=new WN(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",c),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.setAttribute("position",new iF(r,3)),t.setAttribute("color",new iF(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;_q.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Aq("c",t,e,_q,0,0,-1),Aq("t",t,e,_q,0,0,1),Aq("n1",t,e,_q,-1,-1,-1),Aq("n2",t,e,_q,1,-1,-1),Aq("n3",t,e,_q,-1,1,-1),Aq("n4",t,e,_q,1,1,-1),Aq("f1",t,e,_q,-1,-1,1),Aq("f2",t,e,_q,1,-1,1),Aq("f3",t,e,_q,-1,1,1),Aq("f4",t,e,_q,1,1,1),Aq("u1",t,e,_q,.7,1.1,-1),Aq("u2",t,e,_q,-.7,1.1,-1),Aq("u3",t,e,_q,0,2,-1),Aq("cf1",t,e,_q,-1,0,1),Aq("cf2",t,e,_q,1,0,1),Aq("cf3",t,e,_q,0,-1,1),Aq("cf4",t,e,_q,0,1,1),Aq("cn1",t,e,_q,-1,0,-1),Aq("cn2",t,e,_q,1,0,-1),Aq("cn3",t,e,_q,0,-1,-1),Aq("cn4",t,e,_q,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Aq(e,t,n,r,i,o,a){xq.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],xq.x,xq.y,xq.z)}}const Sq=new _O;class Tq extends uz{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new gF;i.setIndex(new XN(n,1)),i.setAttribute("position",new XN(r,3)),super(i,new $H({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Sq.setFromObject(this.object),Sq.isEmpty())return;const t=Sq.min,n=Sq.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return uz.prototype.copy.call(this,e),this.object=e.object,this}}class Mq extends uz{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new gF;r.setIndex(new XN(n,1)),r.setAttribute("position",new iF([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new $H({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Cq extends oz{constructor(e,t=1,n=16776960){const r=n,i=new gF;i.setAttribute("position",new iF([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new $H({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new gF;o.setAttribute("position",new iF([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new kF(o,new qN({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?CL:ML,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const Iq=new bO;let Rq,Pq;class Lq extends xN{constructor(e=new bO(0,0,1),t=new bO(0,0,0),n=1,r=16776960,i=.2*n,o=.2*i){super(),this.type="ArrowHelper",void 0===Rq&&(Rq=new gF,Rq.setAttribute("position",new iF([0,0,0,0,1,0],3)),Pq=new _z(0,.5,1,5,1),Pq.translate(0,-.5,0)),this.position.copy(t),this.line=new oz(Rq,new $H({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new kF(Pq,new qN({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Iq.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Iq,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Bq extends uz{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new gF;n.setAttribute("position",new iF(t,3)),n.setAttribute("color",new iF([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new $H({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kq=new Float32Array(1),Dq=new Int32Array(kq.buffer);class Oq{static toHalfFloat(e){kq[0]=e;const t=Dq[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}}const Nq=Math.pow(2,8),Fq=[.125,.215,.35,.446,.526,.582],Uq=5+Fq.length,Gq={[cD]:0,[lD]:1,[dD]:2,[pD]:3,[mD]:4,[gD]:5,[hD]:6},Hq=new qN({side:CL,depthWrite:!1,depthTest:!1}),zq=new kF(new OF,Hq),Vq=new Gj,{_lodPlanes:jq,_sizeLods:Wq,_sigmas:qq}=tJ(),Jq=new WN;let Kq=null;const Xq=(1+Math.sqrt(5))/2,Yq=1/Xq,Qq=[new bO(1,1,1),new bO(-1,1,1),new bO(1,1,-1),new bO(-1,1,-1),new bO(0,Xq,Yq),new bO(0,Xq,-Yq),new bO(Yq,0,Xq),new bO(-Yq,0,Xq),new bO(Xq,Yq,0),new bO(-Xq,Yq,0)];function Zq(e){const t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);return e.multiplyScalar(Math.pow(2,-n)),(n+128)/255}class $q{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(20),n=new bO(0,1,0);return new xV({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Gq[cD]},outputEncoding:{value:Gq[cD]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:LL,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Kq=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=oJ(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=iJ(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<jq.length;e++)jq[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Kq),e.scissorTest=!1,rJ(e,0,0,e.width,e.height)}_fromTexture(e){Kq=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:MB,minFilter:MB,generateMipmaps:!1,type:NB,format:ek,encoding:eJ(e)?e.encoding:dD,depthBuffer:!1},n=nJ(t);return n.depthBuffer=!e,this._pingPongRenderTarget=nJ(t),n}_compileMaterial(e){const t=new kF(jq[0],e);this._renderer.compile(t,Vq)}_sceneToCubeUV(e,t,n,r){const i=new zF(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,c=s.outputEncoding,l=s.toneMapping;s.getClearColor(Jq),s.toneMapping=hB,s.outputEncoding=cD,s.autoClear=!1;let h=!1;const d=e.background;if(d){if(d.isColor){Hq.color.copy(d).convertSRGBToLinear(),e.background=null;const t=Zq(Hq.color);Hq.opacity=t,h=!0}}else{Hq.color.copy(Jq).convertSRGBToLinear();const e=Zq(Hq.color);Hq.opacity=e,h=!0}for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,o[t],0),i.lookAt(a[t],0,0)):1==n?(i.up.set(0,0,o[t]),i.lookAt(0,a[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,a[t])),rJ(r,n*Nq,t>2?Nq:0,Nq,Nq),s.setRenderTarget(r),h&&s.render(zq,i),s.render(e,i)}s.toneMapping=l,s.outputEncoding=c,s.autoClear=u}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=oJ()):null==this._equirectShader&&(this._equirectShader=iJ());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new kF(jq[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Gq[e.encoding],o.outputEncoding.value=Gq[t.texture.encoding],rJ(t,0,0,3*Nq,2*Nq),n.setRenderTarget(t),n.render(i,Vq)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<Uq;t++){const n=Math.sqrt(qq[t]*qq[t]-qq[t-1]*qq[t-1]),r=Qq[(t-1)%Qq.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new kF(jq[r],u),l=u.uniforms,h=Wq[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0==e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;l.envMap.value=e.texture,l.samples.value=p,l.weights.value=m,l.latitudinal.value="latitudinal"===o,a&&(l.poleAxis.value=a),l.dTheta.value=d,l.mipInt.value=8-n,l.inputEncoding.value=Gq[e.texture.encoding],l.outputEncoding.value=Gq[e.texture.encoding];const v=Wq[r];rJ(t,3*Math.max(0,Nq-2*v),(0===r?0:2*Nq)+2*v*(r>4?r-8+4:0),3*v,2*v),s.setRenderTarget(t),s.render(c,Vq)}}function eJ(e){return void 0!==e&&e.type===NB&&(e.encoding===cD||e.encoding===lD||e.encoding===hD)}function tJ(){const e=[],t=[],n=[];let r=8;for(let i=0;i<Uq;i++){const o=Math.pow(2,r);t.push(o);let a=1/o;i>4?a=Fq[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],h=6,d=6,f=3,p=2,m=1,g=new Float32Array(f*d*h),v=new Float32Array(p*d*h),y=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,f*d*e),v.set(l,p*d*e);const i=[e,e,e,e,e,e];y.set(i,m*d*e)}const b=new gF;b.setAttribute("position",new XN(g,f)),b.setAttribute("uv",new XN(v,p)),b.setAttribute("faceIndex",new XN(y,m)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function nJ(e){const t=new mO(3*Nq,3*Nq,e);return t.texture.mapping=_B,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function rJ(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function iJ(){const e=new sO(1,1);return new xV({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Gq[cD]},outputEncoding:{value:Gq[cD]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:LL,depthTest:!1,depthWrite:!1})}function oJ(){return new xV({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Gq[cD]},outputEncoding:{value:Gq[cD]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:LL,depthTest:!1,depthWrite:!1})}const aJ=0,sJ=1,uJ=0,cJ=1,lJ=2;function hJ(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function dJ(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function fJ(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new mz(e,t)}function pJ(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new LH(e)}function mJ(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new mz(e,t)}function gJ(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new lz(e)}function vJ(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new lz(e)}function yJ(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new lz(e)}function bJ(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new bO(e,t,n)}function wJ(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new XN(e,t).setUsage(FD)}function xJ(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new YN(e,t)}function _J(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new QN(e,t)}function EJ(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ZN(e,t)}function AJ(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new $N(e,t)}function SJ(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new eF(e,t)}function TJ(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new tF(e,t)}function MJ(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new nF(e,t)}function CJ(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new iF(e,t)}function IJ(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new oF(e,t)}function RJ(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Bq(e)}function PJ(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Tq(e,t)}function LJ(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new uz(new Rz(e.geometry),new $H({color:void 0!==t?t:16777215}))}function BJ(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new uz(new yV(e.geometry),new $H({color:void 0!==t?t:16777215}))}function kJ(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new QV(e)}function DJ(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new nj(e)}function OJ(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new qF(e,n)}function NJ(){console.error("THREE.CanvasRenderer has been removed")}function FJ(){console.error("THREE.JSONLoader has been removed.")}ij.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(ij.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Sj.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},mq.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},uq.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},XV.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Kj.extractUrlBase(e)},XV.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},ZW.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},ZW.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ZW.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},ZW.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},_O.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},_O.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},_O.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},_O.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},_O.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},HO.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},XF.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},tq.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},uO.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},uO.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},uO.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},uO.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},uO.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},uO.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},YO.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},YO.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},YO.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new bO).setFromMatrixColumn(this,3)},YO.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},YO.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},YO.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},YO.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},YO.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},YO.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},YO.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},YO.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},YO.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},YO.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},YO.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},YO.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},YO.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},YO.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},YO.prototype.makeFrustum=function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},YO.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},SN.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},yO.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},yO.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},XO.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},XO.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},XO.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},ON.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ON.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},ON.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},ON.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},ON.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},ON.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ON.getBarycoord(e,t,n,r,i)},ON.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ON.getNormal(e,t,n,r)},Tj.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Tj.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new iV(this,e)},Tj.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hV(this,e)},sO.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},sO.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},sO.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},bO.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},bO.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},bO.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},bO.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},bO.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},bO.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},bO.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},bO.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},bO.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pO.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},pO.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},xN.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},xN.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},xN.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},xN.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},xN.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(xN.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),kF.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(kF.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),aD},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),zH.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},zF.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Mj.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(XN.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===FD},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(FD)}}}),XN.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?FD:ND),this},XN.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},XN.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},gF.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},gF.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new XN(arguments[1],arguments[2])))},gF.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},gF.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},gF.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},gF.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},gF.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(gF.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),mH.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?FD:ND),this},mH.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},iV.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},iV.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},iV.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},pH.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},VW.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(FN.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new WN}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===RL}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(GF.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),lH.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},lH.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},lH.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},lH.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},lH.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},lH.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},lH.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},lH.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},lH.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},lH.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},lH.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},lH.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},lH.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},lH.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},lH.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},lH.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},lH.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},lH.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},lH.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},lH.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},lH.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},lH.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},lH.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},lH.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},lH.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(lH.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?lD:cD}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(eH.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(mO.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),_W.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new cW).load(e,(function(e){t.setBuffer(e)})),this},CW.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},jF.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},jF.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},lO.crossOrigin=void 0,lO.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new rj;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},lO.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new tj;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},lO.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},lO.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const UJ={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function GJ(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:gL}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=gL);const HJ="undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect,zJ=function(e){const t="function"==typeof e?function(e){let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?((e,r=i,o=Object.is)=>{let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)})(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}(e):e,n=(e=t.getState,n=Object.is)=>{const[,r]=(0,i.useReducer)((e=>e+1),0),o=t.getState(),a=(0,i.useRef)(o),s=(0,i.useRef)(e),u=(0,i.useRef)(n),c=(0,i.useRef)(!1),l=(0,i.useRef)();let h;void 0===l.current&&(l.current=e(o));let d=!1;(a.current!==o||s.current!==e||u.current!==n||c.current)&&(h=e(o),d=!n(l.current,h)),HJ((()=>{d&&(l.current=h),a.current=o,s.current=e,u.current=n,c.current=!1}));const f=(0,i.useRef)(o);return HJ((()=>{const e=()=>{try{const e=t.getState(),n=s.current(e);u.current(l.current,n)||(a.current=e,l.current=n,r())}catch(e){c.current=!0,r()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n}),[]),d?h:l.current};return Object.assign(n,t),n[Symbol.iterator]=function*(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4"),yield n,yield t},n},VJ=function(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0};var jJ=n(69),WJ=n.n(jJ),qJ=n(431),JJ=n(63),KJ=n.n(JJ);const XJ=[];function YJ(e,t,n,r=0,i=!1){for(const e of t)if(KJ()(n,e.args)){if(i)return;if(e.error)throw e.error;if(e.response)return e.response;throw e.promise}const o={args:n,promise:e(...n).then((e=>o.response=null==e||e)).catch((e=>o.error=null!=e?e:"unknown error")).then((()=>{r>0&&setTimeout((()=>{const e=t.indexOf(o);-1!==e&&t.splice(e,1)}),r)}))};if(t.push(o),!i)throw o.promise}function QJ(e,...t){return YJ(e,XJ,t,QJ.lifespan)}QJ.lifespan=0,QJ.clear=(...e)=>function(e,...t){if(void 0===t||0===t.length)e.splice(0,e.length);else{const n=e.find((e=>KJ()(t,e.args)));if(n){const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}}(XJ,...e),QJ.preload=(e,...t)=>{YJ(e,XJ,t,QJ.lifespan,!0)},QJ.peek=(...e)=>{var t;return null==(t=XJ.find((t=>KJ()(e,t.args))))?void 0:t.response};var ZJ=n(296);function $J(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...$J(e.parentElement)]}const eK=["x","y","top","bottom","left","right","width","height"],tK=function({debounce:e,scroll:t,polyfill:n}={debounce:0,scroll:!1}){const r=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=(0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),s=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?"number"==typeof e?e:e.scroll:null,c=e?"number"==typeof e?e:e.resize:null,l=(0,i.useRef)(!1);(0,i.useEffect)((()=>(l.current=!0,()=>{l.current=!1})));const[h,d,f]=(0,i.useMemo)((()=>{const e=()=>{if(!s.current.element)return;const{left:e,top:t,width:n,height:r,bottom:i,right:o,x:u,y:c}=s.current.element.getBoundingClientRect(),h={left:e,top:t,width:n,height:r,bottom:i,right:o,x:u,y:c};Object.freeze(h),l.current&&!((e,t)=>eK.every((n=>e[n]===t[n])))(s.current.lastBounds,h)&&a(s.current.lastBounds=h)};return[e,c?(0,ZJ.debounce)(e,c):e,u?(0,ZJ.debounce)(e,u):e]}),[a,u,c]);function p(){s.current.scrollContainers&&(s.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",f,!0))),s.current.scrollContainers=null),s.current.resizeObserver&&(s.current.resizeObserver.disconnect(),s.current.resizeObserver=null)}function m(){s.current.element&&(s.current.resizeObserver=new r(f),s.current.resizeObserver.observe(s.current.element),t&&s.current.scrollContainers&&s.current.scrollContainers.forEach((e=>e.addEventListener("scroll",f,{capture:!0,passive:!0}))))}var g,v,y;return g=f,v=Boolean(t),(0,i.useEffect)((()=>{if(v){const e=g;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[g,v]),y=d,(0,i.useEffect)((()=>{const e=y;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[y]),(0,i.useEffect)((()=>{p(),m()}),[t,f,d]),(0,i.useEffect)((()=>p),[]),[e=>{e&&e!==s.current.element&&(p(),s.current.element=e,s.current.scrollContainers=$J(e),m())},o,h]},nK={obj:e=>e===Object(e)&&!nK.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){if(typeof e!=typeof t||!!e!=!!t)return!1;if(nK.str(e)||nK.num(e)||nK.obj(e))return e===t;if(nK.arr(e)&&e==t)return!0;let n;for(n in e)if(!(n in t))return!1;for(n in t)if(e[n]!==t[n])return!1;return!nK.und(n)||e===t}};function rK(e){return(e.eventObject||e.object).uuid+"/"+e.index}const iK=e=>e&&!!e.getState,oK=(e,t)=>{var n,r;return{root:iK(e)?e:null!=(n=null==(r=e.__r3f)?void 0:r.root)?n:t.__r3f.root,container:iK(e)?e.getState().scene:e}},aK="__default",sK={},uK=["children","key","ref"];let cK={};function lK(e,t){const n=e;return(null!=t&&t.instance||!n.__r3f)&&(n.__r3f={root:null,memoizedProps:{},objects:[],...t}),e}const hK=e=>e&&e.isOrthographicCamera,dK=i.createContext(null);let fK,pK=[],mK=[],gK=[];function vK(e,t){for(fK=0;fK<e.length;fK++)e[fK](t)}function yK(e,t){let n=t.clock.getDelta();for("never"===t.frameloop&&"number"==typeof e&&(n=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),fK=0;fK<t.internal.subscribers.length;fK++)t.internal.subscribers[fK].ref.current(t,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function bK(e){const{handlePointer:t}=function(e){const t=new bO;function n(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}function r(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f.handlers)?void 0:n["onPointer"+t]}))))}function i(t){const{internal:n}=e.getState();Array.from(n.hovered.values()).forEach((e=>{if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index))){const r=e.eventObject.__r3f.handlers;if(n.hovered.delete(rK(e)),r){const n={...e,intersections:t||[]};null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}))}function o(e,t){t.forEach((t=>{var n;return null==(n=t.__r3f.handlers)||null==n.onPointerMissed?void 0:n.onPointerMissed(e)}))}return{handlePointer:a=>{switch(a){case"onPointerLeave":case"onPointerCancel":return()=>i([]);case"onLostPointerCapture":return t=>{"pointerId"in t&&e.getState().internal.capturedMap.delete(t.pointerId),i([])}}return s=>{const{onPointerMissed:u,internal:c}=e.getState();!function(t){var n;const r=e.getState(),{raycaster:i,mouse:o,camera:a,size:s}=r,{offsetX:u,offsetY:c}=null!=(n=null==i.computeOffsets?void 0:i.computeOffsets(t,r))?n:t,{width:l,height:h}=s;o.set(u/l*2-1,-c/h*2+1),i.setFromCamera(o,a)}(s);const l="onPointerMove"===a,h=function(t,n){const{internal:r}=e.getState();return"pointerId"in n&&r.capturedMap.has(n.pointerId)&&t.push(...r.capturedMap.get(n.pointerId).values()),t}(function(t){const n=e.getState(),{raycaster:r,internal:i}=n;if(!r.enabled)return[];const o=new Set,a=[],s=t?t(i.interaction):i.interaction;let u=r.intersectObjects(s,!0).filter((e=>{const t=rK(e);return!o.has(t)&&(o.add(t),!0)}));r.filter&&(u=r.filter(u,n));for(const e of u){let t=e.object;for(;t;){var c;(null==(c=t.__r3f)?void 0:c.handlers)&&a.push({...e,eventObject:t}),t=t.parent}}return a}(l?r:void 0),s);l&&i(h),function(r,o,a){const{raycaster:s,mouse:u,camera:c,internal:l}=e.getState();if(r.length){const e=t.set(u.x,u.y,0).unproject(c),h="click"===o.type?n(o):0,d=e=>o.target.releasePointerCapture(e),f={stopped:!1};for(const t of r){const n=e=>{var n,r;return null!=(n=null==(r=l.capturedMap.get(e))?void 0:r.has(t.eventObject))&&n},p=e=>{l.capturedMap.has(e)?l.capturedMap.get(e).set(t.eventObject,t):l.capturedMap.set(e,new Map([[t.eventObject,t]])),o.target.setPointerCapture(e)};let m={};for(let e in Object.getPrototypeOf(o)){let t=o[e];"function"!=typeof t&&(m[e]=t)}let g={...t,...m,spaceX:u.x,spaceY:u.y,intersections:r,stopped:f.stopped,delta:h,unprojectedPoint:e,ray:s.ray,camera:c,stopPropagation:()=>{const e="pointerId"in o&&l.capturedMap.get(o.pointerId);(!e||e.has(t.eventObject))&&(g.stopped=f.stopped=!0,l.hovered.size&&Array.from(l.hovered.values()).find((e=>e.eventObject===t.eventObject)))&&i([...r.slice(0,r.indexOf(t)),t])},target:{hasPointerCapture:n,setPointerCapture:p,releasePointerCapture:d},currentTarget:{hasPointerCapture:n,setPointerCapture:p,releasePointerCapture:d},sourceEvent:o,nativeEvent:o};if(a(g),!0===f.stopped)break}}}(h,s,(e=>{const t=e.eventObject,n=t.__r3f.handlers;if(n)if(l){if(n.onPointerOver||n.onPointerEnter||n.onPointerOut||n.onPointerLeave){const t=rK(e),r=c.hovered.get(t);r?r.stopped&&e.stopPropagation():(c.hovered.set(t,e),null==n.onPointerOver||n.onPointerOver(e),null==n.onPointerEnter||n.onPointerEnter(e))}null==n.onPointerMove||n.onPointerMove(e)}else{const r=null==n?void 0:n[a];r&&("onClick"!==a&&"onContextMenu"!==a&&"onDoubleClick"!==a||c.initialHits.includes(t))&&(r(e),o(s,c.interaction.filter((e=>e!==t))))}})),"onPointerDown"===a&&(c.initialClick=[s.offsetX,s.offsetY],c.initialHits=h.map((e=>e.eventObject))),"onClick"!==a&&"onContextMenu"!==a&&"onDoubleClick"!==a||h.length||n(s)<=2&&(o(s,c.interaction),u&&u(s))}}}}(e),n={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};return{connected:!1,handlers:Object.keys(n).reduce(((e,n)=>({...e,[n]:t(n)})),{}),connect:t=>{var r;const{set:i,events:o}=e.getState();null==o.disconnect||o.disconnect(),i((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(r=null==o?void 0:o.handlers)?r:[]).forEach((([e,r])=>{const[i,o]=n[e];t.addEventListener(i,r,{passive:o})}))},disconnect:()=>{const{set:t,events:r}=e.getState();var i;r.connected&&(Object.entries(null!=(i=r.handlers)?i:[]).forEach((([e,t])=>{if(r&&r.connected instanceof HTMLElement){const[i]=n[e];r.connected.removeEventListener(i,t)}})),t((e=>({events:{...e.events,connected:!1}}))))}}}const wK="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;function xK({set:e}){return wK((()=>(e(new Promise((()=>null))),()=>e(!1))),[]),null}class _K extends i.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}function EK({children:e,fallback:t,tabIndex:n,resize:r,id:o,style:a,className:s,events:u,...c}){const[l,h]=tK({scroll:!0,debounce:{scroll:50,resize:0},...r}),d=i.useRef(null),[f,p]=i.useState(!1),[m,g]=i.useState(!1);if(f)throw f;if(m)throw m;return wK((()=>{h.width>0&&h.height>0&&function(e,t,{gl:n,size:r,mode:o=IK[1],events:a,onCreated:s,...u}={}){var c,l,h,d,f;r||(r={width:null!=(l=null==(h=t.parentElement)?void 0:h.clientWidth)?l:0,height:null!=(d=null==(f=t.parentElement)?void 0:f.clientHeight)?d:0});let p=CK.get(t),m=null==p?void 0:p.fiber,g=null==p?void 0:p.store,v=null==(c=g)?void 0:c.getState();if(m&&v){const e=v.internal.lastProps;void 0===u.dpr||nK.equ(e.dpr,u.dpr)||v.setDpr(u.dpr),void 0===r||nK.equ(e.size,r)||v.setSize(r.width,r.height),u.linear!==e.linear&&(DK(t),m=void 0)}if(!m){const e=((e,t)=>{return(n=e)&&n.render?e:new lH({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e});var n})(n,t);u.vr&&(e.xr.enabled=!0,e.setAnimationLoop((e=>PK(e,!0)))),g=((e,t,n,r)=>{const{gl:i,size:o,shadows:a=!1,linear:s=!1,flat:u=!1,vr:c=!1,orthographic:l=!1,frameloop:h="always",dpr:d=1,performance:f,clock:p=new mW,raycaster:m,camera:g,onPointerMissed:v}=r;a&&(i.shadowMap.enabled=!0,"object"==typeof a?Object.assign(i.shadowMap,a):i.shadowMap.type=SL),s||(u||(i.toneMapping=mB),i.outputEncoding=lD),"never"===h&&(p.stop(),p.elapsedTime=0);const y=zJ(((o,a)=>{const y=new qW,{params:b,...w}=m||{};e(y,{enabled:!0,...w,params:{...y.params,...b}},{});const x=g instanceof HF,_=x?g:l?new Gj(0,0,0,0,.1,1e3):new zF(75,0,.1,1e3);function E(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}x||(_.position.z=5,g&&e(_,g,{}),_.lookAt(0,0,0));const A=E(d),S=new bO,T=new bO;function M(e=a().camera,t=T,n=a().size){const{width:r,height:i}=n,o=r/i,s=e.getWorldPosition(S).distanceTo(t);if(hK(e))return{width:r/e.zoom,height:i/e.zoom,factor:1,distance:s,aspect:o};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*s,a=n*(r/i);return{width:a,height:n,factor:r/a,distance:s,aspect:o}}}let C;const I=e=>o((t=>({performance:{...t.performance,current:e}})));return{gl:i,set:o,get:a,invalidate:()=>t(a()),advance:(e,t)=>n(e,t,a()),linear:s,flat:u,scene:lK(new pH),camera:_,raycaster:y,clock:p,mouse:new sO,vr:c,frameloop:h,onPointerMissed:v,performance:{current:1,min:.5,max:1,debounce:200,...f,regress:()=>{const e=a();C&&clearTimeout(C),e.performance.current!==e.performance.min&&I(e.performance.min),C=setTimeout((()=>I(a().performance.max)),e.performance.debounce)}},size:{width:0,height:0},viewport:{initialDpr:A,dpr:A,width:0,height:0,aspect:0,distance:0,factor:0,getCurrentViewport:M},setSize:(e,t)=>{const n={width:e,height:t};o((e=>({size:n,viewport:{...e.viewport,...M(_,T,n)}})))},setDpr:e=>o((t=>({viewport:{...t.viewport,dpr:E(e)}}))),events:{connected:!1},internal:{active:!1,priority:0,frames:0,lastProps:r,interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t=0)=>(o((({internal:n})=>({internal:{...n,priority:n.priority+(t>0?1:0),subscribers:[...n.subscribers,{ref:e,priority:t}].sort(((e,t)=>e.priority-t.priority))}}))),()=>{o((({internal:n})=>({internal:{...n,priority:n.priority-(t>0?1:0),subscribers:n.subscribers.filter((t=>t.ref!==e))}})))})}}}));y.subscribe((()=>{const{camera:e,size:t,viewport:n,internal:r}=y.getState();r.lastProps.camera instanceof HF||(hK(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld()),i.setPixelRatio(n.dpr),i.setSize(t.width,t.height)}),(e=>[e.viewport.dpr,e.size]),VJ);const b=y.getState();return o&&b.setSize(o.width,o.height),y.subscribe((e=>t(e))),y})(BK,RK,PK,{gl:e,size:r,...u});const i=g.getState();i.get,m=LK.createContainer(g,IK.indexOf(o),!1,null),CK.set(t,{fiber:m,store:g}),a&&i.set({events:a(g)})}if(g&&m)return LK.updateContainer(i.createElement(kK,{store:g,element:e,onCreated:s,target:t}),m,null,(()=>{})),g;throw"Error creating root!"}(i.createElement(_K,{set:g},i.createElement(i.Suspense,{fallback:i.createElement(xK,{set:p})},e)),d.current,{...c,size:h,events:u||bK})}),[h,e]),wK((()=>{const e=d.current;return()=>DK(e)}),[]),i.createElement("div",{ref:l,id:o,className:s,tabIndex:n,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",...a}},i.createElement("canvas",{ref:d,style:{display:"block"}},t))}function AK(e=(e=>e),t){const n=i.useContext(dK);if(!n)throw"R3F hooks can only be used within the Canvas component!";return n(e,t)}function SK(e,t=0){const{subscribe:n}=i.useContext(dK).getState().internal,r=i.useRef(e);return i.useLayoutEffect((()=>{r.current=e}),[e]),i.useLayoutEffect((()=>{const e=n(r,t);return()=>e()}),[t,n]),null}function TK(e,t){return function(n,...r){const i=new n;return e&&e(i),Promise.all(r.map((e=>new Promise(((n,r)=>i.load(e,(e=>{e.scene&&Object.assign(e,function(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}(e.scene)),n(e)}),t,(t=>r(`Could not load ${e}: ${t.message}`))))))))}}function MK(e,t,n,r){const i=Array.isArray(t)?t:[t],o=QJ(TK(n,r),e,...i);return Array.isArray(t)?o:o[0]}_K.getDerivedStateFromError=()=>({error:!0}),MK.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return QJ.preload(TK(n),e,...r)};const CK=new Map,IK=["legacy","blocking","concurrent"],{invalidate:RK,advance:PK}=function(e){let t,n=!1;function r(i){if(n=!0,t=0,vK(pK,i),e.forEach((e=>{const n=e.store.getState();n.internal.active&&("always"===n.frameloop||n.internal.frames>0)&&(t+=yK(i,n))})),vK(mK,i),t>0)return requestAnimationFrame(r);vK(gK,i),n=!1}return{loop:r,invalidate:function t(i){if(!i)return e.forEach((e=>t(e.store.getState())));!i.vr&&i.internal.active&&"never"!==i.frameloop&&(i.internal.frames=Math.min(60,i.internal.frames+1),n||(n=!0,requestAnimationFrame(r)))},advance:function(t,n=!0,r){n&&vK(pK,t),r?yK(t,r):e.forEach((e=>yK(t,e.store.getState()))),n&&vK(mK,t)}}}(CK),{reconciler:LK,applyProps:BK}=function(e){function t(e,t,r={},o=!1){var a,s,u;const c=null!=(a=null==e?void 0:e.__r3f)?a:{},l=c.root,h=null!=(s=null==l||null==l.getState?void 0:l.getState())?s:{},d=[],f=[],p={};let m=0;Object.entries(t).forEach((([e,t])=>{-1===uK.indexOf(e)&&(p[e]=t)})),c.memoizedProps&&c.memoizedProps.args&&(p.args=c.memoizedProps.args),c.memoizedProps&&c.memoizedProps.attach&&(p.attach=c.memoizedProps.attach),e.__r3f&&(e.__r3f.memoizedProps=p);let g=Object.keys(t);for(m=0;m<g.length;m++)nK.equ(t[g[m]],r[g[m]])&&d.push(g[m]),nK.fun(t[g[m]])&&/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(g[m])&&f.push(g[m]);const v=[];if(o)for(g=Object.keys(r),m=0;m<g.length;m++)t.hasOwnProperty(g[m])||v.push(g[m]);const y=[...d,...uK];null!=(u=e.__r3f)&&u.instance&&y.push("object");const b={...t};for(g=Object.keys(b),m=0;m<g.length;m++)y.indexOf(g[m])>-1&&delete b[g[m]];const w=Object.entries(b);for(m=0;m<v.length;m++)"children"!==v[m]&&w.unshift([v[m],aK+"remove"]);if(w.length>0){if(w.forEach((([t,r])=>{if(!f.includes(t)){let i=e,o=i[t];if(t.includes("-")){const n=t.split("-");if(o=n.reduce(((e,t)=>e[t]),e),!o||!o.set){const[r,...o]=n.reverse();i=o.reverse().reduce(((e,t)=>e[t]),e),t=r}}if(r===aK+"remove")if(o&&o.constructor)r=new o.constructor(p.args);else if(i.constructor){const e=new i.constructor(i.__r3f.memoizedProps.args);r=e[o],e.dispose&&e.dispose()}else r=0;if(o&&o.set&&(o.copy||o instanceof sN)){if(Array.isArray(r))o.fromArray?o.fromArray(r):o.set(...r);else if(o.copy&&r&&r.constructor&&o.constructor.name===r.constructor.name)o.copy(r);else if(void 0!==r){const e=o instanceof WN;!e&&o.setScalar?o.setScalar(r):o instanceof sN&&r instanceof sN?o.mask=r.mask:o.set(r),!h.linear&&e&&o.convertSRGBToLinear()}}else i[t]=r,!h.linear&&i[t]instanceof dO&&(i[t].encoding=lD);n(e)}})),o&&l&&e.raycast&&c.handlers){c.handlers=void 0;const t=h.internal.interaction.indexOf(e);t>-1&&h.internal.interaction.splice(t,1)}f.length&&(o&&l&&e.raycast&&h.internal.interaction.push(e),c.handlers=f.reduce(((e,n)=>({...e,[n]:t[n]})),{})),e.parent&&i(e)}}function n(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function i(e){null==e.onUpdate||e.onUpdate(e)}function o(e,{args:n=[],...i},o,a,s){let u,c=`${e[0].toUpperCase()}${e.slice(1)}`;if(!iK(o)&&s){const e=t=>t.return?e(t.return):t.stateNode&&t.stateNode.containerInfo;o=e(s)}if(!o||!iK(o))throw`No valid root for ${c}!`;if("primitive"===e){if(void 0===i.object)throw"Primitives without 'object' are invalid!";u=lK(i.object,{root:o,instance:!0})}else{const e=cK[c]||r[c];if(!e)throw`${c} is not part of the THREE namespace! Did you forget to extend? See: https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#using-3rd-party-objects-declaratively`;const t=nK.arr(n);u=lK(t?new e(...n):new e(n),{root:o,memoizedProps:{args:t&&0===n.length?null:n}})}return c.endsWith("Geometry")?i={attach:"geometry",...i}:c.endsWith("Material")&&(i={attach:"material",...i}),t(u,i,{}),u}function a(e,t){let r=!1;t&&(t.attachArray?(nK.arr(e[t.attachArray])||(e[t.attachArray]=[]),e[t.attachArray].push(t)):t.attachObject?(nK.obj(e[t.attachObject[0]])||(e[t.attachObject[0]]={}),e[t.attachObject[0]][t.attachObject[1]]=t):t.attach&&!nK.fun(t.attach)?e[t.attach]=t:t.isObject3D&&(e.add(t),r=!0),r||(e.__r3f.objects.push(t),t.parent=e),i(t),n(t))}function s(e,t,r){let o=!1;if(t){if(t.attachArray){const n=e[t.attachArray];nK.arr(n)||(e[t.attachArray]=[]),n.splice(n.indexOf(r),0,t)}else{if(t.attachObject||t.attach&&!nK.fun(t.attach))return o=!0,a(e,t);if(t.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const n=e.children.filter((e=>e!==t)),i=n.indexOf(r);e.children=[...n.slice(0,i),t,...n.slice(i)],o=!0}}o||(e.__r3f.objects.push(t),t.parent=e),i(t),n(t)}}function u(e,t,n=!1){e&&[...e].forEach((e=>c(t,e,n)))}function c(e,t,r){if(t){var i;if(e.__r3f.objects){const n=e.__r3f.objects.length;e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t)),e.__r3f.objects.length<n&&(t.parent=null)}if(t.attachArray)e[t.attachArray]=e[t.attachArray].filter((e=>e!==t));else if(t.attachObject)delete e[t.attachObject[0]][t.attachObject[1]];else if(t.attach&&!nK.fun(t.attach))e[t.attach]=null;else if(t.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)}))}(t.__r3f.root,t)}const s=null==(i=t.__r3f)?void 0:i.instance,c=void 0===r?null!==t.dispose&&!s:r;var a;s||(u(null==(a=t.__r3f)?void 0:a.objects,t,c),u(t.children,t,c)),t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,s||delete t.__r3f),c&&t.dispose&&"Scene"!==t.type&&(0,qJ.unstable_runWithPriority)(qJ.unstable_IdlePriority,(()=>t.dispose())),n(e)}}function l(e,t,n,r){const i=e.parent;if(!i)return;const s=o(t,n,e.__r3f.root);e.children&&(e.children.forEach((e=>a(s,e))),e.children=[]),e.__r3f.objects.forEach((e=>a(s,e))),e.__r3f.objects=[],c(i,e),a(i,s),[r,r.alternate].forEach((e=>{null!==e&&(e.stateNode=s,e.ref&&("function"==typeof e.ref?e.ref(s):e.ref.current=s))}))}return{reconciler:WJ()({now:qJ.unstable_now,createInstance:o,removeChild:c,appendChild:a,appendInitialChild:a,insertBefore:s,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:nK.fun(setTimeout)?setTimeout:void 0,cancelTimeout:nK.fun(clearTimeout)?clearTimeout:void 0,setTimeout:nK.fun(setTimeout)?setTimeout:void 0,clearTimeout:nK.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendChildToContainer:(e,t)=>{const{container:n,root:r}=oK(e,t);n.__r3f.root=r,a(n,t)},removeChildFromContainer:(e,t)=>{const{container:n}=oK(e,t);c(n,t)},insertInContainerBefore:(e,t,n)=>{const{container:r}=oK(e,t);s(r,t,n)},commitUpdate(e,n,r,i,o,a){if(e.__r3f.instance&&o.object&&o.object!==e)l(e,r,o,a);else{const{args:n=[],...s}=o,{args:u=[],...c}=i;n.some(((e,t)=>nK.obj(e)?Object.entries(e).some((([e,n])=>n!==u[t][e])):e!==u[t]))?l(e,r,o,a):t(e,s,c,!0)}},hideInstance(e){e.isObject3D&&(e.visible=!1,n(e))},unhideInstance(e,t){(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0,n(e))},hideTextInstance(){throw new Error("Text is not allowed in the R3F tree.")},getPublicInstance:e=>e,getRootHostContext:e=>sK,getChildHostContext:e=>sK,createTextInstance(){},finalizeInitialChildren:e=>!!e.__r3f.handlers,commitMount(e){e.raycast&&e.__r3f.handlers&&e.__r3f.root.getState().internal.interaction.push(e)},prepareUpdate:()=>sK,shouldDeprioritizeSubtree:()=>!1,prepareForCommit:()=>null,preparePortalMount(...e){},resetAfterCommit(){},shouldSetTextContent:()=>!1,clearContainer:()=>!1}),applyProps:t}}();function kK({store:e,element:t,onCreated:n,target:r}){return i.useEffect((()=>{const t=e.getState();t.set((e=>({internal:{...e.internal,active:!0}}))),null==t.events.connect||t.events.connect(r),n&&n(t)}),[]),i.createElement(dK.Provider,{value:e},t)}function DK(e,t){const n=CK.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),LK.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{var n,r,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const r in e){var t,n;null==(t=(n=r).dispose)||t.call(n),delete e[r]}}(i),CK.delete(e),t&&t(e)}),500)}))}}LK.act,nK.fun(Symbol)&&Symbol.for&&Symbol.for("react.portal"),LK.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:"17.0.2"});class OK extends KD{constructor(e,t){super(),xw(this,"object",void 0),xw(this,"domElement",void 0),xw(this,"enabled",!0),xw(this,"target",new bO),xw(this,"minDistance",0),xw(this,"maxDistance",1/0),xw(this,"minZoom",0),xw(this,"maxZoom",1/0),xw(this,"minPolarAngle",0),xw(this,"maxPolarAngle",Math.PI),xw(this,"minAzimuthAngle",-1/0),xw(this,"maxAzimuthAngle",1/0),xw(this,"enableDamping",!1),xw(this,"dampingFactor",.05),xw(this,"enableZoom",!0),xw(this,"zoomSpeed",1),xw(this,"enableRotate",!0),xw(this,"rotateSpeed",1),xw(this,"enablePan",!0),xw(this,"panSpeed",1),xw(this,"screenSpacePanning",!0),xw(this,"keyPanSpeed",7),xw(this,"autoRotate",!1),xw(this,"autoRotateSpeed",2),xw(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),xw(this,"mouseButtons",{LEFT:vL.ROTATE,MIDDLE:vL.DOLLY,RIGHT:vL.PAN}),xw(this,"touches",{ONE:yL.ROTATE,TWO:yL.DOLLY_PAN}),xw(this,"target0",void 0),xw(this,"position0",void 0),xw(this,"zoom0",void 0),xw(this,"_domElementKeyEvents",null),xw(this,"getPolarAngle",void 0),xw(this,"getAzimuthalAngle",void 0),xw(this,"listenToKeyEvents",void 0),xw(this,"saveState",void 0),xw(this,"reset",void 0),xw(this,"update",void 0),xw(this,"connect",void 0),xw(this,"dispose",void 0),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof zF?this.object.zoom:1,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.listenToKeyEvents=e=>{e.addEventListener("keydown",V),this._domElementKeyEvents=e},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object instanceof zF?n.object.zoom:1},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object instanceof zF&&(n.object.zoom=n.zoom0,n.object.updateProjectionMatrix()),n.dispatchEvent(r),n.update(),s=a.NONE},this.update=(()=>{const t=new bO,i=(new yO).setFromUnitVectors(e.up,new bO(0,1,0)),o=i.clone().invert(),p=new bO,m=new yO,g=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),c.setFromVector3(t),n.autoRotate&&s===a.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=l.theta*n.dampingFactor,c.phi+=l.phi*n.dampingFactor):(c.theta+=l.theta,c.phi+=l.phi);let v=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(v)&&isFinite(y)&&(v<-Math.PI?v+=g:v>Math.PI&&(v-=g),y<-Math.PI?y+=g:y>Math.PI&&(y-=g),c.theta=v<=y?Math.max(v,Math.min(y,c.theta)):c.theta>(v+y)/2?Math.max(v,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=h,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(c),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(l.theta*=1-n.dampingFactor,l.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(l.set(0,0,0),d.set(0,0,0)),h=1,!!(f||p.distanceToSquared(n.object.position)>u||8*(1-m.dot(n.object.quaternion))>u)&&(n.dispatchEvent(r),p.copy(n.object.position),m.copy(n.object.quaternion),f=!1,!0)}})(),this.connect=e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),n.domElement=e,n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",U),n.domElement.addEventListener("wheel",z),n.domElement.addEventListener("touchstart",j),n.domElement.addEventListener("touchend",q),n.domElement.addEventListener("touchmove",W)},this.dispose=()=>{var e,t,r,i,o,a,s,u;null===(e=n.domElement)||void 0===e||e.removeEventListener("contextmenu",J),null===(t=n.domElement)||void 0===t||t.removeEventListener("pointerdown",U),null===(r=n.domElement)||void 0===r||r.removeEventListener("wheel",z),null===(i=n.domElement)||void 0===i||i.removeEventListener("touchstart",j),null===(o=n.domElement)||void 0===o||o.removeEventListener("touchend",q),null===(a=n.domElement)||void 0===a||a.removeEventListener("touchmove",W),null===(s=n.domElement)||void 0===s||s.ownerDocument.removeEventListener("pointermove",G),null===(u=n.domElement)||void 0===u||u.ownerDocument.removeEventListener("pointerup",H),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",V)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=a.NONE;const u=1e-6,c=new XW,l=new XW;let h=1;const d=new bO;let f=!1;const p=new sO,m=new sO,g=new sO,v=new sO,y=new sO,b=new sO,w=new sO,x=new sO,_=new sO;function E(){return Math.pow(.95,n.zoomSpeed)}function A(e){l.theta-=e}function S(e){l.phi-=e}const T=(()=>{const e=new bO;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}})(),M=(()=>{const e=new bO;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}})(),C=(()=>{const e=new bO;return function(t,r){const i=n.domElement;if(i&&n.object instanceof zF&&n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),T(2*t*a/i.clientHeight,n.object.matrix),M(2*r*a/i.clientHeight,n.object.matrix)}else i&&n.object instanceof Gj&&n.object.isOrthographicCamera?(T(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),M(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof zF&&n.object.isPerspectiveCamera?h/=e:n.object instanceof Gj&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(e){n.object instanceof zF&&n.object.isPerspectiveCamera?h*=e:n.object instanceof Gj&&n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){p.set(e.clientX,e.clientY)}function L(e){v.set(e.clientX,e.clientY)}function B(e){if(1==e.touches.length)p.set(e.touches[0].pageX,e.touches[0].pageY);else{const t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);p.set(t,n)}}function k(e){if(1==e.touches.length)v.set(e.touches[0].pageX,e.touches[0].pageY);else{const t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(t,n)}}function D(e){const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);w.set(0,r)}function O(e){if(1==e.touches.length)m.set(e.touches[0].pageX,e.touches[0].pageY);else{const t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);m.set(t,n)}g.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(A(2*Math.PI*g.x/t.clientHeight),S(2*Math.PI*g.y/t.clientHeight)),p.copy(m)}function N(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{const t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(t,n)}b.subVectors(y,v).multiplyScalar(n.panSpeed),C(b.x,b.y),v.copy(y)}function F(e){const t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);x.set(0,i),_.set(0,Math.pow(x.y/w.y,n.zoomSpeed)),I(_.y),w.copy(x)}function U(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;let r;switch(e.preventDefault(),null!==(t=n.domElement)&&void 0!==t&&t.focus?n.domElement.focus():window.focus(),e.button){case 0:r=n.mouseButtons.LEFT;break;case 1:r=n.mouseButtons.MIDDLE;break;case 2:r=n.mouseButtons.RIGHT;break;default:r=-1}switch(r){case vL.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),s=a.DOLLY;break;case vL.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;L(e),s=a.PAN}else{if(!1===n.enableRotate)return;P(e),s=a.ROTATE}break;case vL.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;P(e),s=a.ROTATE}else{if(!1===n.enablePan)return;L(e),s=a.PAN}break;default:s=a.NONE}var o,u;s!==a.NONE&&(null===(o=n.domElement)||void 0===o||o.ownerDocument.addEventListener("pointermove",G),null===(u=n.domElement)||void 0===u||u.ownerDocument.addEventListener("pointerup",H),n.dispatchEvent(i))}(e)}}function G(e){if(!1!==n.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1!==n.enabled)switch(e.preventDefault(),s){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),g.subVectors(m,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(A(2*Math.PI*g.x/t.clientHeight),S(2*Math.PI*g.y/t.clientHeight)),p.copy(m),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),_.subVectors(x,w),_.y>0?I(E()):_.y<0&&R(E()),w.copy(x),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,v).multiplyScalar(n.panSpeed),C(b.x,b.y),v.copy(y),n.update()}(e)}}(e)}}function H(e){switch(e.pointerType){case"mouse":case"pen":null===(t=n.domElement)||void 0===t||t.ownerDocument.removeEventListener("pointermove",G),null===(r=n.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointerup",H),!1!==n.enabled&&(n.dispatchEvent(o),s=a.NONE)}var t,r}function z(e){!1===n.enabled||!1===n.enableZoom||s!==a.NONE&&s!==a.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){e.deltaY<0?R(E()):e.deltaY>0&&I(E()),n.update()}(e),n.dispatchEvent(o))}function V(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function j(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(n.touches.ONE){case yL.ROTATE:if(!1===n.enableRotate)return;B(e),s=a.TOUCH_ROTATE;break;case yL.PAN:if(!1===n.enablePan)return;k(e),s=a.TOUCH_PAN;break;default:s=a.NONE}break;case 2:switch(n.touches.TWO){case yL.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&D(e),n.enablePan&&k(e)}(e),s=a.TOUCH_DOLLY_PAN;break;case yL.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&D(e),n.enableRotate&&B(e)}(e),s=a.TOUCH_DOLLY_ROTATE;break;default:s=a.NONE}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}}function W(e){if(!1!==n.enabled)switch(e.preventDefault(),s){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;O(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;N(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&F(e),n.enablePan&&N(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&F(e),n.enableRotate&&O(e)}(e),n.update();break;default:s=a.NONE}}function q(){!1!==n.enabled&&(n.dispatchEvent(o),s=a.NONE)}function J(e){!1!==n.enabled&&e.preventDefault()}void 0!==t&&this.connect(t),this.update()}}const NK=i.forwardRef((({camera:e,regress:t,enableDamping:n=!0,...r},o)=>{const a=AK((({invalidate:e})=>e)),s=AK((({camera:e})=>e)),u=AK((({gl:e})=>e)),c=AK((({performance:e})=>e)),l=e||s,h=i.useMemo((()=>new OK(l)),[l]);return SK((()=>h.update())),i.useEffect((()=>{const e=()=>{a(),t&&c.regress()};return h.connect(u.domElement),h.addEventListener("change",e),()=>{h.removeEventListener("change",e),h.dispose()}}),[t,h,a]),i.createElement("primitive",p({ref:o,object:h,enableDamping:n},r))}));class FK extends GF{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n      }"})}}const UK=e=>(new bO).setFromSpherical(new XW(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),GK=i.forwardRef((({radius:e=100,depth:t=50,count:n=5e3,saturation:r=0,factor:o=4,fade:a=!1},s)=>{const u=i.useRef(),[c,l,h]=i.useMemo((()=>{const i=[],a=[],s=Array.from({length:n},(()=>(.5+.5*Math.random())*o)),u=new WN;let c=e+t;const l=t/n;for(let e=0;e<n;e++)c-=l*Math.random(),i.push(...UK(c).toArray()),u.setHSL(e/n,r,.9),a.push(u.r,u.g,u.b);return[new Float32Array(i),new Float32Array(a),new Float32Array(s)]}),[n,t,o,e,r]);SK((e=>u.current&&(u.current.uniforms.time.value=e.clock.getElapsedTime())));const[d]=i.useState((()=>new FK));return i.createElement("points",{ref:s},i.createElement("bufferGeometry",{attach:"geometry"},i.createElement("bufferAttribute",{attachObject:["attributes","position"],args:[c,3]}),i.createElement("bufferAttribute",{attachObject:["attributes","color"],args:[l,3]}),i.createElement("bufferAttribute",{attachObject:["attributes","size"],args:[h,1]})),i.createElement("primitive",{dispose:void 0,ref:u,object:d,attach:"material",blending:kL,"uniforms-fade-value":a,transparent:!0,vertexColors:!0}))})),HK=new WeakMap;class zK extends XV{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new QV(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const e in t.attributeTypes){const n=t.attributeTypes[e];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[e]=n.name)}const n=JSON.stringify(t);if(HK.has(e)){const t=HK.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),HK.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new gF;e.index&&t.setIndex(new XN(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new XN(o,a))}return t}_loadLibrary(e,t){const n=new QV(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=VK.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function VK(){let e,t;function n(e,t,n,r,i,o){const a=o.num_components(),s=n.num_points()*a,u=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),l=e._malloc(u);t.GetAttributeDataArrayForAllPoints(n,o,c,u,l);const h=new i(e.HEAPF32.buffer,l,s).slice();return e._free(l),{name:r,array:h,itemSize:a}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,o=i.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,i){const o=i.attributeIDs,a=i.attributeTypes;let s,u;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,u=t.DecodeBufferToMesh(r,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,u=t.DecodeBufferToPointCloud(r,s)}if(!u.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const l={index:null,attributes:[]};for(const r in o){const u=self[a[r]];let c,h;if(i.useUniqueIDs)h=o[r],c=t.GetAttributeByUniqueId(s,h);else{if(h=t.GetAttributeId(s,e[o[r]]),-1===h)continue;c=t.GetAttribute(s,h)}l.attributes.push(n(e,t,s,r,u,c))}return c===e.TRIANGULAR_MESH&&(l.index=function(e,t,n){const r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);const a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,s)),e.destroy(s),l}(t,a,s,o),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}finally{t.destroy(s),t.destroy(a)}}))}}}const jK=(()=>{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!=typeof WebAssembly)return{supported:!1};var n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",console.log("Warning: meshopt_decoder is using experimental SIMD support"));var i=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e.charCodeAt(r);n[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}var o=0;for(r=0;r<e.length;++r)n[o++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,o)}(r),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function o(e,t,r,i,o,a){var s=n.exports.sbrk,u=r+3&-4,c=s(u*i),l=s(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,l);var d=e(c,r,i,l,o.length);if(0==d&&a&&a(c,u,i),t.set(h.subarray(c,c+r*i)),s(c-s(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:i,supported:!0,decodeVertexBuffer:function(e,t,r,i,s){o(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[a[s]])},decodeIndexBuffer:function(e,t,r,i){o(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence:function(e,t,r,i){o(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer:function(e,t,r,i,u,c){o(n.exports[s[u]],e,t,r,i,n.exports[a[c]])}}})();class WK extends XV{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new YK(e)})),this.register((function(e){return new ZK(e)})),this.register((function(e){return new $K(e)})),this.register((function(e){return new QK(e)})),this.register((function(e){return new KK(e)})),this.register((function(e){return new eX(e)}))}load(e,t,n,r){const i=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Kj.extractUrlBase(e),this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new QV(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(e){a(e)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},a={};if("string"==typeof e)i=e;else if(Kj.decodeText(new Uint8Array(e,0,4))===tX){try{o[JK.KHR_BINARY_GLTF]=new nX(e)}catch(e){return void(r&&r(e))}i=o[JK.KHR_BINARY_GLTF].content}else i=Kj.decodeText(new Uint8Array(e));const s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new AX(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](u);a[t.name]=t,o[t.name]=!0}if(s.extensionsUsed)for(let e=0;e<s.extensionsUsed.length;++e){const t=s.extensionsUsed[e],n=s.extensionsRequired||[];switch(t){case JK.KHR_MATERIALS_UNLIT:o[t]=new XK;break;case JK.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[t]=new aX;break;case JK.KHR_DRACO_MESH_COMPRESSION:o[t]=new rX(s,this.dracoLoader);break;case JK.KHR_TEXTURE_TRANSFORM:o[t]=new iX;break;case JK.KHR_MESH_QUANTIZATION:o[t]=new sX;break;default:n.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}u.setExtensions(o),u.setPlugins(a),u.parse(n,r)}}function qK(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const JK={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class KK{constructor(e){this.parser=e,this.name=JK.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const s=new WN(16777215);void 0!==o.color&&s.fromArray(o.color);const u=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new zj(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Uj(s),a.distance=u;break;case"spot":a=new kj(s),a.distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class XK{constructor(){this.name=JK.KHR_MATERIALS_UNLIT}getMaterialType(){return qN}extendParams(e,t,n){const r=[];e.color=new WN(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}class YK{constructor(e){this.parser=e,this.name=JK.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?EV:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new sO(e,-e)}return Promise.all(i)}}class QK{constructor(e){this.parser=e,this.name=JK.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?EV:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class ZK{constructor(e){this.parser=e,this.name=JK.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=n.images[i.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class $K{constructor(e){this.parser=e,this.name=JK.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class eX{constructor(e){this.name=JK.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new ArrayBuffer(o*a),u=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(s),o,a,u,e.mode,e.filter),s}))}return null}}const tX="glTF";class nX{constructor(e){this.name=JK.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:Kj.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==tX)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,1313821514===n){const n=new Uint8Array(e,12+i,t);this.content=Kj.decodeText(n)}else if(5130562===n){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rX{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=JK.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},u={};for(const e in o){const t=fX[e]||e.toLowerCase();a[t]=o[e]}for(const t in e.attributes){const r=fX[t]||t.toLowerCase();if(void 0!==o[t]){const i=n.accessors[e.attributes[t]],o=cX[i.componentType];u[r]=o,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,u)}))}))}}class iX{constructor(){this.name=JK.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e}}class oX extends _V{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new WN).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(e){for(const t in a)e.uniforms[t]=a[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",i).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(e){a.specular.value=e}},specularMap:{get:function(){return a.specularMap.value},set:function(e){a.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(e){a.glossiness.value=e}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(e){a.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class aX{constructor(){this.name=JK.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return oX}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new WN(1,1,1),e.opacity=1;const i=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new WN(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new WN(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",t)),i.push(n.assignTexture(e,"specularMap",t))}return Promise.all(i)}createMaterial(e){const t=new oX(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=bD,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class sX{constructor(){this.name=JK.KHR_MESH_QUANTIZATION}}class uX extends LV{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}}uX.prototype.beforeStart_=uX.prototype.copySampleValue_,uX.prototype.afterEnd_=uX.prototype.copySampleValue_,uX.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,c=r-t,l=(n-t)/c,h=l*l,d=h*l,f=e*u,p=f-u,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+l;for(let e=0;e!==a;e++){const t=o[p+e+a],n=o[p+e+s]*c,r=o[f+e+a],u=o[f+e]*c;i[e]=v*t+y*n+m*r+g*u}return i};const cX={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lX={9728:MB,9729:LB,9984:CB,9985:BB,9986:RB,9987:DB},hX={33071:SB,33648:TB,10497:AB},dX={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fX={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},pX={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mX={CUBICSPLINE:void 0,LINEAR:$k,STEP:Zk};function gX(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function vX(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new _V({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ML})),e.DefaultMaterial}function yX(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function bX(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function wX(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function xX(e){const t=e.extensions&&e.extensions[JK.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+_X(t.attributes):e.indices+":"+_X(e.attributes)+":"+e.mode,n}function _X(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function EX(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class AX{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new qK,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new nW(this.options.manager):this.textureLoader=new rj(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new QV(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};yX(i,o,r),bX(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone();return r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[JK.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(gX(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],o=dX[r.type],a=cX[r.componentType],s=a.BYTES_PER_ELEMENT,u=s*o,c=r.byteOffset||0,l=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let d,f;if(l&&l!==u){const e=Math.floor(c/l),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let u=t.cache.get(n);u||(d=new a(i,e*l,r.count*l/s),u=new mH(d,l/s),t.cache.add(n,u)),f=new vH(u,o,c%l/s,h)}else d=null===i?new a(r.count*o):new a(i,c,r.count*o),f=new XN(d,o,h);if(void 0!==r.sparse){const t=dX.SCALAR,n=cX[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,u=r.sparse.values.byteOffset||0,c=new n(e[1],s,r.sparse.count*t),l=new a(e[2],u,r.sparse.count*o);null!==i&&(f=new XN(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(f.setX(t,l[e*o]),o>=2&&f.setY(t,l[e*o+1]),o>=3&&f.setZ(t,l[e*o+2]),o>=4&&f.setW(t,l[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const r=this,i=this.json,o=this.options,a=i.textures[e],s=self.URL||self.webkitURL;let u=t.uri,c=!1,l=!0;if("image/jpeg"===t.mimeType&&(l=!1),void 0!==t.bufferView)u=r.getDependency("bufferView",t.bufferView).then((function(e){if("image/png"===t.mimeType){const t=new DataView(e,25,1).getUint8(0,!1);l=6===t||4===t||3===t}c=!0;const n=new Blob([e],{type:t.mimeType});return u=s.createObjectURL(n),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");return Promise.resolve(u).then((function(e){return new Promise((function(t,r){let i=t;!0===n.isImageBitmapLoader&&(i=function(e){t(new bz(e))}),n.load(gX(e,o.path),i,void 0,r)}))})).then((function(t){!0===c&&s.revokeObjectURL(u),t.flipY=!1,a.name&&(t.name=a.name),l||(t.format=YB);const n=(i.samplers||{})[a.sampler]||{};return t.magFilter=lX[n.magFilter]||LB,t.minFilter=lX[n.minFilter]||DB,t.wrapS=hX[n.wrapS]||AB,t.wrapT=hX[n.wrapT]||AB,r.associations.set(t,{type:"textures",index:e}),t}))}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[JK.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[JK.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[JK.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}e[t]=i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0!==t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal,a=!0===e.isSkinnedMesh,s=Object.keys(t.morphAttributes).length>0,u=s&&void 0!==t.morphAttributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new lz,FN.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new $H,FN.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||i||o||a||s){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),a&&(e+="skinning:"),r&&(e+="vertex-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:"),s&&(e+="morph-targets:"),u&&(e+="morph-normals:");let t=this.cache.get(e);t||(t=n.clone(),a&&(t.skinning=!0),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),s&&(t.morphTargets=!0),u&&(t.morphNormals=!0),r&&(t.vertexTangents=!0,t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return _V}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const a={},s=i.extensions||{},u=[];if(s[JK.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[JK.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),u.push(e.extendParams(a,i,t))}else if(s[JK.KHR_MATERIALS_UNLIT]){const e=r[JK.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),u.push(e.extendParams(a,i,t))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new WN(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.fromArray(e),a.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(a,"map",n.baseColorTexture)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===i.doubleSided&&(a.side=IL);const c=i.alphaMode||"OPAQUE";return"BLEND"===c?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===c&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==qN&&(u.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new sO(1,-1),void 0!==i.normalTexture.scale&&a.normalScale.set(i.normalTexture.scale,-i.normalTexture.scale)),void 0!==i.occlusionTexture&&o!==qN&&(u.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==qN&&(a.emissive=(new WN).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&o!==qN&&u.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture)),Promise.all(u).then((function(){let n;return n=o===oX?r[JK.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),i.name&&(n.name=i.name),n.map&&(n.map.encoding=lD),n.emissiveMap&&(n.emissiveMap.encoding=lD),bX(n,i),t.associations.set(n,{type:"materials",index:e}),i.extensions&&yX(r,n,i),n}))}createUniqueName(e){const t=UW.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[JK.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return TX(n,e,t)}))}const o=[];for(let n=0,a=e.length;n<a;n++){const a=e[n],s=xX(a),u=r[s];if(u)o.push(u.promise);else{let e;e=a.extensions&&a.extensions[JK.KHR_DRACO_MESH_COMPRESSION]?i(a):TX(new gF,a,t),r[s]={primitive:a,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,a=[];for(let e=0,t=o.length;e<t;e++){const t=void 0===o[e].material?vX(this.cache):this.getDependency("material",o[e].material);a.push(t)}return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],u=[];for(let n=0,c=s.length;n<c;n++){const c=s[n],l=o[n];let h;const d=a[n];if(4===l.mode||5===l.mode||6===l.mode||void 0===l.mode)h=!0===i.isSkinnedMesh?new zH(c,d):new kF(c,d),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),5===l.mode?h.geometry=MX(h.geometry,sD):6===l.mode&&(h.geometry=MX(h.geometry,uD));else if(1===l.mode)h=new uz(c,d);else if(3===l.mode)h=new oz(c,d);else if(2===l.mode)h=new cz(c,d);else{if(0!==l.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+l.mode);h=new mz(c,d)}Object.keys(h.geometry.morphAttributes).length>0&&wX(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),bX(h,i),l.extensions&&yX(r,h,l),t.assignFinalMaterial(h),u.push(h)}if(1===u.length)return u[0];const c=new oH;for(let e=0,t=u.length;e<t;e++)c.add(u[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new zF(aO.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Gj(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),bX(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],i=[],o=[],a=[];for(let e=0,s=t.channels.length;e<s;e++){const s=t.channels[e],u=t.samplers[s.sampler],c=s.target,l=void 0!==c.node?c.node:c.id,h=void 0!==t.parameters?t.parameters[u.input]:u.input,d=void 0!==t.parameters?t.parameters[u.output]:u.output;n.push(this.getDependency("node",l)),r.push(this.getDependency("accessor",h)),i.push(this.getDependency("accessor",d)),o.push(u),a.push(c)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then((function(n){const r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=i[e],c=o[e],l=a[e],h=s[e];if(void 0===t)continue;let d;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,pX[h.path]){case pX.weights:d=UV;break;case pX.rotation:d=HV;break;case pX.position:case pX.scale:default:d=VV}const f=t.name?t.name:t.uuid,p=void 0!==l.interpolation?mX[l.interpolation]:$k,m=[];pX[h.path]===pX.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)})):m.push(f);let g=c.array;if(c.normalized){const e=EX(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,t=m.length;e<t;e++){const t=new d(m[e]+"."+pX[h.path],n.array,g,p);"CUBICSPLINE"===l.interpolation&&(t.createInterpolant=function(e){return new uX(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(t)}}const c=t.name?t.name:"animation_"+e;return new jV(c,void 0,u)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==i.camera&&t.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let a;if(a=!0===i.isBone?new VH:t.length>1?new oH:1===t.length?t[0]:new xN,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=o),bX(a,i),i.extensions&&yX(n,a,i),void 0!==i.matrix){const e=new YO;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.set(a,{type:"nodes",index:e}),a}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,o=new oH;r.name&&(o.name=i.createUniqueName(r.name)),bX(o,r),r.extensions&&yX(n,o,r);const a=r.nodes||[],s=[];for(let e=0,n=a.length;e<n;e++)s.push(SX(a[e],o,t,i));return Promise.all(s).then((function(){return o}))}}function SX(e,t,n,r){const i=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===i.skin)return e;let t;return r.getDependency("skin",i.skin).then((function(e){t=e;const n=[];for(let e=0,i=t.joints.length;e<i;e++)n.push(r.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],i=[];for(let e=0,o=n.length;e<o;e++){const o=n[e];if(o){r.push(o);const n=new YO;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),i.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new JH(r,i),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const o=[];if(i.children){const t=i.children;for(let i=0,a=t.length;i<a;i++){const a=t[i];o.push(SX(a,e,n,r))}}return Promise.all(o)}))}function TX(e,t,n){const r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in r){const n=fX[t]||t.toLowerCase();n in e.attributes||i.push(o(r[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return bX(e,t),function(e,t,n){const r=t.attributes,i=new _O;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new bO(t[0],t[1],t[2]),new bO(o[0],o[1],o[2])),e.normalized){const t=EX(cX[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new bO,t=new bO;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const e=EX(cX[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new HO;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);const o=[],a=[];for(let s=0,u=t.length;s<u;s++){const u=t[s];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}}return Promise.all([Promise.all(o),Promise.all(a)]).then((function(t){const n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function MX(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(t===uD)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o}function CX(e,t){return n=>{if(e){const t=new zK;t.setDecoderPath("string"==typeof e?e:"https://www.gstatic.com/draco/v1/decoders/"),n.setDRACOLoader(t)}t&&n.setMeshoptDecoder(jK)}}function IX(e,t=!0,n=!0){return MK(WK,e,CX(t,n))}function RX(e){var t=(0,i.useRef)(),n=IX("./public/scene.gltf"),r=n.nodes,o=n.materials;return i.createElement("group",p({ref:t},e,{dispose:null}),i.createElement("group",{rotation:[-Math.PI/2,0,0]},i.createElement("group",{rotation:[Math.PI/2,0,0]},i.createElement("group",{position:[0,173.29,-2.92],rotation:[-Math.PI/2,0,0],scale:[.9,1.09,1.02]},i.createElement("mesh",{geometry:r.defaultMaterial.geometry,material:o.material})))))}var PX;IX.preload=(e,t=!0,n=!0)=>MK.preload(WK,e,CX(t,n)),IX.preload("./public/scene.gltf");var LX,BX,kX,DX=ky.div(PX||(PX=c(["\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: -1;\n  width: 100%;\n  height: 100%;\n  background-color: black;\n"])));function OX(){var e=(0,i.useRef)(null);return SK((function(){return e.current.rotation.y=e.current.rotation.y+=.007})),i.createElement("mesh",{ref:e,position:[15,-2,0],scale:.03},i.createElement(RX,null))}function NX(){return i.createElement(i.Fragment,null,i.createElement(DX,null,i.createElement(EK,{sRGB:!0,shadowMap:!0,colorManagement:!0,gl:{alpha:!1},camera:{position:[-10,10,20],fov:60}},i.createElement("ambientLight",{color:"#121212",intensity:.1}),i.createElement("spotLight",{position:[28,25,20],angle:.3}),i.createElement("hemisphereLight",{color:"#eeeeee",skyColor:"#fffbbb",groundColor:"#f5f5f5",intensity:.8}),i.createElement("mesh",{position:[0,35,35]}),i.createElement(NK,null),i.createElement(GK,null),i.createElement(i.Suspense,{fallback:null},i.createElement(OX,null)))))}var FX=ky.div(LX||(LX=c(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 30vw;\n  height: 100vh;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  -ms-overflow-style: none; /* for Internet Explorer, Edge */\n  scrollbar-width: none; /* for Firefox */\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    display: none; /* for Chrome, Safari, and Opera */\n  }\n  background-color: ",";\n  color: ",";\n  min-width: ",";\n  background-color: ",";\n  #authIcon {\n    cursor: pointer;\n    margin-left: 6.5rem;\n    margin-top: 2.5rem;\n  }\n  #title {\n    color: ",";\n    font-size: 1.5rem;\n  }\n\n  #authSection {\n    width: 40vw;\n    min-width: 30vw;\n    margin: 0;\n    margin-top: 5rem;\n    margin-left: 5rem;\n  }\n  #icon {\n    position: absolute;\n    transform: scale(0.5);\n    left: -1rem;\n    top: -1rem;\n  }\n  #buttons {\n    display: flex;\n  }\n  #authSubHeading,\n  #authSubDescription {\n    @font-face {\n      font-family: 'Monaco';\n      src: url('./ttf/SquaredMonaco/monaco.ttf');\n    }\n    margin: 1rem 0 0 0;\n    color: ",";\n    font-family: Monaco;\n    font-size: 1.5rem;\n  }\n  @media screen and (max-width: ",") {\n    height: 88vh;\n    #authSection {\n      .inputWrapper {\n        display: flex;\n        align-items: center;\n      }\n      #logInSection {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        #logInBtn {\n          min-width: 5rem;\n          height: 6rem;\n        }\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.black}),(function(e){return e.theme.colors.white}),(function(e){return e.theme.deviceSizes.mobileL}),(function(e){return"dark"===e.mode?"rgba(32,32,32,0.8)":"rgba(244,244,244,0.8)"}),(function(e){return"dark"===e.mode?e.theme.colors.lightBlue500:e.theme.colors.white}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.deviceSizes.mobileL})),UX=ky.input.attrs((function(){return{size:"0.6em"}}))(BX||(BX=c(["\n  background-color: ",";\n  color: ",";\n  font-size: 1em;\n  border: 2px solid ",";\n  border-radius: 3px;\n  margin: ",";\n  padding: ",";\n  cursor: pointer;\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return e.theme.colors.lightBlue500}),(function(e){return e.theme.colors.lightBlue500}),(function(e){return e.size}),(function(e){return e.size})),GX=ky.button(kX||(kX=c(["\n  min-width: ",";\n  background-color: ",";\n  color: ",";\n  line-height: 2.5em;\n  border: 2px solid\n    ",";\n  border-radius: 13px;\n  cursor: pointer;\n  padding: ",";\n  margin: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.interval.xl}),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor}),(function(e){return e.theme.button.padding}),(function(e){return e.theme.button.margin}),(function(e){return e.theme.button.fontSize}));function HX(){var e=u((0,i.useState)(""),2),t=e[0],n=e[1],r=u((0,i.useState)(""),2),o=r[0],a=r[1],s=u((0,i.useState)("dark"),2),c=s[0],l=(s[1],Z()),h=function(e){var t=e.target.value,r=e.target.name;"email"===r?n(t):"password"===r&&a(t)},d=function(){var e=ce(he().mark((function e(n){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,rv.signInWithEmailAndPassword(t,o);case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("error occurred!",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return i.createElement("div",null,i.createElement(FX,{mode:c},i.createElement("div",{onClick:function(){l.replace("/")},id:"authIcon"},i.createElement(mL,{id:"icon"}),i.createElement("h3",{id:"title"},"Space Quack Quack")),i.createElement("div",{id:"authSection"},i.createElement("form",{autoComplete:"off",onSubmit:d},i.createElement("div",{id:"logInSection"},i.createElement("div",{id:"idAndPwdWrapper"},i.createElement("div",{className:"inputWrapper"},i.createElement("label",{name:"email"},i.createElement(ox,{size:"25"})),i.createElement(UX,{mode:c,onChange:h,value:t,type:"text",name:"email",placeholder:"E-mail",required:!0})),i.createElement("div",{className:"inputWrapper"},i.createElement("label",{name:"password"},i.createElement(ax,{size:"25"})),i.createElement(UX,{mode:c,onChange:h,value:o,name:"password",type:"password",placeholder:"password",required:!0}))),i.createElement(GX,{id:"logInBtn",mode:c,type:"submit"},""))),i.createElement("div",{id:"buttons"},i.createElement(hx,{AuthInput:UX,Button:GX}),i.createElement(AS,{Button:GX})),i.createElement("div",null,i.createElement("h3",{id:"authSubHeading"}," drag and Find your space duck! "),i.createElement("h5",{id:"authSubDescription"},"Join Space Quack Quack today.")))),i.createElement(NX,{id:"meshes"}))}function zX(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=zX(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function VX(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=zX(e))&&(r&&(r+=" "),r+=t);return r}const jX=function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,o=t.withTheme,a=void 0!==o&&o,s=t.name,u=Dy(t,["defaultTheme","withTheme","name"]),c=s,l=lA(e,p({defaultTheme:r,Component:n,name:s||n.displayName,classNamePrefix:c},u)),h=i.forwardRef((function(e,t){e.classes;var o,u=e.innerRef,c=Dy(e,["classes","innerRef"]),h=l(p({},n.defaultProps,e)),d=c;return("string"==typeof s||a)&&(o=Ny()||r,s&&(d=Fy({theme:o,name:s,props:c})),a&&!d.theme&&(d.theme=o)),i.createElement(n,p({ref:u||t,classes:h},d))}));return z()(h,n),h}}(e,p({defaultTheme:mS},t))};var WX=!0,qX=!1,JX=null,KX={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function XX(e){e.metaKey||e.altKey||e.ctrlKey||(WX=!0)}function YX(){WX=!1}function QX(){"hidden"===this.visibilityState&&qX&&(WX=!0)}function ZX(e){var t,n,r,i=e.target;try{return i.matches(":focus-visible")}catch(e){}return WX||(n=(t=i).type,!("INPUT"!==(r=t.tagName)||!KX[n]||t.readOnly)||"TEXTAREA"===r&&!t.readOnly||!!t.isContentEditable)}function $X(){qX=!0,window.clearTimeout(JX),JX=window.setTimeout((function(){qX=!1}),100)}function eY(){return{isFocusVisible:ZX,onBlurVisible:$X,ref:i.useCallback((function(e){var t,n=o.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",XX,!0),t.addEventListener("mousedown",YX,!0),t.addEventListener("pointerdown",YX,!0),t.addEventListener("touchstart",YX,!0),t.addEventListener("visibilitychange",QX,!0))}),[])}}const tY=i.createContext(null);function nY(e,t){var n=Object.create(null);return e&&i.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,i.isValidElement)(e)?t(e):e}(e)})),n}function rY(e,t,n){return null!=n[t]?n[t]:e.props[t]}function iY(e,t,n){var r=nY(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(o).forEach((function(a){var s=o[a];if((0,i.isValidElement)(s)){var u=a in t,c=a in r,l=t[a],h=(0,i.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,i.isValidElement)(l)&&(o[a]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:l.props.in,exit:rY(s,"exit",e),enter:rY(s,"enter",e)})):o[a]=(0,i.cloneElement)(s,{in:!1}):o[a]=(0,i.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:rY(s,"exit",e),enter:rY(s,"enter",e)})}})),o}var oY=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},aY=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(px(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}h(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,a=t.handleExited;return{children:t.firstRender?(n=e,r=a,nY(n.children,(function(e){return(0,i.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:rY(e,"appear",n),enter:rY(e,"enter",n),exit:rY(e,"exit",n)})}))):iY(e,o,a),firstRender:!1}},n.handleExited=function(e,t){var n=nY(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=p({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=G(e,["component","childFactory"]),o=this.state.contextValue,a=oY(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i.createElement(tY.Provider,{value:o},a):i.createElement(tY.Provider,{value:o},i.createElement(t,r,a))},t}(i.Component);aY.propTypes={},aY.defaultProps={component:"div",childFactory:function(e){return e}};const sY=aY;var uY="undefined"==typeof window?i.useEffect:i.useLayoutEffect;const cY=function(e){var t=e.classes,n=e.pulsate,r=void 0!==n&&n,o=e.rippleX,a=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=void 0===c?function(){}:c,h=e.timeout,d=i.useState(!1),f=d[0],p=d[1],m=VX(t.ripple,t.rippleVisible,r&&t.ripplePulsate),g={width:s,height:s,top:-s/2+a,left:-s/2+o},v=VX(t.child,f&&t.childLeaving,r&&t.childPulsate),y=qy(l);return uY((function(){if(!u){p(!0);var e=setTimeout(y,h);return function(){clearTimeout(e)}}}),[y,u,h]),i.createElement("span",{className:m,style:g},i.createElement("span",{className:v}))};var lY=i.forwardRef((function(e,t){var n=e.center,r=void 0!==n&&n,o=e.classes,a=e.className,s=Dy(e,["center","classes","className"]),u=i.useState([]),c=u[0],l=u[1],h=i.useRef(0),d=i.useRef(null);i.useEffect((function(){d.current&&(d.current(),d.current=null)}),[c]);var f=i.useRef(!1),m=i.useRef(null),g=i.useRef(null),v=i.useRef(null);i.useEffect((function(){return function(){clearTimeout(m.current)}}),[]);var y=i.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,s=e.cb;l((function(e){return[].concat(Yy(e),[i.createElement(cY,{key:h.current,classes:o,timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a})])})),h.current+=1,d.current=s}),[o]),b=i.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.pulsate,o=void 0!==i&&i,a=t.center,s=void 0===a?r||t.pulsate:a,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===e.type&&f.current)f.current=!1;else{"touchstart"===e.type&&(f.current=!0);var l,h,d,p=c?null:v.current,b=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(b.width/2),h=Math.round(b.height/2);else{var w=e.touches?e.touches[0]:e,x=w.clientX,_=w.clientY;l=Math.round(x-b.left),h=Math.round(_-b.top)}if(s)(d=Math.sqrt((2*Math.pow(b.width,2)+Math.pow(b.height,2))/3))%2==0&&(d+=1);else{var E=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,A=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;d=Math.sqrt(Math.pow(E,2)+Math.pow(A,2))}e.touches?null===g.current&&(g.current=function(){y({pulsate:o,rippleX:l,rippleY:h,rippleSize:d,cb:n})},m.current=setTimeout((function(){g.current&&(g.current(),g.current=null)}),80)):y({pulsate:o,rippleX:l,rippleY:h,rippleSize:d,cb:n})}}),[r,y]),w=i.useCallback((function(){b({},{pulsate:!0})}),[b]),x=i.useCallback((function(e,t){if(clearTimeout(m.current),"touchend"===e.type&&g.current)return e.persist(),g.current(),g.current=null,void(m.current=setTimeout((function(){x(e,t)})));g.current=null,l((function(e){return e.length>0?e.slice(1):e})),d.current=t}),[]);return i.useImperativeHandle(t,(function(){return{pulsate:w,start:b,stop:x}}),[w,b,x]),i.createElement("span",p({className:VX(o.root,a),ref:v},s),i.createElement(sY,{component:null,exit:!0},c))}));const hY=jX((function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(550,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}}),{flip:!1,name:"MuiTouchRipple"})(i.memo(lY));var dY=i.forwardRef((function(e,t){var n=e.action,r=e.buttonRef,a=e.centerRipple,s=void 0!==a&&a,u=e.children,c=e.classes,l=e.className,h=e.component,d=void 0===h?"button":h,f=e.disabled,m=void 0!==f&&f,g=e.disableRipple,v=void 0!==g&&g,y=e.disableTouchRipple,b=void 0!==y&&y,w=e.focusRipple,x=void 0!==w&&w,_=e.focusVisibleClassName,E=e.onBlur,A=e.onClick,S=e.onFocus,T=e.onFocusVisible,M=e.onKeyDown,C=e.onKeyUp,I=e.onMouseDown,R=e.onMouseLeave,P=e.onMouseUp,L=e.onTouchEnd,B=e.onTouchMove,k=e.onTouchStart,D=e.onDragLeave,O=e.tabIndex,N=void 0===O?0:O,F=e.TouchRippleProps,U=e.type,G=void 0===U?"button":U,H=Dy(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),z=i.useRef(null),V=i.useRef(null),j=i.useState(!1),W=j[0],q=j[1];m&&W&&q(!1);var J=eY(),K=J.isFocusVisible,X=J.onBlurVisible,Y=J.ref;function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return qy((function(r){return t&&t(r),!n&&V.current&&V.current[e](r),!0}))}i.useImperativeHandle(n,(function(){return{focusVisible:function(){q(!0),z.current.focus()}}}),[]),i.useEffect((function(){W&&x&&!v&&V.current.pulsate()}),[v,x,W]);var Z=Q("start",I),$=Q("stop",D),ee=Q("stop",P),te=Q("stop",(function(e){W&&e.preventDefault(),R&&R(e)})),ne=Q("start",k),re=Q("stop",L),ie=Q("stop",B),oe=Q("stop",(function(e){W&&(X(e),q(!1)),E&&E(e)}),!1),ae=qy((function(e){z.current||(z.current=e.currentTarget),K(e)&&(q(!0),T&&T(e)),S&&S(e)})),se=function(){var e=o.findDOMNode(z.current);return d&&"button"!==d&&!("A"===e.tagName&&e.href)},ue=i.useRef(!1),ce=qy((function(e){x&&!ue.current&&W&&V.current&&" "===e.key&&(ue.current=!0,e.persist(),V.current.stop(e,(function(){V.current.start(e)}))),e.target===e.currentTarget&&se()&&" "===e.key&&e.preventDefault(),M&&M(e),e.target===e.currentTarget&&se()&&"Enter"===e.key&&!m&&(e.preventDefault(),A&&A(e))})),le=qy((function(e){x&&" "===e.key&&V.current&&W&&!e.defaultPrevented&&(ue.current=!1,e.persist(),V.current.stop(e,(function(){V.current.pulsate(e)}))),C&&C(e),A&&e.target===e.currentTarget&&se()&&" "===e.key&&!e.defaultPrevented&&A(e)})),he=d;"button"===he&&H.href&&(he="a");var de={};"button"===he?(de.type=G,de.disabled=m):("a"===he&&H.href||(de.role="button"),de["aria-disabled"]=m);var fe=Hy(r,t),pe=Hy(Y,z),me=Hy(fe,pe),ge=i.useState(!1),ve=ge[0],ye=ge[1];i.useEffect((function(){ye(!0)}),[]);var be=ve&&!v&&!m;return i.createElement(he,p({className:VX(c.root,l,W&&[c.focusVisible,_],m&&c.disabled),onBlur:oe,onClick:A,onFocus:ae,onKeyDown:ce,onKeyUp:le,onMouseDown:Z,onMouseLeave:te,onMouseUp:ee,onDragLeave:$,onTouchEnd:re,onTouchMove:ie,onTouchStart:ne,ref:me,tabIndex:m?-1:N},de,H),u,be?i.createElement(hY,p({ref:V,center:s},F)):null)}));const fY=jX({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},{name:"MuiButtonBase"})(dY);function pY(e){if("string"!=typeof e)throw new Error(pA(7));return e.charAt(0).toUpperCase()+e.slice(1)}var mY=i.forwardRef((function(e,t){var n=e.edge,r=void 0!==n&&n,o=e.children,a=e.classes,s=e.className,u=e.color,c=void 0===u?"default":u,l=e.disabled,h=void 0!==l&&l,d=e.disableFocusRipple,f=void 0!==d&&d,m=e.size,g=void 0===m?"medium":m,v=Dy(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return i.createElement(fY,p({className:VX(a.root,s,"default"!==c&&a["color".concat(pY(c))],h&&a.disabled,"small"===g&&a["size".concat(pY(g))],{start:a.edgeStart,end:a.edgeEnd}[r]),centerRipple:!0,focusRipple:!f,disabled:h,ref:t},v),i.createElement("span",{className:a.label},o))}));const gY=jX((function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:UA(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:UA(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:UA(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}}),{name:"MuiIconButton"})(mY);var vY=i.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,a=e.color,s=void 0===a?"inherit":a,u=e.component,c=void 0===u?"svg":u,l=e.fontSize,h=void 0===l?"default":l,d=e.htmlColor,f=e.titleAccess,m=e.viewBox,g=void 0===m?"0 0 24 24":m,v=Dy(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return i.createElement(c,p({className:VX(r.root,o,"inherit"!==s&&r["color".concat(pY(s))],"default"!==h&&r["fontSize".concat(pY(h))]),focusable:"false",viewBox:g,color:d,"aria-hidden":!f||void 0,role:f?"img":void 0,ref:t},v),n,f?i.createElement("title",null,f):null)}));vY.muiName="SvgIcon";const yY=jX((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(vY);function bY(e,t){var n=function(t,n){return i.createElement(yY,p({ref:n},t),e)};return n.muiName=yY.muiName,i.memo(i.forwardRef(n))}const wY=bY(i.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})),xY=bY(i.createElement("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}));var _Y=Jw({name:"image",initialState:{URL:null},reducers:{setURL:function(e,t){e.URL=t.payload}},extraReducers:{}}),EY=_Y.actions.setURL,AY=function(e){return e.image.URL};const SY=_Y.reducer;var TY=Jw({name:"edit",initialState:{edit:!1},reducers:{setEdit:function(e){e.edit=!e.edit}},extraReducers:{}}),MY=TY.actions.setEdit,CY=function(e){return e.edit.edit};const IY=TY.reducer,RY=bY(i.createElement("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"}));var PY,LY=n(877),BY=ky.div(PY||(PY=c(["\n  #HideInput {\n    display: none;\n  }\n  #icon {\n    color: ",";\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}));const kY=i.memo((function(){var e=rv.currentUser,t=bb(),n=Eb(tx);return i.createElement(BY,{mode:n},i.createElement("div",null,i.createElement("div",{id:"HideInput"},i.createElement("input",{id:"imageUpload",type:"file",onChange:function(n){var r,i;n.preventDefault(),r=n.target.files[0],(i=new FileReader).readAsDataURL(r),i.onloadend=function(){var n=ce(he().mark((function n(r){var i,o,a,s;return he().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.target.result,o=av.ref().child("images/".concat(e.uid,"/").concat((0,LY.v4)())),n.next=4,o.putString(i,"data_url");case 4:return a=n.sent,n.next=7,a.ref.getDownloadURL();case 7:s=n.sent,t(EY(s));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},accept:"image/*"})),i.createElement("label",{htmlFor:"imageUpload"},i.createElement(gY,{id:"icon",component:"div"},i.createElement(RY,null)))))}));var DY,OY,NY,FY,UY=ky.div(DY||(DY=c(["\n  img {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 95%;\n    transform: translate(-50%, -50%);\n  }\n  div {\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(12, 12, 12, 0.8);\n    overflow-y: hidden;\n  }\n"])));function GY(e){var t=e.URL,n=e.setIsImageClicked;return i.createElement(UY,null,i.createElement("div",{onClick:function(){n(!1)}},i.createElement("img",{id:"modalImg",alt:" ",src:t})))}var HY=ky.div(OY||(OY=c(["\n  margin: 3rem;\n  padding: 1rem;\n  border-bottom: 1px solid\n    ",";\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor})),zY=ky.div(NY||(NY=c(["\n  #threadUserPhotoAndThreadInfo {\n    display: flex;\n  }\n  img {\n    cursor: pointer;\n  }\n  img:not(#userPhoto, #modalImg) {\n    width: 20vw;\n    margin-bottom: 2rem;\n  }\n  #threadData {\n    padding: 0.5rem 0 2rem 0;\n  }\n  #threadUserPhotoUrl {\n    img {\n      width: 3rem;\n      height: 3rem;\n      border-radius: 50%;\n    }\n  }\n  #threadInfo {\n    width: 45vw;\n    margin-left: ",";\n    padding-left: ",";\n    border: 2px solid\n      ",";\n    background-color: ",";\n\n    color: ",";\n    border-radius: 3px;\n  }\n"])),(function(e){return e.theme.margins.base}),(function(e){return e.theme.margins.base}),(function(e){return"dark"===e.mode?function(e){return e.theme.colors.darkBorderColor}:e.theme.colors.lightBorderColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor})),VY=ky.div(FY||(FY=c(["\n  #deleteIcon {\n    color: ",";\n  }\n  #editIcon {\n    color: ",";\n  }\n  #uploadImageBtnAndSubmitBtn {\n    display: flex;\n  }\n  #setImageBtnAndSubmitBtn {\n    img {\n      width: 10rem;\n    }\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}));const jY=i.memo((function(e){var t=e.thread,n=e.isOwner,r=(e.imageDownloadUrls,e.QuackInput),o=e.SubmitBtn,a=u((0,i.useState)(!1),2),s=a[0],c=a[1],l=u((0,i.useState)(t.data),2),h=l[0],d=l[1],f=u((0,i.useState)(!1),2),p=f[0],m=f[1],g=rv.currentUser,v=Eb(tx),y=Eb(AY),b=Eb(CY),w=bb();(0,i.useEffect)((function(){!b&&s&&c(!1)}),[b]);var x=function(){c(!s),w(MY())};return i.createElement(HY,null,i.createElement(zY,{mode:v},null!==t.imageURL?i.createElement(i.Fragment,null,i.createElement("img",{onClick:function(){m(!0)},alt:"".concat(g.displayName,"'s image"),src:t.imageURL}),p&&i.createElement(GY,{URL:t.imageURL,setIsImageClicked:m})):null,i.createElement("div",{id:"threadUserPhotoAndThreadInfo"},i.createElement("div",{id:"threadUserPhotoUrl"},i.createElement("img",{id:"userPhoto",alt:"user photo",src:t.photoURL})),i.createElement("div",{id:"threadInfo"},i.createElement("div",{id:"threadData"},t.data),i.createElement("div",{id:"threadCreatedAt"},": ",t.createdAt),i.createElement("div",{id:"threadUser"},"ID: ",t.user)))),n?i.createElement(VY,{mode:v},i.createElement(gY,{id:"deleteIcon",onClick:function(){if(window.confirm(" thread  ?")){if(ov.collection("Thread").doc(t.id).delete(),null===t.imageUrl)return;av.refFromURL(t.imageUrl).delete()}},"aria-label":"delete"},i.createElement(wY,null)),s&&b?i.createElement(i.Fragment,null,i.createElement(gY,{color:"secondary",onClick:x,"aria-label":"edit"},i.createElement(xY,null))):i.createElement(i.Fragment,null,i.createElement(gY,{id:"editIcon",onClick:x,"aria-label":"edit"},i.createElement(xY,null))),s&&b?i.createElement(i.Fragment,null,i.createElement("form",{onSubmit:function(e){e.preventDefault(),ov.collection("Thread").doc(t.id).update({data:h,imageURL:null===y?null:y,edited:Date.now()}),w(EY(null)),c(!1)}},i.createElement(r,{onChange:function(e){d(e.target.value)},type:"text"}),i.createElement("div",{id:"setImageBtnAndSubmitBtn"},y&&i.createElement("img",{alt:"user uploading image",src:y}),i.createElement(kY,null),i.createElement(o,{type:"submit",size:"small"},"")))):null):null)}));var WY,qY,JY;function KY(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var XY=ky.div(WY||(WY=c(["\n  display: grid;\n  place-items: center;\n  color: ",";\n  #userInputThread {\n    margin-bottom: 5.5rem;\n    padding-bottom: 2rem;\n    border-bottom: 1px solid\n      ",";\n  }\n  #userPhotoAndInputContainer {\n    display: flex;\n    align-items: center;\n    margin-top: 5rem;\n  }\n  #inputUserPhotoURL {\n    width: 3rem;\n    height: 3rem;\n    border-radius: 50%;\n  }\n  #uploadImageBtnAndSubmitBtn {\n    display: flex;\n    margin: 0.5rem;\n    align-items: center;\n\n    #normalImage {\n      width: 8rem;\n      cursor: pointer;\n      margin-left: 2rem;\n    }\n  }\n"])),(function(e){return e.theme.colors.pointColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor})),YY=ky.input.attrs((function(){return{size:"0.6em"}}))(qY||(qY=c(["\n  width: 45vw;\n  height: 4rem;\n  font-size: 1em;\n  background-color: ",";\n  color: ",";\n  border: 3px solid\n    ",";\n  border-radius: 3px;\n  margin-left: ",";\n  padding-left: ",";\n  cursor: pointer;\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?function(e){return e.theme.colors.pointColor}:e.theme.colors.pointColor}),(function(e){return e.theme.margins.base}),(function(e){return e.theme.margins.base})),QY=ky.button(JY||(JY=c(["\n  min-width: ",";\n  min-height: ",";\n  max-height: ",";\n  background-color: ",";\n  color: ",";\n  border: 2px solid ",";\n  border-radius: 5px;\n  cursor: pointer;\n  padding: ",";\n  margin: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.interval.basePlus}),(function(e){return e.theme.interval.base}),(function(e){return e.theme.interval.base}),(function(e){return e.theme.button.submitBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.button.submitBorderColor}),(function(e){return e.theme.button.paddingSmall}),(function(e){return e.theme.button.marginSmall}),(function(e){return e.theme.button.fontSize})),ZY=function(){var e=u((0,i.useState)(""),2),t=e[0],n=e[1],r=u((0,i.useState)([]),2),o=r[0],a=r[1],s=u((0,i.useState)(!1),2),c=s[0],l=s[1],h=Eb(tx),d=Eb(AY),f=new Date,p=f.getFullYear(),m=f.getMonth(),g=f.getDate(),v=f.getHours(),y=f.getMinutes(),b=f.getSeconds(),w=f.getTime(),x=rv.currentUser,_=bb();return(0,i.useEffect)((function(){var e=ov.collection("Thread").orderBy("metaCreatedTime","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KY(Object(n),!0).forEach((function(t){xw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KY(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}));return function(){e()}}),[]),i.createElement(pL.div,{initial:{opacity:.2},animate:{opacity:1},transition:{duration:.4}},i.createElement(XY,{mode:h},i.createElement("h1",null,"HOME"),i.createElement("h4",null," ","Welcome to Quack Quack Board!"),i.createElement("div",{id:"userInputThread"},i.createElement("form",{onSubmit:function(e){e.preventDefault(),ov.collection("Thread").add({data:t,metaCreatedTime:w,createdAt:"\n      ".concat(v," : ").concat(y," : ").concat(b," _\n       ").concat(p,"/").concat(m,"/").concat(g,"\n      "),uid:x.uid,user:x.displayName,photoURL:x.photoURL,imageURL:d||null}),n(""),_(EY(null))}},i.createElement("div",{id:"userPhotoAndInputContainer"},i.createElement("img",{id:"inputUserPhotoURL",src:x.photoURL}),i.createElement(YY,{mode:h,id:"QuackInput",onChange:function(e){var t=e.target.value;n(t)},type:"text",placeholder:"What's happening?",required:!0,value:t,maxLength:"80",name:"inputThread"})),i.createElement("div",{id:"uploadImageBtnAndSubmitBtn"},i.createElement("div",null,i.createElement(kY,null)),i.createElement(QY,{mode:h,type:"submit",id:"submit",name:"submit"},""),null===d?null:i.createElement("img",{id:"normalImage",onClick:function(){l(!0)},src:d,alt:"user uploaded image"}),c&&i.createElement(GY,{URL:d,setIsImageClicked:l})))),i.createElement(pL.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8}},o.map((function(e,t){return i.createElement(jY,{key:e.id,thread:e,isOwner:x.uid===e.uid,QuackInput:YY,SubmitBtn:QY})})))))};const $Y=(0,i.memo)(ZY);function eQ(){return i.createElement("div",null,i.createElement($Y,null))}const tQ=i.createContext();var nQ="table",rQ=i.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,a=void 0===o?nQ:o,s=e.padding,u=void 0===s?"default":s,c=e.size,l=void 0===c?"medium":c,h=e.stickyHeader,d=void 0!==h&&h,f=Dy(e,["classes","className","component","padding","size","stickyHeader"]),m=i.useMemo((function(){return{padding:u,size:l,stickyHeader:d}}),[u,l,d]);return i.createElement(tQ.Provider,{value:m},i.createElement(a,p({role:a===nQ?null:"table",ref:t,className:VX(n.root,r,d&&n.stickyHeader)},f)))}));const iQ=jX((function(e){return{root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":p({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},stickyHeader:{borderCollapse:"separate"}}}),{name:"MuiTable"})(rQ),oQ=i.createContext();var aQ={variant:"head"},sQ="thead",uQ=i.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,a=void 0===o?sQ:o,s=Dy(e,["classes","className","component"]);return i.createElement(oQ.Provider,{value:aQ},i.createElement(a,p({className:VX(n.root,r),ref:t,role:a===sQ?null:"rowgroup"},s)))}));const cQ=jX({root:{display:"table-header-group"}},{name:"MuiTableHead"})(uQ);var lQ={variant:"body"},hQ="tbody",dQ=i.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,a=void 0===o?hQ:o,s=Dy(e,["classes","className","component"]);return i.createElement(oQ.Provider,{value:lQ},i.createElement(a,p({className:VX(n.root,r),ref:t,role:a===hQ?null:"rowgroup"},s)))}));const fQ=jX({root:{display:"table-row-group"}},{name:"MuiTableBody"})(dQ);var pQ=i.forwardRef((function(e,t){var n,r,o=e.align,a=void 0===o?"inherit":o,s=e.classes,u=e.className,c=e.component,l=e.padding,h=e.scope,d=e.size,f=e.sortDirection,m=e.variant,g=Dy(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),v=i.useContext(tQ),y=i.useContext(oQ),b=y&&"head"===y.variant;c?(r=c,n=b?"columnheader":"cell"):r=b?"th":"td";var w=h;!w&&b&&(w="col");var x=l||(v&&v.padding?v.padding:"default"),_=d||(v&&v.size?v.size:"medium"),E=m||y&&y.variant,A=null;return f&&(A="asc"===f?"ascending":"descending"),i.createElement(r,p({ref:t,className:VX(s.root,s[E],u,"inherit"!==a&&s["align".concat(pY(a))],"default"!==x&&s["padding".concat(pY(x))],"medium"!==_&&s["size".concat(pY(_))],"head"===E&&v&&v.stickyHeader&&s.stickyHeader),"aria-sort":A,role:n,scope:w},g))}));const mQ=jX((function(e){return{root:p({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?HA(UA(e.palette.divider,1),.88):GA(UA(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(pQ);var gQ=i.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,a=void 0===o?"div":o,s=Dy(e,["classes","className","component"]);return i.createElement(a,p({ref:t,className:VX(n.root,r)},s))}));const vQ=jX({root:{width:"100%",overflowX:"auto"}},{name:"MuiTableContainer"})(gQ);var yQ=i.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,a=void 0===o?"tr":o,s=e.hover,u=void 0!==s&&s,c=e.selected,l=void 0!==c&&c,h=Dy(e,["classes","className","component","hover","selected"]),d=i.useContext(oQ);return i.createElement(a,p({ref:t,className:VX(n.root,r,d&&{head:n.head,footer:n.footer}[d.variant],u&&n.hover,l&&n.selected),role:"tr"===a?null:"row"},h))}));const bQ=jX((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,"&$hover:hover":{backgroundColor:e.palette.action.hover},"&$selected, &$selected:hover":{backgroundColor:UA(e.palette.secondary.main,e.palette.action.selectedOpacity)}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(yQ);var wQ,xQ,_Q,EQ,AQ,SQ=ky.div(wQ||(wQ=c(["\n  background-color: ",";\n  width: 8rem;\n  height: 8rem;\n  opacity: 0.1;\n  transition: opacity 0.12s ease-in-out;\n"])),(function(e){return e.theme.colors.grey500}));function TQ(){return i.createElement(SQ,null)}var MQ=ky.div(xQ||(xQ=c(["\n  * ::before,\n  *,\n  * ::after {\n    border: none;\n    color: ",";\n  }\n\n  #headMyProfile {\n    border: none;\n  }\n  #bodyRow * {\n    color: ",";\n  }\n  #myNickName {\n    border-bottom: 1px solid\n      ",";\n  }\n  #editNickNameWrapper {\n    border-bottom: 1px solid\n      ",";\n\n    #nickNameInputSet {\n      white-space: nowrap;\n      #inputNickName {\n        height: 2rem;\n        border: 2px solid ",";\n        border-radius: 4px;\n        margin-right: 1rem;\n        width: 30vw;\n      }\n    }\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor}),(function(e){return e.theme.colors.pointColor})),CQ=ky.button(_Q||(_Q=c(["\n  color: ",";\n  background-color: ",";\n  border: 2px solid ",";\n  border-radius: ",";\n  height: 2rem;\n  cursor: pointer;\n  padding: ",";\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.button.submitBackgroundColor}),(function(e){return e.theme.button.submitBorderColor}),(function(e){return e.theme.button.borderRadius}),(function(e){return e.theme.button.padding})),IQ=ky.div(EQ||(EQ=c(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 60%;\n  height: 50%;\n  background-color: ",";\n  color: ",";\n  box-shadow: 6px 2px 2px rgba(13, 24, 25, 0.5);\n  padding: 2rem;\n  img {\n    width: 8rem;\n  }\n  #images {\n    display: flex;\n    align-items: center;\n    margin: 1rem;\n  }\n  #pingerTip {\n    font-size: 300%;\n    margin: 1rem;\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor})),RQ=i.memo((function(){var e=rv.currentUser,t=u((0,i.useState)(e.displayName),2),n=t[0],r=t[1],o=Eb(tx),a=i.useCallback((function(e){r(e.target.value)}),[n]),s=function(){var t=ce(he().mark((function t(i){return he().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i.preventDefault(),e.displayName===n){t.next=5;break}return t.next=4,e.updateProfile({displayName:n});case 4:r("");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return i.createElement(MQ,{mode:o},i.createElement(vQ,null,i.createElement(iQ,{className:"myInfo","aria-label":"myInfo"},i.createElement(cQ,null,i.createElement(bQ,null,i.createElement(mQ,{id:"headMyProfile"},i.createElement("h3",null,"  ")))),i.createElement(fQ,null,i.createElement(bQ,{id:"bodyRow"},i.createElement(mQ,{id:"myNickName",key:e.displayName}," : ",i.createElement("b",null,e.displayName)),i.createElement(mQ,{id:"editNickNameWrapper"},i.createElement("form",{onSubmit:s},i.createElement("div",{id:"nickNameInputSet"},i.createElement("input",{value:n,onChange:a,type:"text",maxLength:"20",required:!0,id:"inputNickName"}),i.createElement(CQ,{mode:o,type:"submit",id:"submit",name:"submit"},"")))))))))})),PQ=ky.div(AQ||(AQ=c(["\n  min-width: ",";\n  #changeImageButton {\n    border: 1px solid\n      ",";\n  }\n  #myPhotoURL {\n    color: ",";\n    border: none;\n  }\n  img {\n    width: 7rem;\n  }\n  .imageContainerCell {\n    border: none;\n    border-bottom: 1px solid ",";\n  }\n  #userImage {\n    min-width: 20vw;\n  }\n"])),(function(e){return e.theme.deviceSizes.mobileL}),(function(e){return"dark"===e.mode?e.theme.colors.darkBorderColor:e.theme.colors.lightBorderColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.colors.darkBorderColor})),LQ=i.memo((function(){var e=rv.currentUser,t=u((0,i.useState)(!1),2),n=t[0],r=t[1],o="user image",a=Eb(tx),s=Eb(AY),c=bb(),l=rv.currentUser.photoURL,h=function(){r(!1)},d=function(){var e=ce(he().mark((function e(t){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,rv.currentUser.updateProfile({photoURL:s});case 3:c(EY(null)),h();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=i.createElement(IQ,{mode:a},i.createElement("h2",{id:"simple-modal-title"},"  !"),i.createElement("div",{id:"images"},i.createElement("img",{alt:o,src:e.photoURL}),i.createElement("span",{id:"pingerTip"},""),!s&&i.createElement(TQ,null),s&&i.createElement("img",{alt:o,src:s})),i.createElement("form",{onSubmit:d},i.createElement("div",null,i.createElement(kY,null),i.createElement(CQ,{mode:a,type:"submit",id:"changeUserImage"},""))));return i.createElement(PQ,{mode:a},i.createElement(vQ,null,i.createElement(iQ,null,i.createElement(cQ,null,i.createElement(bQ,null,i.createElement(mQ,{id:"myPhotoURL"},i.createElement("h3",null,"  ")))),i.createElement(fQ,null,i.createElement(bQ,null,i.createElement(mQ,{id:"userImage",className:"imageContainerCell"},i.createElement("img",{alt:rv.currentUser.uid,src:l})),i.createElement(mQ,{className:"imageContainerCell"},i.createElement(CQ,{mode:a,type:"button",onClick:function(){r(!0)}}," "),i.createElement(sb,{id:"modal",open:n,onClose:h,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},f)))))))}));const BQ=i.memo((function(){return i.createElement(i.Fragment,null,i.createElement(RQ,null),i.createElement(LQ,null))}));var kQ,DQ,OQ=ky.div(kQ||(kQ=c(["\n  display: grid;\n  place-items: center;\n  * {\n    color: ",";\n  }\n\n  #profileTitleStyle {\n    h1 {\n      color: ",";\n      display: grid;\n      place-items: center;\n      width: 50vw;\n    }\n  }\n  #profileYourThreads {\n    * {\n      border: none;\n    }\n  }\n  @media screen and (max-width: ",") {\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.colors.pointColor}),(function(e){return e.theme.deviceSizes.mobileM})),NQ=ky.div(DQ||(DQ=c(["\n  & > * {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  li {\n    margin: 0 0 3rem 0;\n    img {\n      width: 8rem;\n    }\n  }\n"])));const FQ=function(){var e=rv.currentUser,t=u((0,i.useState)([]),2),n=t[0],r=t[1],o=u((0,i.useState)(!1),2),a=o[0],s=o[1],c=Eb(tx),l=function(){var t=ce(he().mark((function t(){return he().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ov.collection("Thread").where("uid","==",e.uid).orderBy("createdAt").get().then((function(e){return e.docs.map((function(e){return r((function(t){return[].concat(Yy(t),[{user:e.data().user,data:e.data().data,imageURL:e.data().imageURL,createdAt:e.data().createdAt}])}))}))}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,i.useEffect)((function(){l(),s(!0)}),[]);var h={active:{x:0},inactive:{x:55,transition:{duration:1.8}}};return i.createElement(OQ,{mode:c},i.createElement(pL.div,{initial:{opacity:.2},animate:{opacity:1},transition:{duration:.4}},i.createElement("div",{id:"profileTitleStyle"},i.createElement("h1",null," "),i.createElement(BQ,null)),i.createElement("div",{id:"profileYourThreads"},i.createElement(vQ,null,i.createElement(iQ,null,i.createElement(cQ,null,i.createElement(bQ,null,i.createElement(mQ,null,i.createElement(pL.div,{variants:h,initial:"inactive",animate:"active"},i.createElement("h3",null,"  "))))),i.createElement(fQ,null,a&&i.createElement(bQ,null,i.createElement(mQ,null,i.createElement(NQ,null,i.createElement("ul",null,n.map((function(e,t){return i.createElement(pL.div,{key:t+e.user,variants:h,initial:"inactive",animate:"active"},i.createElement("li",null,i.createElement("img",{src:e.imageURL}),i.createElement("div",null,e.data),i.createElement("div",null,e.createdAt)))}))))))))))))};function UQ(){var e=!1,t=[],n=new Set,r={subscribe:function(e){return n.add(e),function(){n.delete(e)}},start:function(r,i){if(e){var o=[];return n.forEach((function(e){o.push(nR(e,r,{transitionOverride:i}))})),Promise.all(o)}return new Promise((function(e){t.push({animation:[r,i],resolve:e})}))},set:function(e){return n.forEach((function(t){!function(e,t){Array.isArray(t)?eR(e,t):"string"==typeof t?eR(e,[t]):$I(e,t)}(t,e)}))},stop:function(){n.forEach((function(e){!function(e){e.forEachValue((function(e){return e.stop()}))}(e)}))},mount:function(){return e=!0,t.forEach((function(e){var t=e.animation,n=e.resolve;r.start.apply(r,RS([],IS(t))).then(n)})),function(){e=!1,r.stop()}}};return r}var GQ,HQ,zQ,VQ,jQ,WQ=["children","setSelect"],qQ=ky(pL.div)(GQ||(GQ=c(["\n  position: absolute;\n"]))),JQ=function(e){var t,n=e.children,r=e.setSelect,o=Dy(e,WQ),a=(0,i.useRef)(null),s=function(e){var t=US((function(){return qI(0)}));if((0,i.useContext)(OS).isStatic){var n=IS((0,i.useState)(0),2)[1];(0,i.useEffect)((function(){return t.onChange(n)}),[])}return t}(),c=function(){var e=US(UQ);return(0,i.useEffect)(e.mount,[]),e}(),l=u((0,i.useState)(!0),2),h=l[0],d=(l[1],u((0,i.useState)(),2)),f=d[0],m=d[1],g=u((0,i.useState)(),2),v=g[0],y=g[1];return i.createElement(qQ,p((xw(t={animate:c,ref:a,drag:"x",dragConstraints:{left:-200,right:200},style:{x:s}},"dragConstraints",h&&{left:0,right:0,top:0,bottom:0}),xw(t,"onDrag",(function(){y(s.getVelocity()),m(v>=1?"right":v<=-1?"left":void 0)})),xw(t,"onDragEnd",(function(e,t){return function(e,t){Math.abs(t.velocity.x)>500&&(r("left"!==f),c.start({x:50}))}(0,t)})),xw(t,"whileTap",{scale:1.1}),t),o),n)},KQ=["children"],XQ=ky.div(HQ||(HQ=c(["\n  height: 50vh;\n  width: 50vw;\n\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n"]))),YQ=function(e){var t=e.children,n=Dy(e,KQ),r=u((0,i.useState)(i.Children.toArray(t)),2),o=r[0],a=r[1],s=u((0,i.useState)(void 0),2),c=s[0],l=s[1];return(0,i.useEffect)((function(){var e,t;void 0!==c&&(t=(e=o).filter((function(t,n){return n<e.length-1})),a(t),l(void 0))}),[c]),(0,i.useEffect)((function(){0===o.length&&a(i.Children.toArray(t))})),i.createElement("div",null,i.createElement(XQ,n,o.map((function(e,t){var n=t===o.length-1;return i.createElement(JQ,{setSelect:l,drag:n,key:e.key||t},e)}))))},QQ=["https://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/React-icon.svg/1280px-React-icon.svg.png","https://user-images.githubusercontent.com/80259925/122389498-f3b4c600-cfab-11eb-85ab-cc3a58ec3a73.png","https://user-images.githubusercontent.com/80259925/122389639-18a93900-cfac-11eb-8a0d-8070541539b8.png","https://user-images.githubusercontent.com/80259925/122389765-3e364280-cfac-11eb-8f88-ec0aad70a953.png","https://user-images.githubusercontent.com/80259925/122389886-602fc500-cfac-11eb-940b-7389a9655222.png"];function ZQ(){var e=ky(YQ)(zQ||(zQ=c(["\n    #cardImg {\n      width: 8rem;\n      height: 8.5rem;\n      -webkit-user-drag: none;\n      -khtml-user-drag: none;\n      -moz-user-drag: none;\n      -o-user-drag: none;\n      user-drag: none;\n    }\n    .text {\n      color: ",";\n      font-size: 1.5rem;\n    }\n  "])),(function(e){return e.theme.colors.pointColor})),t=ky(pL.div)(VQ||(VQ=c(["\n    background-color: white;\n    width: 150px;\n    height: 180px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 80px;\n    text-shadow: 0 10px 10px #d1d5db;\n    box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);\n    border-radius: 8px;\n    transform: ",";\n  "])),(function(){var e=10*Math.random()-5;return"rotate(".concat(e,"deg)")}));return console.log(QQ),i.createElement("div",null,i.createElement(e,null,i.createElement(t,null,""),i.createElement(t,{className:"text"},"!"),i.createElement(t,{className:"text"},"!"),i.createElement(t,{className:"text"},"!"),QQ.map((function(e,n){return i.createElement(t,{key:n},i.createElement("img",{id:"cardImg",alt:"card img",src:e}))}))))}var $Q=ky.div(jQ||(jQ=c(["\n  display: grid;\n  place-items: center;\n\n  h1,\n  h2,\n  h3,\n  h4 {\n    margin: 2rem 0;\n  }\n  h1 {\n    color: ",";\n  }\n  * {\n    color: ",";\n  }\n  #TableContainer {\n    /* width: 40vw; */\n    margin: 0 auto;\n    margin-bottom: 12rem;\n    div,\n    p,\n    span {\n      max-width: 60vw;\n      font-size: 1rem;\n    }\n  }\n"])),(function(e){return e.theme.colors.pointColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor})),eZ={active:{x:0},inactive:{x:55,transition:{duration:1.8}}};function tZ(){var e=Eb(tx);return i.createElement($Q,{mode:e},i.createElement("h1",null,"About"),i.createElement(pL.img,{initial:{opacity:.1,rotateY:60},animate:{opacity:1,rotateY:0,transition:{duration:2}},alt:" ",src:"https://user-images.githubusercontent.com/80259925/118583181-9de3d700-b7cf-11eb-814c-ec6afef526b2.jpeg"}),i.createElement("h2",null,"? "),i.createElement("h3",null,"   . "),i.createElement("h3",null,"About   ."),i.createElement("div",null,i.createElement("h4",null,"Contact:",i.createElement("a",{href:" mailto:zerozoo385@gmail.com"},"zerozoo385@gmail.com"))),i.createElement("div",null,"Git Hub:",i.createElement("a",{href:"https://github.com/zerozoo-front/portfolioHome"},"Git Hub")),i.createElement("h4",null,"   ! "),i.createElement(ZQ,null),i.createElement(pL.div,{initial:"inactive",animate:"active",variants:eZ},i.createElement(vQ,{id:"TableContainer"},i.createElement(iQ,null,i.createElement(cQ,null,i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("p",null,"   ")),i.createElement(mQ,null,i.createElement("p",null,"FEATURE")))),i.createElement(fQ,null,i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"React.js")),i.createElement(mQ,null,i.createElement("div",null,"React  SPA ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"firebase")),i.createElement(mQ,null,i.createElement("div",null,"firebase  backend  OAuth    ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"rerdux-toolkit")),i.createElement(mQ,null,i.createElement("div",null,"components    state redux-toolkit  ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"react-router")),i.createElement(mQ,null,i.createElement("div",null,"router  SPA  ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,i.createElement("span",null,""),"styled-components")),i.createElement(mQ,null,i.createElement("div",null," css styling    style  props      ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"Material-UI")),i.createElement(mQ,null,i.createElement("div",null,"   UI style    styled-components  ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"Three.js")),i.createElement(mQ,null,i.createElement("div",null,"          ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"figma")),i.createElement(mQ,null,i.createElement("div",null,"SVG file     ."))),i.createElement(bQ,null,i.createElement(mQ,null,i.createElement("div",null,"framer-motion")),i.createElement(mQ,null,i.createElement("div",null,"dom element    "))))))))}const nZ=function(e){e.setIsLoggedIn,e.isLoggedIn;var t=Eb(ex);return i.createElement($,null,i.createElement(Y,null,t?i.createElement(i.Fragment,null,i.createElement(Y,null,i.createElement(X,{exact:!0,path:"/"},i.createElement(eQ,null)),i.createElement(X,{exact:!0,path:"/Profile"},t&&i.createElement(FQ,null)),i.createElement(X,{exact:!0,path:"/About"},i.createElement(tZ,null)),i.createElement(X,{path:"/"},i.createElement("h1",null,"404 Not Found")))):i.createElement(i.Fragment,null,i.createElement(Y,null,i.createElement(X,{exact:!0,path:"/"},i.createElement(HX,null)),i.createElement(X,{path:"/"},i.createElement("h1",null,"404 Not Found"))))))};var rZ=i.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,a=e.color,s=void 0===a?"default":a,u=e.component,c=void 0===u?"button":u,l=e.disabled,h=void 0!==l&&l,d=e.disableElevation,f=void 0!==d&&d,m=e.disableFocusRipple,g=void 0!==m&&m,v=e.endIcon,y=e.focusVisibleClassName,b=e.fullWidth,w=void 0!==b&&b,x=e.size,_=void 0===x?"medium":x,E=e.startIcon,A=e.type,S=void 0===A?"button":A,T=e.variant,M=void 0===T?"text":T,C=Dy(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),I=E&&i.createElement("span",{className:VX(r.startIcon,r["iconSize".concat(pY(_))])},E),R=v&&i.createElement("span",{className:VX(r.endIcon,r["iconSize".concat(pY(_))])},v);return i.createElement(fY,p({className:VX(r.root,r[M],o,"inherit"===s?r.colorInherit:"default"!==s&&r["".concat(M).concat(pY(s))],"medium"!==_&&[r["".concat(M,"Size").concat(pY(_))],r["size".concat(pY(_))]],f&&r.disableElevation,h&&r.disabled,w&&r.fullWidth),component:c,disabled:h,focusRipple:!g,focusVisibleClassName:VX(r.focusVisible,y),ref:t,type:S},C),i.createElement("span",{className:r.label},I,n,R))}));const iZ=jX((function(e){return{root:p({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:UA(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:UA(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:UA(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat(UA(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:UA(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat(UA(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:UA(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(rZ);var oZ,aZ,sZ=ky.div(oZ||(oZ=c(["\n  font-size: 1.2rem;\n"])));function uZ(){var e=bb(),t=Z(),n=useStyles();return i.createElement("div",{className:n.root},i.createElement(iZ,{onClick:function(){e(Qw()),rv.signOut(),t.push("/")},color:"secondary"},i.createElement(sZ,null,"")))}var cZ=ky.div(aZ||(aZ=c(["\n  background-color: ",";\n  height: 100%;\n\n  ul {\n    padding: 0;\n    margin: 0;\n  }\n  li {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 3rem;\n    background-color: ",";\n    color: ",";\n\n    border-radius: 0.5rem;\n    list-style: none;\n    margin: 1.5rem;\n    font-size: 1.2rem;\n    text-align: center;\n    width: 20rem;\n  }\n  a {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-decoration: none;\n    width: 100%;\n    height: 100%;\n    color: ",";\n  }\n  div {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-decoration: none;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n  }\n\n  @media screen and (max-width: ",") {\n    width: 10rem;\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return e.theme.colors.pointColor}),(function(e){return"dark"===e.mode?e.theme.colors.darkColor:e.theme.colors.lightColor}),(function(e){return e.theme.colors.white}),(function(e){return e.theme.deviceSizes.tablet}));function lZ(){var e=rv.currentUser,t=Eb(ex),n=Eb(tx);return i.createElement(i.Fragment,null,t&&i.createElement(cZ,{mode:n},i.createElement($,null,i.createElement("ul",null,i.createElement(pL.div,{whileHover:{scale:1},whileTap:{scale:.9}},i.createElement("li",null,i.createElement(oe,{to:"/",replace:!0},"Home"))),i.createElement(pL.div,{whileHover:{scale:1},whileTap:{scale:.9}},i.createElement("li",null,i.createElement(oe,{to:"/Profile",replace:!0},t?e.displayName:"user"," "))),i.createElement(pL.div,{whileHover:{scale:1},whileTap:{scale:.9}},i.createElement("li",null,i.createElement(oe,{to:"/About",replace:!0},"About"))),i.createElement("div",null,i.createElement(pL.div,{whileHover:{scale:1},whileTap:{scale:.9}},i.createElement(uZ,null)))))))}var hZ="unmounted",dZ="exited",fZ="entering",pZ="entered",mZ="exiting",gZ=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=dZ,r.appearStatus=fZ):i=pZ:i=t.unmountOnExit||t.mountOnEnter?hZ:dZ,r.state={status:i},r.nextCallback=null,r}h(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===hZ?{status:dZ}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==fZ&&n!==pZ&&(t=fZ):n!==fZ&&n!==pZ||(t=mZ)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===fZ?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===dZ&&this.setState({status:hZ})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[o.findDOMNode(this),r],a=i[0],s=i[1],u=this.getTimeouts(),c=r?u.appear:u.enter;e||n?(this.props.onEnter(a,s),this.safeSetState({status:fZ},(function(){t.props.onEntering(a,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:pZ},(function(){t.props.onEntered(a,s)}))}))}))):this.safeSetState({status:pZ},(function(){t.props.onEntered(a)}))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:o.findDOMNode(this);t?(this.props.onExit(r),this.safeSetState({status:mZ},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:dZ},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:dZ},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],s=i[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===hZ)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,G(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return i.createElement(tY.Provider,{value:null},"function"==typeof n?n(e,r):i.cloneElement(i.Children.only(n),r))},t}(i.Component);function vZ(){}gZ.contextType=tY,gZ.propTypes={},gZ.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vZ,onEntering:vZ,onEntered:vZ,onExit:vZ,onExiting:vZ,onExited:vZ},gZ.UNMOUNTED=hZ,gZ.EXITED=dZ,gZ.ENTERING=fZ,gZ.ENTERED=pZ,gZ.EXITING=mZ;const yZ=gZ;function bZ(){return Ny()||mS}var wZ=function(e){return e.scrollTop};function xZ(e,t){var n=e.timeout,r=e.style,i=void 0===r?{}:r;return{duration:i.transitionDuration||"number"==typeof n?n:n[t.mode]||0,delay:i.transitionDelay}}var _Z={entering:{opacity:1},entered:{opacity:1}},EZ={enter:dS.enteringScreen,exit:dS.leavingScreen};const AZ=i.forwardRef((function(e,t){var n=e.children,r=e.disableStrictModeCompat,o=void 0!==r&&r,a=e.in,s=e.onEnter,c=e.onEntered,l=e.onEntering,h=e.onExit,d=e.onExited,f=e.onExiting,m=e.style,g=e.TransitionComponent,v=void 0===g?yZ:g,y=e.timeout,b=void 0===y?EZ:y,w=Dy(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),x=bZ(),_=x.unstable_strictMode&&!o,E=i.useRef(null),A=Hy(n.ref,t),S=Hy(_?E:void 0,A),T=function(e){return function(t,n){if(e){var r=u(_?[E.current,t]:[t,n],2),i=r[0],o=r[1];void 0===o?e(i):e(i,o)}}},M=T(l),C=T((function(e,t){wZ(e);var n=xZ({style:m,timeout:b},{mode:"enter"});e.style.webkitTransition=x.transitions.create("opacity",n),e.style.transition=x.transitions.create("opacity",n),s&&s(e,t)})),I=T(c),R=T(f),P=T((function(e){var t=xZ({style:m,timeout:b},{mode:"exit"});e.style.webkitTransition=x.transitions.create("opacity",t),e.style.transition=x.transitions.create("opacity",t),h&&h(e)})),L=T(d);return i.createElement(v,p({appear:!0,in:a,nodeRef:_?E:void 0,onEnter:C,onEntered:I,onEntering:M,onExit:P,onExited:L,onExiting:R,timeout:b},w),(function(e,t){return i.cloneElement(n,p({style:p({opacity:0,visibility:"exited"!==e||a?void 0:"hidden"},_Z[e],m,n.props.style),ref:S},t))}))}));var SZ=i.forwardRef((function(e,t){var n=e.children,r=e.classes,o=e.className,a=e.invisible,s=void 0!==a&&a,u=e.open,c=e.transitionDuration,l=e.TransitionComponent,h=void 0===l?AZ:l,d=Dy(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return i.createElement(h,p({in:u,timeout:c},d),i.createElement("div",{className:VX(r.root,o,s&&r.invisible),"aria-hidden":!0,ref:t},n))}));const TZ=jX({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(SZ);function MZ(e,t){var n=function(e,t){var n,r=t.getBoundingClientRect();if(t.fakeTransform)n=t.fakeTransform;else{var i=window.getComputedStyle(t);n=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var o=0,a=0;if(n&&"none"!==n&&"string"==typeof n){var s=n.split("(")[1].split(")")[0].split(",");o=parseInt(s[4],10),a=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(o-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-o,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(a-r.top,"px)"):"translateY(-".concat(r.top+r.height-a,"px)")}(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)}var CZ={enter:dS.enteringScreen,exit:dS.leavingScreen};const IZ=i.forwardRef((function(e,t){var n=e.children,r=e.direction,a=void 0===r?"down":r,s=e.in,u=e.onEnter,c=e.onEntered,l=e.onEntering,h=e.onExit,d=e.onExited,f=e.onExiting,m=e.style,g=e.timeout,v=void 0===g?CZ:g,y=e.TransitionComponent,b=void 0===y?yZ:y,w=Dy(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),x=bZ(),_=i.useRef(null),E=i.useCallback((function(e){_.current=o.findDOMNode(e)}),[]),A=Hy(n.ref,E),S=Hy(A,t),T=function(e){return function(t){e&&(void 0===t?e(_.current):e(_.current,t))}},M=T((function(e,t){MZ(a,e),wZ(e),u&&u(e,t)})),C=T((function(e,t){var n=xZ({timeout:v,style:m},{mode:"enter"});e.style.webkitTransition=x.transitions.create("-webkit-transform",p({},n,{easing:x.transitions.easing.easeOut})),e.style.transition=x.transitions.create("transform",p({},n,{easing:x.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",l&&l(e,t)})),I=T(c),R=T(f),P=T((function(e){var t=xZ({timeout:v,style:m},{mode:"exit"});e.style.webkitTransition=x.transitions.create("-webkit-transform",p({},t,{easing:x.transitions.easing.sharp})),e.style.transition=x.transitions.create("transform",p({},t,{easing:x.transitions.easing.sharp})),MZ(a,e),h&&h(e)})),L=T((function(e){e.style.webkitTransition="",e.style.transition="",d&&d(e)})),B=i.useCallback((function(){_.current&&MZ(a,_.current)}),[a]);return i.useEffect((function(){if(!s&&"down"!==a&&"right"!==a){var e=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=this,s=function(){e.apply(a,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}((function(){_.current&&MZ(a,_.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[a,s]),i.useEffect((function(){s||B()}),[s,B]),i.createElement(b,p({nodeRef:_,onEnter:M,onEntered:I,onEntering:C,onExit:P,onExited:L,onExiting:R,appear:!0,in:s,timeout:v},w),(function(e,t){return i.cloneElement(n,p({ref:S,style:p({visibility:"exited"!==e||s?void 0:"hidden"},m,n.props.style)},t))}))}));var RZ=i.forwardRef((function(e,t){var n=e.classes,r=e.className,o=e.component,a=void 0===o?"div":o,s=e.square,u=void 0!==s&&s,c=e.elevation,l=void 0===c?1:c,h=e.variant,d=void 0===h?"elevation":h,f=Dy(e,["classes","className","component","square","elevation","variant"]);return i.createElement(a,p({className:VX(n.root,r,"outlined"===d?n.outlined:n["elevation".concat(l)],!u&&n.rounded),ref:t},f))}));const PZ=jX((function(e){var t={};return e.shadows.forEach((function(e,n){t["elevation".concat(n)]={boxShadow:e}})),p({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},t)}),{name:"MuiPaper"})(RZ);var LZ={left:"right",right:"left",top:"down",bottom:"up"},BZ={enter:dS.enteringScreen,exit:dS.leavingScreen},kZ=i.forwardRef((function(e,t){var n=e.anchor,r=void 0===n?"left":n,o=e.BackdropProps,a=e.children,s=e.classes,u=e.className,c=e.elevation,l=void 0===c?16:c,h=e.ModalProps,d=(h=void 0===h?{}:h).BackdropProps,f=Dy(h,["BackdropProps"]),m=e.onClose,g=e.open,v=void 0!==g&&g,y=e.PaperProps,b=void 0===y?{}:y,w=e.SlideProps,x=e.TransitionComponent,_=void 0===x?IZ:x,E=e.transitionDuration,A=void 0===E?BZ:E,S=e.variant,T=void 0===S?"temporary":S,M=Dy(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),C=bZ(),I=i.useRef(!1);i.useEffect((function(){I.current=!0}),[]);var R=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?LZ[t]:t}(C,r),P=i.createElement(PZ,p({elevation:"temporary"===T?l:0,square:!0},b,{className:VX(s.paper,s["paperAnchor".concat(pY(R))],b.className,"temporary"!==T&&s["paperAnchorDocked".concat(pY(R))])}),a);if("permanent"===T)return i.createElement("div",p({className:VX(s.root,s.docked,u),ref:t},M),P);var L=i.createElement(_,p({in:v,direction:LZ[R],timeout:A,appear:I.current},w),P);return"persistent"===T?i.createElement("div",p({className:VX(s.root,s.docked,u),ref:t},M),L):i.createElement(sb,p({BackdropProps:p({},o,d,{transitionDuration:A}),BackdropComponent:TZ,className:VX(s.root,s.modal,u),open:v,onClose:m,ref:t},M,f),L)}));const DZ=jX((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(kZ);var OZ=i.forwardRef((function(e,t){return i.createElement(ix,p({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 20 20"},e,{ref:t}),i.createElement("path",{d:"M16.4 9H3.6c-.552 0-.6.447-.6 1 0 .553.048 1 .6 1h12.8c.552 0 .6-.447.6-1 0-.553-.048-1-.6-1zm0 4H3.6c-.552 0-.6.447-.6 1 0 .553.048 1 .6 1h12.8c.552 0 .6-.447.6-1 0-.553-.048-1-.6-1zM3.6 7h12.8c.552 0 .6-.447.6-1 0-.553-.048-1-.6-1H3.6c-.552 0-.6.447-.6 1 0 .553.048 1 .6 1z"}))}));OZ.displayName="Menu";var NZ,FZ,UZ,GZ=ky.div(NZ||(NZ=c(["\n  #drawer {\n    .MuiPaper-root,\n    .MuiDrawer-paper {\n      background-color: rgba(0, 0, 0, 0);\n      box-shadow: 0.5rem 0.07rem 0rem rgba(22, 22, 22, 0.28);\n    }\n  }\n"]))),HZ=ky.button(FZ||(FZ=c(["\n  min-width: ",";\n  background-color: ",";\n  color: ",";\n  border: 2px solid ",";\n  border-radius: 5px;\n  cursor: pointer;\n  padding: ",";\n  margin: 0;\n  font-size: ",";\n"])),(function(e){return e.theme.interval.small}),(function(e){return e.theme.button.pointColor}),(function(e){return e.theme.button.submitColor}),(function(e){return e.theme.button.pointBorder}),(function(e){return e.theme.button.paddingSmall}),(function(e){return e.theme.button.fontSize}));function zZ(e){var t=e.children,n=u((0,i.useState)(!1),2),r=n[0],o=n[1],a=u((0,i.useState)(!1),2),s=a[0],c=a[1],l=function(e){return function(t){o(e)}},h=Eb(ex),d=function(){window.innerWidth>1642?c(!0):c(!1)};return(0,i.useEffect)((function(){return window.innerWidth>1642&&c(!0),window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[]),i.createElement(GZ,null,h&&i.createElement("div",null,!s&&i.createElement(HZ,{id:"drawerBtn",onClick:l(!0)},i.createElement(OZ,{size:"30"})),i.createElement(DZ,{variant:s?"permanent":null,id:"drawer",anchor:"left",open:r,onClose:l(!1)},t)))}var VZ=function(e){return"".concat(e/16,"rem")},jZ={small:VZ(14),base:VZ(16),lg:VZ(18),xl:VZ(20),xxl:VZ(22),xxxl:VZ(24),titleSize:VZ(50)},WZ={small:VZ(8),base:VZ(10),lg:VZ(12),xl:VZ(14),xxl:VZ(16),xxxl:VZ(18)},qZ={small:VZ(8),base:VZ(10),lg:VZ(12),xl:VZ(14),xxl:VZ(16),xxxl:VZ(18)},JZ={small_0:VZ(15),small:VZ(25),base:VZ(50),basePlus:VZ(75),lg:VZ(100),xl:VZ(150),xxl:VZ(200)},KZ={base:"".concat(VZ(10)," 0 ").concat(VZ(10)," 0")},XZ={mobileS:"320px",mobileM:"375px",mobileL:"450px",tablet:"768px",tabletL:"1024px",laptopL:"1440px",fourK:"2560px"};const YZ={images:{unknownUser:"https://user-images.githubusercontent.com/80259925/122512461-d7fcfe80-d043-11eb-8861-fa0c407d50ba.png"},fontSizes:jZ,colors:(xw(UZ={black:"#000000",white:"#F8F8F8",red50:"#ffebee",red100:"#ffcdd2",red500:"#f44336",pink50:"#fce4ec",pink100:"#f8bbd0",pink500:"#e91e63",purple50:"#f3e5f5",purple100:"#e1bee7",purple500:"#9c27b0",lightBlue50:"#e1f5fe",lightBlue100:"#b3e5fc",lightBlue500:"#03a9f4",yellow50:"#fffde7",yellow100:"#fff9c4",yellow500:"#ffeb3b",orange50:"#fff3e0",orange100:"#ffe0b2",orange500:"#ff9800",grey50:"#fafafa",grey100:"#f5f5f5",grey500:"#9e9e9e",pointColor:"rgb(101,151,227)",deepDarkBackgroundColor:"rgb(10,15,20)",darkBackgroundColor:"rgb(28,33,39)",darkBorderColor:"rgb(39,43,49)",darkColor:"rgb(202,218,216)"},"darkBorderColor","rgb(53,57,63)"),xw(UZ,"deepLightBackgroundColor","rgb(190,190,190)"),xw(UZ,"lightBackgroundColor","rgb(244,244,244)"),xw(UZ,"lightColor","rgb(32,32,32)"),xw(UZ,"lightBorderColor","rgb(70,80,88)"),UZ),deviceSizes:XZ,device:{mobileS:"only screen and (max-width: ".concat(XZ.mobileS,")"),mobileM:"only screen and (max-width: ".concat(XZ.mobileM,")"),mobileL:"only screen and (max-width: ".concat(XZ.mobileL,")"),tablet:"only screen and (max-width: ".concat(XZ.tablet,")"),tabletL:"only screen and (max-width: ".concat(XZ.tabletL,")")},paddings:WZ,margins:qZ,interval:JZ,verticalInterval:KZ,button:{fontSize:"1rem",lineHeight:"2.5em",borderRadius:"3px",cursor:"pointer",padding:"0.5em",paddingSmall:"0.1em",margin:"0.4em",marginSmall:"0.1em",submitColor:"rgb(244,244,244)",submitBackgroundColor:"rgb(81,133,62)",submitBorderColor:"rgb(96,158,75)",pointColor:"rgb(101,151,227)",pointBorder:"rgb(133,181,255)"}};var QZ,ZZ,$Z,e$,t$,n$,r$,i$=By(QZ||(QZ=c(["\n0%{\n  transform:translateX(0);\n  opacity:0.1;\n}\n50%{\n  opacity:0.5;\n}\n100%{\n  transform:translateX(2.5rem);\n  opacity:1;\n}\n"]))),o$=By(ZZ||(ZZ=c(["\n0%{\n  transform:translateX(2rem);\n  opacity:0.1;\n}\n50%{\n  opacity:0.5;\n}\n100%{\n  transform:translateX(-0.5rem);\n  opacity:1;\n}\n"]))),a$=By($Z||($Z=c(["\n0%{\n  transform:translateX(0rem);\n  opacity:0.1;\n}\n50%{\n  opacity:0.5;\n}\n100%{\n  transform:translateX(-2.5rem);\n  opacity:1;\n}\n"]))),s$=By(e$||(e$=c(["\n0%{\n  transform:translateX(-2.5rem);\n  opacity:0.1;\n}\n50%{\n  opacity:0.5;\n}\n100%{\n  transform:translateX(0.5rem);\n  opacity:1;\n}\n"]))),u$=ky.span(t$||(t$=c(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  background-color: ",";\n  width: 6.5rem;\n  height: 3rem;\n  border-radius: 3rem;\n  margin-left: 2rem;\n\n  #toggler {\n    display: flex;\n  }\n  #Sun {\n    color: ",";\n    animation: "," 1s ease-in-out;\n    transform: translateX(2.5rem);\n    font-size: 2rem;\n  }\n  #Moon {\n    color: yellow;\n    animation: "," 1s ease-in-out;\n    transform: translateX(-0.5rem);\n    font-size: 2rem;\n  }\n  #circle {\n    width: 2rem;\n    height: 2rem;\n    /* margin-top: calc(0.625 / 2rem); */\n    margin-top: 0.3125rem;\n    /* margin-bottom: calc(0.625 / 2rem); */\n\n    background-color: white;\n    border-radius: 50%;\n    animation: 1s ease-in-out\n      ",";\n    transform: ",";\n  }\n"])),(function(e){return"dark"===e.mode?e.theme.colors.deepDarkBackgroundColor:e.theme.colors.pointColor}),(function(e){return e.theme.colors.orange500}),i$,o$,(function(e){return"dark"===e.mode?s$:a$}),(function(e){return"dark"===e.mode?"translateX(0.5rem)":"translateX(-2.5rem)"}));function c$(){var e=bb(),t=Eb(tx);return i.createElement(u$,{mode:t,onClick:function(){e("dark"===t?$w():Zw())}},"dark"===t?i.createElement("div",{id:"toggler"},i.createElement("span",{id:"Moon"},""),i.createElement("div",{id:"circle"})):i.createElement("div",{id:"toggler"},i.createElement("span",{id:"Sun"},""),i.createElement("div",{id:"circle"})))}var l$=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=gy.apply(void 0,[e].concat(n)),a="sc-global-"+xy(JSON.stringify(o)),s=new Ly(o,a);function u(e){var t=oy(),n=ay(),r=(0,i.useContext)(My),o=(0,i.useRef)(t.allocateGSInstance(a)).current;return(0,i.useLayoutEffect)((function(){return c(o,e,t,r,n),function(){return s.removeStyles(o,t)}}),[o,e,t,r,n]),null}function c(e,t,n,r,i){if(s.isStatic)s.renderStyles(e,Ev,n,i);else{var o=dv({},t,{theme:vy(t,r,u.defaultProps)});s.renderStyles(e,o,n,i)}}return i.memo(u)}(n$||(n$=c(["\n*, *::before, *::after{\n  box-sizing:border-box;\n  list-style: none;\n  margin:0;\n  padding:0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n}\nbody{\n  background-color:",";\n\n      .MuiPaper-root{\n        background-color:black;\n      }\n}\n@media screen and (min-width: 1642px) {\n#DuckIcon{\n  margin-left:80%;\n}\n  }\n@media screen and (max-width:"," ) {\n#DuckIcon{\n  margin:0;\n \n} \n}\n"])),(function(e){return"dark"===e.mode?e.theme.colors.darkBackgroundColor:e.theme.colors.lightBackgroundColor}),(function(e){return e.theme.deviceSizes.mobileL})),h$=ky.div(r$||(r$=c(["\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  top: 20%;\n  @media screen and (min-width: ",") {\n    top: 155px;\n    left: 640px;\n  }\n  @media screen and (max-width: ",") {\n    top: 155px;\n    left: 640px;\n  }\n  @media screen and (max-width: ",") {\n    top: 125px;\n    left: 140px;\n  }\n  @media screen and (max-width: ",") {\n    top: 35px;\n    left: 70%;\n  }\n  @media screen and (max-width: ",") {\n    top: 35px;\n    left: 250px;\n    transform: scale(0.9);\n  }\n  @media screen and (max-width: ",") {\n    top: 35px;\n    left: 160px;\n    transform: scale(0.8);\n  }\n  @media screen and (max-width: ",") {\n    top: 35px;\n    left: 160px;\n    transform: scale(0.7);\n  }\n"])),(function(e){return e.theme.deviceSizes.fourK}),(function(e){return e.theme.deviceSizes.fourK}),(function(e){return e.theme.deviceSizes.laptopL}),(function(e){return e.theme.deviceSizes.tabletL}),(function(e){return e.theme.deviceSizes.mobileL}),(function(e){return e.theme.deviceSizes.mobileM}),(function(e){return e.theme.deviceSizes.mobileS}));const d$=function(){var e=Eb(ex),t=u((0,i.useState)(!1),2),n=(t[0],t[1]),r=u((0,i.useState)(!1),2),o=r[0],a=r[1],s=bb(),c=Eb(tx);return(0,i.useEffect)((function(){rv.onAuthStateChanged((function(e){e?(n(!0),s(Yw())):(n(!1),s(Qw()))}))}),[]),i.createElement(Cy,{theme:YZ},i.createElement(l$,{mode:c}),i.createElement("span",null,e&&i.createElement("div",null,i.createElement("div",{id:"DuckIcon"},i.createElement($,null,i.createElement(oe,{to:"/",replace:!0},i.createElement(mL,null)))),i.createElement(h$,null,i.createElement(zZ,{onClick:function(){return a(!o)},children:i.createElement(lZ,null)}),i.createElement("div",{id:"ModeContainer"},e&&i.createElement(c$,null))))),i.createElement(nZ,null))},f$=function(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e,n=t.thunk,r=void 0===n||n,i=(t.immutableCheck,t.serializableCheck,new jw);return r&&(function(e){return"boolean"==typeof e}(r)?i.push(Ow):i.push(Ow.withExtraArgument(r.extraArgument))),i}(e)},r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,u=r.devTools,c=void 0===u||u,l=r.preloadedState,h=void 0===l?void 0:l,d=r.enhancers,f=void 0===d?void 0:d;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Mw.INIT}))throw new Error(Aw(12));if(void 0===n(void 0,{type:Mw.PROBE_UNKNOWN_ACTION()}))throw new Error(Aw(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],c=n[u],l=e[u],h=c(l,t);if(void 0===h)throw t&&t.type,new Error(Aw(14));i[u]=h,r=r||h!==l}return(r=r||a.length!==Object.keys(e).length)?i:e}}(o)}var p=Pw.apply(void 0,"function"==typeof s?s(n):s),m=Rw;c&&(m=Vw(Nw({trace:!1},"object"==typeof c&&c)));var g=[p];return Array.isArray(f)?g=[p].concat(f):"function"==typeof f&&(g=f(g)),Iw(t,h,m.apply(void 0,g))}({reducer:{user:nx,image:SY,edit:IY}});o.render(i.createElement(pb,{store:f$},i.createElement(d$,null)),document.querySelector("#root"))},296:e=>{function t(e,t,n){var r,i,o,a,s;function u(){var c=Date.now()-a;c<t&&c>=0?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(s=e.apply(o,i),o=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}t.debounce=t,e.exports=t},63:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},679:(e,t,n)=>{"use strict";var r=n(864),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),m=u(n),g=0;g<a.length;++g){var v=a[g];if(!(o[v]||r&&r[v]||m&&m[v]||s&&s[v])){var y=d(n,v);try{c(t,v,y)}catch(e){}}}}return t}},914:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nouns=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],t.adjectives=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],t.firstAdjSuffixes=["","","","",""]},570:(e,t,n)=>{"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(914);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(e){return e[Math.floor(Math.random()*e.length)]},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delimiter,r=void 0===n?"-":n,a=t.customNouns,s=t.customAdjectives,u=t.adjSuffix;o(this,e),this.adjSuffix=u,this.nouns=a||i.nouns,this.adjectives=s||i.adjectives,this.delimiter=r,Object.preventExtensions(this)}return r(e,[{key:"generatePhrase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.array,n=void 0!==t&&t,r=[a(this.adjectives)+(this.adjSuffix||a(i.firstAdjSuffixes)),a(this.adjectives)+"",a(this.nouns)];return n?r:r.join(this.delimiter)}},{key:"getNoun",value:function(){return a(this.nouns)}},{key:"getAdjective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a(this.adjectives)+e}},{key:"set",value:function(e){var t=this;Object.entries(e).forEach((function(e){var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2),r=n[0],i=n[1];t[r]=i}))}}]),e}();e.exports=s},284:(e,t,n)=>{e.exports=n(570)},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var a,s,u=i(e),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))n.call(a,l)&&(u[l]=a[l]);if(t){s=t(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u}},703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},697:(e,t,n)=>{e.exports=n(703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},921:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case u:return e;default:return t}}case i:return t}}}function _(e){return x(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=a,t.Suspense=f,t.isAsyncMode=function(e){return _(e)||x(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===s||e===a||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=x},864:(e,t,n)=>{"use strict";e.exports=n(921)},585:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},658:(e,t,n)=>{var r=n(585);e.exports=function e(t,n,i){return r(n)||(i=n||i,n=[]),i=i||{},t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(t,n):r(t)?function(t,n,r){for(var i=[],o=0;o<t.length;o++)i.push(e(t[o],n,r).source);return l(new RegExp("(?:"+i.join("|")+")",h(r)),n)}(t,n,i):function(e,t,n){return d(o(e,n),t,n)}(t,n,i)},e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(s+=e.slice(a,f),a=f+h.length,d)s+=d[1];else{var p=e[a],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],w=n[7];s&&(r.push(s),s="");var x=null!=m&&null!=p&&p!==m,_="+"===b||"*"===b,E="?"===b||"*"===b,A=n[2]||l,S=v||y;r.push({name:g||o++,prefix:m||"",delimiter:A,optional:E,repeat:_,partial:x,asterisk:!!w,pattern:S?c(S):w?".*":"[^"+u(A)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",s=t||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!=typeof l){var h,d=s[l.name];if(null==d){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=u(d[f]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(d),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)a+=u(c);else{var d=u(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+d+f+")*"),a+=f=c.optional?c.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=u(n.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",l(new RegExp("^"+a,h(n)),t)}},666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function g(){}function v(){}function y(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(I([])));x&&x!==n&&r.call(x,o)&&(b=x);var _=y.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return v.prototype=_.constructor=y,y.constructor=v,v.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},E(A.prototype),A.prototype[a]=function(){return this},e.AsyncIterator=A,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new A(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(_),u(_,s,"Generator"),_[o]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:I(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},53:(e,t)=>{"use strict";var n,r,i,o,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,c=function(){if(null!==s)try{var e=t.unstable_now();s(!0,e),s=null}catch(e){throw setTimeout(c,0),e}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(c,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},o=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)t.unstable_now=function(){return h.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var v=!1,y=null,b=-1,w=5,x=0;o=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,E=_.port2;_.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();x=e+w;try{y(!0,e)?E.postMessage(null):(v=!1,y=null)}catch(e){throw E.postMessage(null),e}}else v=!1},n=function(e){y=e,v||(v=!0,E.postMessage(null))},r=function(e,n){b=f((function(){e(t.unstable_now())}),n)},i=function(){p(b),b=-1}}function A(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<M(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>M(a,n))void 0!==u&&0>M(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>M(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function M(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],I=[],R=1,P=null,L=3,B=!1,k=!1,D=!1;function O(e){for(var t=S(I);null!==t;){if(null===t.callback)T(I);else{if(!(t.startTime<=e))break;T(I),t.sortIndex=t.expirationTime,A(C,t)}t=S(I)}}function N(e){if(D=!1,O(e),!k)if(null!==S(C))k=!0,n(F);else{var t=S(I);null!==t&&r(N,t.startTime-e)}}function F(e,n){k=!1,D&&(D=!1,i()),B=!0;var a=L;try{for(O(n),P=S(C);null!==P&&(!(P.expirationTime>n)||e&&!o());){var s=P.callback;if(null!==s){P.callback=null,L=P.priorityLevel;var u=s(P.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?P.callback=u:P===S(C)&&T(C),O(n)}else T(C);P=S(C)}if(null!==P)var c=!0;else{var l=S(I);null!==l&&r(N,l.startTime-n),c=!1}return c}finally{P=null,L=a,B=!1}}function U(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var G=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){k||B||(k=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return L},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var n=L;L=t;try{return e()}finally{L=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=G,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=L;L=e;try{return t()}finally{L=n}},t.unstable_scheduleCallback=function(e,o,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:U(e)}else a=U(e),u=s;return e={id:R++,callback:o,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,A(I,e),null===S(C)&&e===S(I)&&(D?i():D=!0,r(N,u-s))):(e.sortIndex=a,A(C,e),k||B||(k=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();O(e);var n=S(C);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<P.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=L;return function(){var n=L;L=t;try{return e.apply(this,arguments)}finally{L=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},774:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<o.length;u++){var c=o[u];if(!s(c))return!1;var l=e[c],h=t[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0}},877:(e,t,n)=>{var r=n(261),i=n(171),o=i;o.v1=r,o.v4=i,e.exports=o},327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},261:(e,t,n)=>{var r,i,o=n(217),a=n(327),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],h=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var f=o();null==h&&(h=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:u+1,g=p-s+(m-u)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||p>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=m,i=d;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[c++]=v>>>24&255,l[c++]=v>>>16&255,l[c++]=v>>>8&255,l[c++]=255&v;var y=p/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=d>>>8|128,l[c++]=255&d;for(var b=0;b<6;++b)l[c+b]=h[b];return t||a(l)}},171:(e,t,n)=>{var r=n(217),i=n(327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e](o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,i,o]=e[c],s=!0,u=0;u<n.length;u++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,o<a&&(a=o));s&&(e.splice(c--,1),t=i())}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,u]=n,c=0;for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(u)var l=u(r);for(t&&t(n);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[a[c]]=0;return r.O(l)},n=self.webpackChunktest_2=self.webpackChunktest_2||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[736],(()=>r(202)));i=r.O(i)})();